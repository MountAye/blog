{"pageProps":{"metadata":{"date":"2022-11-09","title":".py | Python decorator 装饰器","filename":"2022-11-09-python-decorator.md","url":"python-decorator","layout":"post","keywords":["md","py"],"excerpt":"所谓装饰器 (decorator)，就是函数前一行 @ 打头的一串字符，是 python 的一种语法糖。"},"mdAst":{"type":"root","children":[{"type":"paragraph","children":[{"type":"text","value":"最近参加了一个关于如何在 Python 项目中利用 GPU 提高运算效率的培训，里面提到了 ","position":{"start":{"line":2,"column":1,"offset":2},"end":{"line":2,"column":47,"offset":48}}},{"type":"inlineCode","value":"numba","position":{"start":{"line":2,"column":47,"offset":48},"end":{"line":2,"column":54,"offset":55}}},{"type":"text","value":" 这个加速科学计算的库，而 ","position":{"start":{"line":2,"column":54,"offset":55},"end":{"line":2,"column":68,"offset":69}}},{"type":"inlineCode","value":"numba","position":{"start":{"line":2,"column":68,"offset":69},"end":{"line":2,"column":75,"offset":76}}},{"type":"text","value":" 发挥作用的主要工具就是各种装饰器。","position":{"start":{"line":2,"column":75,"offset":76},"end":{"line":2,"column":93,"offset":94}}}],"position":{"start":{"line":2,"column":1,"offset":2},"end":{"line":2,"column":93,"offset":94}}},{"type":"paragraph","children":[{"type":"text","value":"所谓装饰器，就是读一些网上现成的 python 代码的时候会看到的，函数前一行 ","position":{"start":{"line":4,"column":1,"offset":98},"end":{"line":4,"column":41,"offset":138}}},{"type":"inlineCode","value":"@","position":{"start":{"line":4,"column":41,"offset":138},"end":{"line":4,"column":44,"offset":141}}},{"type":"text","value":" 打头的一串字符，一般是一个名字，偶尔会附带有参数：","position":{"start":{"line":4,"column":44,"offset":141},"end":{"line":4,"column":70,"offset":167}}}],"position":{"start":{"line":4,"column":1,"offset":98},"end":{"line":4,"column":70,"offset":167}}},{"type":"code","lang":"python","meta":null,"value":"@decorator\r\ndef myfunction():\r\n    # do something...\r\n    return results","position":{"start":{"line":6,"column":1,"offset":171},"end":{"line":11,"column":4,"offset":259}}},{"type":"paragraph","children":[{"type":"text","value":"它的实际作用相当于：","position":{"start":{"line":13,"column":1,"offset":263},"end":{"line":13,"column":11,"offset":273}}}],"position":{"start":{"line":13,"column":1,"offset":263},"end":{"line":13,"column":11,"offset":273}}},{"type":"code","lang":"python","meta":null,"value":"def myfunction():\r\n    # do something...\r\n    return None\r\n\r\nmyfunction = decorator(myfunction)","position":{"start":{"line":15,"column":1,"offset":277},"end":{"line":21,"column":4,"offset":388}}},{"type":"paragraph","children":[{"type":"text","value":"Python 是一种","position":{"start":{"line":23,"column":1,"offset":392},"end":{"line":23,"column":11,"offset":402}}},{"type":"link","title":null,"url":"https://program-think.blogspot.com/2012/02/why-choose-python-4-fp.html","children":[{"type":"text","value":"函数式编程语言","position":{"start":{"line":23,"column":12,"offset":403},"end":{"line":23,"column":19,"offset":410}}}],"position":{"start":{"line":23,"column":11,"offset":402},"end":{"line":23,"column":92,"offset":483}}},{"type":"text","value":"，函数和各种类型的变量一样，在 Python 都是一种对象，所以可以把函数赋值给一个变量，可以在函数里定义另一个函数，可以把函数作为参数传递给另一个函数，可以把函数名作为另一个函数的返回值。","position":{"start":{"line":23,"column":92,"offset":483},"end":{"line":23,"column":187,"offset":578}}}],"position":{"start":{"line":23,"column":1,"offset":392},"end":{"line":23,"column":187,"offset":578}}},{"type":"paragraph","children":[{"type":"inlineCode","value":"myfunction = decorator(myfunction)","position":{"start":{"line":25,"column":1,"offset":582},"end":{"line":25,"column":37,"offset":618}}},{"type":"text","value":" 就是装饰器的定义，是 Python 的一个","position":{"start":{"line":25,"column":37,"offset":618},"end":{"line":25,"column":59,"offset":640}}},{"type":"link","title":null,"url":"https://zh.m.wikipedia.org/zh-hans/%E8%AF%AD%E6%B3%95%E7%B3%96","children":[{"type":"text","value":"语法糖","position":{"start":{"line":25,"column":60,"offset":641},"end":{"line":25,"column":63,"offset":644}}}],"position":{"start":{"line":25,"column":59,"offset":640},"end":{"line":25,"column":128,"offset":709}}},{"type":"text","value":"。也就是说装饰器本身也是一个函数，我们的函数被装饰器装饰之后，函数名称不变，在完整实现函数原有功能的同时，额外执行装饰器中的命令。","position":{"start":{"line":25,"column":128,"offset":709},"end":{"line":25,"column":193,"offset":774}}}],"position":{"start":{"line":25,"column":1,"offset":582},"end":{"line":25,"column":193,"offset":774}}},{"type":"heading","depth":3,"children":[{"type":"text","value":"装饰器是如何做到的","position":{"start":{"line":27,"column":5,"offset":782},"end":{"line":27,"column":14,"offset":791}}}],"position":{"start":{"line":27,"column":1,"offset":778},"end":{"line":27,"column":14,"offset":791}}},{"type":"paragraph","children":[{"type":"text","value":"要想自己写一个装饰器的话，需要了解一下装饰器的实现原理。一个最简单的装饰器可以这么写：","position":{"start":{"line":29,"column":1,"offset":795},"end":{"line":29,"column":44,"offset":838}}}],"position":{"start":{"line":29,"column":1,"offset":795},"end":{"line":29,"column":44,"offset":838}}},{"type":"code","lang":"python","meta":null,"value":"def decorator(func):\r\n    def inner():\r\n        # do something\r\n        func()\r\n        # do some more\r\n        return None\r\n    return inner","position":{"start":{"line":31,"column":1,"offset":842},"end":{"line":39,"column":4,"offset":999}}},{"type":"paragraph","children":[{"type":"text","value":"也就是在装饰器内部再定义一个函数，这个内部函数的函数体执行被装饰的函数，然后外层装饰器把内层函数名当作返回值。","position":{"start":{"line":41,"column":1,"offset":1003},"end":{"line":41,"column":56,"offset":1058}}}],"position":{"start":{"line":41,"column":1,"offset":1003},"end":{"line":41,"column":56,"offset":1058}}},{"type":"heading","depth":3,"children":[{"type":"text","value":"如果一个函数需要多个装饰器","position":{"start":{"line":43,"column":5,"offset":1066},"end":{"line":43,"column":18,"offset":1079}}}],"position":{"start":{"line":43,"column":1,"offset":1062},"end":{"line":43,"column":18,"offset":1079}}},{"type":"paragraph","children":[{"type":"text","value":"把前面装饰器的定义套在多个装饰器的情况里：","position":{"start":{"line":45,"column":1,"offset":1083},"end":{"line":45,"column":22,"offset":1104}}}],"position":{"start":{"line":45,"column":1,"offset":1083},"end":{"line":45,"column":22,"offset":1104}}},{"type":"code","lang":"python","meta":null,"value":"@decorator1\r\n@decorator2\r\ndef myfunction():\r\n    return None\r\n\r\nmyfunction = decorator1(decorator2(myfunction))","position":{"start":{"line":47,"column":1,"offset":1108},"end":{"line":54,"column":4,"offset":1235}}},{"type":"heading","depth":3,"children":[{"type":"text","value":"如果被装饰的函数有传入参数","position":{"start":{"line":56,"column":5,"offset":1243},"end":{"line":56,"column":18,"offset":1256}}}],"position":{"start":{"line":56,"column":1,"offset":1239},"end":{"line":56,"column":18,"offset":1256}}},{"type":"paragraph","children":[{"type":"text","value":"装饰器不知道自己要装饰的函数长什么样，也就不知道函数接受多少个参数，其中有几个是位置参数，几个是关键词参数。所以需要用单星号打包/解包位置参数，双星号打包/解包关键词参数。","position":{"start":{"line":58,"column":1,"offset":1260},"end":{"line":58,"column":87,"offset":1346}}},{"type":"inlineCode","value":"args","position":{"start":{"line":58,"column":87,"offset":1346},"end":{"line":58,"column":93,"offset":1352}}},{"type":"text","value":" 和 ","position":{"start":{"line":58,"column":93,"offset":1352},"end":{"line":58,"column":96,"offset":1355}}},{"type":"inlineCode","value":"kwargs","position":{"start":{"line":58,"column":96,"offset":1355},"end":{"line":58,"column":104,"offset":1363}}},{"type":"text","value":" 是变量名的代词，可以换成其他自己喜欢的名字。","position":{"start":{"line":58,"column":104,"offset":1363},"end":{"line":58,"column":127,"offset":1386}}}],"position":{"start":{"line":58,"column":1,"offset":1260},"end":{"line":58,"column":127,"offset":1386}}},{"type":"code","lang":"python","meta":null,"value":"def decorator(func):\r\n    def inner(*args,**kwargs):\r\n        # do something\r\n        func(*args,**kwargs)\r\n        # something else\r\n        return None\r\n    return inner\r\n\r\n@decorator\r\ndef myfunction(x,y,mode=\"normal\",strict=True):\r\n    # do something...\r\n    return None","position":{"start":{"line":60,"column":1,"offset":1390},"end":{"line":73,"column":4,"offset":1679}}},{"type":"heading","depth":3,"children":[{"type":"text","value":"如果被装饰的函数有返回值","position":{"start":{"line":75,"column":5,"offset":1687},"end":{"line":75,"column":17,"offset":1699}}}],"position":{"start":{"line":75,"column":1,"offset":1683},"end":{"line":75,"column":17,"offset":1699}}},{"type":"paragraph","children":[{"type":"text","value":"则装饰器的内层函数需要把被装饰的函数的返回值返回出来：","position":{"start":{"line":77,"column":1,"offset":1703},"end":{"line":77,"column":28,"offset":1730}}}],"position":{"start":{"line":77,"column":1,"offset":1703},"end":{"line":77,"column":28,"offset":1730}}},{"type":"code","lang":"python","meta":null,"value":"def decorator(func):\r\n    def inner(*args,**kwargs):\r\n        # do something\r\n        func(*args,**kwargs)\r\n        # something else\r\n        return func(*args,**kwargs)\r\n    return inner\r\n\r\n@decorator\r\ndef myfunction(x,y,mode=\"normal\",strict=True):\r\n    # do something...\r\n    return results","position":{"start":{"line":79,"column":1,"offset":1734},"end":{"line":92,"column":4,"offset":2042}}},{"type":"heading","depth":3,"children":[{"type":"text","value":"如果想让装饰器本身接受参数","position":{"start":{"line":94,"column":5,"offset":2050},"end":{"line":94,"column":18,"offset":2063}}}],"position":{"start":{"line":94,"column":1,"offset":2046},"end":{"line":94,"column":18,"offset":2063}}},{"type":"paragraph","children":[{"type":"text","value":"也就是想达到下面的效果：","position":{"start":{"line":96,"column":1,"offset":2067},"end":{"line":96,"column":13,"offset":2079}}}],"position":{"start":{"line":96,"column":1,"offset":2067},"end":{"line":96,"column":13,"offset":2079}}},{"type":"code","lang":"python","meta":null,"value":"@param_decorator(param=\"neat\")\r\ndef myfunction(x,y,mode=\"normal\",strict=True):\r\n    # do something...\r\n    return results","position":{"start":{"line":98,"column":1,"offset":2083},"end":{"line":103,"column":4,"offset":2220}}},{"type":"paragraph","children":[{"type":"text","value":"也就是让 ","position":{"start":{"line":105,"column":1,"offset":2224},"end":{"line":105,"column":6,"offset":2229}}},{"type":"inlineCode","value":"param_decorator(param=\"neat\")","position":{"start":{"line":105,"column":6,"offset":2229},"end":{"line":105,"column":37,"offset":2260}}},{"type":"text","value":" 返回一个装饰器函数，也就是在之前的装饰器外面再加一层：","position":{"start":{"line":105,"column":37,"offset":2260},"end":{"line":105,"column":65,"offset":2288}}}],"position":{"start":{"line":105,"column":1,"offset":2224},"end":{"line":105,"column":65,"offset":2288}}},{"type":"code","lang":"python","meta":null,"value":"def param_decorator(param):\r\n    def decorator(func):\r\n        def inner(*args,**kwargs):\r\n            if param==\"neat\":\r\n                print(\"neat\")\r\n                # ...\r\n            else:\r\n                print(\"not neat\")\r\n                # ...\r\n            func(*args,**kwargs)\r\n            return func(*args,**kwargs)\r\n        return inner\r\n    return previous_decorator","position":{"start":{"line":107,"column":1,"offset":2292},"end":{"line":121,"column":4,"offset":2687}}},{"type":"heading","depth":3,"children":[{"type":"text","value":"如果想让装饰器既可以接受参数，也可以不接受参数～","position":{"start":{"line":123,"column":5,"offset":2695},"end":{"line":123,"column":29,"offset":2719}}}],"position":{"start":{"line":123,"column":1,"offset":2691},"end":{"line":123,"column":29,"offset":2719}}},{"type":"paragraph","children":[{"type":"text","value":"实在是有点过于高级了，直接说答案：","position":{"start":{"line":125,"column":1,"offset":2723},"end":{"line":125,"column":18,"offset":2740}}}],"position":{"start":{"line":125,"column":1,"offset":2723},"end":{"line":125,"column":18,"offset":2740}}},{"type":"code","lang":"python","meta":null,"value":"def flex_decorator(_func=None,*,kw1=\"val1\",kw2=\"val2\"):\r\n    def decorator(func):\r\n        def inner(*args,**kwargs):\r\n            print(kw1,kw2)\r\n            # do something\r\n            func(*args,**kwargs)\r\n            # something else\r\n            return func(*args,**kwargs)\r\n        return inner\r\n    if _func is None:\r\n        return decorator\r\n    else:\r\n        return decorator(_func)","position":{"start":{"line":127,"column":1,"offset":2744},"end":{"line":141,"column":4,"offset":3153}}},{"type":"paragraph","children":[{"type":"text","value":"根据 ","position":{"start":{"line":143,"column":1,"offset":3157},"end":{"line":143,"column":4,"offset":3160}}},{"type":"link","title":null,"url":"https://peps.python.org/pep-3102/","children":[{"type":"text","value":"https://peps.python.org/pep-3102/","position":{"start":{"line":143,"column":5,"offset":3161},"end":{"line":143,"column":38,"offset":3194}}}],"position":{"start":{"line":143,"column":4,"offset":3160},"end":{"line":143,"column":74,"offset":3230}}},{"type":"text","value":"，","position":{"start":{"line":143,"column":74,"offset":3230},"end":{"line":143,"column":75,"offset":3231}}},{"type":"inlineCode","value":"*","position":{"start":{"line":143,"column":75,"offset":3231},"end":{"line":143,"column":78,"offset":3234}}},{"type":"text","value":"作为一个单独的函数参数，表示后面所有的参数都是关键词参数，用来限定星号前面位置参数的数量。","position":{"start":{"line":143,"column":78,"offset":3234},"end":{"line":143,"column":123,"offset":3279}}}],"position":{"start":{"line":143,"column":1,"offset":3157},"end":{"line":143,"column":123,"offset":3279}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"当 ","position":{"start":{"line":145,"column":3,"offset":3285},"end":{"line":145,"column":5,"offset":3287}}},{"type":"inlineCode","value":"@flex_decorator","position":{"start":{"line":145,"column":5,"offset":3287},"end":{"line":145,"column":22,"offset":3304}}},{"type":"text","value":" 不加参数使用的时候:","position":{"start":{"line":145,"column":22,"offset":3304},"end":{"line":145,"column":33,"offset":3315}}}],"position":{"start":{"line":145,"column":3,"offset":3285},"end":{"line":145,"column":33,"offset":3315}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"根据定义 ","position":{"start":{"line":146,"column":7,"offset":3323},"end":{"line":146,"column":12,"offset":3328}}},{"type":"inlineCode","value":"myfunction = flex_decorator(myfunction)","position":{"start":{"line":146,"column":12,"offset":3328},"end":{"line":146,"column":53,"offset":3369}}}],"position":{"start":{"line":146,"column":7,"offset":3323},"end":{"line":146,"column":53,"offset":3369}}}],"position":{"start":{"line":146,"column":5,"offset":3321},"end":{"line":146,"column":53,"offset":3369}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"_func=myfunction","position":{"start":{"line":147,"column":7,"offset":3377},"end":{"line":147,"column":25,"offset":3395}}}],"position":{"start":{"line":147,"column":7,"offset":3377},"end":{"line":147,"column":25,"offset":3395}}}],"position":{"start":{"line":147,"column":5,"offset":3375},"end":{"line":147,"column":25,"offset":3395}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"此时 ","position":{"start":{"line":148,"column":7,"offset":3403},"end":{"line":148,"column":10,"offset":3406}}},{"type":"inlineCode","value":"else","position":{"start":{"line":148,"column":10,"offset":3406},"end":{"line":148,"column":16,"offset":3412}}},{"type":"text","value":" 生效，","position":{"start":{"line":148,"column":16,"offset":3412},"end":{"line":148,"column":20,"offset":3416}}},{"type":"inlineCode","value":"myfunction = decorator(myfunction)","position":{"start":{"line":148,"column":20,"offset":3416},"end":{"line":148,"column":56,"offset":3452}}}],"position":{"start":{"line":148,"column":7,"offset":3403},"end":{"line":148,"column":56,"offset":3452}}}],"position":{"start":{"line":148,"column":5,"offset":3401},"end":{"line":148,"column":56,"offset":3452}}}],"position":{"start":{"line":146,"column":5,"offset":3321},"end":{"line":148,"column":56,"offset":3452}}}],"position":{"start":{"line":145,"column":1,"offset":3283},"end":{"line":148,"column":56,"offset":3452}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"当 ","position":{"start":{"line":149,"column":3,"offset":3456},"end":{"line":149,"column":5,"offset":3458}}},{"type":"inlineCode","value":"@flex_decorator(kw1=\"val1\",kw2=\"val2\")","position":{"start":{"line":149,"column":5,"offset":3458},"end":{"line":149,"column":45,"offset":3498}}},{"type":"text","value":" 加上参数使用的时候:","position":{"start":{"line":149,"column":45,"offset":3498},"end":{"line":149,"column":56,"offset":3509}}}],"position":{"start":{"line":149,"column":3,"offset":3456},"end":{"line":149,"column":56,"offset":3509}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"根据定义 ","position":{"start":{"line":150,"column":7,"offset":3517},"end":{"line":150,"column":12,"offset":3522}}},{"type":"inlineCode","value":"myfunction = flex_decorator(kw1=\"val1\",kw2=\"val2\")(myfunction)","position":{"start":{"line":150,"column":12,"offset":3522},"end":{"line":150,"column":76,"offset":3586}}}],"position":{"start":{"line":150,"column":7,"offset":3517},"end":{"line":150,"column":76,"offset":3586}}}],"position":{"start":{"line":150,"column":5,"offset":3515},"end":{"line":150,"column":76,"offset":3586}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"_func=None","position":{"start":{"line":151,"column":7,"offset":3594},"end":{"line":151,"column":19,"offset":3606}}}],"position":{"start":{"line":151,"column":7,"offset":3594},"end":{"line":151,"column":19,"offset":3606}}}],"position":{"start":{"line":151,"column":5,"offset":3592},"end":{"line":151,"column":19,"offset":3606}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"此时 ","position":{"start":{"line":152,"column":7,"offset":3614},"end":{"line":152,"column":10,"offset":3617}}},{"type":"inlineCode","value":"if","position":{"start":{"line":152,"column":10,"offset":3617},"end":{"line":152,"column":14,"offset":3621}}},{"type":"text","value":" 生效，","position":{"start":{"line":152,"column":14,"offset":3621},"end":{"line":152,"column":18,"offset":3625}}},{"type":"inlineCode","value":"myfunction = decorator(myfunction)","position":{"start":{"line":152,"column":18,"offset":3625},"end":{"line":152,"column":54,"offset":3661}}}],"position":{"start":{"line":152,"column":7,"offset":3614},"end":{"line":152,"column":54,"offset":3661}}}],"position":{"start":{"line":152,"column":5,"offset":3612},"end":{"line":152,"column":54,"offset":3661}}}],"position":{"start":{"line":150,"column":5,"offset":3515},"end":{"line":152,"column":54,"offset":3661}}}],"position":{"start":{"line":149,"column":1,"offset":3454},"end":{"line":152,"column":54,"offset":3661}}}],"position":{"start":{"line":145,"column":1,"offset":3283},"end":{"line":152,"column":54,"offset":3661}}},{"type":"paragraph","children":[{"type":"text","value":"——","position":{"start":{"line":154,"column":1,"offset":3665},"end":{"line":154,"column":3,"offset":3667}}},{"type":"strong","children":[{"type":"text","value":"接受的参数必须是关键词参数","position":{"start":{"line":154,"column":5,"offset":3669},"end":{"line":154,"column":18,"offset":3682}}}],"position":{"start":{"line":154,"column":3,"offset":3667},"end":{"line":154,"column":20,"offset":3684}}},{"type":"text","value":"，否则和被装饰的函数名无法区分。","position":{"start":{"line":154,"column":20,"offset":3684},"end":{"line":154,"column":36,"offset":3700}}}],"position":{"start":{"line":154,"column":1,"offset":3665},"end":{"line":154,"column":36,"offset":3700}}},{"type":"heading","depth":3,"children":[{"type":"inlineCode","value":"@functools.wraps","position":{"start":{"line":156,"column":5,"offset":3708},"end":{"line":156,"column":23,"offset":3726}}},{"type":"text","value":"：刻章、办证","position":{"start":{"line":156,"column":23,"offset":3726},"end":{"line":156,"column":29,"offset":3732}}}],"position":{"start":{"line":156,"column":1,"offset":3704},"end":{"line":156,"column":29,"offset":3732}}},{"type":"paragraph","children":[{"type":"text","value":"以上各节基本完成了常用场景下装饰器的功能。","position":{"start":{"line":158,"column":1,"offset":3736},"end":{"line":158,"column":22,"offset":3757}}}],"position":{"start":{"line":158,"column":1,"offset":3736},"end":{"line":158,"column":22,"offset":3757}}},{"type":"paragraph","children":[{"type":"text","value":"但是，Python 作为一种动态语言，一大特征就是可以在运行时进行","position":{"start":{"line":160,"column":1,"offset":3761},"end":{"line":160,"column":34,"offset":3794}}},{"type":"link","title":null,"url":"https://en.wikipedia.org/wiki/Type_introspection","children":[{"type":"text","value":"类型内省","position":{"start":{"line":160,"column":35,"offset":3795},"end":{"line":160,"column":39,"offset":3799}}}],"position":{"start":{"line":160,"column":34,"offset":3794},"end":{"line":160,"column":90,"offset":3850}}},{"type":"text","value":"。而按照我们上面的写法，被装饰之后的函数，Python 认为它不再是原来的函数，而是装饰器里面定义的那个内部函数，这样可能会出现意想不到的问题。","position":{"start":{"line":160,"column":90,"offset":3850},"end":{"line":160,"column":162,"offset":3922}}}],"position":{"start":{"line":160,"column":1,"offset":3761},"end":{"line":160,"column":162,"offset":3922}}},{"type":"paragraph","children":[{"type":"text","value":"解决方法是使用一个专门的装饰器根装饰器定义的内部函数办个假身份：","position":{"start":{"line":162,"column":1,"offset":3926},"end":{"line":162,"column":33,"offset":3958}}}],"position":{"start":{"line":162,"column":1,"offset":3926},"end":{"line":162,"column":33,"offset":3958}}},{"type":"code","lang":"python","meta":null,"value":"import functools\r\n\r\ndef decorator(func):\r\n    @functools.wraps(func)\r\n    def inner(*args,**kwargs):\r\n        # do something\r\n        func(*args,**kwargs)\r\n        # something else\r\n        return func(*args,**kwargs)\r\n    return inner","position":{"start":{"line":164,"column":1,"offset":3962},"end":{"line":175,"column":4,"offset":4213}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":176,"column":1,"offset":4215}}},"htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"最近参加了一个关于如何在 Python 项目中利用 GPU 提高运算效率的培训，里面提到了 ","position":{"start":{"line":2,"column":1,"offset":2},"end":{"line":2,"column":47,"offset":48}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"numba","position":{"start":{"line":2,"column":47,"offset":48},"end":{"line":2,"column":54,"offset":55}}}],"position":{"start":{"line":2,"column":47,"offset":48},"end":{"line":2,"column":54,"offset":55}}},{"type":"text","value":" 这个加速科学计算的库，而 ","position":{"start":{"line":2,"column":54,"offset":55},"end":{"line":2,"column":68,"offset":69}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"numba","position":{"start":{"line":2,"column":68,"offset":69},"end":{"line":2,"column":75,"offset":76}}}],"position":{"start":{"line":2,"column":68,"offset":69},"end":{"line":2,"column":75,"offset":76}}},{"type":"text","value":" 发挥作用的主要工具就是各种装饰器。","position":{"start":{"line":2,"column":75,"offset":76},"end":{"line":2,"column":93,"offset":94}}}],"position":{"start":{"line":2,"column":1,"offset":2},"end":{"line":2,"column":93,"offset":94}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"所谓装饰器，就是读一些网上现成的 python 代码的时候会看到的，函数前一行 ","position":{"start":{"line":4,"column":1,"offset":98},"end":{"line":4,"column":41,"offset":138}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"@","position":{"start":{"line":4,"column":41,"offset":138},"end":{"line":4,"column":44,"offset":141}}}],"position":{"start":{"line":4,"column":41,"offset":138},"end":{"line":4,"column":44,"offset":141}}},{"type":"text","value":" 打头的一串字符，一般是一个名字，偶尔会附带有参数：","position":{"start":{"line":4,"column":44,"offset":141},"end":{"line":4,"column":70,"offset":167}}}],"position":{"start":{"line":4,"column":1,"offset":98},"end":{"line":4,"column":70,"offset":167}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"class":"shiki shiki-themes github-light github-dark","style":"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8","tabindex":"0"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#6F42C1;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"@decorator"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"def"}]},{"type":"element","tagName":"span","properties":{"style":"color:#6F42C1;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" myfunction"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"():"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#6A737D;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"    # do something..."}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"    return"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" results"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"它的实际作用相当于：","position":{"start":{"line":13,"column":1,"offset":263},"end":{"line":13,"column":11,"offset":273}}}],"position":{"start":{"line":13,"column":1,"offset":263},"end":{"line":13,"column":11,"offset":273}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"class":"shiki shiki-themes github-light github-dark","style":"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8","tabindex":"0"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"def"}]},{"type":"element","tagName":"span","properties":{"style":"color:#6F42C1;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" myfunction"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"():"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#6A737D;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"    # do something..."}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"    return"}]},{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" None"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"myfunction "}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" decorator(myfunction)"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Python 是一种","position":{"start":{"line":23,"column":1,"offset":392},"end":{"line":23,"column":11,"offset":402}}},{"type":"element","tagName":"a","properties":{"href":"https://program-think.blogspot.com/2012/02/why-choose-python-4-fp.html"},"children":[{"type":"text","value":"函数式编程语言","position":{"start":{"line":23,"column":12,"offset":403},"end":{"line":23,"column":19,"offset":410}}}],"position":{"start":{"line":23,"column":11,"offset":402},"end":{"line":23,"column":92,"offset":483}}},{"type":"text","value":"，函数和各种类型的变量一样，在 Python 都是一种对象，所以可以把函数赋值给一个变量，可以在函数里定义另一个函数，可以把函数作为参数传递给另一个函数，可以把函数名作为另一个函数的返回值。","position":{"start":{"line":23,"column":92,"offset":483},"end":{"line":23,"column":187,"offset":578}}}],"position":{"start":{"line":23,"column":1,"offset":392},"end":{"line":23,"column":187,"offset":578}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"myfunction = decorator(myfunction)","position":{"start":{"line":25,"column":1,"offset":582},"end":{"line":25,"column":37,"offset":618}}}],"position":{"start":{"line":25,"column":1,"offset":582},"end":{"line":25,"column":37,"offset":618}}},{"type":"text","value":" 就是装饰器的定义，是 Python 的一个","position":{"start":{"line":25,"column":37,"offset":618},"end":{"line":25,"column":59,"offset":640}}},{"type":"element","tagName":"a","properties":{"href":"https://zh.m.wikipedia.org/zh-hans/%E8%AF%AD%E6%B3%95%E7%B3%96"},"children":[{"type":"text","value":"语法糖","position":{"start":{"line":25,"column":60,"offset":641},"end":{"line":25,"column":63,"offset":644}}}],"position":{"start":{"line":25,"column":59,"offset":640},"end":{"line":25,"column":128,"offset":709}}},{"type":"text","value":"。也就是说装饰器本身也是一个函数，我们的函数被装饰器装饰之后，函数名称不变，在完整实现函数原有功能的同时，额外执行装饰器中的命令。","position":{"start":{"line":25,"column":128,"offset":709},"end":{"line":25,"column":193,"offset":774}}}],"position":{"start":{"line":25,"column":1,"offset":582},"end":{"line":25,"column":193,"offset":774}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"装饰器是如何做到的"},"children":[{"type":"element","tagName":"a","properties":{"href":"#装饰器是如何做到的"},"children":[{"type":"text","value":"装饰器是如何做到的","position":{"start":{"line":27,"column":5,"offset":782},"end":{"line":27,"column":14,"offset":791}}}]}],"position":{"start":{"line":27,"column":1,"offset":778},"end":{"line":27,"column":14,"offset":791}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"要想自己写一个装饰器的话，需要了解一下装饰器的实现原理。一个最简单的装饰器可以这么写：","position":{"start":{"line":29,"column":1,"offset":795},"end":{"line":29,"column":44,"offset":838}}}],"position":{"start":{"line":29,"column":1,"offset":795},"end":{"line":29,"column":44,"offset":838}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"class":"shiki shiki-themes github-light github-dark","style":"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8","tabindex":"0"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"def"}]},{"type":"element","tagName":"span","properties":{"style":"color:#6F42C1;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" decorator"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"(func):"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"    def"}]},{"type":"element","tagName":"span","properties":{"style":"color:#6F42C1;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" inner"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"():"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#6A737D;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"        # do something"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"        func()"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#6A737D;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"        # do some more"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"        return"}]},{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" None"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"    return"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" inner"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"也就是在装饰器内部再定义一个函数，这个内部函数的函数体执行被装饰的函数，然后外层装饰器把内层函数名当作返回值。","position":{"start":{"line":41,"column":1,"offset":1003},"end":{"line":41,"column":56,"offset":1058}}}],"position":{"start":{"line":41,"column":1,"offset":1003},"end":{"line":41,"column":56,"offset":1058}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"如果一个函数需要多个装饰器"},"children":[{"type":"element","tagName":"a","properties":{"href":"#如果一个函数需要多个装饰器"},"children":[{"type":"text","value":"如果一个函数需要多个装饰器","position":{"start":{"line":43,"column":5,"offset":1066},"end":{"line":43,"column":18,"offset":1079}}}]}],"position":{"start":{"line":43,"column":1,"offset":1062},"end":{"line":43,"column":18,"offset":1079}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"把前面装饰器的定义套在多个装饰器的情况里：","position":{"start":{"line":45,"column":1,"offset":1083},"end":{"line":45,"column":22,"offset":1104}}}],"position":{"start":{"line":45,"column":1,"offset":1083},"end":{"line":45,"column":22,"offset":1104}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"class":"shiki shiki-themes github-light github-dark","style":"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8","tabindex":"0"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#6F42C1;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"@decorator1"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#6F42C1;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"@decorator2"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"def"}]},{"type":"element","tagName":"span","properties":{"style":"color:#6F42C1;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" myfunction"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"():"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"    return"}]},{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" None"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"myfunction "}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" decorator1(decorator2(myfunction))"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"如果被装饰的函数有传入参数"},"children":[{"type":"element","tagName":"a","properties":{"href":"#如果被装饰的函数有传入参数"},"children":[{"type":"text","value":"如果被装饰的函数有传入参数","position":{"start":{"line":56,"column":5,"offset":1243},"end":{"line":56,"column":18,"offset":1256}}}]}],"position":{"start":{"line":56,"column":1,"offset":1239},"end":{"line":56,"column":18,"offset":1256}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"装饰器不知道自己要装饰的函数长什么样，也就不知道函数接受多少个参数，其中有几个是位置参数，几个是关键词参数。所以需要用单星号打包/解包位置参数，双星号打包/解包关键词参数。","position":{"start":{"line":58,"column":1,"offset":1260},"end":{"line":58,"column":87,"offset":1346}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"args","position":{"start":{"line":58,"column":87,"offset":1346},"end":{"line":58,"column":93,"offset":1352}}}],"position":{"start":{"line":58,"column":87,"offset":1346},"end":{"line":58,"column":93,"offset":1352}}},{"type":"text","value":" 和 ","position":{"start":{"line":58,"column":93,"offset":1352},"end":{"line":58,"column":96,"offset":1355}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"kwargs","position":{"start":{"line":58,"column":96,"offset":1355},"end":{"line":58,"column":104,"offset":1363}}}],"position":{"start":{"line":58,"column":96,"offset":1355},"end":{"line":58,"column":104,"offset":1363}}},{"type":"text","value":" 是变量名的代词，可以换成其他自己喜欢的名字。","position":{"start":{"line":58,"column":104,"offset":1363},"end":{"line":58,"column":127,"offset":1386}}}],"position":{"start":{"line":58,"column":1,"offset":1260},"end":{"line":58,"column":127,"offset":1386}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"class":"shiki shiki-themes github-light github-dark","style":"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8","tabindex":"0"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"def"}]},{"type":"element","tagName":"span","properties":{"style":"color:#6F42C1;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" decorator"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"(func):"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"    def"}]},{"type":"element","tagName":"span","properties":{"style":"color:#6F42C1;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" inner"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"*"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"args,"}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"**"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"kwargs):"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#6A737D;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"        # do something"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"        func("}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"*"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"args,"}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"**"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"kwargs)"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#6A737D;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"        # something else"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"        return"}]},{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" None"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"    return"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" inner"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#6F42C1;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"@decorator"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"def"}]},{"type":"element","tagName":"span","properties":{"style":"color:#6F42C1;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" myfunction"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"(x,y,mode"}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"style":"color:#032F62;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"normal\""}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":",strict"}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"True"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"):"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#6A737D;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"    # do something..."}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"    return"}]},{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" None"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"如果被装饰的函数有返回值"},"children":[{"type":"element","tagName":"a","properties":{"href":"#如果被装饰的函数有返回值"},"children":[{"type":"text","value":"如果被装饰的函数有返回值","position":{"start":{"line":75,"column":5,"offset":1687},"end":{"line":75,"column":17,"offset":1699}}}]}],"position":{"start":{"line":75,"column":1,"offset":1683},"end":{"line":75,"column":17,"offset":1699}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"则装饰器的内层函数需要把被装饰的函数的返回值返回出来：","position":{"start":{"line":77,"column":1,"offset":1703},"end":{"line":77,"column":28,"offset":1730}}}],"position":{"start":{"line":77,"column":1,"offset":1703},"end":{"line":77,"column":28,"offset":1730}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"class":"shiki shiki-themes github-light github-dark","style":"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8","tabindex":"0"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"def"}]},{"type":"element","tagName":"span","properties":{"style":"color:#6F42C1;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" decorator"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"(func):"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"    def"}]},{"type":"element","tagName":"span","properties":{"style":"color:#6F42C1;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" inner"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"*"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"args,"}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"**"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"kwargs):"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#6A737D;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"        # do something"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"        func("}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"*"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"args,"}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"**"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"kwargs)"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#6A737D;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"        # something else"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"        return"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" func("}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"*"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"args,"}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"**"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"kwargs)"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"    return"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" inner"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#6F42C1;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"@decorator"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"def"}]},{"type":"element","tagName":"span","properties":{"style":"color:#6F42C1;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" myfunction"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"(x,y,mode"}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"style":"color:#032F62;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"normal\""}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":",strict"}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"True"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"):"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#6A737D;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"    # do something..."}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"    return"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" results"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"如果想让装饰器本身接受参数"},"children":[{"type":"element","tagName":"a","properties":{"href":"#如果想让装饰器本身接受参数"},"children":[{"type":"text","value":"如果想让装饰器本身接受参数","position":{"start":{"line":94,"column":5,"offset":2050},"end":{"line":94,"column":18,"offset":2063}}}]}],"position":{"start":{"line":94,"column":1,"offset":2046},"end":{"line":94,"column":18,"offset":2063}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"也就是想达到下面的效果：","position":{"start":{"line":96,"column":1,"offset":2067},"end":{"line":96,"column":13,"offset":2079}}}],"position":{"start":{"line":96,"column":1,"offset":2067},"end":{"line":96,"column":13,"offset":2079}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"class":"shiki shiki-themes github-light github-dark","style":"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8","tabindex":"0"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#6F42C1;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"@param_decorator"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"style":"color:#E36209;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"param"}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"style":"color:#032F62;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"neat\""}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":")"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"def"}]},{"type":"element","tagName":"span","properties":{"style":"color:#6F42C1;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" myfunction"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"(x,y,mode"}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"style":"color:#032F62;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"normal\""}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":",strict"}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"True"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"):"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#6A737D;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"    # do something..."}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"    return"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" results"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"也就是让 ","position":{"start":{"line":105,"column":1,"offset":2224},"end":{"line":105,"column":6,"offset":2229}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"param_decorator(param=\"neat\")","position":{"start":{"line":105,"column":6,"offset":2229},"end":{"line":105,"column":37,"offset":2260}}}],"position":{"start":{"line":105,"column":6,"offset":2229},"end":{"line":105,"column":37,"offset":2260}}},{"type":"text","value":" 返回一个装饰器函数，也就是在之前的装饰器外面再加一层：","position":{"start":{"line":105,"column":37,"offset":2260},"end":{"line":105,"column":65,"offset":2288}}}],"position":{"start":{"line":105,"column":1,"offset":2224},"end":{"line":105,"column":65,"offset":2288}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"class":"shiki shiki-themes github-light github-dark","style":"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8","tabindex":"0"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"def"}]},{"type":"element","tagName":"span","properties":{"style":"color:#6F42C1;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" param_decorator"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"(param):"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"    def"}]},{"type":"element","tagName":"span","properties":{"style":"color:#6F42C1;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" decorator"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"(func):"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"        def"}]},{"type":"element","tagName":"span","properties":{"style":"color:#6F42C1;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" inner"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"*"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"args,"}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"**"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"kwargs):"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"            if"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" param"}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"=="}]},{"type":"element","tagName":"span","properties":{"style":"color:#032F62;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"neat\""}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":":"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"                print"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"style":"color:#032F62;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"neat\""}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":")"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#6A737D;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"                # ..."}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"            else"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":":"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"                print"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"style":"color:#032F62;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"not neat\""}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":")"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#6A737D;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"                # ..."}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"            func("}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"*"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"args,"}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"**"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"kwargs)"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"            return"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" func("}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"*"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"args,"}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"**"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"kwargs)"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"        return"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" inner"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"    return"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" previous_decorator"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"如果想让装饰器既可以接受参数也可以不接受参数"},"children":[{"type":"element","tagName":"a","properties":{"href":"#如果想让装饰器既可以接受参数也可以不接受参数"},"children":[{"type":"text","value":"如果想让装饰器既可以接受参数，也可以不接受参数～","position":{"start":{"line":123,"column":5,"offset":2695},"end":{"line":123,"column":29,"offset":2719}}}]}],"position":{"start":{"line":123,"column":1,"offset":2691},"end":{"line":123,"column":29,"offset":2719}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"实在是有点过于高级了，直接说答案：","position":{"start":{"line":125,"column":1,"offset":2723},"end":{"line":125,"column":18,"offset":2740}}}],"position":{"start":{"line":125,"column":1,"offset":2723},"end":{"line":125,"column":18,"offset":2740}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"class":"shiki shiki-themes github-light github-dark","style":"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8","tabindex":"0"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"def"}]},{"type":"element","tagName":"span","properties":{"style":"color:#6F42C1;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" flex_decorator"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"(_func"}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"None"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"*"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":",kw1"}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"style":"color:#032F62;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"val1\""}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":",kw2"}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"style":"color:#032F62;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"val2\""}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"):"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"    def"}]},{"type":"element","tagName":"span","properties":{"style":"color:#6F42C1;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" decorator"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"(func):"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"        def"}]},{"type":"element","tagName":"span","properties":{"style":"color:#6F42C1;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" inner"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"*"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"args,"}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"**"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"kwargs):"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"            print"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"(kw1,kw2)"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#6A737D;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"            # do something"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"            func("}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"*"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"args,"}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"**"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"kwargs)"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#6A737D;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"            # something else"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"            return"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" func("}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"*"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"args,"}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"**"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"kwargs)"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"        return"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" inner"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"    if"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" _func "}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"is"}]},{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" None"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":":"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"        return"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" decorator"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"    else"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":":"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"        return"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" decorator(_func)"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"根据 ","position":{"start":{"line":143,"column":1,"offset":3157},"end":{"line":143,"column":4,"offset":3160}}},{"type":"element","tagName":"a","properties":{"href":"https://peps.python.org/pep-3102/"},"children":[{"type":"text","value":"https://peps.python.org/pep-3102/","position":{"start":{"line":143,"column":5,"offset":3161},"end":{"line":143,"column":38,"offset":3194}}}],"position":{"start":{"line":143,"column":4,"offset":3160},"end":{"line":143,"column":74,"offset":3230}}},{"type":"text","value":"，","position":{"start":{"line":143,"column":74,"offset":3230},"end":{"line":143,"column":75,"offset":3231}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"*","position":{"start":{"line":143,"column":75,"offset":3231},"end":{"line":143,"column":78,"offset":3234}}}],"position":{"start":{"line":143,"column":75,"offset":3231},"end":{"line":143,"column":78,"offset":3234}}},{"type":"text","value":"作为一个单独的函数参数，表示后面所有的参数都是关键词参数，用来限定星号前面位置参数的数量。","position":{"start":{"line":143,"column":78,"offset":3234},"end":{"line":143,"column":123,"offset":3279}}}],"position":{"start":{"line":143,"column":1,"offset":3157},"end":{"line":143,"column":123,"offset":3279}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"当 ","position":{"start":{"line":145,"column":3,"offset":3285},"end":{"line":145,"column":5,"offset":3287}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"@flex_decorator","position":{"start":{"line":145,"column":5,"offset":3287},"end":{"line":145,"column":22,"offset":3304}}}],"position":{"start":{"line":145,"column":5,"offset":3287},"end":{"line":145,"column":22,"offset":3304}}},{"type":"text","value":" 不加参数使用的时候:","position":{"start":{"line":145,"column":22,"offset":3304},"end":{"line":145,"column":33,"offset":3315}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"根据定义 ","position":{"start":{"line":146,"column":7,"offset":3323},"end":{"line":146,"column":12,"offset":3328}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"myfunction = flex_decorator(myfunction)","position":{"start":{"line":146,"column":12,"offset":3328},"end":{"line":146,"column":53,"offset":3369}}}],"position":{"start":{"line":146,"column":12,"offset":3328},"end":{"line":146,"column":53,"offset":3369}}}],"position":{"start":{"line":146,"column":5,"offset":3321},"end":{"line":146,"column":53,"offset":3369}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"_func=myfunction","position":{"start":{"line":147,"column":7,"offset":3377},"end":{"line":147,"column":25,"offset":3395}}}],"position":{"start":{"line":147,"column":7,"offset":3377},"end":{"line":147,"column":25,"offset":3395}}}],"position":{"start":{"line":147,"column":5,"offset":3375},"end":{"line":147,"column":25,"offset":3395}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"此时 ","position":{"start":{"line":148,"column":7,"offset":3403},"end":{"line":148,"column":10,"offset":3406}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"else","position":{"start":{"line":148,"column":10,"offset":3406},"end":{"line":148,"column":16,"offset":3412}}}],"position":{"start":{"line":148,"column":10,"offset":3406},"end":{"line":148,"column":16,"offset":3412}}},{"type":"text","value":" 生效，","position":{"start":{"line":148,"column":16,"offset":3412},"end":{"line":148,"column":20,"offset":3416}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"myfunction = decorator(myfunction)","position":{"start":{"line":148,"column":20,"offset":3416},"end":{"line":148,"column":56,"offset":3452}}}],"position":{"start":{"line":148,"column":20,"offset":3416},"end":{"line":148,"column":56,"offset":3452}}}],"position":{"start":{"line":148,"column":5,"offset":3401},"end":{"line":148,"column":56,"offset":3452}}},{"type":"text","value":"\n"}],"position":{"start":{"line":146,"column":5,"offset":3321},"end":{"line":148,"column":56,"offset":3452}}},{"type":"text","value":"\n"}],"position":{"start":{"line":145,"column":1,"offset":3283},"end":{"line":148,"column":56,"offset":3452}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"当 ","position":{"start":{"line":149,"column":3,"offset":3456},"end":{"line":149,"column":5,"offset":3458}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"@flex_decorator(kw1=\"val1\",kw2=\"val2\")","position":{"start":{"line":149,"column":5,"offset":3458},"end":{"line":149,"column":45,"offset":3498}}}],"position":{"start":{"line":149,"column":5,"offset":3458},"end":{"line":149,"column":45,"offset":3498}}},{"type":"text","value":" 加上参数使用的时候:","position":{"start":{"line":149,"column":45,"offset":3498},"end":{"line":149,"column":56,"offset":3509}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"根据定义 ","position":{"start":{"line":150,"column":7,"offset":3517},"end":{"line":150,"column":12,"offset":3522}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"myfunction = flex_decorator(kw1=\"val1\",kw2=\"val2\")(myfunction)","position":{"start":{"line":150,"column":12,"offset":3522},"end":{"line":150,"column":76,"offset":3586}}}],"position":{"start":{"line":150,"column":12,"offset":3522},"end":{"line":150,"column":76,"offset":3586}}}],"position":{"start":{"line":150,"column":5,"offset":3515},"end":{"line":150,"column":76,"offset":3586}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"_func=None","position":{"start":{"line":151,"column":7,"offset":3594},"end":{"line":151,"column":19,"offset":3606}}}],"position":{"start":{"line":151,"column":7,"offset":3594},"end":{"line":151,"column":19,"offset":3606}}}],"position":{"start":{"line":151,"column":5,"offset":3592},"end":{"line":151,"column":19,"offset":3606}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"此时 ","position":{"start":{"line":152,"column":7,"offset":3614},"end":{"line":152,"column":10,"offset":3617}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"if","position":{"start":{"line":152,"column":10,"offset":3617},"end":{"line":152,"column":14,"offset":3621}}}],"position":{"start":{"line":152,"column":10,"offset":3617},"end":{"line":152,"column":14,"offset":3621}}},{"type":"text","value":" 生效，","position":{"start":{"line":152,"column":14,"offset":3621},"end":{"line":152,"column":18,"offset":3625}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"myfunction = decorator(myfunction)","position":{"start":{"line":152,"column":18,"offset":3625},"end":{"line":152,"column":54,"offset":3661}}}],"position":{"start":{"line":152,"column":18,"offset":3625},"end":{"line":152,"column":54,"offset":3661}}}],"position":{"start":{"line":152,"column":5,"offset":3612},"end":{"line":152,"column":54,"offset":3661}}},{"type":"text","value":"\n"}],"position":{"start":{"line":150,"column":5,"offset":3515},"end":{"line":152,"column":54,"offset":3661}}},{"type":"text","value":"\n"}],"position":{"start":{"line":149,"column":1,"offset":3454},"end":{"line":152,"column":54,"offset":3661}}},{"type":"text","value":"\n"}],"position":{"start":{"line":145,"column":1,"offset":3283},"end":{"line":152,"column":54,"offset":3661}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"——","position":{"start":{"line":154,"column":1,"offset":3665},"end":{"line":154,"column":3,"offset":3667}}},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"接受的参数必须是关键词参数","position":{"start":{"line":154,"column":5,"offset":3669},"end":{"line":154,"column":18,"offset":3682}}}],"position":{"start":{"line":154,"column":3,"offset":3667},"end":{"line":154,"column":20,"offset":3684}}},{"type":"text","value":"，否则和被装饰的函数名无法区分。","position":{"start":{"line":154,"column":20,"offset":3684},"end":{"line":154,"column":36,"offset":3700}}}],"position":{"start":{"line":154,"column":1,"offset":3665},"end":{"line":154,"column":36,"offset":3700}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"functoolswraps刻章办证"},"children":[{"type":"element","tagName":"a","properties":{"href":"#functoolswraps刻章办证"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"@functools.wraps","position":{"start":{"line":156,"column":5,"offset":3708},"end":{"line":156,"column":23,"offset":3726}}}],"position":{"start":{"line":156,"column":5,"offset":3708},"end":{"line":156,"column":23,"offset":3726}}},{"type":"text","value":"：刻章、办证","position":{"start":{"line":156,"column":23,"offset":3726},"end":{"line":156,"column":29,"offset":3732}}}]}],"position":{"start":{"line":156,"column":1,"offset":3704},"end":{"line":156,"column":29,"offset":3732}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"以上各节基本完成了常用场景下装饰器的功能。","position":{"start":{"line":158,"column":1,"offset":3736},"end":{"line":158,"column":22,"offset":3757}}}],"position":{"start":{"line":158,"column":1,"offset":3736},"end":{"line":158,"column":22,"offset":3757}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"但是，Python 作为一种动态语言，一大特征就是可以在运行时进行","position":{"start":{"line":160,"column":1,"offset":3761},"end":{"line":160,"column":34,"offset":3794}}},{"type":"element","tagName":"a","properties":{"href":"https://en.wikipedia.org/wiki/Type_introspection"},"children":[{"type":"text","value":"类型内省","position":{"start":{"line":160,"column":35,"offset":3795},"end":{"line":160,"column":39,"offset":3799}}}],"position":{"start":{"line":160,"column":34,"offset":3794},"end":{"line":160,"column":90,"offset":3850}}},{"type":"text","value":"。而按照我们上面的写法，被装饰之后的函数，Python 认为它不再是原来的函数，而是装饰器里面定义的那个内部函数，这样可能会出现意想不到的问题。","position":{"start":{"line":160,"column":90,"offset":3850},"end":{"line":160,"column":162,"offset":3922}}}],"position":{"start":{"line":160,"column":1,"offset":3761},"end":{"line":160,"column":162,"offset":3922}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"解决方法是使用一个专门的装饰器根装饰器定义的内部函数办个假身份：","position":{"start":{"line":162,"column":1,"offset":3926},"end":{"line":162,"column":33,"offset":3958}}}],"position":{"start":{"line":162,"column":1,"offset":3926},"end":{"line":162,"column":33,"offset":3958}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"class":"shiki shiki-themes github-light github-dark","style":"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8","tabindex":"0"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"import"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" functools"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"def"}]},{"type":"element","tagName":"span","properties":{"style":"color:#6F42C1;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" decorator"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"(func):"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#6F42C1;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"    @functools.wraps"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"(func)"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"    def"}]},{"type":"element","tagName":"span","properties":{"style":"color:#6F42C1;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" inner"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"*"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"args,"}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"**"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"kwargs):"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#6A737D;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"        # do something"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"        func("}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"*"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"args,"}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"**"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"kwargs)"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#6A737D;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"        # something else"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"        return"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" func("}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"*"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"args,"}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"**"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"kwargs)"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"    return"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" inner"}]}]}]}]}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":176,"column":1,"offset":4215}}}},"__N_SSG":true}