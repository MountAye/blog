{"pageProps":{"metadata":{"slug":"RP-why-choose-python-4-fp","date":"2019-02-07","title":".py | 转载：为什么俺推荐 Python[4]·作为函数式编程语言的 Python","filename":"2019-02-07-RP-why-choose-python-4-fp.md","url":"RP-why-choose-python-4-fp","layout":"post","author":"编程随想","keywords":["html","py"],"excerpt":"聊一聊 Python 作为“函数式编程”（以下简称 FP）语言的特点。考虑到本系列面向的是 Python 的门外汉或刚入门的新手，故本文仅介绍若干浅显的 FP 特性。","categories":"post","milestoneID":2,"content":"\n### 文章目录\n\n* 什么是函数式编程\n* FP 的特点\n* FP 的优点\n* Python 的函数语法\n* 和 FP 相关的内置函数\n* 消除控制流\n* List Comprehension\n* 闭包\n* 结尾\n\n春节前看到热心读者留言，提醒俺：Python 系列好久没更新了（不知不觉又过了一年多）。俺当时回复说：春节假期补上后一篇。昨天听到鞭炮声才发觉元宵已经到了，赶忙写出本文。\n\n前一个帖子介绍了 Python 作为“面向对象编程”（以下简称 OOP）语言的特点，今天来聊一聊 Python 作为“函数式编程”（以下简称 FP）语言的特点。考虑到本系列面向的是 Python 的门外汉或刚入门的新手，故本文仅介绍若干浅显的 FP 特性。\n\n# 什么是函数式编程\n\n说实话，“函数式编程语言”是一个很大的话题。由于篇幅有限，本文不可能对这个话题做全面介绍。俺干脆偷一下懒，只简单说说。\n\n从字面上看，所谓的函数式编程，就是以“函数”为中心的“编程范式”。估计有同学又会问了，啥是“编程范式”捏？哎呦，这又是一个很大的话题。通俗来讲，“编程范式”就是指编程的套路。比方说大家很熟悉的 OOP，就是一种“编程范式”。FP 跟 OOP 一样，都是一种编程的套路。做个简单类比：OOP 以“对象/类”作为程序设计的核心，而 FP 以“函数”作为程序设计的核心。\n\n# FP的特点\n\n既然说到 FP，自然要稍微说一下 FP 的特色。\n\n## 函数很牛X\n\n刚才说了，FP 是以函数为中心。既然如此，在支持 FP 的语言中，函数的功能自然十分牛X。通俗地说，OOP 语言中，类/对象能干的事情，FP 语言中的函数也能干。下面做一些对比，以加深大伙儿的印象。\n\nOOP 中，对象可以互相赋值；FP 中，函数可以互相赋值。\n\nOOP 中，对象可以作为函数的参数/返回值，FP 中，函数可以作为函数的参数/返回值。\n\n某些 OOP 中，类可以嵌套定义；FP 中，函数可以嵌套定义。\n\n某些 OOP 中，可以有匿名类；FP 中，可以有匿名函数。\n\n## 避免副作用\n\n在 FP 中，特别强调函数不要有“副作用”（洋文叫“side effect”）。没有副作用的函数，又称之为纯函数（pure function）。其输出完全依赖于输入。换句话说，只要输入一样，输出就一样。\n\n要成为纯函数，函数内部不能读写函数外部变量、不能有设备 I/O（比如读写文件）......\n\n无副作用是 FP 的重要特性。FP的很多优点来自于此特性。\n\n## 避免控制流\n\n在 FP 中，尽量避免用控制流语句（循环语句、判断语句）。对于控制流语句，FP 有另外的替代方式。比如：常用递归或高阶函数来替代循环。如此一来，FP 的代码会显得更简洁，更可读。\n\n## 多态\n\n大部分支持 FP 的语言，也都支持多态。函数参数支持多态化，便可实现非常灵活的功能。\n\n说了这么多，不知道大伙儿明白了没？还是没整明白的同学，请看维基百科的英文词条（中文词条太简单，看不明白滴）。\n\n洋文实在看不下去吗？那不妨看看 IT 大牛 Joel 写的《你的编程语言能这样做吗？》（中文版在“这里”）。此文以 JavaScript 来阐述 FP 的妙处。\n\n# FP 的优点\n\n再稍微说一下 FP 的好处，以强化大伙儿学习的动力。\n\n## 模块化\n\n在 FP 的思想中，函数最好是“纯”的，而且最好只完成“单一”的任务。在这种指导思想下，函数的模块化程度自然就高。\n\n## 可复用性\n\n模块化程度高，直接的好处就是可复用性好。\n\n## 可读性\n\n刚才说了，FP 的思想强调函数又纯又小。这样的函数，代码的可读性自然好，修改起来也方便。\n\n## 易于调试\n\n前面提到了纯函数。如果你的程序中大部分函数都是纯函数，则调试 Bug 会容易很多。像 OOP 中，类的多个成员函数都可以修改类的成员变量，有时候会导致调试极其困难。而纯函数没有此问题。\n\n另外，多线程是调试的一大噩梦。当年俺还专门写过帖子，介绍 C++ 多线程的注意事项（在“这里”）。而纯函数由于没有副作用，不必担心各种“互斥”、“死锁”等问题。\n\n## 易于测试\n\n除了易于调试，纯函数的输出仅仅依赖于输入，这一特点注定了它很容易进行单元测试。\n\n## 适合并行\n\n在 FP 中，由于纯函数无副作用，很适合编写并行处理的代码。最典型并且在工业界获得巨大成功的例子就是 Erlang。\n\n## 其它\n\n当然啦，FP 的好处远不止上述这些（比如还有：利于形式化证明）。限于篇幅，俺就不展开了。\n\n# Python 的函数语法\n\nPython 中，常见的函数定义和函数调用，想必各位都晓得了。下面说几种不太常见的，且跟 FP 有关的语法。\n\n## 函数赋值\n\nPython 可以把函数直接赋值给一个变量。举例如下：\n\n```python\n\ndef square(n) :  # 这是一个计算平方的小函数，后面会反复用它举例\n    return n ** 2\n\nf = square  # 此处赋值给变量 f\nf(10)  # 此处返回100。注意：对该变量使用小括号，等同于调用函数\n\n```\n\n## 匿名定义\n\nPython 可以用 lambda 关键字定义【单行】的匿名函数。套用刚才的例子\n\n```python\n\nsquare = lambda x : x**2  # 定义一个单参数的匿名函数，并把该函数赋值给变量\nsquare(10)  # 此处返回 100\n\n```\n\n## 嵌套定义\n\nPython 支持函数的嵌套定义（请看如下例子）。这种语法，在“闭包”中经常出现（后面会具体介绍“闭包”）。\n\n```python\n\ndef outer() :  # 外层函数\n    s = \"hello\"\n    def inner() :  # 内层函数\n        print(s)  # 此处引用的是外层作用域的变量\n\n    inner()  # 输出 hello\n    s = \"world\"\n    inner()  # 输出 world\n\n```\n\n# 和 FP 相关的内置函数\n\nPython 内置了一大坨用于 FP 的函数，以方便程序猿写出简洁的代码。在接下去聊之前，俺有必要先介绍其中的2个。\n\n## map(func, iter)\n\n为了省事，俺只介绍2参数的 map（正宗的 map 支持 N 参数）。\n\n参数 func 是个函数，参数 iter 是个迭代器（也可以理解为集合）\n\nmap() 会把 iter 的每个元素传给 func，并把每次调用的结果保存到一个 list 中，然后返回此 list。\n\n举例：\n\n挨个计算整数 list 的平方：\n\n```python\n\nmap(square, [1, 2, 3])  # 返回 [1, 4, 9]\n\n```\n\n## filter(func, iter)\n\n参数含义同 map\n\nfilter() 会把 iter 的每个元素传给 func，如果 func 返回结果为 True，就把元素保存在一个 list 中，最后返回此 list。\n\n举例：\n\n要过滤出所有奇数，代码如下：\n\n```python\n\ndef odd(n) :\n    return (n%2) == 1\n\nfilter(odd, [1, 2, 3])  # 返回[1, 3]\n\n```\n\n此处可以用上 lambda，把代码简化为一行：\n\n```python\nfilter(lambda n: (n%2)==1, lst)\n```\n\n# 消除控制流\n\n为了让大伙儿更深刻体会 FP 风格同传统风格的差别，俺把刚才两个例子组合一下——要求返回整数list 中所有奇数的平方。\n\n传统的写法（有控制流）：\n\n```python\n\ndef func1(old_lst) :\n    new_lst = []\n    for n in old_lst :\n        if odd(n) :\n            new_lst.append(square(n))\n    return new_lst\n\n```\n\nFP 的写法（无控制流）：\n\n```python\n\ndef func2(lst) :\n    return map(square, filter(odd, lst))\n\n```\n\n怎么样？是不是更简洁？连 for / if 这两个关键字都不需要了。\n\n# List Comprehension\n\n这个洋文比较难翻译。有人叫做“列表推导”，也有人称为“列表展开”或“列表解析”。（俺比较喜欢头一个翻译——不禁让人联想到“推倒”:）\n\n在 Python 中，这是一个很好吃的语法糖——可以让你写出很简洁、很优雅的代码。\n\n举例1：\n\n还拿刚才过滤奇数的例子。\n\n```python\n\nfilter(lambda n: (n%2)==1, lst)\n\n```\n\n上述写法可以等价替换为列表推导：\n\n```python\n\n[n for n in lst if (n%2)==1]\n\n```\n\n举例2：\n　　\n再来一个稍微复杂的例子。假设有两个整数 list，分别存储矩形的宽度和高度。现在想把所有的宽度和高度进行两两组合，把大于 10 的面积打印出来。\n　　\n传统的写法（2层循环，4行代码）\n\n```python\n\nfor w in width :\n    for h in height :\n        if w*h > 10 :\n            print(w*h)\n\n```\n\nFP 的写法（无循环，1行代码，多精致啊）\n\n```python\n\nprint( [w*h for w in width for h in height if w*h > 10] )\n\n```\n\n除了列表推导，Python 中还有字典推导、集合推导等等。为了省点口水，暂且打住。\n\n# 闭包\n\n闭包，洋文叫“closure”，解释在“这里”。它是 FP 的常见手法。那闭包到底有啥用捏？俺举一个微积分中，函数求导的例子。（不懂微积分或者对高数有心理阴影的同学，别担心，请把注意力集中在代码上）\n\n```python\n\ndef d(f) :\n    def calc(x) :\n        dx = 0.000001  # 表示无穷小的Δx\n        return (f(x+dx) - f(x)) / dx  # 计算斜率。注意，此处引用了外层作用域的变量 f\n    return calc  # 此处用函数作为返回值（也就是函数 f 的导数）\n\n```\n\n现在，假设要计算二次函数 f(x) = x2 + x + 1 的导数，只需如下代码：\n\n```python\n\nf = lambda x : x**2 + x + 1  # 先把二次函数用代码表达出来\nf1 = d(f)  # 这个f1 就是 f 的一阶导数啦。注意，导数依然是个函数\n\n```\n\n有了一阶导数，就可以很容易地计算该函数在某点的斜率\n\n比如要计算 x=3 的斜率，只需：\n\n```python\n\nf1(3)\n\n```\n\n如果要想得到二阶导数（导数的导数），只需依样画葫芦（瞧这代码写得多优雅）\n\n```python\n\nf2 = d(f1)\n\n```\n\n看到这里，大伙儿不妨设想一下：如果不用 FP，改用 OOP，上述需求该如何实现？俺觉得吧，用 OOP 来求导，这代码写起来多半是又丑又臭。\n\n# 结尾\n\n今天聊了不少 FP 的语法特性，可惜还是没聊完。由于俺比较懒，而且怕写得太长没人看，所以一些高级话题（比如：迭代器、生成器、等），今天就不介绍了。假如列位看官对那些玩意儿感兴趣，再抽空单独写一帖。\n\n[回到本系列的目录](RP-why-choose-python-0-overview)\n\n> **版权声明**<br>\n> 本博客（编程随想的博客）所有的原创文章，作者皆保留版权。转载必须包含本声明，保持本文完整，并以超链接形式注明作者编程随想和本文原始地址：<br>\n> <a href=\"https://program-think.blogspot.com/2012/02/why-choose-python-4-fp.html\">https://program-think.blogspot.com/2012/02/why-choose-python-4-fp.html</a>\n"},"mdAst":{"type":"root","children":[{"type":"heading","depth":3,"children":[{"type":"text","value":"文章目录","position":{"start":{"line":2,"column":5,"offset":5},"end":{"line":2,"column":9,"offset":9}}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":9,"offset":9}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"什么是函数式编程","position":{"start":{"line":4,"column":3,"offset":13},"end":{"line":4,"column":11,"offset":21}}}],"position":{"start":{"line":4,"column":3,"offset":13},"end":{"line":4,"column":11,"offset":21}}}],"position":{"start":{"line":4,"column":1,"offset":11},"end":{"line":4,"column":11,"offset":21}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"FP 的特点","position":{"start":{"line":5,"column":3,"offset":24},"end":{"line":5,"column":9,"offset":30}}}],"position":{"start":{"line":5,"column":3,"offset":24},"end":{"line":5,"column":9,"offset":30}}}],"position":{"start":{"line":5,"column":1,"offset":22},"end":{"line":5,"column":9,"offset":30}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"FP 的优点","position":{"start":{"line":6,"column":3,"offset":33},"end":{"line":6,"column":9,"offset":39}}}],"position":{"start":{"line":6,"column":3,"offset":33},"end":{"line":6,"column":9,"offset":39}}}],"position":{"start":{"line":6,"column":1,"offset":31},"end":{"line":6,"column":9,"offset":39}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Python 的函数语法","position":{"start":{"line":7,"column":3,"offset":42},"end":{"line":7,"column":15,"offset":54}}}],"position":{"start":{"line":7,"column":3,"offset":42},"end":{"line":7,"column":15,"offset":54}}}],"position":{"start":{"line":7,"column":1,"offset":40},"end":{"line":7,"column":15,"offset":54}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"和 FP 相关的内置函数","position":{"start":{"line":8,"column":3,"offset":57},"end":{"line":8,"column":15,"offset":69}}}],"position":{"start":{"line":8,"column":3,"offset":57},"end":{"line":8,"column":15,"offset":69}}}],"position":{"start":{"line":8,"column":1,"offset":55},"end":{"line":8,"column":15,"offset":69}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"消除控制流","position":{"start":{"line":9,"column":3,"offset":72},"end":{"line":9,"column":8,"offset":77}}}],"position":{"start":{"line":9,"column":3,"offset":72},"end":{"line":9,"column":8,"offset":77}}}],"position":{"start":{"line":9,"column":1,"offset":70},"end":{"line":9,"column":8,"offset":77}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"List Comprehension","position":{"start":{"line":10,"column":3,"offset":80},"end":{"line":10,"column":21,"offset":98}}}],"position":{"start":{"line":10,"column":3,"offset":80},"end":{"line":10,"column":21,"offset":98}}}],"position":{"start":{"line":10,"column":1,"offset":78},"end":{"line":10,"column":21,"offset":98}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"闭包","position":{"start":{"line":11,"column":3,"offset":101},"end":{"line":11,"column":5,"offset":103}}}],"position":{"start":{"line":11,"column":3,"offset":101},"end":{"line":11,"column":5,"offset":103}}}],"position":{"start":{"line":11,"column":1,"offset":99},"end":{"line":11,"column":5,"offset":103}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"结尾","position":{"start":{"line":12,"column":3,"offset":106},"end":{"line":12,"column":5,"offset":108}}}],"position":{"start":{"line":12,"column":3,"offset":106},"end":{"line":12,"column":5,"offset":108}}}],"position":{"start":{"line":12,"column":1,"offset":104},"end":{"line":12,"column":5,"offset":108}}}],"position":{"start":{"line":4,"column":1,"offset":11},"end":{"line":12,"column":5,"offset":108}}},{"type":"paragraph","children":[{"type":"text","value":"春节前看到热心读者留言，提醒俺：Python 系列好久没更新了（不知不觉又过了一年多）。俺当时回复说：春节假期补上后一篇。昨天听到鞭炮声才发觉元宵已经到了，赶忙写出本文。","position":{"start":{"line":14,"column":1,"offset":110},"end":{"line":14,"column":86,"offset":195}}}],"position":{"start":{"line":14,"column":1,"offset":110},"end":{"line":14,"column":86,"offset":195}}},{"type":"paragraph","children":[{"type":"text","value":"前一个帖子介绍了 Python 作为“面向对象编程”（以下简称 OOP）语言的特点，今天来聊一聊 Python 作为“函数式编程”（以下简称 FP）语言的特点。考虑到本系列面向的是 Python 的门外汉或刚入门的新手，故本文仅介绍若干浅显的 FP 特性。","position":{"start":{"line":16,"column":1,"offset":197},"end":{"line":16,"column":129,"offset":325}}}],"position":{"start":{"line":16,"column":1,"offset":197},"end":{"line":16,"column":129,"offset":325}}},{"type":"heading","depth":1,"children":[{"type":"text","value":"什么是函数式编程","position":{"start":{"line":18,"column":3,"offset":329},"end":{"line":18,"column":11,"offset":337}}}],"position":{"start":{"line":18,"column":1,"offset":327},"end":{"line":18,"column":11,"offset":337}}},{"type":"paragraph","children":[{"type":"text","value":"说实话，“函数式编程语言”是一个很大的话题。由于篇幅有限，本文不可能对这个话题做全面介绍。俺干脆偷一下懒，只简单说说。","position":{"start":{"line":20,"column":1,"offset":339},"end":{"line":20,"column":60,"offset":398}}}],"position":{"start":{"line":20,"column":1,"offset":339},"end":{"line":20,"column":60,"offset":398}}},{"type":"paragraph","children":[{"type":"text","value":"从字面上看，所谓的函数式编程，就是以“函数”为中心的“编程范式”。估计有同学又会问了，啥是“编程范式”捏？哎呦，这又是一个很大的话题。通俗来讲，“编程范式”就是指编程的套路。比方说大家很熟悉的 OOP，就是一种“编程范式”。FP 跟 OOP 一样，都是一种编程的套路。做个简单类比：OOP 以“对象/类”作为程序设计的核心，而 FP 以“函数”作为程序设计的核心。","position":{"start":{"line":22,"column":1,"offset":400},"end":{"line":22,"column":183,"offset":582}}}],"position":{"start":{"line":22,"column":1,"offset":400},"end":{"line":22,"column":183,"offset":582}}},{"type":"heading","depth":1,"children":[{"type":"text","value":"FP的特点","position":{"start":{"line":24,"column":3,"offset":586},"end":{"line":24,"column":8,"offset":591}}}],"position":{"start":{"line":24,"column":1,"offset":584},"end":{"line":24,"column":8,"offset":591}}},{"type":"paragraph","children":[{"type":"text","value":"既然说到 FP，自然要稍微说一下 FP 的特色。","position":{"start":{"line":26,"column":1,"offset":593},"end":{"line":26,"column":25,"offset":617}}}],"position":{"start":{"line":26,"column":1,"offset":593},"end":{"line":26,"column":25,"offset":617}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"函数很牛X","position":{"start":{"line":28,"column":4,"offset":622},"end":{"line":28,"column":9,"offset":627}}}],"position":{"start":{"line":28,"column":1,"offset":619},"end":{"line":28,"column":9,"offset":627}}},{"type":"paragraph","children":[{"type":"text","value":"刚才说了，FP 是以函数为中心。既然如此，在支持 FP 的语言中，函数的功能自然十分牛X。通俗地说，OOP 语言中，类/对象能干的事情，FP 语言中的函数也能干。下面做一些对比，以加深大伙儿的印象。","position":{"start":{"line":30,"column":1,"offset":629},"end":{"line":30,"column":100,"offset":728}}}],"position":{"start":{"line":30,"column":1,"offset":629},"end":{"line":30,"column":100,"offset":728}}},{"type":"paragraph","children":[{"type":"text","value":"OOP 中，对象可以互相赋值；FP 中，函数可以互相赋值。","position":{"start":{"line":32,"column":1,"offset":730},"end":{"line":32,"column":30,"offset":759}}}],"position":{"start":{"line":32,"column":1,"offset":730},"end":{"line":32,"column":30,"offset":759}}},{"type":"paragraph","children":[{"type":"text","value":"OOP 中，对象可以作为函数的参数/返回值，FP 中，函数可以作为函数的参数/返回值。","position":{"start":{"line":34,"column":1,"offset":761},"end":{"line":34,"column":44,"offset":804}}}],"position":{"start":{"line":34,"column":1,"offset":761},"end":{"line":34,"column":44,"offset":804}}},{"type":"paragraph","children":[{"type":"text","value":"某些 OOP 中，类可以嵌套定义；FP 中，函数可以嵌套定义。","position":{"start":{"line":36,"column":1,"offset":806},"end":{"line":36,"column":32,"offset":837}}}],"position":{"start":{"line":36,"column":1,"offset":806},"end":{"line":36,"column":32,"offset":837}}},{"type":"paragraph","children":[{"type":"text","value":"某些 OOP 中，可以有匿名类；FP 中，可以有匿名函数。","position":{"start":{"line":38,"column":1,"offset":839},"end":{"line":38,"column":30,"offset":868}}}],"position":{"start":{"line":38,"column":1,"offset":839},"end":{"line":38,"column":30,"offset":868}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"避免副作用","position":{"start":{"line":40,"column":4,"offset":873},"end":{"line":40,"column":9,"offset":878}}}],"position":{"start":{"line":40,"column":1,"offset":870},"end":{"line":40,"column":9,"offset":878}}},{"type":"paragraph","children":[{"type":"text","value":"在 FP 中，特别强调函数不要有“副作用”（洋文叫“side effect”）。没有副作用的函数，又称之为纯函数（pure function）。其输出完全依赖于输入。换句话说，只要输入一样，输出就一样。","position":{"start":{"line":42,"column":1,"offset":880},"end":{"line":42,"column":102,"offset":981}}}],"position":{"start":{"line":42,"column":1,"offset":880},"end":{"line":42,"column":102,"offset":981}}},{"type":"paragraph","children":[{"type":"text","value":"要成为纯函数，函数内部不能读写函数外部变量、不能有设备 I/O（比如读写文件）......","position":{"start":{"line":44,"column":1,"offset":983},"end":{"line":44,"column":46,"offset":1028}}}],"position":{"start":{"line":44,"column":1,"offset":983},"end":{"line":44,"column":46,"offset":1028}}},{"type":"paragraph","children":[{"type":"text","value":"无副作用是 FP 的重要特性。FP的很多优点来自于此特性。","position":{"start":{"line":46,"column":1,"offset":1030},"end":{"line":46,"column":30,"offset":1059}}}],"position":{"start":{"line":46,"column":1,"offset":1030},"end":{"line":46,"column":30,"offset":1059}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"避免控制流","position":{"start":{"line":48,"column":4,"offset":1064},"end":{"line":48,"column":9,"offset":1069}}}],"position":{"start":{"line":48,"column":1,"offset":1061},"end":{"line":48,"column":9,"offset":1069}}},{"type":"paragraph","children":[{"type":"text","value":"在 FP 中，尽量避免用控制流语句（循环语句、判断语句）。对于控制流语句，FP 有另外的替代方式。比如：常用递归或高阶函数来替代循环。如此一来，FP 的代码会显得更简洁，更可读。","position":{"start":{"line":50,"column":1,"offset":1071},"end":{"line":50,"column":90,"offset":1160}}}],"position":{"start":{"line":50,"column":1,"offset":1071},"end":{"line":50,"column":90,"offset":1160}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"多态","position":{"start":{"line":52,"column":4,"offset":1165},"end":{"line":52,"column":6,"offset":1167}}}],"position":{"start":{"line":52,"column":1,"offset":1162},"end":{"line":52,"column":6,"offset":1167}}},{"type":"paragraph","children":[{"type":"text","value":"大部分支持 FP 的语言，也都支持多态。函数参数支持多态化，便可实现非常灵活的功能。","position":{"start":{"line":54,"column":1,"offset":1169},"end":{"line":54,"column":43,"offset":1211}}}],"position":{"start":{"line":54,"column":1,"offset":1169},"end":{"line":54,"column":43,"offset":1211}}},{"type":"paragraph","children":[{"type":"text","value":"说了这么多，不知道大伙儿明白了没？还是没整明白的同学，请看维基百科的英文词条（中文词条太简单，看不明白滴）。","position":{"start":{"line":56,"column":1,"offset":1213},"end":{"line":56,"column":55,"offset":1267}}}],"position":{"start":{"line":56,"column":1,"offset":1213},"end":{"line":56,"column":55,"offset":1267}}},{"type":"paragraph","children":[{"type":"text","value":"洋文实在看不下去吗？那不妨看看 IT 大牛 Joel 写的《你的编程语言能这样做吗？》（中文版在“这里”）。此文以 JavaScript 来阐述 FP 的妙处。","position":{"start":{"line":58,"column":1,"offset":1269},"end":{"line":58,"column":81,"offset":1349}}}],"position":{"start":{"line":58,"column":1,"offset":1269},"end":{"line":58,"column":81,"offset":1349}}},{"type":"heading","depth":1,"children":[{"type":"text","value":"FP 的优点","position":{"start":{"line":60,"column":3,"offset":1353},"end":{"line":60,"column":9,"offset":1359}}}],"position":{"start":{"line":60,"column":1,"offset":1351},"end":{"line":60,"column":9,"offset":1359}}},{"type":"paragraph","children":[{"type":"text","value":"再稍微说一下 FP 的好处，以强化大伙儿学习的动力。","position":{"start":{"line":62,"column":1,"offset":1361},"end":{"line":62,"column":27,"offset":1387}}}],"position":{"start":{"line":62,"column":1,"offset":1361},"end":{"line":62,"column":27,"offset":1387}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"模块化","position":{"start":{"line":64,"column":4,"offset":1392},"end":{"line":64,"column":7,"offset":1395}}}],"position":{"start":{"line":64,"column":1,"offset":1389},"end":{"line":64,"column":7,"offset":1395}}},{"type":"paragraph","children":[{"type":"text","value":"在 FP 的思想中，函数最好是“纯”的，而且最好只完成“单一”的任务。在这种指导思想下，函数的模块化程度自然就高。","position":{"start":{"line":66,"column":1,"offset":1397},"end":{"line":66,"column":58,"offset":1454}}}],"position":{"start":{"line":66,"column":1,"offset":1397},"end":{"line":66,"column":58,"offset":1454}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"可复用性","position":{"start":{"line":68,"column":4,"offset":1459},"end":{"line":68,"column":8,"offset":1463}}}],"position":{"start":{"line":68,"column":1,"offset":1456},"end":{"line":68,"column":8,"offset":1463}}},{"type":"paragraph","children":[{"type":"text","value":"模块化程度高，直接的好处就是可复用性好。","position":{"start":{"line":70,"column":1,"offset":1465},"end":{"line":70,"column":21,"offset":1485}}}],"position":{"start":{"line":70,"column":1,"offset":1465},"end":{"line":70,"column":21,"offset":1485}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"可读性","position":{"start":{"line":72,"column":4,"offset":1490},"end":{"line":72,"column":7,"offset":1493}}}],"position":{"start":{"line":72,"column":1,"offset":1487},"end":{"line":72,"column":7,"offset":1493}}},{"type":"paragraph","children":[{"type":"text","value":"刚才说了，FP 的思想强调函数又纯又小。这样的函数，代码的可读性自然好，修改起来也方便。","position":{"start":{"line":74,"column":1,"offset":1495},"end":{"line":74,"column":45,"offset":1539}}}],"position":{"start":{"line":74,"column":1,"offset":1495},"end":{"line":74,"column":45,"offset":1539}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"易于调试","position":{"start":{"line":76,"column":4,"offset":1544},"end":{"line":76,"column":8,"offset":1548}}}],"position":{"start":{"line":76,"column":1,"offset":1541},"end":{"line":76,"column":8,"offset":1548}}},{"type":"paragraph","children":[{"type":"text","value":"前面提到了纯函数。如果你的程序中大部分函数都是纯函数，则调试 Bug 会容易很多。像 OOP 中，类的多个成员函数都可以修改类的成员变量，有时候会导致调试极其困难。而纯函数没有此问题。","position":{"start":{"line":78,"column":1,"offset":1550},"end":{"line":78,"column":93,"offset":1642}}}],"position":{"start":{"line":78,"column":1,"offset":1550},"end":{"line":78,"column":93,"offset":1642}}},{"type":"paragraph","children":[{"type":"text","value":"另外，多线程是调试的一大噩梦。当年俺还专门写过帖子，介绍 C++ 多线程的注意事项（在“这里”）。而纯函数由于没有副作用，不必担心各种“互斥”、“死锁”等问题。","position":{"start":{"line":80,"column":1,"offset":1644},"end":{"line":80,"column":81,"offset":1724}}}],"position":{"start":{"line":80,"column":1,"offset":1644},"end":{"line":80,"column":81,"offset":1724}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"易于测试","position":{"start":{"line":82,"column":4,"offset":1729},"end":{"line":82,"column":8,"offset":1733}}}],"position":{"start":{"line":82,"column":1,"offset":1726},"end":{"line":82,"column":8,"offset":1733}}},{"type":"paragraph","children":[{"type":"text","value":"除了易于调试，纯函数的输出仅仅依赖于输入，这一特点注定了它很容易进行单元测试。","position":{"start":{"line":84,"column":1,"offset":1735},"end":{"line":84,"column":40,"offset":1774}}}],"position":{"start":{"line":84,"column":1,"offset":1735},"end":{"line":84,"column":40,"offset":1774}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"适合并行","position":{"start":{"line":86,"column":4,"offset":1779},"end":{"line":86,"column":8,"offset":1783}}}],"position":{"start":{"line":86,"column":1,"offset":1776},"end":{"line":86,"column":8,"offset":1783}}},{"type":"paragraph","children":[{"type":"text","value":"在 FP 中，由于纯函数无副作用，很适合编写并行处理的代码。最典型并且在工业界获得巨大成功的例子就是 Erlang。","position":{"start":{"line":88,"column":1,"offset":1785},"end":{"line":88,"column":59,"offset":1843}}}],"position":{"start":{"line":88,"column":1,"offset":1785},"end":{"line":88,"column":59,"offset":1843}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"其它","position":{"start":{"line":90,"column":4,"offset":1848},"end":{"line":90,"column":6,"offset":1850}}}],"position":{"start":{"line":90,"column":1,"offset":1845},"end":{"line":90,"column":6,"offset":1850}}},{"type":"paragraph","children":[{"type":"text","value":"当然啦，FP 的好处远不止上述这些（比如还有：利于形式化证明）。限于篇幅，俺就不展开了。","position":{"start":{"line":92,"column":1,"offset":1852},"end":{"line":92,"column":45,"offset":1896}}}],"position":{"start":{"line":92,"column":1,"offset":1852},"end":{"line":92,"column":45,"offset":1896}}},{"type":"heading","depth":1,"children":[{"type":"text","value":"Python 的函数语法","position":{"start":{"line":94,"column":3,"offset":1900},"end":{"line":94,"column":15,"offset":1912}}}],"position":{"start":{"line":94,"column":1,"offset":1898},"end":{"line":94,"column":15,"offset":1912}}},{"type":"paragraph","children":[{"type":"text","value":"Python 中，常见的函数定义和函数调用，想必各位都晓得了。下面说几种不太常见的，且跟 FP 有关的语法。","position":{"start":{"line":96,"column":1,"offset":1914},"end":{"line":96,"column":55,"offset":1968}}}],"position":{"start":{"line":96,"column":1,"offset":1914},"end":{"line":96,"column":55,"offset":1968}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"函数赋值","position":{"start":{"line":98,"column":4,"offset":1973},"end":{"line":98,"column":8,"offset":1977}}}],"position":{"start":{"line":98,"column":1,"offset":1970},"end":{"line":98,"column":8,"offset":1977}}},{"type":"paragraph","children":[{"type":"text","value":"Python 可以把函数直接赋值给一个变量。举例如下：","position":{"start":{"line":100,"column":1,"offset":1979},"end":{"line":100,"column":28,"offset":2006}}}],"position":{"start":{"line":100,"column":1,"offset":1979},"end":{"line":100,"column":28,"offset":2006}}},{"type":"code","lang":"python","meta":null,"value":"\ndef square(n) :  # 这是一个计算平方的小函数，后面会反复用它举例\n    return n ** 2\n\nf = square  # 此处赋值给变量 f\nf(10)  # 此处返回100。注意：对该变量使用小括号，等同于调用函数\n","position":{"start":{"line":102,"column":1,"offset":2008},"end":{"line":110,"column":4,"offset":2146}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"匿名定义","position":{"start":{"line":112,"column":4,"offset":2151},"end":{"line":112,"column":8,"offset":2155}}}],"position":{"start":{"line":112,"column":1,"offset":2148},"end":{"line":112,"column":8,"offset":2155}}},{"type":"paragraph","children":[{"type":"text","value":"Python 可以用 lambda 关键字定义【单行】的匿名函数。套用刚才的例子","position":{"start":{"line":114,"column":1,"offset":2157},"end":{"line":114,"column":41,"offset":2197}}}],"position":{"start":{"line":114,"column":1,"offset":2157},"end":{"line":114,"column":41,"offset":2197}}},{"type":"code","lang":"python","meta":null,"value":"\nsquare = lambda x : x**2  # 定义一个单参数的匿名函数，并把该函数赋值给变量\nsquare(10)  # 此处返回 100\n","position":{"start":{"line":116,"column":1,"offset":2199},"end":{"line":121,"column":4,"offset":2289}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"嵌套定义","position":{"start":{"line":123,"column":4,"offset":2294},"end":{"line":123,"column":8,"offset":2298}}}],"position":{"start":{"line":123,"column":1,"offset":2291},"end":{"line":123,"column":8,"offset":2298}}},{"type":"paragraph","children":[{"type":"text","value":"Python 支持函数的嵌套定义（请看如下例子）。这种语法，在“闭包”中经常出现（后面会具体介绍“闭包”）。","position":{"start":{"line":125,"column":1,"offset":2300},"end":{"line":125,"column":55,"offset":2354}}}],"position":{"start":{"line":125,"column":1,"offset":2300},"end":{"line":125,"column":55,"offset":2354}}},{"type":"code","lang":"python","meta":null,"value":"\ndef outer() :  # 外层函数\n    s = \"hello\"\n    def inner() :  # 内层函数\n        print(s)  # 此处引用的是外层作用域的变量\n\n    inner()  # 输出 hello\n    s = \"world\"\n    inner()  # 输出 world\n","position":{"start":{"line":127,"column":1,"offset":2356},"end":{"line":138,"column":4,"offset":2535}}},{"type":"heading","depth":1,"children":[{"type":"text","value":"和 FP 相关的内置函数","position":{"start":{"line":140,"column":3,"offset":2539},"end":{"line":140,"column":15,"offset":2551}}}],"position":{"start":{"line":140,"column":1,"offset":2537},"end":{"line":140,"column":15,"offset":2551}}},{"type":"paragraph","children":[{"type":"text","value":"Python 内置了一大坨用于 FP 的函数，以方便程序猿写出简洁的代码。在接下去聊之前，俺有必要先介绍其中的2个。","position":{"start":{"line":142,"column":1,"offset":2553},"end":{"line":142,"column":59,"offset":2611}}}],"position":{"start":{"line":142,"column":1,"offset":2553},"end":{"line":142,"column":59,"offset":2611}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"map(func, iter)","position":{"start":{"line":144,"column":4,"offset":2616},"end":{"line":144,"column":19,"offset":2631}}}],"position":{"start":{"line":144,"column":1,"offset":2613},"end":{"line":144,"column":19,"offset":2631}}},{"type":"paragraph","children":[{"type":"text","value":"为了省事，俺只介绍2参数的 map（正宗的 map 支持 N 参数）。","position":{"start":{"line":146,"column":1,"offset":2633},"end":{"line":146,"column":36,"offset":2668}}}],"position":{"start":{"line":146,"column":1,"offset":2633},"end":{"line":146,"column":36,"offset":2668}}},{"type":"paragraph","children":[{"type":"text","value":"参数 func 是个函数，参数 iter 是个迭代器（也可以理解为集合）","position":{"start":{"line":148,"column":1,"offset":2670},"end":{"line":148,"column":37,"offset":2706}}}],"position":{"start":{"line":148,"column":1,"offset":2670},"end":{"line":148,"column":37,"offset":2706}}},{"type":"paragraph","children":[{"type":"text","value":"map() 会把 iter 的每个元素传给 func，并把每次调用的结果保存到一个 list 中，然后返回此 list。","position":{"start":{"line":150,"column":1,"offset":2708},"end":{"line":150,"column":61,"offset":2768}}}],"position":{"start":{"line":150,"column":1,"offset":2708},"end":{"line":150,"column":61,"offset":2768}}},{"type":"paragraph","children":[{"type":"text","value":"举例：","position":{"start":{"line":152,"column":1,"offset":2770},"end":{"line":152,"column":4,"offset":2773}}}],"position":{"start":{"line":152,"column":1,"offset":2770},"end":{"line":152,"column":4,"offset":2773}}},{"type":"paragraph","children":[{"type":"text","value":"挨个计算整数 list 的平方：","position":{"start":{"line":154,"column":1,"offset":2775},"end":{"line":154,"column":17,"offset":2791}}}],"position":{"start":{"line":154,"column":1,"offset":2775},"end":{"line":154,"column":17,"offset":2791}}},{"type":"code","lang":"python","meta":null,"value":"\nmap(square, [1, 2, 3])  # 返回 [1, 4, 9]\n","position":{"start":{"line":156,"column":1,"offset":2793},"end":{"line":160,"column":4,"offset":2847}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"filter(func, iter)","position":{"start":{"line":162,"column":4,"offset":2852},"end":{"line":162,"column":22,"offset":2870}}}],"position":{"start":{"line":162,"column":1,"offset":2849},"end":{"line":162,"column":22,"offset":2870}}},{"type":"paragraph","children":[{"type":"text","value":"参数含义同 map","position":{"start":{"line":164,"column":1,"offset":2872},"end":{"line":164,"column":10,"offset":2881}}}],"position":{"start":{"line":164,"column":1,"offset":2872},"end":{"line":164,"column":10,"offset":2881}}},{"type":"paragraph","children":[{"type":"text","value":"filter() 会把 iter 的每个元素传给 func，如果 func 返回结果为 True，就把元素保存在一个 list 中，最后返回此 list。","position":{"start":{"line":166,"column":1,"offset":2883},"end":{"line":166,"column":78,"offset":2960}}}],"position":{"start":{"line":166,"column":1,"offset":2883},"end":{"line":166,"column":78,"offset":2960}}},{"type":"paragraph","children":[{"type":"text","value":"举例：","position":{"start":{"line":168,"column":1,"offset":2962},"end":{"line":168,"column":4,"offset":2965}}}],"position":{"start":{"line":168,"column":1,"offset":2962},"end":{"line":168,"column":4,"offset":2965}}},{"type":"paragraph","children":[{"type":"text","value":"要过滤出所有奇数，代码如下：","position":{"start":{"line":170,"column":1,"offset":2967},"end":{"line":170,"column":15,"offset":2981}}}],"position":{"start":{"line":170,"column":1,"offset":2967},"end":{"line":170,"column":15,"offset":2981}}},{"type":"code","lang":"python","meta":null,"value":"\ndef odd(n) :\n    return (n%2) == 1\n\nfilter(odd, [1, 2, 3])  # 返回[1, 3]\n","position":{"start":{"line":172,"column":1,"offset":2983},"end":{"line":179,"column":4,"offset":3069}}},{"type":"paragraph","children":[{"type":"text","value":"此处可以用上 lambda，把代码简化为一行：","position":{"start":{"line":181,"column":1,"offset":3071},"end":{"line":181,"column":24,"offset":3094}}}],"position":{"start":{"line":181,"column":1,"offset":3071},"end":{"line":181,"column":24,"offset":3094}}},{"type":"code","lang":"python","meta":null,"value":"filter(lambda n: (n%2)==1, lst)","position":{"start":{"line":183,"column":1,"offset":3096},"end":{"line":185,"column":4,"offset":3141}}},{"type":"heading","depth":1,"children":[{"type":"text","value":"消除控制流","position":{"start":{"line":187,"column":3,"offset":3145},"end":{"line":187,"column":8,"offset":3150}}}],"position":{"start":{"line":187,"column":1,"offset":3143},"end":{"line":187,"column":8,"offset":3150}}},{"type":"paragraph","children":[{"type":"text","value":"为了让大伙儿更深刻体会 FP 风格同传统风格的差别，俺把刚才两个例子组合一下——要求返回整数list 中所有奇数的平方。","position":{"start":{"line":189,"column":1,"offset":3152},"end":{"line":189,"column":61,"offset":3212}}}],"position":{"start":{"line":189,"column":1,"offset":3152},"end":{"line":189,"column":61,"offset":3212}}},{"type":"paragraph","children":[{"type":"text","value":"传统的写法（有控制流）：","position":{"start":{"line":191,"column":1,"offset":3214},"end":{"line":191,"column":13,"offset":3226}}}],"position":{"start":{"line":191,"column":1,"offset":3214},"end":{"line":191,"column":13,"offset":3226}}},{"type":"code","lang":"python","meta":null,"value":"\ndef func1(old_lst) :\n    new_lst = []\n    for n in old_lst :\n        if odd(n) :\n            new_lst.append(square(n))\n    return new_lst\n","position":{"start":{"line":193,"column":1,"offset":3228},"end":{"line":202,"column":4,"offset":3381}}},{"type":"paragraph","children":[{"type":"text","value":"FP 的写法（无控制流）：","position":{"start":{"line":204,"column":1,"offset":3383},"end":{"line":204,"column":14,"offset":3396}}}],"position":{"start":{"line":204,"column":1,"offset":3383},"end":{"line":204,"column":14,"offset":3396}}},{"type":"code","lang":"python","meta":null,"value":"\ndef func2(lst) :\n    return map(square, filter(odd, lst))\n","position":{"start":{"line":206,"column":1,"offset":3398},"end":{"line":211,"column":4,"offset":3471}}},{"type":"paragraph","children":[{"type":"text","value":"怎么样？是不是更简洁？连 for / if 这两个关键字都不需要了。","position":{"start":{"line":213,"column":1,"offset":3473},"end":{"line":213,"column":35,"offset":3507}}}],"position":{"start":{"line":213,"column":1,"offset":3473},"end":{"line":213,"column":35,"offset":3507}}},{"type":"heading","depth":1,"children":[{"type":"text","value":"List Comprehension","position":{"start":{"line":215,"column":3,"offset":3511},"end":{"line":215,"column":21,"offset":3529}}}],"position":{"start":{"line":215,"column":1,"offset":3509},"end":{"line":215,"column":21,"offset":3529}}},{"type":"paragraph","children":[{"type":"text","value":"这个洋文比较难翻译。有人叫做“列表推导”，也有人称为“列表展开”或“列表解析”。（俺比较喜欢头一个翻译——不禁让人联想到“推倒”:）","position":{"start":{"line":217,"column":1,"offset":3531},"end":{"line":217,"column":67,"offset":3597}}}],"position":{"start":{"line":217,"column":1,"offset":3531},"end":{"line":217,"column":67,"offset":3597}}},{"type":"paragraph","children":[{"type":"text","value":"在 Python 中，这是一个很好吃的语法糖——可以让你写出很简洁、很优雅的代码。","position":{"start":{"line":219,"column":1,"offset":3599},"end":{"line":219,"column":42,"offset":3640}}}],"position":{"start":{"line":219,"column":1,"offset":3599},"end":{"line":219,"column":42,"offset":3640}}},{"type":"paragraph","children":[{"type":"text","value":"举例1：","position":{"start":{"line":221,"column":1,"offset":3642},"end":{"line":221,"column":5,"offset":3646}}}],"position":{"start":{"line":221,"column":1,"offset":3642},"end":{"line":221,"column":5,"offset":3646}}},{"type":"paragraph","children":[{"type":"text","value":"还拿刚才过滤奇数的例子。","position":{"start":{"line":223,"column":1,"offset":3648},"end":{"line":223,"column":13,"offset":3660}}}],"position":{"start":{"line":223,"column":1,"offset":3648},"end":{"line":223,"column":13,"offset":3660}}},{"type":"code","lang":"python","meta":null,"value":"\nfilter(lambda n: (n%2)==1, lst)\n","position":{"start":{"line":225,"column":1,"offset":3662},"end":{"line":229,"column":4,"offset":3709}}},{"type":"paragraph","children":[{"type":"text","value":"上述写法可以等价替换为列表推导：","position":{"start":{"line":231,"column":1,"offset":3711},"end":{"line":231,"column":17,"offset":3727}}}],"position":{"start":{"line":231,"column":1,"offset":3711},"end":{"line":231,"column":17,"offset":3727}}},{"type":"code","lang":"python","meta":null,"value":"\n[n for n in lst if (n%2)==1]\n","position":{"start":{"line":233,"column":1,"offset":3729},"end":{"line":237,"column":4,"offset":3773}}},{"type":"paragraph","children":[{"type":"text","value":"举例2：\n　　\n再来一个稍微复杂的例子。假设有两个整数 list，分别存储矩形的宽度和高度。现在想把所有的宽度和高度进行两两组合，把大于 10 的面积打印出来。\n　　\n传统的写法（2层循环，4行代码）","position":{"start":{"line":239,"column":1,"offset":3775},"end":{"line":243,"column":17,"offset":3875}}}],"position":{"start":{"line":239,"column":1,"offset":3775},"end":{"line":243,"column":17,"offset":3875}}},{"type":"code","lang":"python","meta":null,"value":"\nfor w in width :\n    for h in height :\n        if w*h > 10 :\n            print(w*h)\n","position":{"start":{"line":245,"column":1,"offset":3877},"end":{"line":252,"column":4,"offset":3976}}},{"type":"paragraph","children":[{"type":"text","value":"FP 的写法（无循环，1行代码，多精致啊）","position":{"start":{"line":254,"column":1,"offset":3978},"end":{"line":254,"column":22,"offset":3999}}}],"position":{"start":{"line":254,"column":1,"offset":3978},"end":{"line":254,"column":22,"offset":3999}}},{"type":"code","lang":"python","meta":null,"value":"\nprint( [w*h for w in width for h in height if w*h > 10] )\n","position":{"start":{"line":256,"column":1,"offset":4001},"end":{"line":260,"column":4,"offset":4074}}},{"type":"paragraph","children":[{"type":"text","value":"除了列表推导，Python 中还有字典推导、集合推导等等。为了省点口水，暂且打住。","position":{"start":{"line":262,"column":1,"offset":4076},"end":{"line":262,"column":42,"offset":4117}}}],"position":{"start":{"line":262,"column":1,"offset":4076},"end":{"line":262,"column":42,"offset":4117}}},{"type":"heading","depth":1,"children":[{"type":"text","value":"闭包","position":{"start":{"line":264,"column":3,"offset":4121},"end":{"line":264,"column":5,"offset":4123}}}],"position":{"start":{"line":264,"column":1,"offset":4119},"end":{"line":264,"column":5,"offset":4123}}},{"type":"paragraph","children":[{"type":"text","value":"闭包，洋文叫“closure”，解释在“这里”。它是 FP 的常见手法。那闭包到底有啥用捏？俺举一个微积分中，函数求导的例子。（不懂微积分或者对高数有心理阴影的同学，别担心，请把注意力集中在代码上）","position":{"start":{"line":266,"column":1,"offset":4125},"end":{"line":266,"column":100,"offset":4224}}}],"position":{"start":{"line":266,"column":1,"offset":4125},"end":{"line":266,"column":100,"offset":4224}}},{"type":"code","lang":"python","meta":null,"value":"\ndef d(f) :\n    def calc(x) :\n        dx = 0.000001  # 表示无穷小的Δx\n        return (f(x+dx) - f(x)) / dx  # 计算斜率。注意，此处引用了外层作用域的变量 f\n    return calc  # 此处用函数作为返回值（也就是函数 f 的导数）\n","position":{"start":{"line":268,"column":1,"offset":4226},"end":{"line":276,"column":4,"offset":4411}}},{"type":"paragraph","children":[{"type":"text","value":"现在，假设要计算二次函数 f(x) = x2 + x + 1 的导数，只需如下代码：","position":{"start":{"line":278,"column":1,"offset":4413},"end":{"line":278,"column":43,"offset":4455}}}],"position":{"start":{"line":278,"column":1,"offset":4413},"end":{"line":278,"column":43,"offset":4455}}},{"type":"code","lang":"python","meta":null,"value":"\nf = lambda x : x**2 + x + 1  # 先把二次函数用代码表达出来\nf1 = d(f)  # 这个f1 就是 f 的一阶导数啦。注意，导数依然是个函数\n","position":{"start":{"line":280,"column":1,"offset":4457},"end":{"line":285,"column":4,"offset":4559}}},{"type":"paragraph","children":[{"type":"text","value":"有了一阶导数，就可以很容易地计算该函数在某点的斜率","position":{"start":{"line":287,"column":1,"offset":4561},"end":{"line":287,"column":26,"offset":4586}}}],"position":{"start":{"line":287,"column":1,"offset":4561},"end":{"line":287,"column":26,"offset":4586}}},{"type":"paragraph","children":[{"type":"text","value":"比如要计算 x=3 的斜率，只需：","position":{"start":{"line":289,"column":1,"offset":4588},"end":{"line":289,"column":18,"offset":4605}}}],"position":{"start":{"line":289,"column":1,"offset":4588},"end":{"line":289,"column":18,"offset":4605}}},{"type":"code","lang":"python","meta":null,"value":"\nf1(3)\n","position":{"start":{"line":291,"column":1,"offset":4607},"end":{"line":295,"column":4,"offset":4628}}},{"type":"paragraph","children":[{"type":"text","value":"如果要想得到二阶导数（导数的导数），只需依样画葫芦（瞧这代码写得多优雅）","position":{"start":{"line":297,"column":1,"offset":4630},"end":{"line":297,"column":37,"offset":4666}}}],"position":{"start":{"line":297,"column":1,"offset":4630},"end":{"line":297,"column":37,"offset":4666}}},{"type":"code","lang":"python","meta":null,"value":"\nf2 = d(f1)\n","position":{"start":{"line":299,"column":1,"offset":4668},"end":{"line":303,"column":4,"offset":4694}}},{"type":"paragraph","children":[{"type":"text","value":"看到这里，大伙儿不妨设想一下：如果不用 FP，改用 OOP，上述需求该如何实现？俺觉得吧，用 OOP 来求导，这代码写起来多半是又丑又臭。","position":{"start":{"line":305,"column":1,"offset":4696},"end":{"line":305,"column":70,"offset":4765}}}],"position":{"start":{"line":305,"column":1,"offset":4696},"end":{"line":305,"column":70,"offset":4765}}},{"type":"heading","depth":1,"children":[{"type":"text","value":"结尾","position":{"start":{"line":307,"column":3,"offset":4769},"end":{"line":307,"column":5,"offset":4771}}}],"position":{"start":{"line":307,"column":1,"offset":4767},"end":{"line":307,"column":5,"offset":4771}}},{"type":"paragraph","children":[{"type":"text","value":"今天聊了不少 FP 的语法特性，可惜还是没聊完。由于俺比较懒，而且怕写得太长没人看，所以一些高级话题（比如：迭代器、生成器、等），今天就不介绍了。假如列位看官对那些玩意儿感兴趣，再抽空单独写一帖。","position":{"start":{"line":309,"column":1,"offset":4773},"end":{"line":309,"column":99,"offset":4871}}}],"position":{"start":{"line":309,"column":1,"offset":4773},"end":{"line":309,"column":99,"offset":4871}}},{"type":"paragraph","children":[{"type":"link","title":null,"url":"RP-why-choose-python-0-overview","children":[{"type":"text","value":"回到本系列的目录","position":{"start":{"line":311,"column":2,"offset":4874},"end":{"line":311,"column":10,"offset":4882}}}],"position":{"start":{"line":311,"column":1,"offset":4873},"end":{"line":311,"column":44,"offset":4916}}}],"position":{"start":{"line":311,"column":1,"offset":4873},"end":{"line":311,"column":44,"offset":4916}}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"版权声明","position":{"start":{"line":313,"column":5,"offset":4922},"end":{"line":313,"column":9,"offset":4926}}}],"position":{"start":{"line":313,"column":3,"offset":4920},"end":{"line":313,"column":11,"offset":4928}}},{"type":"html","value":"<br>","position":{"start":{"line":313,"column":11,"offset":4928},"end":{"line":313,"column":15,"offset":4932}}},{"type":"text","value":"\n本博客（编程随想的博客）所有的原创文章，作者皆保留版权。转载必须包含本声明，保持本文完整，并以超链接形式注明作者编程随想和本文原始地址：","position":{"start":{"line":313,"column":15,"offset":4932},"end":{"line":314,"column":71,"offset":5003}}},{"type":"html","value":"<br>","position":{"start":{"line":314,"column":71,"offset":5003},"end":{"line":314,"column":75,"offset":5007}}},{"type":"text","value":"\n","position":{"start":{"line":314,"column":75,"offset":5007},"end":{"line":315,"column":1,"offset":5008}}},{"type":"html","value":"<a href=\"https://program-think.blogspot.com/2012/02/why-choose-python-4-fp.html\">","position":{"start":{"line":315,"column":3,"offset":5010},"end":{"line":315,"column":84,"offset":5091}}},{"type":"link","title":null,"url":"https://program-think.blogspot.com/2012/02/why-choose-python-4-fp.html","children":[{"type":"text","value":"https://program-think.blogspot.com/2012/02/why-choose-python-4-fp.html","position":{"start":{"line":315,"column":84,"offset":5091},"end":{"line":315,"column":154,"offset":5161}}}],"position":{"start":{"line":315,"column":84,"offset":5091},"end":{"line":315,"column":154,"offset":5161}}},{"type":"html","value":"</a>","position":{"start":{"line":315,"column":154,"offset":5161},"end":{"line":315,"column":158,"offset":5165}}}],"position":{"start":{"line":313,"column":3,"offset":4920},"end":{"line":315,"column":158,"offset":5165}}}],"position":{"start":{"line":313,"column":1,"offset":4918},"end":{"line":315,"column":158,"offset":5165}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":316,"column":1,"offset":5166}}},"htmlAst":{"type":"root","children":[{"type":"element","tagName":"h3","properties":{"id":"文章目录"},"children":[{"type":"element","tagName":"a","properties":{"href":"#文章目录"},"children":[{"type":"text","value":"文章目录","position":{"start":{"line":2,"column":5,"offset":5},"end":{"line":2,"column":9,"offset":9}}}]}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":9,"offset":9}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"什么是函数式编程","position":{"start":{"line":4,"column":3,"offset":13},"end":{"line":4,"column":11,"offset":21}}}],"position":{"start":{"line":4,"column":1,"offset":11},"end":{"line":4,"column":11,"offset":21}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"FP 的特点","position":{"start":{"line":5,"column":3,"offset":24},"end":{"line":5,"column":9,"offset":30}}}],"position":{"start":{"line":5,"column":1,"offset":22},"end":{"line":5,"column":9,"offset":30}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"FP 的优点","position":{"start":{"line":6,"column":3,"offset":33},"end":{"line":6,"column":9,"offset":39}}}],"position":{"start":{"line":6,"column":1,"offset":31},"end":{"line":6,"column":9,"offset":39}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Python 的函数语法","position":{"start":{"line":7,"column":3,"offset":42},"end":{"line":7,"column":15,"offset":54}}}],"position":{"start":{"line":7,"column":1,"offset":40},"end":{"line":7,"column":15,"offset":54}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"和 FP 相关的内置函数","position":{"start":{"line":8,"column":3,"offset":57},"end":{"line":8,"column":15,"offset":69}}}],"position":{"start":{"line":8,"column":1,"offset":55},"end":{"line":8,"column":15,"offset":69}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"消除控制流","position":{"start":{"line":9,"column":3,"offset":72},"end":{"line":9,"column":8,"offset":77}}}],"position":{"start":{"line":9,"column":1,"offset":70},"end":{"line":9,"column":8,"offset":77}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"List Comprehension","position":{"start":{"line":10,"column":3,"offset":80},"end":{"line":10,"column":21,"offset":98}}}],"position":{"start":{"line":10,"column":1,"offset":78},"end":{"line":10,"column":21,"offset":98}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"闭包","position":{"start":{"line":11,"column":3,"offset":101},"end":{"line":11,"column":5,"offset":103}}}],"position":{"start":{"line":11,"column":1,"offset":99},"end":{"line":11,"column":5,"offset":103}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"结尾","position":{"start":{"line":12,"column":3,"offset":106},"end":{"line":12,"column":5,"offset":108}}}],"position":{"start":{"line":12,"column":1,"offset":104},"end":{"line":12,"column":5,"offset":108}}},{"type":"text","value":"\n"}],"position":{"start":{"line":4,"column":1,"offset":11},"end":{"line":12,"column":5,"offset":108}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"春节前看到热心读者留言，提醒俺：Python 系列好久没更新了（不知不觉又过了一年多）。俺当时回复说：春节假期补上后一篇。昨天听到鞭炮声才发觉元宵已经到了，赶忙写出本文。","position":{"start":{"line":14,"column":1,"offset":110},"end":{"line":14,"column":86,"offset":195}}}],"position":{"start":{"line":14,"column":1,"offset":110},"end":{"line":14,"column":86,"offset":195}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"前一个帖子介绍了 Python 作为“面向对象编程”（以下简称 OOP）语言的特点，今天来聊一聊 Python 作为“函数式编程”（以下简称 FP）语言的特点。考虑到本系列面向的是 Python 的门外汉或刚入门的新手，故本文仅介绍若干浅显的 FP 特性。","position":{"start":{"line":16,"column":1,"offset":197},"end":{"line":16,"column":129,"offset":325}}}],"position":{"start":{"line":16,"column":1,"offset":197},"end":{"line":16,"column":129,"offset":325}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{"id":"什么是函数式编程"},"children":[{"type":"element","tagName":"a","properties":{"href":"#什么是函数式编程"},"children":[{"type":"text","value":"什么是函数式编程","position":{"start":{"line":18,"column":3,"offset":329},"end":{"line":18,"column":11,"offset":337}}}]}],"position":{"start":{"line":18,"column":1,"offset":327},"end":{"line":18,"column":11,"offset":337}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"说实话，“函数式编程语言”是一个很大的话题。由于篇幅有限，本文不可能对这个话题做全面介绍。俺干脆偷一下懒，只简单说说。","position":{"start":{"line":20,"column":1,"offset":339},"end":{"line":20,"column":60,"offset":398}}}],"position":{"start":{"line":20,"column":1,"offset":339},"end":{"line":20,"column":60,"offset":398}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"从字面上看，所谓的函数式编程，就是以“函数”为中心的“编程范式”。估计有同学又会问了，啥是“编程范式”捏？哎呦，这又是一个很大的话题。通俗来讲，“编程范式”就是指编程的套路。比方说大家很熟悉的 OOP，就是一种“编程范式”。FP 跟 OOP 一样，都是一种编程的套路。做个简单类比：OOP 以“对象/类”作为程序设计的核心，而 FP 以“函数”作为程序设计的核心。","position":{"start":{"line":22,"column":1,"offset":400},"end":{"line":22,"column":183,"offset":582}}}],"position":{"start":{"line":22,"column":1,"offset":400},"end":{"line":22,"column":183,"offset":582}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{"id":"fp的特点"},"children":[{"type":"element","tagName":"a","properties":{"href":"#fp的特点"},"children":[{"type":"text","value":"FP的特点","position":{"start":{"line":24,"column":3,"offset":586},"end":{"line":24,"column":8,"offset":591}}}]}],"position":{"start":{"line":24,"column":1,"offset":584},"end":{"line":24,"column":8,"offset":591}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"既然说到 FP，自然要稍微说一下 FP 的特色。","position":{"start":{"line":26,"column":1,"offset":593},"end":{"line":26,"column":25,"offset":617}}}],"position":{"start":{"line":26,"column":1,"offset":593},"end":{"line":26,"column":25,"offset":617}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"函数很牛x"},"children":[{"type":"element","tagName":"a","properties":{"href":"#函数很牛x"},"children":[{"type":"text","value":"函数很牛X","position":{"start":{"line":28,"column":4,"offset":622},"end":{"line":28,"column":9,"offset":627}}}]}],"position":{"start":{"line":28,"column":1,"offset":619},"end":{"line":28,"column":9,"offset":627}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"刚才说了，FP 是以函数为中心。既然如此，在支持 FP 的语言中，函数的功能自然十分牛X。通俗地说，OOP 语言中，类/对象能干的事情，FP 语言中的函数也能干。下面做一些对比，以加深大伙儿的印象。","position":{"start":{"line":30,"column":1,"offset":629},"end":{"line":30,"column":100,"offset":728}}}],"position":{"start":{"line":30,"column":1,"offset":629},"end":{"line":30,"column":100,"offset":728}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"OOP 中，对象可以互相赋值；FP 中，函数可以互相赋值。","position":{"start":{"line":32,"column":1,"offset":730},"end":{"line":32,"column":30,"offset":759}}}],"position":{"start":{"line":32,"column":1,"offset":730},"end":{"line":32,"column":30,"offset":759}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"OOP 中，对象可以作为函数的参数/返回值，FP 中，函数可以作为函数的参数/返回值。","position":{"start":{"line":34,"column":1,"offset":761},"end":{"line":34,"column":44,"offset":804}}}],"position":{"start":{"line":34,"column":1,"offset":761},"end":{"line":34,"column":44,"offset":804}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"某些 OOP 中，类可以嵌套定义；FP 中，函数可以嵌套定义。","position":{"start":{"line":36,"column":1,"offset":806},"end":{"line":36,"column":32,"offset":837}}}],"position":{"start":{"line":36,"column":1,"offset":806},"end":{"line":36,"column":32,"offset":837}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"某些 OOP 中，可以有匿名类；FP 中，可以有匿名函数。","position":{"start":{"line":38,"column":1,"offset":839},"end":{"line":38,"column":30,"offset":868}}}],"position":{"start":{"line":38,"column":1,"offset":839},"end":{"line":38,"column":30,"offset":868}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"避免副作用"},"children":[{"type":"element","tagName":"a","properties":{"href":"#避免副作用"},"children":[{"type":"text","value":"避免副作用","position":{"start":{"line":40,"column":4,"offset":873},"end":{"line":40,"column":9,"offset":878}}}]}],"position":{"start":{"line":40,"column":1,"offset":870},"end":{"line":40,"column":9,"offset":878}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"在 FP 中，特别强调函数不要有“副作用”（洋文叫“side effect”）。没有副作用的函数，又称之为纯函数（pure function）。其输出完全依赖于输入。换句话说，只要输入一样，输出就一样。","position":{"start":{"line":42,"column":1,"offset":880},"end":{"line":42,"column":102,"offset":981}}}],"position":{"start":{"line":42,"column":1,"offset":880},"end":{"line":42,"column":102,"offset":981}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"要成为纯函数，函数内部不能读写函数外部变量、不能有设备 I/O（比如读写文件）......","position":{"start":{"line":44,"column":1,"offset":983},"end":{"line":44,"column":46,"offset":1028}}}],"position":{"start":{"line":44,"column":1,"offset":983},"end":{"line":44,"column":46,"offset":1028}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"无副作用是 FP 的重要特性。FP的很多优点来自于此特性。","position":{"start":{"line":46,"column":1,"offset":1030},"end":{"line":46,"column":30,"offset":1059}}}],"position":{"start":{"line":46,"column":1,"offset":1030},"end":{"line":46,"column":30,"offset":1059}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"避免控制流"},"children":[{"type":"element","tagName":"a","properties":{"href":"#避免控制流"},"children":[{"type":"text","value":"避免控制流","position":{"start":{"line":48,"column":4,"offset":1064},"end":{"line":48,"column":9,"offset":1069}}}]}],"position":{"start":{"line":48,"column":1,"offset":1061},"end":{"line":48,"column":9,"offset":1069}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"在 FP 中，尽量避免用控制流语句（循环语句、判断语句）。对于控制流语句，FP 有另外的替代方式。比如：常用递归或高阶函数来替代循环。如此一来，FP 的代码会显得更简洁，更可读。","position":{"start":{"line":50,"column":1,"offset":1071},"end":{"line":50,"column":90,"offset":1160}}}],"position":{"start":{"line":50,"column":1,"offset":1071},"end":{"line":50,"column":90,"offset":1160}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"多态"},"children":[{"type":"element","tagName":"a","properties":{"href":"#多态"},"children":[{"type":"text","value":"多态","position":{"start":{"line":52,"column":4,"offset":1165},"end":{"line":52,"column":6,"offset":1167}}}]}],"position":{"start":{"line":52,"column":1,"offset":1162},"end":{"line":52,"column":6,"offset":1167}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"大部分支持 FP 的语言，也都支持多态。函数参数支持多态化，便可实现非常灵活的功能。","position":{"start":{"line":54,"column":1,"offset":1169},"end":{"line":54,"column":43,"offset":1211}}}],"position":{"start":{"line":54,"column":1,"offset":1169},"end":{"line":54,"column":43,"offset":1211}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"说了这么多，不知道大伙儿明白了没？还是没整明白的同学，请看维基百科的英文词条（中文词条太简单，看不明白滴）。","position":{"start":{"line":56,"column":1,"offset":1213},"end":{"line":56,"column":55,"offset":1267}}}],"position":{"start":{"line":56,"column":1,"offset":1213},"end":{"line":56,"column":55,"offset":1267}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"洋文实在看不下去吗？那不妨看看 IT 大牛 Joel 写的《你的编程语言能这样做吗？》（中文版在“这里”）。此文以 JavaScript 来阐述 FP 的妙处。","position":{"start":{"line":58,"column":1,"offset":1269},"end":{"line":58,"column":81,"offset":1349}}}],"position":{"start":{"line":58,"column":1,"offset":1269},"end":{"line":58,"column":81,"offset":1349}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{"id":"fp-的优点"},"children":[{"type":"element","tagName":"a","properties":{"href":"#fp-的优点"},"children":[{"type":"text","value":"FP 的优点","position":{"start":{"line":60,"column":3,"offset":1353},"end":{"line":60,"column":9,"offset":1359}}}]}],"position":{"start":{"line":60,"column":1,"offset":1351},"end":{"line":60,"column":9,"offset":1359}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"再稍微说一下 FP 的好处，以强化大伙儿学习的动力。","position":{"start":{"line":62,"column":1,"offset":1361},"end":{"line":62,"column":27,"offset":1387}}}],"position":{"start":{"line":62,"column":1,"offset":1361},"end":{"line":62,"column":27,"offset":1387}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"模块化"},"children":[{"type":"element","tagName":"a","properties":{"href":"#模块化"},"children":[{"type":"text","value":"模块化","position":{"start":{"line":64,"column":4,"offset":1392},"end":{"line":64,"column":7,"offset":1395}}}]}],"position":{"start":{"line":64,"column":1,"offset":1389},"end":{"line":64,"column":7,"offset":1395}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"在 FP 的思想中，函数最好是“纯”的，而且最好只完成“单一”的任务。在这种指导思想下，函数的模块化程度自然就高。","position":{"start":{"line":66,"column":1,"offset":1397},"end":{"line":66,"column":58,"offset":1454}}}],"position":{"start":{"line":66,"column":1,"offset":1397},"end":{"line":66,"column":58,"offset":1454}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"可复用性"},"children":[{"type":"element","tagName":"a","properties":{"href":"#可复用性"},"children":[{"type":"text","value":"可复用性","position":{"start":{"line":68,"column":4,"offset":1459},"end":{"line":68,"column":8,"offset":1463}}}]}],"position":{"start":{"line":68,"column":1,"offset":1456},"end":{"line":68,"column":8,"offset":1463}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"模块化程度高，直接的好处就是可复用性好。","position":{"start":{"line":70,"column":1,"offset":1465},"end":{"line":70,"column":21,"offset":1485}}}],"position":{"start":{"line":70,"column":1,"offset":1465},"end":{"line":70,"column":21,"offset":1485}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"可读性"},"children":[{"type":"element","tagName":"a","properties":{"href":"#可读性"},"children":[{"type":"text","value":"可读性","position":{"start":{"line":72,"column":4,"offset":1490},"end":{"line":72,"column":7,"offset":1493}}}]}],"position":{"start":{"line":72,"column":1,"offset":1487},"end":{"line":72,"column":7,"offset":1493}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"刚才说了，FP 的思想强调函数又纯又小。这样的函数，代码的可读性自然好，修改起来也方便。","position":{"start":{"line":74,"column":1,"offset":1495},"end":{"line":74,"column":45,"offset":1539}}}],"position":{"start":{"line":74,"column":1,"offset":1495},"end":{"line":74,"column":45,"offset":1539}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"易于调试"},"children":[{"type":"element","tagName":"a","properties":{"href":"#易于调试"},"children":[{"type":"text","value":"易于调试","position":{"start":{"line":76,"column":4,"offset":1544},"end":{"line":76,"column":8,"offset":1548}}}]}],"position":{"start":{"line":76,"column":1,"offset":1541},"end":{"line":76,"column":8,"offset":1548}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"前面提到了纯函数。如果你的程序中大部分函数都是纯函数，则调试 Bug 会容易很多。像 OOP 中，类的多个成员函数都可以修改类的成员变量，有时候会导致调试极其困难。而纯函数没有此问题。","position":{"start":{"line":78,"column":1,"offset":1550},"end":{"line":78,"column":93,"offset":1642}}}],"position":{"start":{"line":78,"column":1,"offset":1550},"end":{"line":78,"column":93,"offset":1642}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"另外，多线程是调试的一大噩梦。当年俺还专门写过帖子，介绍 C++ 多线程的注意事项（在“这里”）。而纯函数由于没有副作用，不必担心各种“互斥”、“死锁”等问题。","position":{"start":{"line":80,"column":1,"offset":1644},"end":{"line":80,"column":81,"offset":1724}}}],"position":{"start":{"line":80,"column":1,"offset":1644},"end":{"line":80,"column":81,"offset":1724}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"易于测试"},"children":[{"type":"element","tagName":"a","properties":{"href":"#易于测试"},"children":[{"type":"text","value":"易于测试","position":{"start":{"line":82,"column":4,"offset":1729},"end":{"line":82,"column":8,"offset":1733}}}]}],"position":{"start":{"line":82,"column":1,"offset":1726},"end":{"line":82,"column":8,"offset":1733}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"除了易于调试，纯函数的输出仅仅依赖于输入，这一特点注定了它很容易进行单元测试。","position":{"start":{"line":84,"column":1,"offset":1735},"end":{"line":84,"column":40,"offset":1774}}}],"position":{"start":{"line":84,"column":1,"offset":1735},"end":{"line":84,"column":40,"offset":1774}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"适合并行"},"children":[{"type":"element","tagName":"a","properties":{"href":"#适合并行"},"children":[{"type":"text","value":"适合并行","position":{"start":{"line":86,"column":4,"offset":1779},"end":{"line":86,"column":8,"offset":1783}}}]}],"position":{"start":{"line":86,"column":1,"offset":1776},"end":{"line":86,"column":8,"offset":1783}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"在 FP 中，由于纯函数无副作用，很适合编写并行处理的代码。最典型并且在工业界获得巨大成功的例子就是 Erlang。","position":{"start":{"line":88,"column":1,"offset":1785},"end":{"line":88,"column":59,"offset":1843}}}],"position":{"start":{"line":88,"column":1,"offset":1785},"end":{"line":88,"column":59,"offset":1843}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"其它"},"children":[{"type":"element","tagName":"a","properties":{"href":"#其它"},"children":[{"type":"text","value":"其它","position":{"start":{"line":90,"column":4,"offset":1848},"end":{"line":90,"column":6,"offset":1850}}}]}],"position":{"start":{"line":90,"column":1,"offset":1845},"end":{"line":90,"column":6,"offset":1850}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"当然啦，FP 的好处远不止上述这些（比如还有：利于形式化证明）。限于篇幅，俺就不展开了。","position":{"start":{"line":92,"column":1,"offset":1852},"end":{"line":92,"column":45,"offset":1896}}}],"position":{"start":{"line":92,"column":1,"offset":1852},"end":{"line":92,"column":45,"offset":1896}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{"id":"python-的函数语法"},"children":[{"type":"element","tagName":"a","properties":{"href":"#python-的函数语法"},"children":[{"type":"text","value":"Python 的函数语法","position":{"start":{"line":94,"column":3,"offset":1900},"end":{"line":94,"column":15,"offset":1912}}}]}],"position":{"start":{"line":94,"column":1,"offset":1898},"end":{"line":94,"column":15,"offset":1912}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Python 中，常见的函数定义和函数调用，想必各位都晓得了。下面说几种不太常见的，且跟 FP 有关的语法。","position":{"start":{"line":96,"column":1,"offset":1914},"end":{"line":96,"column":55,"offset":1968}}}],"position":{"start":{"line":96,"column":1,"offset":1914},"end":{"line":96,"column":55,"offset":1968}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"函数赋值"},"children":[{"type":"element","tagName":"a","properties":{"href":"#函数赋值"},"children":[{"type":"text","value":"函数赋值","position":{"start":{"line":98,"column":4,"offset":1973},"end":{"line":98,"column":8,"offset":1977}}}]}],"position":{"start":{"line":98,"column":1,"offset":1970},"end":{"line":98,"column":8,"offset":1977}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Python 可以把函数直接赋值给一个变量。举例如下：","position":{"start":{"line":100,"column":1,"offset":1979},"end":{"line":100,"column":28,"offset":2006}}}],"position":{"start":{"line":100,"column":1,"offset":1979},"end":{"line":100,"column":28,"offset":2006}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"class":"shiki shiki-themes github-light github-dark-dimmed","style":"background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7","tabindex":"0"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"def"}]},{"type":"element","tagName":"span","properties":{"style":"color:#6F42C1;--shiki-dark:#DCBDFB"},"children":[{"type":"text","value":" square"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"(n) :  "}]},{"type":"element","tagName":"span","properties":{"style":"color:#6A737D;--shiki-dark:#768390"},"children":[{"type":"text","value":"# 这是一个计算平方的小函数，后面会反复用它举例"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"    return"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" n "}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"**"}]},{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#6CB6FF"},"children":[{"type":"text","value":" 2"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"f "}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" square  "}]},{"type":"element","tagName":"span","properties":{"style":"color:#6A737D;--shiki-dark:#768390"},"children":[{"type":"text","value":"# 此处赋值给变量 f"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"f("}]},{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#6CB6FF"},"children":[{"type":"text","value":"10"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":")  "}]},{"type":"element","tagName":"span","properties":{"style":"color:#6A737D;--shiki-dark:#768390"},"children":[{"type":"text","value":"# 此处返回100。注意：对该变量使用小括号，等同于调用函数"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"匿名定义"},"children":[{"type":"element","tagName":"a","properties":{"href":"#匿名定义"},"children":[{"type":"text","value":"匿名定义","position":{"start":{"line":112,"column":4,"offset":2151},"end":{"line":112,"column":8,"offset":2155}}}]}],"position":{"start":{"line":112,"column":1,"offset":2148},"end":{"line":112,"column":8,"offset":2155}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Python 可以用 lambda 关键字定义【单行】的匿名函数。套用刚才的例子","position":{"start":{"line":114,"column":1,"offset":2157},"end":{"line":114,"column":41,"offset":2197}}}],"position":{"start":{"line":114,"column":1,"offset":2157},"end":{"line":114,"column":41,"offset":2197}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"class":"shiki shiki-themes github-light github-dark-dimmed","style":"background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7","tabindex":"0"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"square "}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":" lambda"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" x : x"}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"**"}]},{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#6CB6FF"},"children":[{"type":"text","value":"2"}]},{"type":"element","tagName":"span","properties":{"style":"color:#6A737D;--shiki-dark:#768390"},"children":[{"type":"text","value":"  # 定义一个单参数的匿名函数，并把该函数赋值给变量"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"square("}]},{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#6CB6FF"},"children":[{"type":"text","value":"10"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":")  "}]},{"type":"element","tagName":"span","properties":{"style":"color:#6A737D;--shiki-dark:#768390"},"children":[{"type":"text","value":"# 此处返回 100"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"嵌套定义"},"children":[{"type":"element","tagName":"a","properties":{"href":"#嵌套定义"},"children":[{"type":"text","value":"嵌套定义","position":{"start":{"line":123,"column":4,"offset":2294},"end":{"line":123,"column":8,"offset":2298}}}]}],"position":{"start":{"line":123,"column":1,"offset":2291},"end":{"line":123,"column":8,"offset":2298}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Python 支持函数的嵌套定义（请看如下例子）。这种语法，在“闭包”中经常出现（后面会具体介绍“闭包”）。","position":{"start":{"line":125,"column":1,"offset":2300},"end":{"line":125,"column":55,"offset":2354}}}],"position":{"start":{"line":125,"column":1,"offset":2300},"end":{"line":125,"column":55,"offset":2354}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"class":"shiki shiki-themes github-light github-dark-dimmed","style":"background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7","tabindex":"0"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"def"}]},{"type":"element","tagName":"span","properties":{"style":"color:#6F42C1;--shiki-dark:#DCBDFB"},"children":[{"type":"text","value":" outer"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"() :  "}]},{"type":"element","tagName":"span","properties":{"style":"color:#6A737D;--shiki-dark:#768390"},"children":[{"type":"text","value":"# 外层函数"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"    s "}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"style":"color:#032F62;--shiki-dark:#96D0FF"},"children":[{"type":"text","value":" \"hello\""}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"    def"}]},{"type":"element","tagName":"span","properties":{"style":"color:#6F42C1;--shiki-dark:#DCBDFB"},"children":[{"type":"text","value":" inner"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"() :  "}]},{"type":"element","tagName":"span","properties":{"style":"color:#6A737D;--shiki-dark:#768390"},"children":[{"type":"text","value":"# 内层函数"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#6CB6FF"},"children":[{"type":"text","value":"        print"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"(s)  "}]},{"type":"element","tagName":"span","properties":{"style":"color:#6A737D;--shiki-dark:#768390"},"children":[{"type":"text","value":"# 此处引用的是外层作用域的变量"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"    inner()  "}]},{"type":"element","tagName":"span","properties":{"style":"color:#6A737D;--shiki-dark:#768390"},"children":[{"type":"text","value":"# 输出 hello"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"    s "}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"style":"color:#032F62;--shiki-dark:#96D0FF"},"children":[{"type":"text","value":" \"world\""}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"    inner()  "}]},{"type":"element","tagName":"span","properties":{"style":"color:#6A737D;--shiki-dark:#768390"},"children":[{"type":"text","value":"# 输出 world"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{"id":"和-fp-相关的内置函数"},"children":[{"type":"element","tagName":"a","properties":{"href":"#和-fp-相关的内置函数"},"children":[{"type":"text","value":"和 FP 相关的内置函数","position":{"start":{"line":140,"column":3,"offset":2539},"end":{"line":140,"column":15,"offset":2551}}}]}],"position":{"start":{"line":140,"column":1,"offset":2537},"end":{"line":140,"column":15,"offset":2551}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Python 内置了一大坨用于 FP 的函数，以方便程序猿写出简洁的代码。在接下去聊之前，俺有必要先介绍其中的2个。","position":{"start":{"line":142,"column":1,"offset":2553},"end":{"line":142,"column":59,"offset":2611}}}],"position":{"start":{"line":142,"column":1,"offset":2553},"end":{"line":142,"column":59,"offset":2611}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"mapfunc-iter"},"children":[{"type":"element","tagName":"a","properties":{"href":"#mapfunc-iter"},"children":[{"type":"text","value":"map(func, iter)","position":{"start":{"line":144,"column":4,"offset":2616},"end":{"line":144,"column":19,"offset":2631}}}]}],"position":{"start":{"line":144,"column":1,"offset":2613},"end":{"line":144,"column":19,"offset":2631}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"为了省事，俺只介绍2参数的 map（正宗的 map 支持 N 参数）。","position":{"start":{"line":146,"column":1,"offset":2633},"end":{"line":146,"column":36,"offset":2668}}}],"position":{"start":{"line":146,"column":1,"offset":2633},"end":{"line":146,"column":36,"offset":2668}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"参数 func 是个函数，参数 iter 是个迭代器（也可以理解为集合）","position":{"start":{"line":148,"column":1,"offset":2670},"end":{"line":148,"column":37,"offset":2706}}}],"position":{"start":{"line":148,"column":1,"offset":2670},"end":{"line":148,"column":37,"offset":2706}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"map() 会把 iter 的每个元素传给 func，并把每次调用的结果保存到一个 list 中，然后返回此 list。","position":{"start":{"line":150,"column":1,"offset":2708},"end":{"line":150,"column":61,"offset":2768}}}],"position":{"start":{"line":150,"column":1,"offset":2708},"end":{"line":150,"column":61,"offset":2768}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"举例：","position":{"start":{"line":152,"column":1,"offset":2770},"end":{"line":152,"column":4,"offset":2773}}}],"position":{"start":{"line":152,"column":1,"offset":2770},"end":{"line":152,"column":4,"offset":2773}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"挨个计算整数 list 的平方：","position":{"start":{"line":154,"column":1,"offset":2775},"end":{"line":154,"column":17,"offset":2791}}}],"position":{"start":{"line":154,"column":1,"offset":2775},"end":{"line":154,"column":17,"offset":2791}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"class":"shiki shiki-themes github-light github-dark-dimmed","style":"background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7","tabindex":"0"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#6CB6FF"},"children":[{"type":"text","value":"map"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"(square, ["}]},{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#6CB6FF"},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":", "}]},{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#6CB6FF"},"children":[{"type":"text","value":"2"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":", "}]},{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#6CB6FF"},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"])  "}]},{"type":"element","tagName":"span","properties":{"style":"color:#6A737D;--shiki-dark:#768390"},"children":[{"type":"text","value":"# 返回 [1, 4, 9]"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"filterfunc-iter"},"children":[{"type":"element","tagName":"a","properties":{"href":"#filterfunc-iter"},"children":[{"type":"text","value":"filter(func, iter)","position":{"start":{"line":162,"column":4,"offset":2852},"end":{"line":162,"column":22,"offset":2870}}}]}],"position":{"start":{"line":162,"column":1,"offset":2849},"end":{"line":162,"column":22,"offset":2870}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"参数含义同 map","position":{"start":{"line":164,"column":1,"offset":2872},"end":{"line":164,"column":10,"offset":2881}}}],"position":{"start":{"line":164,"column":1,"offset":2872},"end":{"line":164,"column":10,"offset":2881}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"filter() 会把 iter 的每个元素传给 func，如果 func 返回结果为 True，就把元素保存在一个 list 中，最后返回此 list。","position":{"start":{"line":166,"column":1,"offset":2883},"end":{"line":166,"column":78,"offset":2960}}}],"position":{"start":{"line":166,"column":1,"offset":2883},"end":{"line":166,"column":78,"offset":2960}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"举例：","position":{"start":{"line":168,"column":1,"offset":2962},"end":{"line":168,"column":4,"offset":2965}}}],"position":{"start":{"line":168,"column":1,"offset":2962},"end":{"line":168,"column":4,"offset":2965}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"要过滤出所有奇数，代码如下：","position":{"start":{"line":170,"column":1,"offset":2967},"end":{"line":170,"column":15,"offset":2981}}}],"position":{"start":{"line":170,"column":1,"offset":2967},"end":{"line":170,"column":15,"offset":2981}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"class":"shiki shiki-themes github-light github-dark-dimmed","style":"background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7","tabindex":"0"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"def"}]},{"type":"element","tagName":"span","properties":{"style":"color:#6F42C1;--shiki-dark:#DCBDFB"},"children":[{"type":"text","value":" odd"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"(n) :"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"    return"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" (n"}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"%"}]},{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#6CB6FF"},"children":[{"type":"text","value":"2"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":") "}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"=="}]},{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#6CB6FF"},"children":[{"type":"text","value":" 1"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#6CB6FF"},"children":[{"type":"text","value":"filter"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"(odd, ["}]},{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#6CB6FF"},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":", "}]},{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#6CB6FF"},"children":[{"type":"text","value":"2"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":", "}]},{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#6CB6FF"},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"])  "}]},{"type":"element","tagName":"span","properties":{"style":"color:#6A737D;--shiki-dark:#768390"},"children":[{"type":"text","value":"# 返回[1, 3]"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"此处可以用上 lambda，把代码简化为一行：","position":{"start":{"line":181,"column":1,"offset":3071},"end":{"line":181,"column":24,"offset":3094}}}],"position":{"start":{"line":181,"column":1,"offset":3071},"end":{"line":181,"column":24,"offset":3094}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"class":"shiki shiki-themes github-light github-dark-dimmed","style":"background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7","tabindex":"0"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#6CB6FF"},"children":[{"type":"text","value":"filter"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"lambda"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" n: (n"}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"%"}]},{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#6CB6FF"},"children":[{"type":"text","value":"2"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"=="}]},{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#6CB6FF"},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":", lst)"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{"id":"消除控制流"},"children":[{"type":"element","tagName":"a","properties":{"href":"#消除控制流"},"children":[{"type":"text","value":"消除控制流","position":{"start":{"line":187,"column":3,"offset":3145},"end":{"line":187,"column":8,"offset":3150}}}]}],"position":{"start":{"line":187,"column":1,"offset":3143},"end":{"line":187,"column":8,"offset":3150}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"为了让大伙儿更深刻体会 FP 风格同传统风格的差别，俺把刚才两个例子组合一下——要求返回整数list 中所有奇数的平方。","position":{"start":{"line":189,"column":1,"offset":3152},"end":{"line":189,"column":61,"offset":3212}}}],"position":{"start":{"line":189,"column":1,"offset":3152},"end":{"line":189,"column":61,"offset":3212}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"传统的写法（有控制流）：","position":{"start":{"line":191,"column":1,"offset":3214},"end":{"line":191,"column":13,"offset":3226}}}],"position":{"start":{"line":191,"column":1,"offset":3214},"end":{"line":191,"column":13,"offset":3226}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"class":"shiki shiki-themes github-light github-dark-dimmed","style":"background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7","tabindex":"0"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"def"}]},{"type":"element","tagName":"span","properties":{"style":"color:#6F42C1;--shiki-dark:#DCBDFB"},"children":[{"type":"text","value":" func1"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"(old_lst) :"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"    new_lst "}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" []"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"    for"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" n "}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"in"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" old_lst :"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"        if"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" odd(n) :"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"            new_lst.append(square(n))"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"    return"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" new_lst"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"FP 的写法（无控制流）：","position":{"start":{"line":204,"column":1,"offset":3383},"end":{"line":204,"column":14,"offset":3396}}}],"position":{"start":{"line":204,"column":1,"offset":3383},"end":{"line":204,"column":14,"offset":3396}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"class":"shiki shiki-themes github-light github-dark-dimmed","style":"background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7","tabindex":"0"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"def"}]},{"type":"element","tagName":"span","properties":{"style":"color:#6F42C1;--shiki-dark:#DCBDFB"},"children":[{"type":"text","value":" func2"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"(lst) :"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"    return"}]},{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#6CB6FF"},"children":[{"type":"text","value":" map"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"(square, "}]},{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#6CB6FF"},"children":[{"type":"text","value":"filter"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"(odd, lst))"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"怎么样？是不是更简洁？连 for / if 这两个关键字都不需要了。","position":{"start":{"line":213,"column":1,"offset":3473},"end":{"line":213,"column":35,"offset":3507}}}],"position":{"start":{"line":213,"column":1,"offset":3473},"end":{"line":213,"column":35,"offset":3507}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{"id":"list-comprehension"},"children":[{"type":"element","tagName":"a","properties":{"href":"#list-comprehension"},"children":[{"type":"text","value":"List Comprehension","position":{"start":{"line":215,"column":3,"offset":3511},"end":{"line":215,"column":21,"offset":3529}}}]}],"position":{"start":{"line":215,"column":1,"offset":3509},"end":{"line":215,"column":21,"offset":3529}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"这个洋文比较难翻译。有人叫做“列表推导”，也有人称为“列表展开”或“列表解析”。（俺比较喜欢头一个翻译——不禁让人联想到“推倒”:）","position":{"start":{"line":217,"column":1,"offset":3531},"end":{"line":217,"column":67,"offset":3597}}}],"position":{"start":{"line":217,"column":1,"offset":3531},"end":{"line":217,"column":67,"offset":3597}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"在 Python 中，这是一个很好吃的语法糖——可以让你写出很简洁、很优雅的代码。","position":{"start":{"line":219,"column":1,"offset":3599},"end":{"line":219,"column":42,"offset":3640}}}],"position":{"start":{"line":219,"column":1,"offset":3599},"end":{"line":219,"column":42,"offset":3640}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"举例1：","position":{"start":{"line":221,"column":1,"offset":3642},"end":{"line":221,"column":5,"offset":3646}}}],"position":{"start":{"line":221,"column":1,"offset":3642},"end":{"line":221,"column":5,"offset":3646}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"还拿刚才过滤奇数的例子。","position":{"start":{"line":223,"column":1,"offset":3648},"end":{"line":223,"column":13,"offset":3660}}}],"position":{"start":{"line":223,"column":1,"offset":3648},"end":{"line":223,"column":13,"offset":3660}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"class":"shiki shiki-themes github-light github-dark-dimmed","style":"background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7","tabindex":"0"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#6CB6FF"},"children":[{"type":"text","value":"filter"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"lambda"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" n: (n"}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"%"}]},{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#6CB6FF"},"children":[{"type":"text","value":"2"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"=="}]},{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#6CB6FF"},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":", lst)"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"上述写法可以等价替换为列表推导：","position":{"start":{"line":231,"column":1,"offset":3711},"end":{"line":231,"column":17,"offset":3727}}}],"position":{"start":{"line":231,"column":1,"offset":3711},"end":{"line":231,"column":17,"offset":3727}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"class":"shiki shiki-themes github-light github-dark-dimmed","style":"background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7","tabindex":"0"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"[n "}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"for"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" n "}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"in"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" lst "}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"if"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" (n"}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"%"}]},{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#6CB6FF"},"children":[{"type":"text","value":"2"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"=="}]},{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#6CB6FF"},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"]"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"举例2：\n　　\n再来一个稍微复杂的例子。假设有两个整数 list，分别存储矩形的宽度和高度。现在想把所有的宽度和高度进行两两组合，把大于 10 的面积打印出来。\n　　\n传统的写法（2层循环，4行代码）","position":{"start":{"line":239,"column":1,"offset":3775},"end":{"line":243,"column":17,"offset":3875}}}],"position":{"start":{"line":239,"column":1,"offset":3775},"end":{"line":243,"column":17,"offset":3875}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"class":"shiki shiki-themes github-light github-dark-dimmed","style":"background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7","tabindex":"0"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"for"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" w "}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"in"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" width :"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"    for"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" h "}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"in"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" height :"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"        if"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" w"}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"*"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"h "}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":">"}]},{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#6CB6FF"},"children":[{"type":"text","value":" 10"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" :"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#6CB6FF"},"children":[{"type":"text","value":"            print"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"(w"}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"*"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"h)"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"FP 的写法（无循环，1行代码，多精致啊）","position":{"start":{"line":254,"column":1,"offset":3978},"end":{"line":254,"column":22,"offset":3999}}}],"position":{"start":{"line":254,"column":1,"offset":3978},"end":{"line":254,"column":22,"offset":3999}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"class":"shiki shiki-themes github-light github-dark-dimmed","style":"background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7","tabindex":"0"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#6CB6FF"},"children":[{"type":"text","value":"print"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"( [w"}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"*"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"h "}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"for"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" w "}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"in"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" width "}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"for"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" h "}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"in"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" height "}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"if"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" w"}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"*"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"h "}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":">"}]},{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#6CB6FF"},"children":[{"type":"text","value":" 10"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"] )"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"除了列表推导，Python 中还有字典推导、集合推导等等。为了省点口水，暂且打住。","position":{"start":{"line":262,"column":1,"offset":4076},"end":{"line":262,"column":42,"offset":4117}}}],"position":{"start":{"line":262,"column":1,"offset":4076},"end":{"line":262,"column":42,"offset":4117}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{"id":"闭包"},"children":[{"type":"element","tagName":"a","properties":{"href":"#闭包"},"children":[{"type":"text","value":"闭包","position":{"start":{"line":264,"column":3,"offset":4121},"end":{"line":264,"column":5,"offset":4123}}}]}],"position":{"start":{"line":264,"column":1,"offset":4119},"end":{"line":264,"column":5,"offset":4123}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"闭包，洋文叫“closure”，解释在“这里”。它是 FP 的常见手法。那闭包到底有啥用捏？俺举一个微积分中，函数求导的例子。（不懂微积分或者对高数有心理阴影的同学，别担心，请把注意力集中在代码上）","position":{"start":{"line":266,"column":1,"offset":4125},"end":{"line":266,"column":100,"offset":4224}}}],"position":{"start":{"line":266,"column":1,"offset":4125},"end":{"line":266,"column":100,"offset":4224}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"class":"shiki shiki-themes github-light github-dark-dimmed","style":"background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7","tabindex":"0"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"def"}]},{"type":"element","tagName":"span","properties":{"style":"color:#6F42C1;--shiki-dark:#DCBDFB"},"children":[{"type":"text","value":" d"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"(f) :"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"    def"}]},{"type":"element","tagName":"span","properties":{"style":"color:#6F42C1;--shiki-dark:#DCBDFB"},"children":[{"type":"text","value":" calc"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"(x) :"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"        dx "}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#6CB6FF"},"children":[{"type":"text","value":" 0.000001"}]},{"type":"element","tagName":"span","properties":{"style":"color:#6A737D;--shiki-dark:#768390"},"children":[{"type":"text","value":"  # 表示无穷小的Δx"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"        return"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" (f(x"}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"+"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"dx) "}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"-"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" f(x)) "}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"/"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" dx  "}]},{"type":"element","tagName":"span","properties":{"style":"color:#6A737D;--shiki-dark:#768390"},"children":[{"type":"text","value":"# 计算斜率。注意，此处引用了外层作用域的变量 f"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"    return"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" calc  "}]},{"type":"element","tagName":"span","properties":{"style":"color:#6A737D;--shiki-dark:#768390"},"children":[{"type":"text","value":"# 此处用函数作为返回值（也就是函数 f 的导数）"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"现在，假设要计算二次函数 f(x) = x2 + x + 1 的导数，只需如下代码：","position":{"start":{"line":278,"column":1,"offset":4413},"end":{"line":278,"column":43,"offset":4455}}}],"position":{"start":{"line":278,"column":1,"offset":4413},"end":{"line":278,"column":43,"offset":4455}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"class":"shiki shiki-themes github-light github-dark-dimmed","style":"background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7","tabindex":"0"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"f "}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":" lambda"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" x : x"}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"**"}]},{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#6CB6FF"},"children":[{"type":"text","value":"2"}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":" +"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" x "}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"+"}]},{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#6CB6FF"},"children":[{"type":"text","value":" 1"}]},{"type":"element","tagName":"span","properties":{"style":"color:#6A737D;--shiki-dark:#768390"},"children":[{"type":"text","value":"  # 先把二次函数用代码表达出来"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"f1 "}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" d(f)  "}]},{"type":"element","tagName":"span","properties":{"style":"color:#6A737D;--shiki-dark:#768390"},"children":[{"type":"text","value":"# 这个f1 就是 f 的一阶导数啦。注意，导数依然是个函数"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"有了一阶导数，就可以很容易地计算该函数在某点的斜率","position":{"start":{"line":287,"column":1,"offset":4561},"end":{"line":287,"column":26,"offset":4586}}}],"position":{"start":{"line":287,"column":1,"offset":4561},"end":{"line":287,"column":26,"offset":4586}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"比如要计算 x=3 的斜率，只需：","position":{"start":{"line":289,"column":1,"offset":4588},"end":{"line":289,"column":18,"offset":4605}}}],"position":{"start":{"line":289,"column":1,"offset":4588},"end":{"line":289,"column":18,"offset":4605}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"class":"shiki shiki-themes github-light github-dark-dimmed","style":"background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7","tabindex":"0"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"f1("}]},{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#6CB6FF"},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":")"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"如果要想得到二阶导数（导数的导数），只需依样画葫芦（瞧这代码写得多优雅）","position":{"start":{"line":297,"column":1,"offset":4630},"end":{"line":297,"column":37,"offset":4666}}}],"position":{"start":{"line":297,"column":1,"offset":4630},"end":{"line":297,"column":37,"offset":4666}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"class":"shiki shiki-themes github-light github-dark-dimmed","style":"background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7","tabindex":"0"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"f2 "}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" d(f1)"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"看到这里，大伙儿不妨设想一下：如果不用 FP，改用 OOP，上述需求该如何实现？俺觉得吧，用 OOP 来求导，这代码写起来多半是又丑又臭。","position":{"start":{"line":305,"column":1,"offset":4696},"end":{"line":305,"column":70,"offset":4765}}}],"position":{"start":{"line":305,"column":1,"offset":4696},"end":{"line":305,"column":70,"offset":4765}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{"id":"结尾"},"children":[{"type":"element","tagName":"a","properties":{"href":"#结尾"},"children":[{"type":"text","value":"结尾","position":{"start":{"line":307,"column":3,"offset":4769},"end":{"line":307,"column":5,"offset":4771}}}]}],"position":{"start":{"line":307,"column":1,"offset":4767},"end":{"line":307,"column":5,"offset":4771}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"今天聊了不少 FP 的语法特性，可惜还是没聊完。由于俺比较懒，而且怕写得太长没人看，所以一些高级话题（比如：迭代器、生成器、等），今天就不介绍了。假如列位看官对那些玩意儿感兴趣，再抽空单独写一帖。","position":{"start":{"line":309,"column":1,"offset":4773},"end":{"line":309,"column":99,"offset":4871}}}],"position":{"start":{"line":309,"column":1,"offset":4773},"end":{"line":309,"column":99,"offset":4871}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"RP-why-choose-python-0-overview"},"children":[{"type":"text","value":"回到本系列的目录","position":{"start":{"line":311,"column":2,"offset":4874},"end":{"line":311,"column":10,"offset":4882}}}],"position":{"start":{"line":311,"column":1,"offset":4873},"end":{"line":311,"column":44,"offset":4916}}}],"position":{"start":{"line":311,"column":1,"offset":4873},"end":{"line":311,"column":44,"offset":4916}}},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"版权声明","position":{"start":{"line":313,"column":5,"offset":4922},"end":{"line":313,"column":9,"offset":4926}}}],"position":{"start":{"line":313,"column":3,"offset":4920},"end":{"line":313,"column":11,"offset":4928}}},{"type":"text","value":"\n本博客（编程随想的博客）所有的原创文章，作者皆保留版权。转载必须包含本声明，保持本文完整，并以超链接形式注明作者编程随想和本文原始地址：","position":{"start":{"line":313,"column":15,"offset":4932},"end":{"line":314,"column":71,"offset":5003}}},{"type":"text","value":"\n","position":{"start":{"line":314,"column":75,"offset":5007},"end":{"line":315,"column":1,"offset":5008}}},{"type":"element","tagName":"a","properties":{"href":"https://program-think.blogspot.com/2012/02/why-choose-python-4-fp.html"},"children":[{"type":"text","value":"https://program-think.blogspot.com/2012/02/why-choose-python-4-fp.html","position":{"start":{"line":315,"column":84,"offset":5091},"end":{"line":315,"column":154,"offset":5161}}}],"position":{"start":{"line":315,"column":84,"offset":5091},"end":{"line":315,"column":154,"offset":5161}}}],"position":{"start":{"line":313,"column":3,"offset":4920},"end":{"line":315,"column":158,"offset":5165}}},{"type":"text","value":"\n"}],"position":{"start":{"line":313,"column":1,"offset":4918},"end":{"line":315,"column":158,"offset":5165}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":316,"column":1,"offset":5166}}}},"__N_SSG":true}