{"pageProps":{"metadata":{"slug":"python-import-script-module-package","date":"2021-12-11","title":".py | import 引用现成的代码","filename":"2021-12-11-python-import-script-module-package.md","url":"python-import-script-module-package","layout":"post","keywords":["md","py"],"excerpt":"正常的编程语言教程，教人配置完开发环境之后就应该进入正题，开始讲语法了。但是咱不正常，所以先来谈谈怎么用别人已经写好的代码。","content":"\n以官网给出的文件结构为例来说明：\n\n```\n\nsound/                          Top-level package\n      __init__.py               Initialize the sound package\n      formats/                  Subpackage for file format conversions\n              __init__.py\n              wavread.py\n              wavwrite.py\n              aiffread.py\n              aiffwrite.py\n              auread.py\n              auwrite.py\n              ...\n      effects/                  Subpackage for sound effects\n              __init__.py\n              echo.py\n              surround.py\n              reverse.py\n              ...\n      filters/                  Subpackage for filters\n              __init__.py\n              equalizer.py\n              vocoder.py\n              karaoke.py\n              ...\n```\n\n## 使用现成的 python 代码\n\n正常的编程语言教程，教人配置完开发环境之后就应该进入正题，开始讲语法了。但是咱不正常，所以先来谈谈怎么用别人已经写好的代码。其中最简单的，就是可以直接通过包管理程序安装的：\n\n```bash\n\npip install sound\n```\n\n然后想要使用某个文件中的函数，比如假装 `wavwrite.py` 中有个函数叫 `write()`，以下写法都是可以的，注意不同 import 方法对应不同的函数调用写法：\n\n```python\n\nimport sound\nsound.formats.wavwrite.write()\n\nfrom sound import formats\nformats.wavwrite.write() \n\nfrom sound.formats import wavwrite\nwavwrite.write()\n\nfrom sound.formats.wavwrite import write\nwrite()\n```\n\n但是，不是所有的 python 代码都可以直接安装，比如一篇论文的研究成果发表之后，处理数据的代码也往往开源，但是这些作者基本上就只是把自己写代码的文件夹公开出来而已，我们把文件夹下载下来，然后直接 `import sound`, 会报错，提示找不到名为 sound 的库。\n\n## python 如何读取代码文件\n\n仔细想想，找不到才是正常的，之前轻轻松松的一句 `import sound`就解决问题，这才不简单——不同的库往往位于文件系统的不同位置，但我们只要写出他们的名字就行了，不需要指定文件路径。电脑硬盘那么大，找到库却几乎是瞬间完成的。\n\n这是因为 python 并没有搜索整个硬盘。有一个变量，一般名为 `PYTHONPATH`，其变量值是一个列表，表中成员是含有 python 库文件夹的路径。当我们在命令行输入命令的时候，电脑会：\n\n- 搜索当前所在的文件夹，也就是在命令行输入 `python` 时终端所在的文件夹。\n- 遍历 `PYTHONPATH` 中的文件夹。\n- python 包管理程序默认的位置，一般是 `<path to python>/site-package`。\n\n看看有没有我们要引用的库，找到了就引入，找不到就报错。\n\n上一节的错误中，如果我们恰好位于 sound 所在的文件夹，然后运行 python，此时第一条生效， `import sound` 不会报错，但在其他位置就不行了。\n\n## 名词解释：interactive, script, module, package\n\n可执行的 python 命令可以出现在以下四个地方，第一种是接受键盘输入的程序，后三种都是文件：\n\n1. interactive: python **交互式界面**，也叫做 calculator mode，也就是在命令行输入 `python`之后出现的界面。每次输入一句，结果在命令行上显示出来。当 python 退出之后，输入过的命令就消失了。\n2. script: python **脚本**文件，也就是在命令行输入 `python somefile.py`里面的那个`somefile.py`。\n    1. 毕竟 python 是一种很轻量化的语言，在一定程度上可以起到 shell 的作用，有些命令我们并不想要用完就扔，而是保存起来以便以后重复执行，另外很多命令的组合组合成函数也可以极大地简化工作。在这种语境之下, interactive 和 script 的关系，就好像 Linux 命令行和 bash script 的关系一样。\n    2. 但同时 python 又是一种功能很全面的语言，完全可以胜任复杂的面向对象编程。在这种语境之下，script 也可以用来指代 main module，也就是程序执行的主文件和入口，和下面的一般的 module 相区分。\n3. module: python **模块**文件，也就是在命令行输入 `python -m another` 里面的那个 `another`（注意这里不写拓展名 `.py`）。按照官方文档的说法，所有 `.py` 文件都是 module。但是实际上这句话很有误导性，上一节的 main module 和一般的 module 非常不同，下一节会详细展开讲。一般提到 module，都是在强调这个文件定义的变量和函数可以被其他的 python 文件引用。\n4. package: python **包**，互相关联的 modules 构成的更高一级的可供引用的结构，简单理解就是含有 `__init__.py` 的文件夹，但是 python 并不是根据文件夹和文件之间的从属关系来确定 package 和 module 之间的关系的，下一节会详细展开讲。\n\n## script vs. module\n\npython 同时兼具脚本语言的灵活性，和各种重型语言的功能全面性。因为前者，所以它并不要求程序作者一定要在一个叫做 `main.py` 的文件里写一个名叫 `Main` 的类, 然后在里面实现一个 `main()` 方法。但是因为后者，没写不代表 python 不需要知道一个复杂程序执行的起点。\n\n这个起点就是不带有 `-m` 参数的 `python` 命令后面跟着的 `.py` 文件，这就使得这个文件变得比其他 `.py` 文件特殊。底层表现就是 python 会不管这个文件的名字叫什么，都将它的 `__name__` 属性赋值为 `\"__main__\"`。这样，即便这个文件可能是一个大型库中间的一个模块，运行的时候 python 连它的真名都不知道，就更找不到它同级和上下级的其他模块了。\n\n各种普通模块被 python 用到的方法就是通过在主模块 main module（或者说 script）中 import。经过“python 如何读取代码文件”一节中的搜索过程之后找到了所需模块或包，模块的名字、模块之间的关系、模块里定义了哪些属性和函数，就被 python 了解了，从而当主模块召唤他们的时候就知道去哪里找相应的代码。除了在被 import 的时候，`python -m` 命令的宾语也可以告诉 python 被运行的模块和包的相对关系：`python -m sound.formats.wavwrite` ，此时 python 执行了 `wavwrite.py` 中的所有可执行的命令，同时知道从 `sound/` 到 `wavwrite.py` 的各个包之间的关系。\n\n## absolute import vs. relative import\n\n开头使用已经安装过的包使用的语法全都是绝对引用 (absolute import)，表现就是 import 语句里面没有以 `.` 作为开头的。\n\n另外一种 import 方法叫相对引用 (relative import)，`.` 表示模块所在的文件夹，`..` 表示模块的上一级文件夹。主要用在各种明确知道自己是工具代码，而且是一个更高层次结构的组成部分，几乎永远不需要被作为主模块运行的代码。\n\n回到开头例子里的文件结构，假如 sound/effects/surround.py 中想要使用 sound/formats/wavwrite.py 和 sound/effects/echo.py 中的函数，可以写成：\n\n```python\n\n# in sound/effects/surround.py\nfrom ..formats import wavwrite\nfrom . import echo\n```\n\n## 如何组织代码，以便自己重用\n\n研究终于推进到了准备写论文的阶段了（学渣本质暴露了），写草稿之余，之前几年时间里做过的处理和分析，接下来的一两个月里需要把工作流程规范化之后迅速重做一遍确认。\n\n随手写散落各处的分析代码需要整理到一起，之前试图统一到一个项目之下，结果总是在某个模块引用其他模块的时候遇到报错。于是才有了这篇文章。\n\n以下是 [这篇文章](https://gist.github.com/ericmjl/27e50331f24db3e8f957d1fe7bbbe510) 给出的一个推荐的项目文件结构：\n\n```\n\n|- notebooks/\n   |- 01-first-logical-notebook.ipynb\n   |- 02-second-logical-notebook.ipynb\n   |- prototype-notebook.ipynb\n   |- archive/\n\t  |- no-longer-useful.ipynb\n|- projectname/\n   |- projectname/\n\t  |- __init__.py\n\t  |- config.py\n\t  |- data.py\n\t  |- utils.py\n   |- setup.py\n|- README.md\n|- data/\n   |- raw/\n   |- processed/\n   |- cleaned/\n|- scripts/\n   |- script1.py\n   |- script2.py\n   |- archive/\n      |- no-longer-useful.py\n|- environment.yml\n```\n\n学过这篇笔记包含的内容，我才理解作者这样的安排。既然主文件 ~~很难~~ 没办法通过相对引用来找到工具代码，索性就把工具代码写成一个完整可安装的库，然后就像 `numpy`, `pandas` 一样在独立的 notebook 和 scripts 中引用。\n\n实际使用的时候，需要安装 `projectname` 下的代码：\n\n```bash\ncd projectname\npip install -e .\n```\n\n要知道为什么这样做，需要理解 `setup.py` 这个文件。这篇文章已经够长了，所以这个话题还是下次再说吧。\n\n## 参考链接\n\n- [What's the difference between a Python module and a Python package?](https://stackoverflow.com/questions/7948494/whats-the-difference-between-a-python-module-and-a-python-package). all python files re modules, while package is a specific kind of modules. It is a subsection of module in the python documentation.\n- Official explanation of python module: [https://docs.python.org/3/tutorial/modules.html](https://docs.python.org/3/tutorial/modules.html)\n- [This stackoverflow  answer: \"run as module\" is different from \"run as script\".](https://stackoverflow.com/questions/14132789/relative-imports-for-the-billionth-time) run as module sets the \"name\" to the module's name, while running as script sets it to `__main__` . Here we use \"name\" instead of `__name__` because it also contains `__path__` in newer versions.\n- A tutorial for project organization: [https://realpython.com/python-application-layouts/](https://realpython.com/python-application-layouts/)\n- Official about packaging: [https://packaging.python.org/en/latest/tutorials/packaging-projects/](https://packaging.python.org/en/latest/tutorials/packaging-projects/)\n- Gist: How to organize data science project: [https://gist.github.com/ericmjl/27e50331f24db3e8f957d1fe7bbbe510](https://gist.github.com/ericmjl/27e50331f24db3e8f957d1fe7bbbe510)\n- From the gist there is a link: [http://drivendata.github.io/cookiecutter-data-science](http://drivendata.github.io/cookiecutter-data-science)"},"mdAst":{"type":"root","children":[{"type":"paragraph","children":[{"type":"text","value":"以官网给出的文件结构为例来说明：","position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":17,"offset":17}}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":17,"offset":17}}},{"type":"code","lang":null,"meta":null,"value":"\nsound/                          Top-level package\n      __init__.py               Initialize the sound package\n      formats/                  Subpackage for file format conversions\n              __init__.py\n              wavread.py\n              wavwrite.py\n              aiffread.py\n              aiffwrite.py\n              auread.py\n              auwrite.py\n              ...\n      effects/                  Subpackage for sound effects\n              __init__.py\n              echo.py\n              surround.py\n              reverse.py\n              ...\n      filters/                  Subpackage for filters\n              __init__.py\n              equalizer.py\n              vocoder.py\n              karaoke.py\n              ...","position":{"start":{"line":4,"column":1,"offset":19},"end":{"line":29,"column":4,"offset":760}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"使用现成的 python 代码","position":{"start":{"line":31,"column":4,"offset":765},"end":{"line":31,"column":19,"offset":780}}}],"position":{"start":{"line":31,"column":1,"offset":762},"end":{"line":31,"column":19,"offset":780}}},{"type":"paragraph","children":[{"type":"text","value":"正常的编程语言教程，教人配置完开发环境之后就应该进入正题，开始讲语法了。但是咱不正常，所以先来谈谈怎么用别人已经写好的代码。其中最简单的，就是可以直接通过包管理程序安装的：","position":{"start":{"line":33,"column":1,"offset":782},"end":{"line":33,"column":87,"offset":868}}}],"position":{"start":{"line":33,"column":1,"offset":782},"end":{"line":33,"column":87,"offset":868}}},{"type":"code","lang":"bash","meta":null,"value":"\npip install sound","position":{"start":{"line":35,"column":1,"offset":870},"end":{"line":38,"column":4,"offset":900}}},{"type":"paragraph","children":[{"type":"text","value":"然后想要使用某个文件中的函数，比如假装 ","position":{"start":{"line":40,"column":1,"offset":902},"end":{"line":40,"column":21,"offset":922}}},{"type":"inlineCode","value":"wavwrite.py","position":{"start":{"line":40,"column":21,"offset":922},"end":{"line":40,"column":34,"offset":935}}},{"type":"text","value":" 中有个函数叫 ","position":{"start":{"line":40,"column":34,"offset":935},"end":{"line":40,"column":42,"offset":943}}},{"type":"inlineCode","value":"write()","position":{"start":{"line":40,"column":42,"offset":943},"end":{"line":40,"column":51,"offset":952}}},{"type":"text","value":"，以下写法都是可以的，注意不同 import 方法对应不同的函数调用写法：","position":{"start":{"line":40,"column":51,"offset":952},"end":{"line":40,"column":88,"offset":989}}}],"position":{"start":{"line":40,"column":1,"offset":902},"end":{"line":40,"column":88,"offset":989}}},{"type":"code","lang":"python","meta":null,"value":"\nimport sound\nsound.formats.wavwrite.write()\n\nfrom sound import formats\nformats.wavwrite.write() \n\nfrom sound.formats import wavwrite\nwavwrite.write()\n\nfrom sound.formats.wavwrite import write\nwrite()","position":{"start":{"line":42,"column":1,"offset":991},"end":{"line":55,"column":4,"offset":1205}}},{"type":"paragraph","children":[{"type":"text","value":"但是，不是所有的 python 代码都可以直接安装，比如一篇论文的研究成果发表之后，处理数据的代码也往往开源，但是这些作者基本上就只是把自己写代码的文件夹公开出来而已，我们把文件夹下载下来，然后直接 ","position":{"start":{"line":57,"column":1,"offset":1207},"end":{"line":57,"column":101,"offset":1307}}},{"type":"inlineCode","value":"import sound","position":{"start":{"line":57,"column":101,"offset":1307},"end":{"line":57,"column":115,"offset":1321}}},{"type":"text","value":", 会报错，提示找不到名为 sound 的库。","position":{"start":{"line":57,"column":115,"offset":1321},"end":{"line":57,"column":138,"offset":1344}}}],"position":{"start":{"line":57,"column":1,"offset":1207},"end":{"line":57,"column":138,"offset":1344}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"python 如何读取代码文件","position":{"start":{"line":59,"column":4,"offset":1349},"end":{"line":59,"column":19,"offset":1364}}}],"position":{"start":{"line":59,"column":1,"offset":1346},"end":{"line":59,"column":19,"offset":1364}}},{"type":"paragraph","children":[{"type":"text","value":"仔细想想，找不到才是正常的，之前轻轻松松的一句 ","position":{"start":{"line":61,"column":1,"offset":1366},"end":{"line":61,"column":25,"offset":1390}}},{"type":"inlineCode","value":"import sound","position":{"start":{"line":61,"column":25,"offset":1390},"end":{"line":61,"column":39,"offset":1404}}},{"type":"text","value":"就解决问题，这才不简单——不同的库往往位于文件系统的不同位置，但我们只要写出他们的名字就行了，不需要指定文件路径。电脑硬盘那么大，找到库却几乎是瞬间完成的。","position":{"start":{"line":61,"column":39,"offset":1404},"end":{"line":61,"column":117,"offset":1482}}}],"position":{"start":{"line":61,"column":1,"offset":1366},"end":{"line":61,"column":117,"offset":1482}}},{"type":"paragraph","children":[{"type":"text","value":"这是因为 python 并没有搜索整个硬盘。有一个变量，一般名为 ","position":{"start":{"line":63,"column":1,"offset":1484},"end":{"line":63,"column":34,"offset":1517}}},{"type":"inlineCode","value":"PYTHONPATH","position":{"start":{"line":63,"column":34,"offset":1517},"end":{"line":63,"column":46,"offset":1529}}},{"type":"text","value":"，其变量值是一个列表，表中成员是含有 python 库文件夹的路径。当我们在命令行输入命令的时候，电脑会：","position":{"start":{"line":63,"column":46,"offset":1529},"end":{"line":63,"column":99,"offset":1582}}}],"position":{"start":{"line":63,"column":1,"offset":1484},"end":{"line":63,"column":99,"offset":1582}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"搜索当前所在的文件夹，也就是在命令行输入 ","position":{"start":{"line":65,"column":3,"offset":1586},"end":{"line":65,"column":24,"offset":1607}}},{"type":"inlineCode","value":"python","position":{"start":{"line":65,"column":24,"offset":1607},"end":{"line":65,"column":32,"offset":1615}}},{"type":"text","value":" 时终端所在的文件夹。","position":{"start":{"line":65,"column":32,"offset":1615},"end":{"line":65,"column":43,"offset":1626}}}],"position":{"start":{"line":65,"column":3,"offset":1586},"end":{"line":65,"column":43,"offset":1626}}}],"position":{"start":{"line":65,"column":1,"offset":1584},"end":{"line":65,"column":43,"offset":1626}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"遍历 ","position":{"start":{"line":66,"column":3,"offset":1629},"end":{"line":66,"column":6,"offset":1632}}},{"type":"inlineCode","value":"PYTHONPATH","position":{"start":{"line":66,"column":6,"offset":1632},"end":{"line":66,"column":18,"offset":1644}}},{"type":"text","value":" 中的文件夹。","position":{"start":{"line":66,"column":18,"offset":1644},"end":{"line":66,"column":25,"offset":1651}}}],"position":{"start":{"line":66,"column":3,"offset":1629},"end":{"line":66,"column":25,"offset":1651}}}],"position":{"start":{"line":66,"column":1,"offset":1627},"end":{"line":66,"column":25,"offset":1651}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"python 包管理程序默认的位置，一般是 ","position":{"start":{"line":67,"column":3,"offset":1654},"end":{"line":67,"column":25,"offset":1676}}},{"type":"inlineCode","value":"<path to python>/site-package","position":{"start":{"line":67,"column":25,"offset":1676},"end":{"line":67,"column":56,"offset":1707}}},{"type":"text","value":"。","position":{"start":{"line":67,"column":56,"offset":1707},"end":{"line":67,"column":57,"offset":1708}}}],"position":{"start":{"line":67,"column":3,"offset":1654},"end":{"line":67,"column":57,"offset":1708}}}],"position":{"start":{"line":67,"column":1,"offset":1652},"end":{"line":67,"column":57,"offset":1708}}}],"position":{"start":{"line":65,"column":1,"offset":1584},"end":{"line":67,"column":57,"offset":1708}}},{"type":"paragraph","children":[{"type":"text","value":"看看有没有我们要引用的库，找到了就引入，找不到就报错。","position":{"start":{"line":69,"column":1,"offset":1710},"end":{"line":69,"column":28,"offset":1737}}}],"position":{"start":{"line":69,"column":1,"offset":1710},"end":{"line":69,"column":28,"offset":1737}}},{"type":"paragraph","children":[{"type":"text","value":"上一节的错误中，如果我们恰好位于 sound 所在的文件夹，然后运行 python，此时第一条生效， ","position":{"start":{"line":71,"column":1,"offset":1739},"end":{"line":71,"column":52,"offset":1790}}},{"type":"inlineCode","value":"import sound","position":{"start":{"line":71,"column":52,"offset":1790},"end":{"line":71,"column":66,"offset":1804}}},{"type":"text","value":" 不会报错，但在其他位置就不行了。","position":{"start":{"line":71,"column":66,"offset":1804},"end":{"line":71,"column":83,"offset":1821}}}],"position":{"start":{"line":71,"column":1,"offset":1739},"end":{"line":71,"column":83,"offset":1821}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"名词解释：interactive, script, module, package","position":{"start":{"line":73,"column":4,"offset":1826},"end":{"line":73,"column":45,"offset":1867}}}],"position":{"start":{"line":73,"column":1,"offset":1823},"end":{"line":73,"column":45,"offset":1867}}},{"type":"paragraph","children":[{"type":"text","value":"可执行的 python 命令可以出现在以下四个地方，第一种是接受键盘输入的程序，后三种都是文件：","position":{"start":{"line":75,"column":1,"offset":1869},"end":{"line":75,"column":49,"offset":1917}}}],"position":{"start":{"line":75,"column":1,"offset":1869},"end":{"line":75,"column":49,"offset":1917}}},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"interactive: python ","position":{"start":{"line":77,"column":4,"offset":1922},"end":{"line":77,"column":24,"offset":1942}}},{"type":"strong","children":[{"type":"text","value":"交互式界面","position":{"start":{"line":77,"column":26,"offset":1944},"end":{"line":77,"column":31,"offset":1949}}}],"position":{"start":{"line":77,"column":24,"offset":1942},"end":{"line":77,"column":33,"offset":1951}}},{"type":"text","value":"，也叫做 calculator mode，也就是在命令行输入 ","position":{"start":{"line":77,"column":33,"offset":1951},"end":{"line":77,"column":64,"offset":1982}}},{"type":"inlineCode","value":"python","position":{"start":{"line":77,"column":64,"offset":1982},"end":{"line":77,"column":72,"offset":1990}}},{"type":"text","value":"之后出现的界面。每次输入一句，结果在命令行上显示出来。当 python 退出之后，输入过的命令就消失了。","position":{"start":{"line":77,"column":72,"offset":1990},"end":{"line":77,"column":124,"offset":2042}}}],"position":{"start":{"line":77,"column":4,"offset":1922},"end":{"line":77,"column":124,"offset":2042}}}],"position":{"start":{"line":77,"column":1,"offset":1919},"end":{"line":77,"column":124,"offset":2042}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"script: python ","position":{"start":{"line":78,"column":4,"offset":2046},"end":{"line":78,"column":19,"offset":2061}}},{"type":"strong","children":[{"type":"text","value":"脚本","position":{"start":{"line":78,"column":21,"offset":2063},"end":{"line":78,"column":23,"offset":2065}}}],"position":{"start":{"line":78,"column":19,"offset":2061},"end":{"line":78,"column":25,"offset":2067}}},{"type":"text","value":"文件，也就是在命令行输入 ","position":{"start":{"line":78,"column":25,"offset":2067},"end":{"line":78,"column":38,"offset":2080}}},{"type":"inlineCode","value":"python somefile.py","position":{"start":{"line":78,"column":38,"offset":2080},"end":{"line":78,"column":58,"offset":2100}}},{"type":"text","value":"里面的那个","position":{"start":{"line":78,"column":58,"offset":2100},"end":{"line":78,"column":63,"offset":2105}}},{"type":"inlineCode","value":"somefile.py","position":{"start":{"line":78,"column":63,"offset":2105},"end":{"line":78,"column":76,"offset":2118}}},{"type":"text","value":"。","position":{"start":{"line":78,"column":76,"offset":2118},"end":{"line":78,"column":77,"offset":2119}}}],"position":{"start":{"line":78,"column":4,"offset":2046},"end":{"line":78,"column":77,"offset":2119}}},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"毕竟 python 是一种很轻量化的语言，在一定程度上可以起到 shell 的作用，有些命令我们并不想要用完就扔，而是保存起来以便以后重复执行，另外很多命令的组合组合成函数也可以极大地简化工作。在这种语境之下, interactive 和 script 的关系，就好像 Linux 命令行和 bash script 的关系一样。","position":{"start":{"line":79,"column":8,"offset":2127},"end":{"line":79,"column":172,"offset":2291}}}],"position":{"start":{"line":79,"column":8,"offset":2127},"end":{"line":79,"column":172,"offset":2291}}}],"position":{"start":{"line":79,"column":5,"offset":2124},"end":{"line":79,"column":172,"offset":2291}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"但同时 python 又是一种功能很全面的语言，完全可以胜任复杂的面向对象编程。在这种语境之下，script 也可以用来指代 main module，也就是程序执行的主文件和入口，和下面的一般的 module 相区分。","position":{"start":{"line":80,"column":8,"offset":2299},"end":{"line":80,"column":117,"offset":2408}}}],"position":{"start":{"line":80,"column":8,"offset":2299},"end":{"line":80,"column":117,"offset":2408}}}],"position":{"start":{"line":80,"column":5,"offset":2296},"end":{"line":80,"column":117,"offset":2408}}}],"position":{"start":{"line":79,"column":5,"offset":2124},"end":{"line":80,"column":117,"offset":2408}}}],"position":{"start":{"line":78,"column":1,"offset":2043},"end":{"line":80,"column":117,"offset":2408}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"module: python ","position":{"start":{"line":81,"column":4,"offset":2412},"end":{"line":81,"column":19,"offset":2427}}},{"type":"strong","children":[{"type":"text","value":"模块","position":{"start":{"line":81,"column":21,"offset":2429},"end":{"line":81,"column":23,"offset":2431}}}],"position":{"start":{"line":81,"column":19,"offset":2427},"end":{"line":81,"column":25,"offset":2433}}},{"type":"text","value":"文件，也就是在命令行输入 ","position":{"start":{"line":81,"column":25,"offset":2433},"end":{"line":81,"column":38,"offset":2446}}},{"type":"inlineCode","value":"python -m another","position":{"start":{"line":81,"column":38,"offset":2446},"end":{"line":81,"column":57,"offset":2465}}},{"type":"text","value":" 里面的那个 ","position":{"start":{"line":81,"column":57,"offset":2465},"end":{"line":81,"column":64,"offset":2472}}},{"type":"inlineCode","value":"another","position":{"start":{"line":81,"column":64,"offset":2472},"end":{"line":81,"column":73,"offset":2481}}},{"type":"text","value":"（注意这里不写拓展名 ","position":{"start":{"line":81,"column":73,"offset":2481},"end":{"line":81,"column":84,"offset":2492}}},{"type":"inlineCode","value":".py","position":{"start":{"line":81,"column":84,"offset":2492},"end":{"line":81,"column":89,"offset":2497}}},{"type":"text","value":"）。按照官方文档的说法，所有 ","position":{"start":{"line":81,"column":89,"offset":2497},"end":{"line":81,"column":104,"offset":2512}}},{"type":"inlineCode","value":".py","position":{"start":{"line":81,"column":104,"offset":2512},"end":{"line":81,"column":109,"offset":2517}}},{"type":"text","value":" 文件都是 module。但是实际上这句话很有误导性，上一节的 main module 和一般的 module 非常不同，下一节会详细展开讲。一般提到 module，都是在强调这个文件定义的变量和函数可以被其他的 python 文件引用。","position":{"start":{"line":81,"column":109,"offset":2517},"end":{"line":81,"column":228,"offset":2636}}}],"position":{"start":{"line":81,"column":4,"offset":2412},"end":{"line":81,"column":228,"offset":2636}}}],"position":{"start":{"line":81,"column":1,"offset":2409},"end":{"line":81,"column":228,"offset":2636}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"package: python ","position":{"start":{"line":82,"column":4,"offset":2640},"end":{"line":82,"column":20,"offset":2656}}},{"type":"strong","children":[{"type":"text","value":"包","position":{"start":{"line":82,"column":22,"offset":2658},"end":{"line":82,"column":23,"offset":2659}}}],"position":{"start":{"line":82,"column":20,"offset":2656},"end":{"line":82,"column":25,"offset":2661}}},{"type":"text","value":"，互相关联的 modules 构成的更高一级的可供引用的结构，简单理解就是含有 ","position":{"start":{"line":82,"column":25,"offset":2661},"end":{"line":82,"column":65,"offset":2701}}},{"type":"inlineCode","value":"__init__.py","position":{"start":{"line":82,"column":65,"offset":2701},"end":{"line":82,"column":78,"offset":2714}}},{"type":"text","value":" 的文件夹，但是 python 并不是根据文件夹和文件之间的从属关系来确定 package 和 module 之间的关系的，下一节会详细展开讲。","position":{"start":{"line":82,"column":78,"offset":2714},"end":{"line":82,"column":150,"offset":2786}}}],"position":{"start":{"line":82,"column":4,"offset":2640},"end":{"line":82,"column":150,"offset":2786}}}],"position":{"start":{"line":82,"column":1,"offset":2637},"end":{"line":82,"column":150,"offset":2786}}}],"position":{"start":{"line":77,"column":1,"offset":1919},"end":{"line":82,"column":150,"offset":2786}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"script vs. module","position":{"start":{"line":84,"column":4,"offset":2791},"end":{"line":84,"column":21,"offset":2808}}}],"position":{"start":{"line":84,"column":1,"offset":2788},"end":{"line":84,"column":21,"offset":2808}}},{"type":"paragraph","children":[{"type":"text","value":"python 同时兼具脚本语言的灵活性，和各种重型语言的功能全面性。因为前者，所以它并不要求程序作者一定要在一个叫做 ","position":{"start":{"line":86,"column":1,"offset":2810},"end":{"line":86,"column":60,"offset":2869}}},{"type":"inlineCode","value":"main.py","position":{"start":{"line":86,"column":60,"offset":2869},"end":{"line":86,"column":69,"offset":2878}}},{"type":"text","value":" 的文件里写一个名叫 ","position":{"start":{"line":86,"column":69,"offset":2878},"end":{"line":86,"column":80,"offset":2889}}},{"type":"inlineCode","value":"Main","position":{"start":{"line":86,"column":80,"offset":2889},"end":{"line":86,"column":86,"offset":2895}}},{"type":"text","value":" 的类, 然后在里面实现一个 ","position":{"start":{"line":86,"column":86,"offset":2895},"end":{"line":86,"column":101,"offset":2910}}},{"type":"inlineCode","value":"main()","position":{"start":{"line":86,"column":101,"offset":2910},"end":{"line":86,"column":109,"offset":2918}}},{"type":"text","value":" 方法。但是因为后者，没写不代表 python 不需要知道一个复杂程序执行的起点。","position":{"start":{"line":86,"column":109,"offset":2918},"end":{"line":86,"column":150,"offset":2959}}}],"position":{"start":{"line":86,"column":1,"offset":2810},"end":{"line":86,"column":150,"offset":2959}}},{"type":"paragraph","children":[{"type":"text","value":"这个起点就是不带有 ","position":{"start":{"line":88,"column":1,"offset":2961},"end":{"line":88,"column":11,"offset":2971}}},{"type":"inlineCode","value":"-m","position":{"start":{"line":88,"column":11,"offset":2971},"end":{"line":88,"column":15,"offset":2975}}},{"type":"text","value":" 参数的 ","position":{"start":{"line":88,"column":15,"offset":2975},"end":{"line":88,"column":20,"offset":2980}}},{"type":"inlineCode","value":"python","position":{"start":{"line":88,"column":20,"offset":2980},"end":{"line":88,"column":28,"offset":2988}}},{"type":"text","value":" 命令后面跟着的 ","position":{"start":{"line":88,"column":28,"offset":2988},"end":{"line":88,"column":37,"offset":2997}}},{"type":"inlineCode","value":".py","position":{"start":{"line":88,"column":37,"offset":2997},"end":{"line":88,"column":42,"offset":3002}}},{"type":"text","value":" 文件，这就使得这个文件变得比其他 ","position":{"start":{"line":88,"column":42,"offset":3002},"end":{"line":88,"column":60,"offset":3020}}},{"type":"inlineCode","value":".py","position":{"start":{"line":88,"column":60,"offset":3020},"end":{"line":88,"column":65,"offset":3025}}},{"type":"text","value":" 文件特殊。底层表现就是 python 会不管这个文件的名字叫什么，都将它的 ","position":{"start":{"line":88,"column":65,"offset":3025},"end":{"line":88,"column":104,"offset":3064}}},{"type":"inlineCode","value":"__name__","position":{"start":{"line":88,"column":104,"offset":3064},"end":{"line":88,"column":114,"offset":3074}}},{"type":"text","value":" 属性赋值为 ","position":{"start":{"line":88,"column":114,"offset":3074},"end":{"line":88,"column":121,"offset":3081}}},{"type":"inlineCode","value":"\"__main__\"","position":{"start":{"line":88,"column":121,"offset":3081},"end":{"line":88,"column":133,"offset":3093}}},{"type":"text","value":"。这样，即便这个文件可能是一个大型库中间的一个模块，运行的时候 python 连它的真名都不知道，就更找不到它同级和上下级的其他模块了。","position":{"start":{"line":88,"column":133,"offset":3093},"end":{"line":88,"column":201,"offset":3161}}}],"position":{"start":{"line":88,"column":1,"offset":2961},"end":{"line":88,"column":201,"offset":3161}}},{"type":"paragraph","children":[{"type":"text","value":"各种普通模块被 python 用到的方法就是通过在主模块 main module（或者说 script）中 import。经过“python 如何读取代码文件”一节中的搜索过程之后找到了所需模块或包，模块的名字、模块之间的关系、模块里定义了哪些属性和函数，就被 python 了解了，从而当主模块召唤他们的时候就知道去哪里找相应的代码。除了在被 import 的时候，","position":{"start":{"line":90,"column":1,"offset":3163},"end":{"line":90,"column":185,"offset":3347}}},{"type":"inlineCode","value":"python -m","position":{"start":{"line":90,"column":185,"offset":3347},"end":{"line":90,"column":196,"offset":3358}}},{"type":"text","value":" 命令的宾语也可以告诉 python 被运行的模块和包的相对关系：","position":{"start":{"line":90,"column":196,"offset":3358},"end":{"line":90,"column":229,"offset":3391}}},{"type":"inlineCode","value":"python -m sound.formats.wavwrite","position":{"start":{"line":90,"column":229,"offset":3391},"end":{"line":90,"column":263,"offset":3425}}},{"type":"text","value":" ，此时 python 执行了 ","position":{"start":{"line":90,"column":263,"offset":3425},"end":{"line":90,"column":279,"offset":3441}}},{"type":"inlineCode","value":"wavwrite.py","position":{"start":{"line":90,"column":279,"offset":3441},"end":{"line":90,"column":292,"offset":3454}}},{"type":"text","value":" 中的所有可执行的命令，同时知道从 ","position":{"start":{"line":90,"column":292,"offset":3454},"end":{"line":90,"column":310,"offset":3472}}},{"type":"inlineCode","value":"sound/","position":{"start":{"line":90,"column":310,"offset":3472},"end":{"line":90,"column":318,"offset":3480}}},{"type":"text","value":" 到 ","position":{"start":{"line":90,"column":318,"offset":3480},"end":{"line":90,"column":321,"offset":3483}}},{"type":"inlineCode","value":"wavwrite.py","position":{"start":{"line":90,"column":321,"offset":3483},"end":{"line":90,"column":334,"offset":3496}}},{"type":"text","value":" 的各个包之间的关系。","position":{"start":{"line":90,"column":334,"offset":3496},"end":{"line":90,"column":345,"offset":3507}}}],"position":{"start":{"line":90,"column":1,"offset":3163},"end":{"line":90,"column":345,"offset":3507}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"absolute import vs. relative import","position":{"start":{"line":92,"column":4,"offset":3512},"end":{"line":92,"column":39,"offset":3547}}}],"position":{"start":{"line":92,"column":1,"offset":3509},"end":{"line":92,"column":39,"offset":3547}}},{"type":"paragraph","children":[{"type":"text","value":"开头使用已经安装过的包使用的语法全都是绝对引用 (absolute import)，表现就是 import 语句里面没有以 ","position":{"start":{"line":94,"column":1,"offset":3549},"end":{"line":94,"column":63,"offset":3611}}},{"type":"inlineCode","value":".","position":{"start":{"line":94,"column":63,"offset":3611},"end":{"line":94,"column":66,"offset":3614}}},{"type":"text","value":" 作为开头的。","position":{"start":{"line":94,"column":66,"offset":3614},"end":{"line":94,"column":73,"offset":3621}}}],"position":{"start":{"line":94,"column":1,"offset":3549},"end":{"line":94,"column":73,"offset":3621}}},{"type":"paragraph","children":[{"type":"text","value":"另外一种 import 方法叫相对引用 (relative import)，","position":{"start":{"line":96,"column":1,"offset":3623},"end":{"line":96,"column":39,"offset":3661}}},{"type":"inlineCode","value":".","position":{"start":{"line":96,"column":39,"offset":3661},"end":{"line":96,"column":42,"offset":3664}}},{"type":"text","value":" 表示模块所在的文件夹，","position":{"start":{"line":96,"column":42,"offset":3664},"end":{"line":96,"column":54,"offset":3676}}},{"type":"inlineCode","value":"..","position":{"start":{"line":96,"column":54,"offset":3676},"end":{"line":96,"column":58,"offset":3680}}},{"type":"text","value":" 表示模块的上一级文件夹。主要用在各种明确知道自己是工具代码，而且是一个更高层次结构的组成部分，几乎永远不需要被作为主模块运行的代码。","position":{"start":{"line":96,"column":58,"offset":3680},"end":{"line":96,"column":125,"offset":3747}}}],"position":{"start":{"line":96,"column":1,"offset":3623},"end":{"line":96,"column":125,"offset":3747}}},{"type":"paragraph","children":[{"type":"text","value":"回到开头例子里的文件结构，假如 sound/effects/surround.py 中想要使用 sound/formats/wavwrite.py 和 sound/effects/echo.py 中的函数，可以写成：","position":{"start":{"line":98,"column":1,"offset":3749},"end":{"line":98,"column":109,"offset":3857}}}],"position":{"start":{"line":98,"column":1,"offset":3749},"end":{"line":98,"column":109,"offset":3857}}},{"type":"code","lang":"python","meta":null,"value":"\n# in sound/effects/surround.py\nfrom ..formats import wavwrite\nfrom . import echo","position":{"start":{"line":100,"column":1,"offset":3859},"end":{"line":105,"column":4,"offset":3954}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"如何组织代码，以便自己重用","position":{"start":{"line":107,"column":4,"offset":3959},"end":{"line":107,"column":17,"offset":3972}}}],"position":{"start":{"line":107,"column":1,"offset":3956},"end":{"line":107,"column":17,"offset":3972}}},{"type":"paragraph","children":[{"type":"text","value":"研究终于推进到了准备写论文的阶段了（学渣本质暴露了），写草稿之余，之前几年时间里做过的处理和分析，接下来的一两个月里需要把工作流程规范化之后迅速重做一遍确认。","position":{"start":{"line":109,"column":1,"offset":3974},"end":{"line":109,"column":80,"offset":4053}}}],"position":{"start":{"line":109,"column":1,"offset":3974},"end":{"line":109,"column":80,"offset":4053}}},{"type":"paragraph","children":[{"type":"text","value":"随手写散落各处的分析代码需要整理到一起，之前试图统一到一个项目之下，结果总是在某个模块引用其他模块的时候遇到报错。于是才有了这篇文章。","position":{"start":{"line":111,"column":1,"offset":4055},"end":{"line":111,"column":68,"offset":4122}}}],"position":{"start":{"line":111,"column":1,"offset":4055},"end":{"line":111,"column":68,"offset":4122}}},{"type":"paragraph","children":[{"type":"text","value":"以下是 ","position":{"start":{"line":113,"column":1,"offset":4124},"end":{"line":113,"column":5,"offset":4128}}},{"type":"link","title":null,"url":"https://gist.github.com/ericmjl/27e50331f24db3e8f957d1fe7bbbe510","children":[{"type":"text","value":"这篇文章","position":{"start":{"line":113,"column":6,"offset":4129},"end":{"line":113,"column":10,"offset":4133}}}],"position":{"start":{"line":113,"column":5,"offset":4128},"end":{"line":113,"column":77,"offset":4200}}},{"type":"text","value":" 给出的一个推荐的项目文件结构：","position":{"start":{"line":113,"column":77,"offset":4200},"end":{"line":113,"column":93,"offset":4216}}}],"position":{"start":{"line":113,"column":1,"offset":4124},"end":{"line":113,"column":93,"offset":4216}}},{"type":"code","lang":null,"meta":null,"value":"\n|- notebooks/\n   |- 01-first-logical-notebook.ipynb\n   |- 02-second-logical-notebook.ipynb\n   |- prototype-notebook.ipynb\n   |- archive/\n\t  |- no-longer-useful.ipynb\n|- projectname/\n   |- projectname/\n\t  |- __init__.py\n\t  |- config.py\n\t  |- data.py\n\t  |- utils.py\n   |- setup.py\n|- README.md\n|- data/\n   |- raw/\n   |- processed/\n   |- cleaned/\n|- scripts/\n   |- script1.py\n   |- script2.py\n   |- archive/\n      |- no-longer-useful.py\n|- environment.yml","position":{"start":{"line":115,"column":1,"offset":4218},"end":{"line":141,"column":4,"offset":4679}}},{"type":"paragraph","children":[{"type":"text","value":"学过这篇笔记包含的内容，我才理解作者这样的安排。既然主文件 ","position":{"start":{"line":143,"column":1,"offset":4681},"end":{"line":143,"column":31,"offset":4711}}},{"type":"delete","children":[{"type":"text","value":"很难","position":{"start":{"line":143,"column":33,"offset":4713},"end":{"line":143,"column":35,"offset":4715}}}],"position":{"start":{"line":143,"column":31,"offset":4711},"end":{"line":143,"column":37,"offset":4717}}},{"type":"text","value":" 没办法通过相对引用来找到工具代码，索性就把工具代码写成一个完整可安装的库，然后就像 ","position":{"start":{"line":143,"column":37,"offset":4717},"end":{"line":143,"column":80,"offset":4760}}},{"type":"inlineCode","value":"numpy","position":{"start":{"line":143,"column":80,"offset":4760},"end":{"line":143,"column":87,"offset":4767}}},{"type":"text","value":", ","position":{"start":{"line":143,"column":87,"offset":4767},"end":{"line":143,"column":89,"offset":4769}}},{"type":"inlineCode","value":"pandas","position":{"start":{"line":143,"column":89,"offset":4769},"end":{"line":143,"column":97,"offset":4777}}},{"type":"text","value":" 一样在独立的 notebook 和 scripts 中引用。","position":{"start":{"line":143,"column":97,"offset":4777},"end":{"line":143,"column":128,"offset":4808}}}],"position":{"start":{"line":143,"column":1,"offset":4681},"end":{"line":143,"column":128,"offset":4808}}},{"type":"paragraph","children":[{"type":"text","value":"实际使用的时候，需要安装 ","position":{"start":{"line":145,"column":1,"offset":4810},"end":{"line":145,"column":14,"offset":4823}}},{"type":"inlineCode","value":"projectname","position":{"start":{"line":145,"column":14,"offset":4823},"end":{"line":145,"column":27,"offset":4836}}},{"type":"text","value":" 下的代码：","position":{"start":{"line":145,"column":27,"offset":4836},"end":{"line":145,"column":33,"offset":4842}}}],"position":{"start":{"line":145,"column":1,"offset":4810},"end":{"line":145,"column":33,"offset":4842}}},{"type":"code","lang":"bash","meta":null,"value":"cd projectname\npip install -e .","position":{"start":{"line":147,"column":1,"offset":4844},"end":{"line":150,"column":4,"offset":4887}}},{"type":"paragraph","children":[{"type":"text","value":"要知道为什么这样做，需要理解 ","position":{"start":{"line":152,"column":1,"offset":4889},"end":{"line":152,"column":16,"offset":4904}}},{"type":"inlineCode","value":"setup.py","position":{"start":{"line":152,"column":16,"offset":4904},"end":{"line":152,"column":26,"offset":4914}}},{"type":"text","value":" 这个文件。这篇文章已经够长了，所以这个话题还是下次再说吧。","position":{"start":{"line":152,"column":26,"offset":4914},"end":{"line":152,"column":56,"offset":4944}}}],"position":{"start":{"line":152,"column":1,"offset":4889},"end":{"line":152,"column":56,"offset":4944}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"参考链接","position":{"start":{"line":154,"column":4,"offset":4949},"end":{"line":154,"column":8,"offset":4953}}}],"position":{"start":{"line":154,"column":1,"offset":4946},"end":{"line":154,"column":8,"offset":4953}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://stackoverflow.com/questions/7948494/whats-the-difference-between-a-python-module-and-a-python-package","children":[{"type":"text","value":"What's the difference between a Python module and a Python package?","position":{"start":{"line":156,"column":4,"offset":4958},"end":{"line":156,"column":71,"offset":5025}}}],"position":{"start":{"line":156,"column":3,"offset":4957},"end":{"line":156,"column":183,"offset":5137}}},{"type":"text","value":". all python files re modules, while package is a specific kind of modules. It is a subsection of module in the python documentation.","position":{"start":{"line":156,"column":183,"offset":5137},"end":{"line":156,"column":316,"offset":5270}}}],"position":{"start":{"line":156,"column":3,"offset":4957},"end":{"line":156,"column":316,"offset":5270}}}],"position":{"start":{"line":156,"column":1,"offset":4955},"end":{"line":156,"column":316,"offset":5270}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Official explanation of python module: ","position":{"start":{"line":157,"column":3,"offset":5273},"end":{"line":157,"column":42,"offset":5312}}},{"type":"link","title":null,"url":"https://docs.python.org/3/tutorial/modules.html","children":[{"type":"text","value":"https://docs.python.org/3/tutorial/modules.html","position":{"start":{"line":157,"column":43,"offset":5313},"end":{"line":157,"column":90,"offset":5360}}}],"position":{"start":{"line":157,"column":42,"offset":5312},"end":{"line":157,"column":140,"offset":5410}}}],"position":{"start":{"line":157,"column":3,"offset":5273},"end":{"line":157,"column":140,"offset":5410}}}],"position":{"start":{"line":157,"column":1,"offset":5271},"end":{"line":157,"column":140,"offset":5410}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://stackoverflow.com/questions/14132789/relative-imports-for-the-billionth-time","children":[{"type":"text","value":"This stackoverflow  answer: \"run as module\" is different from \"run as script\".","position":{"start":{"line":158,"column":4,"offset":5414},"end":{"line":158,"column":82,"offset":5492}}}],"position":{"start":{"line":158,"column":3,"offset":5413},"end":{"line":158,"column":169,"offset":5579}}},{"type":"text","value":" run as module sets the \"name\" to the module's name, while running as script sets it to ","position":{"start":{"line":158,"column":169,"offset":5579},"end":{"line":158,"column":257,"offset":5667}}},{"type":"inlineCode","value":"__main__","position":{"start":{"line":158,"column":257,"offset":5667},"end":{"line":158,"column":267,"offset":5677}}},{"type":"text","value":" . Here we use \"name\" instead of ","position":{"start":{"line":158,"column":267,"offset":5677},"end":{"line":158,"column":300,"offset":5710}}},{"type":"inlineCode","value":"__name__","position":{"start":{"line":158,"column":300,"offset":5710},"end":{"line":158,"column":310,"offset":5720}}},{"type":"text","value":" because it also contains ","position":{"start":{"line":158,"column":310,"offset":5720},"end":{"line":158,"column":336,"offset":5746}}},{"type":"inlineCode","value":"__path__","position":{"start":{"line":158,"column":336,"offset":5746},"end":{"line":158,"column":346,"offset":5756}}},{"type":"text","value":" in newer versions.","position":{"start":{"line":158,"column":346,"offset":5756},"end":{"line":158,"column":365,"offset":5775}}}],"position":{"start":{"line":158,"column":3,"offset":5413},"end":{"line":158,"column":365,"offset":5775}}}],"position":{"start":{"line":158,"column":1,"offset":5411},"end":{"line":158,"column":365,"offset":5775}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"A tutorial for project organization: ","position":{"start":{"line":159,"column":3,"offset":5778},"end":{"line":159,"column":40,"offset":5815}}},{"type":"link","title":null,"url":"https://realpython.com/python-application-layouts/","children":[{"type":"text","value":"https://realpython.com/python-application-layouts/","position":{"start":{"line":159,"column":41,"offset":5816},"end":{"line":159,"column":91,"offset":5866}}}],"position":{"start":{"line":159,"column":40,"offset":5815},"end":{"line":159,"column":144,"offset":5919}}}],"position":{"start":{"line":159,"column":3,"offset":5778},"end":{"line":159,"column":144,"offset":5919}}}],"position":{"start":{"line":159,"column":1,"offset":5776},"end":{"line":159,"column":144,"offset":5919}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Official about packaging: ","position":{"start":{"line":160,"column":3,"offset":5922},"end":{"line":160,"column":29,"offset":5948}}},{"type":"link","title":null,"url":"https://packaging.python.org/en/latest/tutorials/packaging-projects/","children":[{"type":"text","value":"https://packaging.python.org/en/latest/tutorials/packaging-projects/","position":{"start":{"line":160,"column":30,"offset":5949},"end":{"line":160,"column":98,"offset":6017}}}],"position":{"start":{"line":160,"column":29,"offset":5948},"end":{"line":160,"column":169,"offset":6088}}}],"position":{"start":{"line":160,"column":3,"offset":5922},"end":{"line":160,"column":169,"offset":6088}}}],"position":{"start":{"line":160,"column":1,"offset":5920},"end":{"line":160,"column":169,"offset":6088}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Gist: How to organize data science project: ","position":{"start":{"line":161,"column":3,"offset":6091},"end":{"line":161,"column":47,"offset":6135}}},{"type":"link","title":null,"url":"https://gist.github.com/ericmjl/27e50331f24db3e8f957d1fe7bbbe510","children":[{"type":"text","value":"https://gist.github.com/ericmjl/27e50331f24db3e8f957d1fe7bbbe510","position":{"start":{"line":161,"column":48,"offset":6136},"end":{"line":161,"column":112,"offset":6200}}}],"position":{"start":{"line":161,"column":47,"offset":6135},"end":{"line":161,"column":179,"offset":6267}}}],"position":{"start":{"line":161,"column":3,"offset":6091},"end":{"line":161,"column":179,"offset":6267}}}],"position":{"start":{"line":161,"column":1,"offset":6089},"end":{"line":161,"column":179,"offset":6267}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"From the gist there is a link: ","position":{"start":{"line":162,"column":3,"offset":6270},"end":{"line":162,"column":34,"offset":6301}}},{"type":"link","title":null,"url":"http://drivendata.github.io/cookiecutter-data-science","children":[{"type":"text","value":"http://drivendata.github.io/cookiecutter-data-science","position":{"start":{"line":162,"column":35,"offset":6302},"end":{"line":162,"column":88,"offset":6355}}}],"position":{"start":{"line":162,"column":34,"offset":6301},"end":{"line":162,"column":144,"offset":6411}}}],"position":{"start":{"line":162,"column":3,"offset":6270},"end":{"line":162,"column":144,"offset":6411}}}],"position":{"start":{"line":162,"column":1,"offset":6268},"end":{"line":162,"column":144,"offset":6411}}}],"position":{"start":{"line":156,"column":1,"offset":4955},"end":{"line":162,"column":144,"offset":6411}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":162,"column":144,"offset":6411}}},"htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"以官网给出的文件结构为例来说明：","position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":17,"offset":17}}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":17,"offset":17}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"\nsound/                          Top-level package\n      __init__.py               Initialize the sound package\n      formats/                  Subpackage for file format conversions\n              __init__.py\n              wavread.py\n              wavwrite.py\n              aiffread.py\n              aiffwrite.py\n              auread.py\n              auwrite.py\n              ...\n      effects/                  Subpackage for sound effects\n              __init__.py\n              echo.py\n              surround.py\n              reverse.py\n              ...\n      filters/                  Subpackage for filters\n              __init__.py\n              equalizer.py\n              vocoder.py\n              karaoke.py\n              ...\n"}],"position":{"start":{"line":4,"column":1,"offset":19},"end":{"line":29,"column":4,"offset":760}}}],"position":{"start":{"line":4,"column":1,"offset":19},"end":{"line":29,"column":4,"offset":760}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"使用现成的-python-代码"},"children":[{"type":"element","tagName":"a","properties":{"href":"#使用现成的-python-代码"},"children":[{"type":"text","value":"使用现成的 python 代码","position":{"start":{"line":31,"column":4,"offset":765},"end":{"line":31,"column":19,"offset":780}}}]}],"position":{"start":{"line":31,"column":1,"offset":762},"end":{"line":31,"column":19,"offset":780}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"正常的编程语言教程，教人配置完开发环境之后就应该进入正题，开始讲语法了。但是咱不正常，所以先来谈谈怎么用别人已经写好的代码。其中最简单的，就是可以直接通过包管理程序安装的：","position":{"start":{"line":33,"column":1,"offset":782},"end":{"line":33,"column":87,"offset":868}}}],"position":{"start":{"line":33,"column":1,"offset":782},"end":{"line":33,"column":87,"offset":868}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"class":"shiki shiki-themes github-light github-dark-dimmed","style":"background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7","tabindex":"0"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#6F42C1;--shiki-dark:#F69D50"},"children":[{"type":"text","value":"pip"}]},{"type":"element","tagName":"span","properties":{"style":"color:#032F62;--shiki-dark:#96D0FF"},"children":[{"type":"text","value":" install"}]},{"type":"element","tagName":"span","properties":{"style":"color:#032F62;--shiki-dark:#96D0FF"},"children":[{"type":"text","value":" sound"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"然后想要使用某个文件中的函数，比如假装 ","position":{"start":{"line":40,"column":1,"offset":902},"end":{"line":40,"column":21,"offset":922}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"wavwrite.py","position":{"start":{"line":40,"column":21,"offset":922},"end":{"line":40,"column":34,"offset":935}}}],"position":{"start":{"line":40,"column":21,"offset":922},"end":{"line":40,"column":34,"offset":935}}},{"type":"text","value":" 中有个函数叫 ","position":{"start":{"line":40,"column":34,"offset":935},"end":{"line":40,"column":42,"offset":943}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"write()","position":{"start":{"line":40,"column":42,"offset":943},"end":{"line":40,"column":51,"offset":952}}}],"position":{"start":{"line":40,"column":42,"offset":943},"end":{"line":40,"column":51,"offset":952}}},{"type":"text","value":"，以下写法都是可以的，注意不同 import 方法对应不同的函数调用写法：","position":{"start":{"line":40,"column":51,"offset":952},"end":{"line":40,"column":88,"offset":989}}}],"position":{"start":{"line":40,"column":1,"offset":902},"end":{"line":40,"column":88,"offset":989}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"class":"shiki shiki-themes github-light github-dark-dimmed","style":"background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7","tabindex":"0"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"import"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" sound"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"sound.formats.wavwrite.write()"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"from"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" sound "}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"import"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" formats"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"formats.wavwrite.write() "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"from"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" sound.formats "}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"import"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" wavwrite"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"wavwrite.write()"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"from"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" sound.formats.wavwrite "}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"import"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" write"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":"write()"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"但是，不是所有的 python 代码都可以直接安装，比如一篇论文的研究成果发表之后，处理数据的代码也往往开源，但是这些作者基本上就只是把自己写代码的文件夹公开出来而已，我们把文件夹下载下来，然后直接 ","position":{"start":{"line":57,"column":1,"offset":1207},"end":{"line":57,"column":101,"offset":1307}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"import sound","position":{"start":{"line":57,"column":101,"offset":1307},"end":{"line":57,"column":115,"offset":1321}}}],"position":{"start":{"line":57,"column":101,"offset":1307},"end":{"line":57,"column":115,"offset":1321}}},{"type":"text","value":", 会报错，提示找不到名为 sound 的库。","position":{"start":{"line":57,"column":115,"offset":1321},"end":{"line":57,"column":138,"offset":1344}}}],"position":{"start":{"line":57,"column":1,"offset":1207},"end":{"line":57,"column":138,"offset":1344}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"python-如何读取代码文件"},"children":[{"type":"element","tagName":"a","properties":{"href":"#python-如何读取代码文件"},"children":[{"type":"text","value":"python 如何读取代码文件","position":{"start":{"line":59,"column":4,"offset":1349},"end":{"line":59,"column":19,"offset":1364}}}]}],"position":{"start":{"line":59,"column":1,"offset":1346},"end":{"line":59,"column":19,"offset":1364}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"仔细想想，找不到才是正常的，之前轻轻松松的一句 ","position":{"start":{"line":61,"column":1,"offset":1366},"end":{"line":61,"column":25,"offset":1390}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"import sound","position":{"start":{"line":61,"column":25,"offset":1390},"end":{"line":61,"column":39,"offset":1404}}}],"position":{"start":{"line":61,"column":25,"offset":1390},"end":{"line":61,"column":39,"offset":1404}}},{"type":"text","value":"就解决问题，这才不简单——不同的库往往位于文件系统的不同位置，但我们只要写出他们的名字就行了，不需要指定文件路径。电脑硬盘那么大，找到库却几乎是瞬间完成的。","position":{"start":{"line":61,"column":39,"offset":1404},"end":{"line":61,"column":117,"offset":1482}}}],"position":{"start":{"line":61,"column":1,"offset":1366},"end":{"line":61,"column":117,"offset":1482}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"这是因为 python 并没有搜索整个硬盘。有一个变量，一般名为 ","position":{"start":{"line":63,"column":1,"offset":1484},"end":{"line":63,"column":34,"offset":1517}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"PYTHONPATH","position":{"start":{"line":63,"column":34,"offset":1517},"end":{"line":63,"column":46,"offset":1529}}}],"position":{"start":{"line":63,"column":34,"offset":1517},"end":{"line":63,"column":46,"offset":1529}}},{"type":"text","value":"，其变量值是一个列表，表中成员是含有 python 库文件夹的路径。当我们在命令行输入命令的时候，电脑会：","position":{"start":{"line":63,"column":46,"offset":1529},"end":{"line":63,"column":99,"offset":1582}}}],"position":{"start":{"line":63,"column":1,"offset":1484},"end":{"line":63,"column":99,"offset":1582}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"搜索当前所在的文件夹，也就是在命令行输入 ","position":{"start":{"line":65,"column":3,"offset":1586},"end":{"line":65,"column":24,"offset":1607}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"python","position":{"start":{"line":65,"column":24,"offset":1607},"end":{"line":65,"column":32,"offset":1615}}}],"position":{"start":{"line":65,"column":24,"offset":1607},"end":{"line":65,"column":32,"offset":1615}}},{"type":"text","value":" 时终端所在的文件夹。","position":{"start":{"line":65,"column":32,"offset":1615},"end":{"line":65,"column":43,"offset":1626}}}],"position":{"start":{"line":65,"column":1,"offset":1584},"end":{"line":65,"column":43,"offset":1626}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"遍历 ","position":{"start":{"line":66,"column":3,"offset":1629},"end":{"line":66,"column":6,"offset":1632}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"PYTHONPATH","position":{"start":{"line":66,"column":6,"offset":1632},"end":{"line":66,"column":18,"offset":1644}}}],"position":{"start":{"line":66,"column":6,"offset":1632},"end":{"line":66,"column":18,"offset":1644}}},{"type":"text","value":" 中的文件夹。","position":{"start":{"line":66,"column":18,"offset":1644},"end":{"line":66,"column":25,"offset":1651}}}],"position":{"start":{"line":66,"column":1,"offset":1627},"end":{"line":66,"column":25,"offset":1651}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"python 包管理程序默认的位置，一般是 ","position":{"start":{"line":67,"column":3,"offset":1654},"end":{"line":67,"column":25,"offset":1676}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"<path to python>/site-package","position":{"start":{"line":67,"column":25,"offset":1676},"end":{"line":67,"column":56,"offset":1707}}}],"position":{"start":{"line":67,"column":25,"offset":1676},"end":{"line":67,"column":56,"offset":1707}}},{"type":"text","value":"。","position":{"start":{"line":67,"column":56,"offset":1707},"end":{"line":67,"column":57,"offset":1708}}}],"position":{"start":{"line":67,"column":1,"offset":1652},"end":{"line":67,"column":57,"offset":1708}}},{"type":"text","value":"\n"}],"position":{"start":{"line":65,"column":1,"offset":1584},"end":{"line":67,"column":57,"offset":1708}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"看看有没有我们要引用的库，找到了就引入，找不到就报错。","position":{"start":{"line":69,"column":1,"offset":1710},"end":{"line":69,"column":28,"offset":1737}}}],"position":{"start":{"line":69,"column":1,"offset":1710},"end":{"line":69,"column":28,"offset":1737}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"上一节的错误中，如果我们恰好位于 sound 所在的文件夹，然后运行 python，此时第一条生效， ","position":{"start":{"line":71,"column":1,"offset":1739},"end":{"line":71,"column":52,"offset":1790}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"import sound","position":{"start":{"line":71,"column":52,"offset":1790},"end":{"line":71,"column":66,"offset":1804}}}],"position":{"start":{"line":71,"column":52,"offset":1790},"end":{"line":71,"column":66,"offset":1804}}},{"type":"text","value":" 不会报错，但在其他位置就不行了。","position":{"start":{"line":71,"column":66,"offset":1804},"end":{"line":71,"column":83,"offset":1821}}}],"position":{"start":{"line":71,"column":1,"offset":1739},"end":{"line":71,"column":83,"offset":1821}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"名词解释interactive-script-module-package"},"children":[{"type":"element","tagName":"a","properties":{"href":"#名词解释interactive-script-module-package"},"children":[{"type":"text","value":"名词解释：interactive, script, module, package","position":{"start":{"line":73,"column":4,"offset":1826},"end":{"line":73,"column":45,"offset":1867}}}]}],"position":{"start":{"line":73,"column":1,"offset":1823},"end":{"line":73,"column":45,"offset":1867}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"可执行的 python 命令可以出现在以下四个地方，第一种是接受键盘输入的程序，后三种都是文件：","position":{"start":{"line":75,"column":1,"offset":1869},"end":{"line":75,"column":49,"offset":1917}}}],"position":{"start":{"line":75,"column":1,"offset":1869},"end":{"line":75,"column":49,"offset":1917}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"interactive: python ","position":{"start":{"line":77,"column":4,"offset":1922},"end":{"line":77,"column":24,"offset":1942}}},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"交互式界面","position":{"start":{"line":77,"column":26,"offset":1944},"end":{"line":77,"column":31,"offset":1949}}}],"position":{"start":{"line":77,"column":24,"offset":1942},"end":{"line":77,"column":33,"offset":1951}}},{"type":"text","value":"，也叫做 calculator mode，也就是在命令行输入 ","position":{"start":{"line":77,"column":33,"offset":1951},"end":{"line":77,"column":64,"offset":1982}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"python","position":{"start":{"line":77,"column":64,"offset":1982},"end":{"line":77,"column":72,"offset":1990}}}],"position":{"start":{"line":77,"column":64,"offset":1982},"end":{"line":77,"column":72,"offset":1990}}},{"type":"text","value":"之后出现的界面。每次输入一句，结果在命令行上显示出来。当 python 退出之后，输入过的命令就消失了。","position":{"start":{"line":77,"column":72,"offset":1990},"end":{"line":77,"column":124,"offset":2042}}}],"position":{"start":{"line":77,"column":1,"offset":1919},"end":{"line":77,"column":124,"offset":2042}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"script: python ","position":{"start":{"line":78,"column":4,"offset":2046},"end":{"line":78,"column":19,"offset":2061}}},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"脚本","position":{"start":{"line":78,"column":21,"offset":2063},"end":{"line":78,"column":23,"offset":2065}}}],"position":{"start":{"line":78,"column":19,"offset":2061},"end":{"line":78,"column":25,"offset":2067}}},{"type":"text","value":"文件，也就是在命令行输入 ","position":{"start":{"line":78,"column":25,"offset":2067},"end":{"line":78,"column":38,"offset":2080}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"python somefile.py","position":{"start":{"line":78,"column":38,"offset":2080},"end":{"line":78,"column":58,"offset":2100}}}],"position":{"start":{"line":78,"column":38,"offset":2080},"end":{"line":78,"column":58,"offset":2100}}},{"type":"text","value":"里面的那个","position":{"start":{"line":78,"column":58,"offset":2100},"end":{"line":78,"column":63,"offset":2105}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"somefile.py","position":{"start":{"line":78,"column":63,"offset":2105},"end":{"line":78,"column":76,"offset":2118}}}],"position":{"start":{"line":78,"column":63,"offset":2105},"end":{"line":78,"column":76,"offset":2118}}},{"type":"text","value":"。","position":{"start":{"line":78,"column":76,"offset":2118},"end":{"line":78,"column":77,"offset":2119}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"毕竟 python 是一种很轻量化的语言，在一定程度上可以起到 shell 的作用，有些命令我们并不想要用完就扔，而是保存起来以便以后重复执行，另外很多命令的组合组合成函数也可以极大地简化工作。在这种语境之下, interactive 和 script 的关系，就好像 Linux 命令行和 bash script 的关系一样。","position":{"start":{"line":79,"column":8,"offset":2127},"end":{"line":79,"column":172,"offset":2291}}}],"position":{"start":{"line":79,"column":5,"offset":2124},"end":{"line":79,"column":172,"offset":2291}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"但同时 python 又是一种功能很全面的语言，完全可以胜任复杂的面向对象编程。在这种语境之下，script 也可以用来指代 main module，也就是程序执行的主文件和入口，和下面的一般的 module 相区分。","position":{"start":{"line":80,"column":8,"offset":2299},"end":{"line":80,"column":117,"offset":2408}}}],"position":{"start":{"line":80,"column":5,"offset":2296},"end":{"line":80,"column":117,"offset":2408}}},{"type":"text","value":"\n"}],"position":{"start":{"line":79,"column":5,"offset":2124},"end":{"line":80,"column":117,"offset":2408}}},{"type":"text","value":"\n"}],"position":{"start":{"line":78,"column":1,"offset":2043},"end":{"line":80,"column":117,"offset":2408}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"module: python ","position":{"start":{"line":81,"column":4,"offset":2412},"end":{"line":81,"column":19,"offset":2427}}},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"模块","position":{"start":{"line":81,"column":21,"offset":2429},"end":{"line":81,"column":23,"offset":2431}}}],"position":{"start":{"line":81,"column":19,"offset":2427},"end":{"line":81,"column":25,"offset":2433}}},{"type":"text","value":"文件，也就是在命令行输入 ","position":{"start":{"line":81,"column":25,"offset":2433},"end":{"line":81,"column":38,"offset":2446}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"python -m another","position":{"start":{"line":81,"column":38,"offset":2446},"end":{"line":81,"column":57,"offset":2465}}}],"position":{"start":{"line":81,"column":38,"offset":2446},"end":{"line":81,"column":57,"offset":2465}}},{"type":"text","value":" 里面的那个 ","position":{"start":{"line":81,"column":57,"offset":2465},"end":{"line":81,"column":64,"offset":2472}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"another","position":{"start":{"line":81,"column":64,"offset":2472},"end":{"line":81,"column":73,"offset":2481}}}],"position":{"start":{"line":81,"column":64,"offset":2472},"end":{"line":81,"column":73,"offset":2481}}},{"type":"text","value":"（注意这里不写拓展名 ","position":{"start":{"line":81,"column":73,"offset":2481},"end":{"line":81,"column":84,"offset":2492}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":".py","position":{"start":{"line":81,"column":84,"offset":2492},"end":{"line":81,"column":89,"offset":2497}}}],"position":{"start":{"line":81,"column":84,"offset":2492},"end":{"line":81,"column":89,"offset":2497}}},{"type":"text","value":"）。按照官方文档的说法，所有 ","position":{"start":{"line":81,"column":89,"offset":2497},"end":{"line":81,"column":104,"offset":2512}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":".py","position":{"start":{"line":81,"column":104,"offset":2512},"end":{"line":81,"column":109,"offset":2517}}}],"position":{"start":{"line":81,"column":104,"offset":2512},"end":{"line":81,"column":109,"offset":2517}}},{"type":"text","value":" 文件都是 module。但是实际上这句话很有误导性，上一节的 main module 和一般的 module 非常不同，下一节会详细展开讲。一般提到 module，都是在强调这个文件定义的变量和函数可以被其他的 python 文件引用。","position":{"start":{"line":81,"column":109,"offset":2517},"end":{"line":81,"column":228,"offset":2636}}}],"position":{"start":{"line":81,"column":1,"offset":2409},"end":{"line":81,"column":228,"offset":2636}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"package: python ","position":{"start":{"line":82,"column":4,"offset":2640},"end":{"line":82,"column":20,"offset":2656}}},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"包","position":{"start":{"line":82,"column":22,"offset":2658},"end":{"line":82,"column":23,"offset":2659}}}],"position":{"start":{"line":82,"column":20,"offset":2656},"end":{"line":82,"column":25,"offset":2661}}},{"type":"text","value":"，互相关联的 modules 构成的更高一级的可供引用的结构，简单理解就是含有 ","position":{"start":{"line":82,"column":25,"offset":2661},"end":{"line":82,"column":65,"offset":2701}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"__init__.py","position":{"start":{"line":82,"column":65,"offset":2701},"end":{"line":82,"column":78,"offset":2714}}}],"position":{"start":{"line":82,"column":65,"offset":2701},"end":{"line":82,"column":78,"offset":2714}}},{"type":"text","value":" 的文件夹，但是 python 并不是根据文件夹和文件之间的从属关系来确定 package 和 module 之间的关系的，下一节会详细展开讲。","position":{"start":{"line":82,"column":78,"offset":2714},"end":{"line":82,"column":150,"offset":2786}}}],"position":{"start":{"line":82,"column":1,"offset":2637},"end":{"line":82,"column":150,"offset":2786}}},{"type":"text","value":"\n"}],"position":{"start":{"line":77,"column":1,"offset":1919},"end":{"line":82,"column":150,"offset":2786}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"script-vs-module"},"children":[{"type":"element","tagName":"a","properties":{"href":"#script-vs-module"},"children":[{"type":"text","value":"script vs. module","position":{"start":{"line":84,"column":4,"offset":2791},"end":{"line":84,"column":21,"offset":2808}}}]}],"position":{"start":{"line":84,"column":1,"offset":2788},"end":{"line":84,"column":21,"offset":2808}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"python 同时兼具脚本语言的灵活性，和各种重型语言的功能全面性。因为前者，所以它并不要求程序作者一定要在一个叫做 ","position":{"start":{"line":86,"column":1,"offset":2810},"end":{"line":86,"column":60,"offset":2869}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"main.py","position":{"start":{"line":86,"column":60,"offset":2869},"end":{"line":86,"column":69,"offset":2878}}}],"position":{"start":{"line":86,"column":60,"offset":2869},"end":{"line":86,"column":69,"offset":2878}}},{"type":"text","value":" 的文件里写一个名叫 ","position":{"start":{"line":86,"column":69,"offset":2878},"end":{"line":86,"column":80,"offset":2889}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"Main","position":{"start":{"line":86,"column":80,"offset":2889},"end":{"line":86,"column":86,"offset":2895}}}],"position":{"start":{"line":86,"column":80,"offset":2889},"end":{"line":86,"column":86,"offset":2895}}},{"type":"text","value":" 的类, 然后在里面实现一个 ","position":{"start":{"line":86,"column":86,"offset":2895},"end":{"line":86,"column":101,"offset":2910}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"main()","position":{"start":{"line":86,"column":101,"offset":2910},"end":{"line":86,"column":109,"offset":2918}}}],"position":{"start":{"line":86,"column":101,"offset":2910},"end":{"line":86,"column":109,"offset":2918}}},{"type":"text","value":" 方法。但是因为后者，没写不代表 python 不需要知道一个复杂程序执行的起点。","position":{"start":{"line":86,"column":109,"offset":2918},"end":{"line":86,"column":150,"offset":2959}}}],"position":{"start":{"line":86,"column":1,"offset":2810},"end":{"line":86,"column":150,"offset":2959}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"这个起点就是不带有 ","position":{"start":{"line":88,"column":1,"offset":2961},"end":{"line":88,"column":11,"offset":2971}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"-m","position":{"start":{"line":88,"column":11,"offset":2971},"end":{"line":88,"column":15,"offset":2975}}}],"position":{"start":{"line":88,"column":11,"offset":2971},"end":{"line":88,"column":15,"offset":2975}}},{"type":"text","value":" 参数的 ","position":{"start":{"line":88,"column":15,"offset":2975},"end":{"line":88,"column":20,"offset":2980}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"python","position":{"start":{"line":88,"column":20,"offset":2980},"end":{"line":88,"column":28,"offset":2988}}}],"position":{"start":{"line":88,"column":20,"offset":2980},"end":{"line":88,"column":28,"offset":2988}}},{"type":"text","value":" 命令后面跟着的 ","position":{"start":{"line":88,"column":28,"offset":2988},"end":{"line":88,"column":37,"offset":2997}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":".py","position":{"start":{"line":88,"column":37,"offset":2997},"end":{"line":88,"column":42,"offset":3002}}}],"position":{"start":{"line":88,"column":37,"offset":2997},"end":{"line":88,"column":42,"offset":3002}}},{"type":"text","value":" 文件，这就使得这个文件变得比其他 ","position":{"start":{"line":88,"column":42,"offset":3002},"end":{"line":88,"column":60,"offset":3020}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":".py","position":{"start":{"line":88,"column":60,"offset":3020},"end":{"line":88,"column":65,"offset":3025}}}],"position":{"start":{"line":88,"column":60,"offset":3020},"end":{"line":88,"column":65,"offset":3025}}},{"type":"text","value":" 文件特殊。底层表现就是 python 会不管这个文件的名字叫什么，都将它的 ","position":{"start":{"line":88,"column":65,"offset":3025},"end":{"line":88,"column":104,"offset":3064}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"__name__","position":{"start":{"line":88,"column":104,"offset":3064},"end":{"line":88,"column":114,"offset":3074}}}],"position":{"start":{"line":88,"column":104,"offset":3064},"end":{"line":88,"column":114,"offset":3074}}},{"type":"text","value":" 属性赋值为 ","position":{"start":{"line":88,"column":114,"offset":3074},"end":{"line":88,"column":121,"offset":3081}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"\"__main__\"","position":{"start":{"line":88,"column":121,"offset":3081},"end":{"line":88,"column":133,"offset":3093}}}],"position":{"start":{"line":88,"column":121,"offset":3081},"end":{"line":88,"column":133,"offset":3093}}},{"type":"text","value":"。这样，即便这个文件可能是一个大型库中间的一个模块，运行的时候 python 连它的真名都不知道，就更找不到它同级和上下级的其他模块了。","position":{"start":{"line":88,"column":133,"offset":3093},"end":{"line":88,"column":201,"offset":3161}}}],"position":{"start":{"line":88,"column":1,"offset":2961},"end":{"line":88,"column":201,"offset":3161}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"各种普通模块被 python 用到的方法就是通过在主模块 main module（或者说 script）中 import。经过“python 如何读取代码文件”一节中的搜索过程之后找到了所需模块或包，模块的名字、模块之间的关系、模块里定义了哪些属性和函数，就被 python 了解了，从而当主模块召唤他们的时候就知道去哪里找相应的代码。除了在被 import 的时候，","position":{"start":{"line":90,"column":1,"offset":3163},"end":{"line":90,"column":185,"offset":3347}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"python -m","position":{"start":{"line":90,"column":185,"offset":3347},"end":{"line":90,"column":196,"offset":3358}}}],"position":{"start":{"line":90,"column":185,"offset":3347},"end":{"line":90,"column":196,"offset":3358}}},{"type":"text","value":" 命令的宾语也可以告诉 python 被运行的模块和包的相对关系：","position":{"start":{"line":90,"column":196,"offset":3358},"end":{"line":90,"column":229,"offset":3391}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"python -m sound.formats.wavwrite","position":{"start":{"line":90,"column":229,"offset":3391},"end":{"line":90,"column":263,"offset":3425}}}],"position":{"start":{"line":90,"column":229,"offset":3391},"end":{"line":90,"column":263,"offset":3425}}},{"type":"text","value":" ，此时 python 执行了 ","position":{"start":{"line":90,"column":263,"offset":3425},"end":{"line":90,"column":279,"offset":3441}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"wavwrite.py","position":{"start":{"line":90,"column":279,"offset":3441},"end":{"line":90,"column":292,"offset":3454}}}],"position":{"start":{"line":90,"column":279,"offset":3441},"end":{"line":90,"column":292,"offset":3454}}},{"type":"text","value":" 中的所有可执行的命令，同时知道从 ","position":{"start":{"line":90,"column":292,"offset":3454},"end":{"line":90,"column":310,"offset":3472}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"sound/","position":{"start":{"line":90,"column":310,"offset":3472},"end":{"line":90,"column":318,"offset":3480}}}],"position":{"start":{"line":90,"column":310,"offset":3472},"end":{"line":90,"column":318,"offset":3480}}},{"type":"text","value":" 到 ","position":{"start":{"line":90,"column":318,"offset":3480},"end":{"line":90,"column":321,"offset":3483}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"wavwrite.py","position":{"start":{"line":90,"column":321,"offset":3483},"end":{"line":90,"column":334,"offset":3496}}}],"position":{"start":{"line":90,"column":321,"offset":3483},"end":{"line":90,"column":334,"offset":3496}}},{"type":"text","value":" 的各个包之间的关系。","position":{"start":{"line":90,"column":334,"offset":3496},"end":{"line":90,"column":345,"offset":3507}}}],"position":{"start":{"line":90,"column":1,"offset":3163},"end":{"line":90,"column":345,"offset":3507}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"absolute-import-vs-relative-import"},"children":[{"type":"element","tagName":"a","properties":{"href":"#absolute-import-vs-relative-import"},"children":[{"type":"text","value":"absolute import vs. relative import","position":{"start":{"line":92,"column":4,"offset":3512},"end":{"line":92,"column":39,"offset":3547}}}]}],"position":{"start":{"line":92,"column":1,"offset":3509},"end":{"line":92,"column":39,"offset":3547}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"开头使用已经安装过的包使用的语法全都是绝对引用 (absolute import)，表现就是 import 语句里面没有以 ","position":{"start":{"line":94,"column":1,"offset":3549},"end":{"line":94,"column":63,"offset":3611}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":".","position":{"start":{"line":94,"column":63,"offset":3611},"end":{"line":94,"column":66,"offset":3614}}}],"position":{"start":{"line":94,"column":63,"offset":3611},"end":{"line":94,"column":66,"offset":3614}}},{"type":"text","value":" 作为开头的。","position":{"start":{"line":94,"column":66,"offset":3614},"end":{"line":94,"column":73,"offset":3621}}}],"position":{"start":{"line":94,"column":1,"offset":3549},"end":{"line":94,"column":73,"offset":3621}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"另外一种 import 方法叫相对引用 (relative import)，","position":{"start":{"line":96,"column":1,"offset":3623},"end":{"line":96,"column":39,"offset":3661}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":".","position":{"start":{"line":96,"column":39,"offset":3661},"end":{"line":96,"column":42,"offset":3664}}}],"position":{"start":{"line":96,"column":39,"offset":3661},"end":{"line":96,"column":42,"offset":3664}}},{"type":"text","value":" 表示模块所在的文件夹，","position":{"start":{"line":96,"column":42,"offset":3664},"end":{"line":96,"column":54,"offset":3676}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"..","position":{"start":{"line":96,"column":54,"offset":3676},"end":{"line":96,"column":58,"offset":3680}}}],"position":{"start":{"line":96,"column":54,"offset":3676},"end":{"line":96,"column":58,"offset":3680}}},{"type":"text","value":" 表示模块的上一级文件夹。主要用在各种明确知道自己是工具代码，而且是一个更高层次结构的组成部分，几乎永远不需要被作为主模块运行的代码。","position":{"start":{"line":96,"column":58,"offset":3680},"end":{"line":96,"column":125,"offset":3747}}}],"position":{"start":{"line":96,"column":1,"offset":3623},"end":{"line":96,"column":125,"offset":3747}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"回到开头例子里的文件结构，假如 sound/effects/surround.py 中想要使用 sound/formats/wavwrite.py 和 sound/effects/echo.py 中的函数，可以写成：","position":{"start":{"line":98,"column":1,"offset":3749},"end":{"line":98,"column":109,"offset":3857}}}],"position":{"start":{"line":98,"column":1,"offset":3749},"end":{"line":98,"column":109,"offset":3857}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"class":"shiki shiki-themes github-light github-dark-dimmed","style":"background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7","tabindex":"0"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"element","tagName":"span","properties":{"class":"line"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#6A737D;--shiki-dark:#768390"},"children":[{"type":"text","value":"# in sound/effects/surround.py"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"from"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" ..formats "}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"import"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" wavwrite"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"from"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" . "}]},{"type":"element","tagName":"span","properties":{"style":"color:#D73A49;--shiki-dark:#F47067"},"children":[{"type":"text","value":"import"}]},{"type":"element","tagName":"span","properties":{"style":"color:#24292E;--shiki-dark:#ADBAC7"},"children":[{"type":"text","value":" echo"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"如何组织代码以便自己重用"},"children":[{"type":"element","tagName":"a","properties":{"href":"#如何组织代码以便自己重用"},"children":[{"type":"text","value":"如何组织代码，以便自己重用","position":{"start":{"line":107,"column":4,"offset":3959},"end":{"line":107,"column":17,"offset":3972}}}]}],"position":{"start":{"line":107,"column":1,"offset":3956},"end":{"line":107,"column":17,"offset":3972}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"研究终于推进到了准备写论文的阶段了（学渣本质暴露了），写草稿之余，之前几年时间里做过的处理和分析，接下来的一两个月里需要把工作流程规范化之后迅速重做一遍确认。","position":{"start":{"line":109,"column":1,"offset":3974},"end":{"line":109,"column":80,"offset":4053}}}],"position":{"start":{"line":109,"column":1,"offset":3974},"end":{"line":109,"column":80,"offset":4053}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"随手写散落各处的分析代码需要整理到一起，之前试图统一到一个项目之下，结果总是在某个模块引用其他模块的时候遇到报错。于是才有了这篇文章。","position":{"start":{"line":111,"column":1,"offset":4055},"end":{"line":111,"column":68,"offset":4122}}}],"position":{"start":{"line":111,"column":1,"offset":4055},"end":{"line":111,"column":68,"offset":4122}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"以下是 ","position":{"start":{"line":113,"column":1,"offset":4124},"end":{"line":113,"column":5,"offset":4128}}},{"type":"element","tagName":"a","properties":{"href":"https://gist.github.com/ericmjl/27e50331f24db3e8f957d1fe7bbbe510"},"children":[{"type":"text","value":"这篇文章","position":{"start":{"line":113,"column":6,"offset":4129},"end":{"line":113,"column":10,"offset":4133}}}],"position":{"start":{"line":113,"column":5,"offset":4128},"end":{"line":113,"column":77,"offset":4200}}},{"type":"text","value":" 给出的一个推荐的项目文件结构：","position":{"start":{"line":113,"column":77,"offset":4200},"end":{"line":113,"column":93,"offset":4216}}}],"position":{"start":{"line":113,"column":1,"offset":4124},"end":{"line":113,"column":93,"offset":4216}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"\n|- notebooks/\n   |- 01-first-logical-notebook.ipynb\n   |- 02-second-logical-notebook.ipynb\n   |- prototype-notebook.ipynb\n   |- archive/\n\t  |- no-longer-useful.ipynb\n|- projectname/\n   |- projectname/\n\t  |- __init__.py\n\t  |- config.py\n\t  |- data.py\n\t  |- utils.py\n   |- setup.py\n|- README.md\n|- data/\n   |- raw/\n   |- processed/\n   |- cleaned/\n|- scripts/\n   |- script1.py\n   |- script2.py\n   |- archive/\n      |- no-longer-useful.py\n|- environment.yml\n"}],"position":{"start":{"line":115,"column":1,"offset":4218},"end":{"line":141,"column":4,"offset":4679}}}],"position":{"start":{"line":115,"column":1,"offset":4218},"end":{"line":141,"column":4,"offset":4679}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"学过这篇笔记包含的内容，我才理解作者这样的安排。既然主文件 ","position":{"start":{"line":143,"column":1,"offset":4681},"end":{"line":143,"column":31,"offset":4711}}},{"type":"element","tagName":"del","properties":{},"children":[{"type":"text","value":"很难","position":{"start":{"line":143,"column":33,"offset":4713},"end":{"line":143,"column":35,"offset":4715}}}],"position":{"start":{"line":143,"column":31,"offset":4711},"end":{"line":143,"column":37,"offset":4717}}},{"type":"text","value":" 没办法通过相对引用来找到工具代码，索性就把工具代码写成一个完整可安装的库，然后就像 ","position":{"start":{"line":143,"column":37,"offset":4717},"end":{"line":143,"column":80,"offset":4760}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"numpy","position":{"start":{"line":143,"column":80,"offset":4760},"end":{"line":143,"column":87,"offset":4767}}}],"position":{"start":{"line":143,"column":80,"offset":4760},"end":{"line":143,"column":87,"offset":4767}}},{"type":"text","value":", ","position":{"start":{"line":143,"column":87,"offset":4767},"end":{"line":143,"column":89,"offset":4769}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"pandas","position":{"start":{"line":143,"column":89,"offset":4769},"end":{"line":143,"column":97,"offset":4777}}}],"position":{"start":{"line":143,"column":89,"offset":4769},"end":{"line":143,"column":97,"offset":4777}}},{"type":"text","value":" 一样在独立的 notebook 和 scripts 中引用。","position":{"start":{"line":143,"column":97,"offset":4777},"end":{"line":143,"column":128,"offset":4808}}}],"position":{"start":{"line":143,"column":1,"offset":4681},"end":{"line":143,"column":128,"offset":4808}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"实际使用的时候，需要安装 ","position":{"start":{"line":145,"column":1,"offset":4810},"end":{"line":145,"column":14,"offset":4823}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"projectname","position":{"start":{"line":145,"column":14,"offset":4823},"end":{"line":145,"column":27,"offset":4836}}}],"position":{"start":{"line":145,"column":14,"offset":4823},"end":{"line":145,"column":27,"offset":4836}}},{"type":"text","value":" 下的代码：","position":{"start":{"line":145,"column":27,"offset":4836},"end":{"line":145,"column":33,"offset":4842}}}],"position":{"start":{"line":145,"column":1,"offset":4810},"end":{"line":145,"column":33,"offset":4842}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"class":"shiki shiki-themes github-light github-dark-dimmed","style":"background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7","tabindex":"0"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#6CB6FF"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tagName":"span","properties":{"style":"color:#032F62;--shiki-dark:#96D0FF"},"children":[{"type":"text","value":" projectname"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"class":"line"},"children":[{"type":"element","tagName":"span","properties":{"style":"color:#6F42C1;--shiki-dark:#F69D50"},"children":[{"type":"text","value":"pip"}]},{"type":"element","tagName":"span","properties":{"style":"color:#032F62;--shiki-dark:#96D0FF"},"children":[{"type":"text","value":" install"}]},{"type":"element","tagName":"span","properties":{"style":"color:#005CC5;--shiki-dark:#6CB6FF"},"children":[{"type":"text","value":" -e"}]},{"type":"element","tagName":"span","properties":{"style":"color:#032F62;--shiki-dark:#96D0FF"},"children":[{"type":"text","value":" ."}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"要知道为什么这样做，需要理解 ","position":{"start":{"line":152,"column":1,"offset":4889},"end":{"line":152,"column":16,"offset":4904}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"setup.py","position":{"start":{"line":152,"column":16,"offset":4904},"end":{"line":152,"column":26,"offset":4914}}}],"position":{"start":{"line":152,"column":16,"offset":4904},"end":{"line":152,"column":26,"offset":4914}}},{"type":"text","value":" 这个文件。这篇文章已经够长了，所以这个话题还是下次再说吧。","position":{"start":{"line":152,"column":26,"offset":4914},"end":{"line":152,"column":56,"offset":4944}}}],"position":{"start":{"line":152,"column":1,"offset":4889},"end":{"line":152,"column":56,"offset":4944}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"参考链接"},"children":[{"type":"element","tagName":"a","properties":{"href":"#参考链接"},"children":[{"type":"text","value":"参考链接","position":{"start":{"line":154,"column":4,"offset":4949},"end":{"line":154,"column":8,"offset":4953}}}]}],"position":{"start":{"line":154,"column":1,"offset":4946},"end":{"line":154,"column":8,"offset":4953}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://stackoverflow.com/questions/7948494/whats-the-difference-between-a-python-module-and-a-python-package"},"children":[{"type":"text","value":"What's the difference between a Python module and a Python package?","position":{"start":{"line":156,"column":4,"offset":4958},"end":{"line":156,"column":71,"offset":5025}}}],"position":{"start":{"line":156,"column":3,"offset":4957},"end":{"line":156,"column":183,"offset":5137}}},{"type":"text","value":". all python files re modules, while package is a specific kind of modules. It is a subsection of module in the python documentation.","position":{"start":{"line":156,"column":183,"offset":5137},"end":{"line":156,"column":316,"offset":5270}}}],"position":{"start":{"line":156,"column":1,"offset":4955},"end":{"line":156,"column":316,"offset":5270}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Official explanation of python module: ","position":{"start":{"line":157,"column":3,"offset":5273},"end":{"line":157,"column":42,"offset":5312}}},{"type":"element","tagName":"a","properties":{"href":"https://docs.python.org/3/tutorial/modules.html"},"children":[{"type":"text","value":"https://docs.python.org/3/tutorial/modules.html","position":{"start":{"line":157,"column":43,"offset":5313},"end":{"line":157,"column":90,"offset":5360}}}],"position":{"start":{"line":157,"column":42,"offset":5312},"end":{"line":157,"column":140,"offset":5410}}}],"position":{"start":{"line":157,"column":1,"offset":5271},"end":{"line":157,"column":140,"offset":5410}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://stackoverflow.com/questions/14132789/relative-imports-for-the-billionth-time"},"children":[{"type":"text","value":"This stackoverflow  answer: \"run as module\" is different from \"run as script\".","position":{"start":{"line":158,"column":4,"offset":5414},"end":{"line":158,"column":82,"offset":5492}}}],"position":{"start":{"line":158,"column":3,"offset":5413},"end":{"line":158,"column":169,"offset":5579}}},{"type":"text","value":" run as module sets the \"name\" to the module's name, while running as script sets it to ","position":{"start":{"line":158,"column":169,"offset":5579},"end":{"line":158,"column":257,"offset":5667}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"__main__","position":{"start":{"line":158,"column":257,"offset":5667},"end":{"line":158,"column":267,"offset":5677}}}],"position":{"start":{"line":158,"column":257,"offset":5667},"end":{"line":158,"column":267,"offset":5677}}},{"type":"text","value":" . Here we use \"name\" instead of ","position":{"start":{"line":158,"column":267,"offset":5677},"end":{"line":158,"column":300,"offset":5710}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"__name__","position":{"start":{"line":158,"column":300,"offset":5710},"end":{"line":158,"column":310,"offset":5720}}}],"position":{"start":{"line":158,"column":300,"offset":5710},"end":{"line":158,"column":310,"offset":5720}}},{"type":"text","value":" because it also contains ","position":{"start":{"line":158,"column":310,"offset":5720},"end":{"line":158,"column":336,"offset":5746}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"__path__","position":{"start":{"line":158,"column":336,"offset":5746},"end":{"line":158,"column":346,"offset":5756}}}],"position":{"start":{"line":158,"column":336,"offset":5746},"end":{"line":158,"column":346,"offset":5756}}},{"type":"text","value":" in newer versions.","position":{"start":{"line":158,"column":346,"offset":5756},"end":{"line":158,"column":365,"offset":5775}}}],"position":{"start":{"line":158,"column":1,"offset":5411},"end":{"line":158,"column":365,"offset":5775}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"A tutorial for project organization: ","position":{"start":{"line":159,"column":3,"offset":5778},"end":{"line":159,"column":40,"offset":5815}}},{"type":"element","tagName":"a","properties":{"href":"https://realpython.com/python-application-layouts/"},"children":[{"type":"text","value":"https://realpython.com/python-application-layouts/","position":{"start":{"line":159,"column":41,"offset":5816},"end":{"line":159,"column":91,"offset":5866}}}],"position":{"start":{"line":159,"column":40,"offset":5815},"end":{"line":159,"column":144,"offset":5919}}}],"position":{"start":{"line":159,"column":1,"offset":5776},"end":{"line":159,"column":144,"offset":5919}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Official about packaging: ","position":{"start":{"line":160,"column":3,"offset":5922},"end":{"line":160,"column":29,"offset":5948}}},{"type":"element","tagName":"a","properties":{"href":"https://packaging.python.org/en/latest/tutorials/packaging-projects/"},"children":[{"type":"text","value":"https://packaging.python.org/en/latest/tutorials/packaging-projects/","position":{"start":{"line":160,"column":30,"offset":5949},"end":{"line":160,"column":98,"offset":6017}}}],"position":{"start":{"line":160,"column":29,"offset":5948},"end":{"line":160,"column":169,"offset":6088}}}],"position":{"start":{"line":160,"column":1,"offset":5920},"end":{"line":160,"column":169,"offset":6088}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Gist: How to organize data science project: ","position":{"start":{"line":161,"column":3,"offset":6091},"end":{"line":161,"column":47,"offset":6135}}},{"type":"element","tagName":"a","properties":{"href":"https://gist.github.com/ericmjl/27e50331f24db3e8f957d1fe7bbbe510"},"children":[{"type":"text","value":"https://gist.github.com/ericmjl/27e50331f24db3e8f957d1fe7bbbe510","position":{"start":{"line":161,"column":48,"offset":6136},"end":{"line":161,"column":112,"offset":6200}}}],"position":{"start":{"line":161,"column":47,"offset":6135},"end":{"line":161,"column":179,"offset":6267}}}],"position":{"start":{"line":161,"column":1,"offset":6089},"end":{"line":161,"column":179,"offset":6267}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"From the gist there is a link: ","position":{"start":{"line":162,"column":3,"offset":6270},"end":{"line":162,"column":34,"offset":6301}}},{"type":"element","tagName":"a","properties":{"href":"http://drivendata.github.io/cookiecutter-data-science"},"children":[{"type":"text","value":"http://drivendata.github.io/cookiecutter-data-science","position":{"start":{"line":162,"column":35,"offset":6302},"end":{"line":162,"column":88,"offset":6355}}}],"position":{"start":{"line":162,"column":34,"offset":6301},"end":{"line":162,"column":144,"offset":6411}}}],"position":{"start":{"line":162,"column":1,"offset":6268},"end":{"line":162,"column":144,"offset":6411}}},{"type":"text","value":"\n"}],"position":{"start":{"line":156,"column":1,"offset":4955},"end":{"line":162,"column":144,"offset":6411}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":162,"column":144,"offset":6411}}}},"__N_SSG":true}