<!DOCTYPE html>
<!--
Material HTML5 Template (https://naveenshaji.github.io/material)
The MIT License (MIT)

Copyright (c) 2015 Naveen Shaji

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
-->

<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>.py 转载：为什么俺推荐 Python[4]·作为函数式编程语言的 Python | 阿掖山：一个博客</title>
<meta name="generator" content="Jekyll v4.2.1" />
<meta property="og:title" content=".py 转载：为什么俺推荐 Python[4]·作为函数式编程语言的 Python" />
<meta name="author" content="MountAye" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="聊一聊 Python 作为“函数式编程”（以下简称 FP）语言的特点。考虑到本系列面向的是 Python 的门外汉或刚入门的新手，故本文仅介绍若干浅显的 FP 特性。" />
<meta property="og:description" content="聊一聊 Python 作为“函数式编程”（以下简称 FP）语言的特点。考虑到本系列面向的是 Python 的门外汉或刚入门的新手，故本文仅介绍若干浅显的 FP 特性。" />
<link rel="canonical" href="https://mountaye.github.io/blog/articles/RP-why-choose-python-4-fp" />
<meta property="og:url" content="https://mountaye.github.io/blog/articles/RP-why-choose-python-4-fp" />
<meta property="og:site_name" content="阿掖山：一个博客" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-02-07T00:00:00-06:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content=".py 转载：为什么俺推荐 Python[4]·作为函数式编程语言的 Python" />
<script type="application/ld+json">
{"dateModified":"2019-02-07T00:00:00-06:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mountaye.github.io/blog/articles/RP-why-choose-python-4-fp"},"url":"https://mountaye.github.io/blog/articles/RP-why-choose-python-4-fp","author":{"@type":"Person","name":"MountAye"},"@type":"BlogPosting","headline":".py 转载：为什么俺推荐 Python[4]·作为函数式编程语言的 Python","description":"聊一聊 Python 作为“函数式编程”（以下简称 FP）语言的特点。考虑到本系列面向的是 Python 的门外汉或刚入门的新手，故本文仅介绍若干浅显的 FP 特性。","datePublished":"2019-02-07T00:00:00-06:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <meta name="description" content="智力活动是一种生活态度">
    <meta name="viewport" content="width=device-width, initial-scale=0.9, user-scalable=0">
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="/blog/css/materialize.min.css" media="screen,projection" />
    <link rel="stylesheet" href="/blog/css/main.css">
    <link rel="canonical" href="https://mountaye.github.io/blog/articles/RP-why-choose-python-4-fp">
    <script type="text/javascript" async
    src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
    <script type="text/javascript" src="/blog/js/jquery.min.js"></script>
    <script src="/blog/js/jquery.nicescroll.min.js"></script>
    <script src="/blog/js/jquery.nicescroll.plus.js"></script>
    <script src="/blog/js/velocity.min.js"></script>
    <script src="/blog/js/skrollr.min.js"></script>
    <script src="/blog/js/jquery.scrolline.js"></script>
    <script type="text/javascript" src="/blog/js/modernizr.js"></script>
    <script type="text/javascript" src="/blog/js/materialize.min.js"></script>
    <script type="text/javascript" src="/blog/js/main.js"></script>
    <link rel="alternate" type="application/rss+xml" title="阿掖山：一个博客" href="/blog/feed.xml" />
    <link rel="shortcut icon" href="/blog/assets/img/favicon.ico" >
</head>

  <body class="blue lighten-5"> 
    <div class="preloader blue container-fluid row">
      <div class="white-text text-darken-4 xpretext"><h4>阿掖山：一个博客</h4></div>
      <div class="progress blue lighten-2 xpreloading">
        <div class="indeterminate blue darken-3"></div>
      </div>
    </div> 
    <header class="site-header">
  <div class="navbar-fixed">
    <nav class="blue darken-2 waves-effect waves-light">
      <div class="nav-wrapper">
        <div class="container">
          <a href="/blog/" class="brand-logo">
            <i class="mdi-communication-chat"></i>
            阿掖山：一个博客
          </a>
          <ul id="nav-mobile" class="right side-nav">
            <li><a href="/blog/History/">历史</a></li>
            <li><a href="/blog/Topics/">分类</a></li>
            <li><a href="/blog/Comments/">留言</a></li>
            <li><a href="/blog/Links/">友链</a></li>
            <li><a href="/blog/About/">关于</a></li>
          </ul>
          <a class="button-collapse" href="#" data-activates="nav-mobile"><i class="mdi-navigation-menu"></i></a>
        </div>
      </div>
    </nav>
  </div>
</header>

    <a class="darken-2 scrollToTop btn-floating btn-large waves-effect waves-light blue"><i class="mdi-hardware-keyboard-arrow-up"></i></a>
    <div id="page-wrap">
      <div id="main-content">
        <div id="guts">
          <div class="container">
            <div class="wrapper text-darken-3">
              <div id="skrollr-body">
  <div class="post container paper card" style="margin-top: 8em; margin-bottom: 5em;">
    <header class="post-header">
      <h1 class="post-title">.py | 转载：为什么俺推荐 Python[4]·作为函数式编程语言的 Python</h1>
      <p class="post-meta">Feb 7, 2019</p>
    </header>
    <article class="post-content">
        <h3 id="文章目录">文章目录</h3>

<ul>
  <li>什么是函数式编程</li>
  <li>FP 的特点</li>
  <li>FP 的优点</li>
  <li>Python 的函数语法</li>
  <li>和 FP 相关的内置函数</li>
  <li>消除控制流</li>
  <li>List Comprehension</li>
  <li>闭包</li>
  <li>结尾</li>
</ul>

<p>春节前看到热心读者留言，提醒俺：Python 系列好久没更新了（不知不觉又过了一年多）。俺当时回复说：春节假期补上后一篇。昨天听到鞭炮声才发觉元宵已经到了，赶忙写出本文。</p>

<p>前一个帖子介绍了 Python 作为“面向对象编程”（以下简称 OOP）语言的特点，今天来聊一聊 Python 作为“函数式编程”（以下简称 FP）语言的特点。考虑到本系列面向的是 Python 的门外汉或刚入门的新手，故本文仅介绍若干浅显的 FP 特性。</p>

<h1 id="什么是函数式编程">什么是函数式编程</h1>

<p>说实话，“函数式编程语言”是一个很大的话题。由于篇幅有限，本文不可能对这个话题做全面介绍。俺干脆偷一下懒，只简单说说。</p>

<p>从字面上看，所谓的函数式编程，就是以“函数”为中心的“编程范式”。估计有同学又会问了，啥是“编程范式”捏？哎呦，这又是一个很大的话题。通俗来讲，“编程范式”就是指编程的套路。比方说大家很熟悉的 OOP，就是一种“编程范式”。FP 跟 OOP 一样，都是一种编程的套路。做个简单类比：OOP 以“对象/类”作为程序设计的核心，而 FP 以“函数”作为程序设计的核心。</p>

<h1 id="fp的特点">FP的特点</h1>

<p>既然说到 FP，自然要稍微说一下 FP 的特色。</p>

<h2 id="函数很牛x">函数很牛X</h2>

<p>刚才说了，FP 是以函数为中心。既然如此，在支持 FP 的语言中，函数的功能自然十分牛X。通俗地说，OOP 语言中，类/对象能干的事情，FP 语言中的函数也能干。下面做一些对比，以加深大伙儿的印象。</p>

<p>OOP 中，对象可以互相赋值；FP 中，函数可以互相赋值。</p>

<p>OOP 中，对象可以作为函数的参数/返回值，FP 中，函数可以作为函数的参数/返回值。</p>

<p>某些 OOP 中，类可以嵌套定义；FP 中，函数可以嵌套定义。</p>

<p>某些 OOP 中，可以有匿名类；FP 中，可以有匿名函数。</p>

<h2 id="避免副作用">避免副作用</h2>

<p>在 FP 中，特别强调函数不要有“副作用”（洋文叫“side effect”）。没有副作用的函数，又称之为纯函数（pure function）。其输出完全依赖于输入。换句话说，只要输入一样，输出就一样。</p>

<p>要成为纯函数，函数内部不能读写函数外部变量、不能有设备 I/O（比如读写文件）……</p>

<p>无副作用是 FP 的重要特性。FP的很多优点来自于此特性。</p>

<h2 id="避免控制流">避免控制流</h2>

<p>在 FP 中，尽量避免用控制流语句（循环语句、判断语句）。对于控制流语句，FP 有另外的替代方式。比如：常用递归或高阶函数来替代循环。如此一来，FP 的代码会显得更简洁，更可读。</p>

<h2 id="多态">多态</h2>

<p>大部分支持 FP 的语言，也都支持多态。函数参数支持多态化，便可实现非常灵活的功能。</p>

<p>说了这么多，不知道大伙儿明白了没？还是没整明白的同学，请看维基百科的英文词条（中文词条太简单，看不明白滴）。</p>

<p>洋文实在看不下去吗？那不妨看看 IT 大牛 Joel 写的《你的编程语言能这样做吗？》（中文版在“这里”）。此文以 JavaScript 来阐述 FP 的妙处。</p>

<h1 id="fp-的优点">FP 的优点</h1>

<p>再稍微说一下 FP 的好处，以强化大伙儿学习的动力。</p>

<h2 id="模块化">模块化</h2>

<p>在 FP 的思想中，函数最好是“纯”的，而且最好只完成“单一”的任务。在这种指导思想下，函数的模块化程度自然就高。</p>

<h2 id="可复用性">可复用性</h2>

<p>模块化程度高，直接的好处就是可复用性好。</p>

<h2 id="可读性">可读性</h2>

<p>刚才说了，FP 的思想强调函数又纯又小。这样的函数，代码的可读性自然好，修改起来也方便。</p>

<h2 id="易于调试">易于调试</h2>

<p>前面提到了纯函数。如果你的程序中大部分函数都是纯函数，则调试 Bug 会容易很多。像 OOP 中，类的多个成员函数都可以修改类的成员变量，有时候会导致调试极其困难。而纯函数没有此问题。</p>

<p>另外，多线程是调试的一大噩梦。当年俺还专门写过帖子，介绍 C++ 多线程的注意事项（在“这里”）。而纯函数由于没有副作用，不必担心各种“互斥”、“死锁”等问题。</p>

<h2 id="易于测试">易于测试</h2>

<p>除了易于调试，纯函数的输出仅仅依赖于输入，这一特点注定了它很容易进行单元测试。</p>

<h2 id="适合并行">适合并行</h2>

<p>在 FP 中，由于纯函数无副作用，很适合编写并行处理的代码。最典型并且在工业界获得巨大成功的例子就是 Erlang。</p>

<h2 id="其它">其它</h2>

<p>当然啦，FP 的好处远不止上述这些（比如还有：利于形式化证明）。限于篇幅，俺就不展开了。</p>

<h1 id="python-的函数语法">Python 的函数语法</h1>

<p>Python 中，常见的函数定义和函数调用，想必各位都晓得了。下面说几种不太常见的，且跟 FP 有关的语法。</p>

<h2 id="函数赋值">函数赋值</h2>

<p>Python 可以把函数直接赋值给一个变量。举例如下：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">def</span> <span class="nf">square</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="p">:</span>  <span class="c1"># 这是一个计算平方的小函数，后面会反复用它举例
</span>    <span class="k">return</span> <span class="n">n</span> <span class="o">**</span> <span class="mi">2</span>

<span class="n">f</span> <span class="o">=</span> <span class="n">square</span>  <span class="c1"># 此处赋值给变量 f
</span><span class="n">f</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>  <span class="c1"># 此处返回100。注意：对该变量使用小括号，等同于调用函数
</span>
</code></pre></div></div>

<h2 id="匿名定义">匿名定义</h2>

<p>Python 可以用 lambda 关键字定义【单行】的匿名函数。套用刚才的例子</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">square</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span>  <span class="c1"># 定义一个单参数的匿名函数，并把该函数赋值给变量
</span><span class="n">square</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>  <span class="c1"># 此处返回 100
</span>
</code></pre></div></div>

<h2 id="嵌套定义">嵌套定义</h2>

<p>Python 支持函数的嵌套定义（请看如下例子）。这种语法，在“闭包”中经常出现（后面会具体介绍“闭包”）。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">def</span> <span class="nf">outer</span><span class="p">()</span> <span class="p">:</span>  <span class="c1"># 外层函数
</span>    <span class="n">s</span> <span class="o">=</span> <span class="s">"hello"</span>
    <span class="k">def</span> <span class="nf">inner</span><span class="p">()</span> <span class="p">:</span>  <span class="c1"># 内层函数
</span>        <span class="k">print</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>  <span class="c1"># 此处引用的是外层作用域的变量
</span>
    <span class="n">inner</span><span class="p">()</span>  <span class="c1"># 输出 hello
</span>    <span class="n">s</span> <span class="o">=</span> <span class="s">"world"</span>
    <span class="n">inner</span><span class="p">()</span>  <span class="c1"># 输出 world
</span>
</code></pre></div></div>

<h1 id="和-fp-相关的内置函数">和 FP 相关的内置函数</h1>

<p>Python 内置了一大坨用于 FP 的函数，以方便程序猿写出简洁的代码。在接下去聊之前，俺有必要先介绍其中的2个。</p>

<h2 id="mapfunc-iter">map(func, iter)</h2>

<p>为了省事，俺只介绍2参数的 map（正宗的 map 支持 N 参数）。</p>

<p>参数 func 是个函数，参数 iter 是个迭代器（也可以理解为集合）</p>

<p>map() 会把 iter 的每个元素传给 func，并把每次调用的结果保存到一个 list 中，然后返回此 list。</p>

<p>举例：</p>

<p>挨个计算整数 list 的平方：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nb">map</span><span class="p">(</span><span class="n">square</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>  <span class="c1"># 返回 [1, 4, 9]
</span>
</code></pre></div></div>

<h2 id="filterfunc-iter">filter(func, iter)</h2>

<p>参数含义同 map</p>

<p>filter() 会把 iter 的每个元素传给 func，如果 func 返回结果为 True，就把元素保存在一个 list 中，最后返回此 list。</p>

<p>举例：</p>

<p>要过滤出所有奇数，代码如下：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">def</span> <span class="nf">odd</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="p">:</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">n</span><span class="o">%</span><span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>

<span class="nb">filter</span><span class="p">(</span><span class="n">odd</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>  <span class="c1"># 返回[1, 3]
</span>
</code></pre></div></div>

<p>此处可以用上 lambda，把代码简化为一行：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">n</span><span class="p">:</span> <span class="p">(</span><span class="n">n</span><span class="o">%</span><span class="mi">2</span><span class="p">)</span><span class="o">==</span><span class="mi">1</span><span class="p">,</span> <span class="n">lst</span><span class="p">)</span>
</code></pre></div></div>

<h1 id="消除控制流">消除控制流</h1>

<p>为了让大伙儿更深刻体会 FP 风格同传统风格的差别，俺把刚才两个例子组合一下——要求返回整数list 中所有奇数的平方。</p>

<p>传统的写法（有控制流）：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">def</span> <span class="nf">func1</span><span class="p">(</span><span class="n">old_lst</span><span class="p">)</span> <span class="p">:</span>
    <span class="n">new_lst</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">old_lst</span> <span class="p">:</span>
        <span class="k">if</span> <span class="n">odd</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="p">:</span>
            <span class="n">new_lst</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">square</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">new_lst</span>

</code></pre></div></div>

<p>FP 的写法（无控制流）：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">def</span> <span class="nf">func2</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span> <span class="p">:</span>
    <span class="k">return</span> <span class="nb">map</span><span class="p">(</span><span class="n">square</span><span class="p">,</span> <span class="nb">filter</span><span class="p">(</span><span class="n">odd</span><span class="p">,</span> <span class="n">lst</span><span class="p">))</span>

</code></pre></div></div>

<p>怎么样？是不是更简洁？连 for / if 这两个关键字都不需要了。</p>

<h1 id="list-comprehension">List Comprehension</h1>

<p>这个洋文比较难翻译。有人叫做“列表推导”，也有人称为“列表展开”或“列表解析”。（俺比较喜欢头一个翻译——不禁让人联想到“推倒”:）</p>

<p>在 Python 中，这是一个很好吃的语法糖——可以让你写出很简洁、很优雅的代码。</p>

<p>举例1：</p>

<p>还拿刚才过滤奇数的例子。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">n</span><span class="p">:</span> <span class="p">(</span><span class="n">n</span><span class="o">%</span><span class="mi">2</span><span class="p">)</span><span class="o">==</span><span class="mi">1</span><span class="p">,</span> <span class="n">lst</span><span class="p">)</span>

</code></pre></div></div>

<p>上述写法可以等价替换为列表推导：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="p">[</span><span class="n">n</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">lst</span> <span class="k">if</span> <span class="p">(</span><span class="n">n</span><span class="o">%</span><span class="mi">2</span><span class="p">)</span><span class="o">==</span><span class="mi">1</span><span class="p">]</span>

</code></pre></div></div>

<p>举例2：
　　
再来一个稍微复杂的例子。假设有两个整数 list，分别存储矩形的宽度和高度。现在想把所有的宽度和高度进行两两组合，把大于 10 的面积打印出来。
　　
传统的写法（2层循环，4行代码）</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">width</span> <span class="p">:</span>
    <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">height</span> <span class="p">:</span>
        <span class="k">if</span> <span class="n">w</span><span class="o">*</span><span class="n">h</span> <span class="o">&gt;</span> <span class="mi">10</span> <span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="n">w</span><span class="o">*</span><span class="n">h</span><span class="p">)</span>

</code></pre></div></div>

<p>FP 的写法（无循环，1行代码，多精致啊）</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">print</span><span class="p">(</span> <span class="p">[</span><span class="n">w</span><span class="o">*</span><span class="n">h</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">width</span> <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">height</span> <span class="k">if</span> <span class="n">w</span><span class="o">*</span><span class="n">h</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">]</span> <span class="p">)</span>

</code></pre></div></div>

<p>除了列表推导，Python 中还有字典推导、集合推导等等。为了省点口水，暂且打住。</p>

<h1 id="闭包">闭包</h1>

<p>闭包，洋文叫“closure”，解释在“这里”。它是 FP 的常见手法。那闭包到底有啥用捏？俺举一个微积分中，函数求导的例子。（不懂微积分或者对高数有心理阴影的同学，别担心，请把注意力集中在代码上）</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">def</span> <span class="nf">d</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="p">:</span>
    <span class="k">def</span> <span class="nf">calc</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">:</span>
        <span class="n">dx</span> <span class="o">=</span> <span class="mf">0.000001</span>  <span class="c1"># 表示无穷小的Δx
</span>        <span class="k">return</span> <span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">dx</span><span class="p">)</span> <span class="o">-</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">))</span> <span class="o">/</span> <span class="n">dx</span>  <span class="c1"># 计算斜率。注意，此处引用了外层作用域的变量 f
</span>    <span class="k">return</span> <span class="n">calc</span>  <span class="c1"># 此处用函数作为返回值（也就是函数 f 的导数）
</span>
</code></pre></div></div>

<p>现在，假设要计算二次函数 f(x) = x2 + x + 1 的导数，只需如下代码：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>  <span class="c1"># 先把二次函数用代码表达出来
</span><span class="n">f1</span> <span class="o">=</span> <span class="n">d</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>  <span class="c1"># 这个f1 就是 f 的一阶导数啦。注意，导数依然是个函数
</span>
</code></pre></div></div>

<p>有了一阶导数，就可以很容易地计算该函数在某点的斜率</p>

<p>比如要计算 x=3 的斜率，只需：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">f1</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

</code></pre></div></div>

<p>如果要想得到二阶导数（导数的导数），只需依样画葫芦（瞧这代码写得多优雅）</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">f2</span> <span class="o">=</span> <span class="n">d</span><span class="p">(</span><span class="n">f1</span><span class="p">)</span>

</code></pre></div></div>

<p>看到这里，大伙儿不妨设想一下：如果不用 FP，改用 OOP，上述需求该如何实现？俺觉得吧，用 OOP 来求导，这代码写起来多半是又丑又臭。</p>

<h1 id="结尾">结尾</h1>

<p>今天聊了不少 FP 的语法特性，可惜还是没聊完。由于俺比较懒，而且怕写得太长没人看，所以一些高级话题（比如：迭代器、生成器、等），今天就不介绍了。假如列位看官对那些玩意儿感兴趣，再抽空单独写一帖。</p>

<p><a href="/blog/articles/RP-why-choose-python-0-overview">回到本系列的目录</a></p>

<blockquote>
  <p><strong>版权声明</strong><br />
本博客<label for="reference" class="margin-toggle sidenote-number"></label><input type="checkbox" id="reference" class="margin-toggle" /><span class="sidenote card">指编程随想的博客 </span>所有的原创文章，作者皆保留版权。转载必须包含本声明，保持本文完整，并以超链接形式注明作者编程随想和本文原始地址：<br />
<a href="https://program-think.blogspot.com/2012/02/why-choose-python-4-fp.html">https://program-think.blogspot.com/2012/02/why-choose-python-4-fp.html</a></p>
</blockquote>

    </article>
    <br/><br/><br/>
  </div>
  <div class="comment container paper card" style="margin-bottom: 10em;">
    <h2>读者评论</h2><br>
    <div class="center" style="margin: auto; width: 80%;">
    <script src="https://giscus.app/client.js"
            data-repo="MountAye/blog"
            data-repo-id="R_kgDOGc3UIA"
            data-category="Comments"
            data-category-id="DIC_kwDOGc3UIM4CAI4h"
            data-mapping="title"
            data-reactions-enabled="1"
            data-emit-metadata="0"
            data-theme="light"
            data-lang="zh-CN"
            crossorigin="anonymous"
            async>
    </script>
</div>
    <!-- <div class="row">
  <div class="col s8">
    <ul class="tabs blue z-depth-1">
      <li class="waves-effect tab col s3 blue darken-1"><a class="white-text text-darken-4 active" href="#markdown">Markdown</a></li>
      <li class="waves-effect tab col s3 blue darken-1"><a class="white-text text-darken-4" href="#preview">Preview</a></li>
    </ul>
  </div>
  <br><br><br>
  <div id="markdown" class="col s8">
    <div class="row">
      <form class="col s12">
        <div class="row blue-text">
          <div class="input-field col s12">
            <input id="first_name" type="text" class="validate materialize-textarea blue-text text-darken-3">
            <label for="first_name" class="blue-text text-darken-3">Title</label>
          </div>
          <div class="input-field col s12 blue-text">
            <textarea id="textarea1" class="materialize-textarea blue-text text-darken-3"></textarea>
            <label for="textarea1" class="blue-text text-darken-3">Enter comment</label>
          </div>
        </div>
      </form>
    </div>
    <button class="blue darken-1 white-text text-darken-3 waves-effect waves-cyan waves-light btn" href="/"><i class="mdi-action-backup"></i> &nbsp; Log in to comment</button>
  </div>
  <div id="preview" class="col s12">
    hhhh
  </div>
</div> -->
    <br><br><br>
  </div>
</div>

            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- 
<footer class="page-footer blue darken-2">
  <div class="container">
    <div class="row">
      
      <div class="col l3 m6 s12">
        <h5 class="white-text">social-links</h5>
        <ul>
          <li><a class="grey-text text-lighten-3" href="http://facebook.com/xSF.AzraeL/" target="_blank"><i class="mdi-social-person-add"></i> Facebook</a></li>
          <li><a class="grey-text text-lighten-3" href="https://plus.google.com/u/0/114363400342894379257/posts" target="_blank"><i class="mdi-social-plus-one"></i> Google+</a></li>
          <li><a class="grey-text text-lighten-3" href="http://github.com/naveenshaji/" target="_blank"><i class="mdi-notification-adb"></i> GitHub</a></li>
        </ul>
      </div>
             
      <div class="col l3 m6 s12">
      <h5 class="white-text">where-i-live</h5>
      <p class="grey-text text-lighten-4">TC 11/1827<br>West Cliff Gardens 35<br>Kowdiar, Trivandrum<br>&nbsp;</p>
      </div>
      
      <div class="col l3 m6 s12">
        <h5 class="white-text">contact-me</h5>
        <p class="grey-text text-lighten-4">+91-9496-74-7070<br>naveen@pixelblenders.com<br>xsf.azrael@gmail.com</p>
      </div>

                         
      <div class="col l3 m6 s12">
        <h5 class="white-text">MountAye</h5>
        <p class="grey-text text-lighten-4">MountAye: A Blog</p>
      </div>


    </div>
  </div>
  <div class="footer-copyright">
    <div class="container">
      © 2021 MountAye
      <a class="grey-text text-lighten-4 right" href="http://mountaye.github.io/" target="_blank">MountAye</a>
    </div>
  </div>
</footer> -->

  </body>
</html>
