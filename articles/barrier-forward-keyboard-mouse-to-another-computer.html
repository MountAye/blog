<!DOCTYPE html>
<!--
Material HTML5 Template (https://naveenshaji.github.io/material)
The MIT License (MIT)

Copyright (c) 2015 Naveen Shaji

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
-->

<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>.md 扫盲Barrier，用笔记本键鼠无线控制台式机 | 阿掖山：一个博客</title>
<meta name="generator" content="Jekyll v4.2.1" />
<meta property="og:title" content=".md 扫盲Barrier，用笔记本键鼠无线控制台式机" />
<meta name="author" content="MountAye" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="你看我这个标题它像不像编程随想:-p" />
<meta property="og:description" content="你看我这个标题它像不像编程随想:-p" />
<link rel="canonical" href="https://mountaye.github.io/blog/articles/barrier-forward-keyboard-mouse-to-another-computer" />
<meta property="og:url" content="https://mountaye.github.io/blog/articles/barrier-forward-keyboard-mouse-to-another-computer" />
<meta property="og:site_name" content="阿掖山：一个博客" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-12-22T00:00:00-06:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content=".md 扫盲Barrier，用笔记本键鼠无线控制台式机" />
<script type="application/ld+json">
{"dateModified":"2020-12-22T00:00:00-06:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mountaye.github.io/blog/articles/barrier-forward-keyboard-mouse-to-another-computer"},"url":"https://mountaye.github.io/blog/articles/barrier-forward-keyboard-mouse-to-another-computer","author":{"@type":"Person","name":"MountAye"},"@type":"BlogPosting","headline":".md 扫盲Barrier，用笔记本键鼠无线控制台式机","description":"你看我这个标题它像不像编程随想:-p","datePublished":"2020-12-22T00:00:00-06:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <meta name="description" content="智力活动是一种生活态度">
    <meta name="viewport" content="width=device-width, initial-scale=0.9, user-scalable=0">
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="/blog/css/materialize.min.css" media="screen,projection" />
    <link rel="stylesheet" href="/blog/css/main.css">
    <link rel="canonical" href="https://mountaye.github.io/blog/articles/barrier-forward-keyboard-mouse-to-another-computer">
    <script type="text/javascript" async
    src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
    <script type="text/javascript" src="/blog/js/jquery.min.js"></script>
    <script src="/blog/js/jquery.nicescroll.min.js"></script>
    <script src="/blog/js/jquery.nicescroll.plus.js"></script>
    <script src="/blog/js/velocity.min.js"></script>
    <script src="/blog/js/skrollr.min.js"></script>
    <script src="/blog/js/jquery.scrolline.js"></script>
    <script type="text/javascript" src="/blog/js/modernizr.js"></script>
    <script type="text/javascript" src="/blog/js/materialize.min.js"></script>
    <script type="text/javascript" src="/blog/js/main.js"></script>
    <link rel="alternate" type="application/rss+xml" title="阿掖山：一个博客" href="/blog/feed.xml" />
    <link rel="shortcut icon" href="/blog/assets/img/favicon.ico" >
</head>

  <body class="blue lighten-5"> 
    <div class="preloader blue container-fluid row">
      <div class="white-text text-darken-4 xpretext"><h4>阿掖山：一个博客</h4></div>
      <div class="progress blue lighten-2 xpreloading">
        <div class="indeterminate blue darken-3"></div>
      </div>
    </div> 
    <header class="site-header">
  <div class="navbar-fixed">
    <nav class="blue darken-2 waves-effect waves-light">
      <div class="nav-wrapper">
        <div class="container">
          <a href="/blog/" class="brand-logo">
            <i class="mdi-communication-chat"></i>
            阿掖山：一个博客
          </a>
          <ul id="nav-mobile" class="right side-nav">
            <li><a href="/blog/History/">历史</a></li>
            <li><a href="/blog/Topics/">分类</a></li>
            <li><a href="/blog/Comments/">留言</a></li>
            <li><a href="/blog/Links/">友链</a></li>
            <li><a href="/blog/About/">关于</a></li>
          </ul>
          <a class="button-collapse" href="#" data-activates="nav-mobile"><i class="mdi-navigation-menu"></i></a>
        </div>
      </div>
    </nav>
  </div>
</header>

    <a class="darken-2 scrollToTop btn-floating btn-large waves-effect waves-light blue"><i class="mdi-hardware-keyboard-arrow-up"></i></a>
    <div id="page-wrap">
      <div id="main-content">
        <div id="guts">
          <div class="container">
            <div class="wrapper text-darken-3">
              <div id="skrollr-body">
  <div class="post container paper card" style="margin-top: 8em; margin-bottom: 5em;">
    <header class="post-header">
      <h1 class="post-title">.md | 扫盲Barrier，用笔记本键鼠无线控制台式机</h1>
      <p class="post-meta">Dec 22, 2020</p>
    </header>
    <article class="post-content">
        <h2 id="为啥要用-barrier">为啥要用 <code class="language-plaintext highlighter-rouge">Barrier</code></h2>

<p>圣诞节前的周五，我们系在线上办了一个聚会。和学姐闲聊的时候，听说他们高年级的几个朋友每周一起联机玩《文明6》，于是一番理(卑)直(躬)气(屈)壮(膝)的要(恳)求之后，成功加入了组织，等到了 steam 的圣诞特惠（没错我一直没买 new frontier pass，我是云玩家），准备以物理学工作者的严谨态度，研究《文明6》诱导的基于回合的反常时间平移对称现象。</p>

<p><img src="/blog/assets/photos/2020-12-22-livingroom.png" alt="" /></p>

<p>我现在公寓房间的结构如图所示，前任房客走的急，把她的几乎全部家具低价甩卖给我了，四舍五入相当于白捡了一台大电视。电视用 HDMI 线连接电脑，当作第二显示器使用。躺在沙发上，看着大屏幕，玩着文明6，<a href="https://www.bilibili.com/video/BV1g441187zq">运用自如</a>的话说——“那岂不是非！常！爽！”</p>

<p>所以说，我的要求是：</p>

<ul>
  <li>在笔记本和台式机处于同一 Wifi 的情况下——</li>
  <li>笔记本电脑和台式机之间不需要任何数据线连接</li>
  <li>使用 Linux 笔记本上的触控板、鼠标和键盘</li>
  <li>控制 Windows 台式机</li>
  <li>正常运行和操作《文明6》，不会因为延迟卡顿被人喷（卡顿是不存在的，只可能掉线lol）</li>
</ul>

<p>一番搜索之后，锁定了 <code class="language-plaintext highlighter-rouge">Barrier</code> 这款软件。它可以设定一个 server 和多个 client，用 server 的输入设备控制各个 client。切换方法也很方便，只要提前约定好各个设备的“相对位置”，当 server 的鼠标光标跨过 server 屏幕的边角处，就开始控制对应方向上的设备。（具体可以查看下一节。）</p>

<p>之所以选择它，主要原因如下：</p>

<ul>
  <li><a href="https://github.com/debauchee/barrier">开源软件</a>，堂堂正正地不用花钱。（我知道开源软件≠免费软件，但是……）</li>
  <li>目前依然有人维护，GutHub 上还有上百个 open issues，当然 closed issues 更多，有问题可以查，提问也有人回答。</li>
  <li>跨平台，Windows 和 Linux 都能用。主流 Linux 发行版都可以在仓库里找到，也可以通过 snap 安装。</li>
</ul>

<h2 id="如何配置-barrier">如何配置 <code class="language-plaintext highlighter-rouge">Barrier</code></h2>

<h3 id="下载和安装">下载和安装：</h3>

<p>因为我的发行版是 Fedora，在笔记本的 terminal 上任选一句运行：</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nb">sudo </span>dnf <span class="nb">install </span>barrier
<span class="nb">sudo </span>snap <span class="nb">install </span>barrier
</code></pre></div></div>

<p>台式机是 Windows 10，在GitHub 项目（<a href="https://github.com/debauchee/barrier/releases">链接在此</a>）里找到最新一期的发布版本，找到 <code class="language-plaintext highlighter-rouge">.exe</code> 结尾的文件（可以用浏览器的页内搜索），下载，双击下载后的文件安装。</p>

<h3 id="配置-server-笔记本电脑">配置 server （笔记本电脑）：</h3>

<p>首先要确定 linux 的桌面环境是基于 xorg 的，当前版本的 GNOME 默认使用的是 Wayland，所以需要 log out 之后重新选择带有 xorg 字样的环境，如下图：</p>

<p><img src="/blog/assets/photos/2020-12-22-gnome-environments-new.png" alt="" /></p>

<p>安装完成之后，在 app 界面（<code class="language-plaintext highlighter-rouge">Win</code>+<code class="language-plaintext highlighter-rouge">A</code>）应该可以找到 barrier 的图标，单击即运行。一般来说之后会有相当长一段时间电脑没有反应，这个时候 <strong>千万不要重复点击图标</strong>，会导致无法连接。</p>

<p><img src="/blog/assets/photos/2020-12-22-barrier_linux_desktop.png" alt="" /></p>

<p>之后会看到软件的主界面，选中图中所示的选项：</p>

<p><img src="/blog/assets/photos/2020-12-22-barrier_linux_start.png" alt="" /></p>

<p>然后单击 <code class="language-plaintext highlighter-rouge">configure server</code> 按钮，进入下图的界面，拖动右上角的电脑屏幕图标，拖到中间屏幕周围的任意一格。我选了右边一格，因为这样在笔记本上向右滑鼠标会进入台式机的显示器，从显示器右边框向右会进入电视，一路反过来就回到了笔记本屏幕，操作比较自然。</p>

<p><img src="/blog/assets/photos/2020-12-22-barrier_linux_config.png" alt="" /></p>

<p>双击图标后会弹出一个新窗口，在最上面的 “screen name” 栏填入 client 上显示的本机名称，现在我们还没有配置 client，所以需要等到配置完之后回来填写。</p>

<p><img src="/blog/assets/photos/2020-12-22-barrier_linux_naming.png" alt="" /></p>

<p>注意主窗口的左下角，如果不是 “barrier is running” 的话，需要点击右下方的 reload，还是不行的话就要准备 debug 了。</p>

<h3 id="配置-client-台式机">配置 client （台式机）：</h3>

<p>安装完成之后，应该能在开始菜单里找到 barrier 的图标，点击运行，应该会看到和笔记本上面差不多的界面。</p>

<p>![]/blog/assets/photos/2020-12-22-barrier_windows_main.png)</p>

<p>选择图中的选项，填入笔记本窗口中显示的本机 IP 地址，选中 <code class="language-plaintext highlighter-rouge">auto config</code> 选项，然后点击右下方的 <code class="language-plaintext highlighter-rouge">start</code>，然后窗口左下角同样应该有 “barrier is running” 字样。点击菜单栏里的  -&gt; <code class="language-plaintext highlighter-rouge">show log</code> 打开日志，应该可以看到下图里的 “connected to server” 字样。</p>

<p><img src="/blog/assets/photos/2020-12-22-barrier_windows_log.png" alt="" /></p>

<h3 id="几个雷点">几个雷点：</h3>

<ul>
  <li>Fedora 的显示管理器默认并不使用 xorg，需要专门切换。</li>
  <li>Linux 上启动较慢，如果不耐烦多点了几次，可能会重复打开多个实例，造成端口被占用，无法使用。
    <ul>
      <li>诊断方法：打开 log 界面，会发现 “ERROR: cannot listen for clients: cannot bind address: Address already in use”  字样。</li>
      <li>解决方法：杀掉多余的进程，不会杀的话就重启电脑吧。</li>
    </ul>
  </li>
  <li>server 和各个 client 对是否使用 SSL 的选择必须是一致的。</li>
  <li>官方没有按步骤来的配置说明，这么多雷点，我居然看到好几篇博客都在夸 barrier 的界面多么通俗易懂，简直了。</li>
</ul>

<h2 id="barrier-之外的其他方案"><code class="language-plaintext highlighter-rouge">Barrier</code> 之外的其他方案</h2>

<ul>
  <li><code class="language-plaintext highlighter-rouge">synergy</code>：成熟的商业软件，好像要花钱。</li>
  <li><code class="language-plaintext highlighter-rouge">Microsoft Garage Mouse without Borders</code>：要求所有设备都使用 Windows 系统，不适用于我的笔记本电脑</li>
  <li><code class="language-plaintext highlighter-rouge">usbip</code>：来自 farseerfc 大神的<a href="https://farseerfc.me/zhs/usbip-forward-raspberrypi.html">这篇博文</a>，原文说“设置好的话，就像是一台 PC 多了几个位于树莓派上的 USB 端口，插上树莓派的 USB 设备统统作为 PC 的设备”。
    <ul>
      <li>和 <code class="language-plaintext highlighter-rouge">Barrier</code> 相比，配置的步骤更繁琐；</li>
      <li>好像一次只能控制一台设备（不太懂，如果转发给多个设备的话可能会一起执行相同的操作？）；</li>
      <li>好像也不适用于非 USB 接口的设备，比如笔记本的原生键盘和触屏笔；</li>
      <li>一旦运行起来，server 的鼠标就不再能够控制自己，所以原文使用了几乎注定吃灰的树莓派，相当于给键盘加了个广播天线。</li>
    </ul>
  </li>
</ul>

<!-- 用的是一款叫作 [Gather](https://gather.town/) 的 web 应用，就像 90 年代的 RPG 游戏一样，参加者每人指挥一个像素很糊的人物，在一个像素很糊的房间里走来走去，不同之处在于当角色相互靠近到一定距离之内的时候，可以像 Zoom 一样视频连线。 -->

    </article>
    <br/><br/><br/>
  </div>
  <div class="comment container paper card" style="margin-bottom: 10em;">
    <h2>读者评论</h2><br>
    <div class="center" style="margin: auto; width: 80%;">
    <script src="https://giscus.app/client.js"
            data-repo="MountAye/blog"
            data-repo-id="R_kgDOGc3UIA"
            data-category="Comments"
            data-category-id="DIC_kwDOGc3UIM4CAI4h"
            data-mapping="title"
            data-reactions-enabled="1"
            data-emit-metadata="0"
            data-theme="light"
            data-lang="zh-CN"
            crossorigin="anonymous"
            async>
    </script>
</div>
    <!-- <div class="row">
  <div class="col s8">
    <ul class="tabs blue z-depth-1">
      <li class="waves-effect tab col s3 blue darken-1"><a class="white-text text-darken-4 active" href="#markdown">Markdown</a></li>
      <li class="waves-effect tab col s3 blue darken-1"><a class="white-text text-darken-4" href="#preview">Preview</a></li>
    </ul>
  </div>
  <br><br><br>
  <div id="markdown" class="col s8">
    <div class="row">
      <form class="col s12">
        <div class="row blue-text">
          <div class="input-field col s12">
            <input id="first_name" type="text" class="validate materialize-textarea blue-text text-darken-3">
            <label for="first_name" class="blue-text text-darken-3">Title</label>
          </div>
          <div class="input-field col s12 blue-text">
            <textarea id="textarea1" class="materialize-textarea blue-text text-darken-3"></textarea>
            <label for="textarea1" class="blue-text text-darken-3">Enter comment</label>
          </div>
        </div>
      </form>
    </div>
    <button class="blue darken-1 white-text text-darken-3 waves-effect waves-cyan waves-light btn" href="/"><i class="mdi-action-backup"></i> &nbsp; Log in to comment</button>
  </div>
  <div id="preview" class="col s12">
    hhhh
  </div>
</div> -->
    <br><br><br>
  </div>
</div>

            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- 
<footer class="page-footer blue darken-2">
  <div class="container">
    <div class="row">
      
      <div class="col l3 m6 s12">
        <h5 class="white-text">social-links</h5>
        <ul>
          <li><a class="grey-text text-lighten-3" href="http://facebook.com/xSF.AzraeL/" target="_blank"><i class="mdi-social-person-add"></i> Facebook</a></li>
          <li><a class="grey-text text-lighten-3" href="https://plus.google.com/u/0/114363400342894379257/posts" target="_blank"><i class="mdi-social-plus-one"></i> Google+</a></li>
          <li><a class="grey-text text-lighten-3" href="http://github.com/naveenshaji/" target="_blank"><i class="mdi-notification-adb"></i> GitHub</a></li>
        </ul>
      </div>
             
      <div class="col l3 m6 s12">
      <h5 class="white-text">where-i-live</h5>
      <p class="grey-text text-lighten-4">TC 11/1827<br>West Cliff Gardens 35<br>Kowdiar, Trivandrum<br>&nbsp;</p>
      </div>
      
      <div class="col l3 m6 s12">
        <h5 class="white-text">contact-me</h5>
        <p class="grey-text text-lighten-4">+91-9496-74-7070<br>naveen@pixelblenders.com<br>xsf.azrael@gmail.com</p>
      </div>

                         
      <div class="col l3 m6 s12">
        <h5 class="white-text">MountAye</h5>
        <p class="grey-text text-lighten-4">MountAye: A Blog</p>
      </div>


    </div>
  </div>
  <div class="footer-copyright">
    <div class="container">
      © 2021 MountAye
      <a class="grey-text text-lighten-4 right" href="http://mountaye.github.io/" target="_blank">MountAye</a>
    </div>
  </div>
</footer> -->

  </body>
</html>
