<!DOCTYPE html>
<!--
Material HTML5 Template (https://naveenshaji.github.io/material)
The MIT License (MIT)

Copyright (c) 2015 Naveen Shaji

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
-->

<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>.git 管理 GitHub 不同用户身份的仓库 | 阿掖山：一个博客</title>
<meta name="generator" content="Jekyll v4.2.1" />
<meta property="og:title" content=".git 管理 GitHub 不同用户身份的仓库" />
<meta name="author" content="MountAye" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="多用户多账户，如何告诉 GitHub 某个项目文件夹该由哪个账号来做版本管理。" />
<meta property="og:description" content="多用户多账户，如何告诉 GitHub 某个项目文件夹该由哪个账号来做版本管理。" />
<link rel="canonical" href="https://mountaye.github.io/blog/articles/git-multiple-users" />
<meta property="og:url" content="https://mountaye.github.io/blog/articles/git-multiple-users" />
<meta property="og:site_name" content="阿掖山：一个博客" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-12-26T00:00:00-06:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content=".git 管理 GitHub 不同用户身份的仓库" />
<script type="application/ld+json">
{"dateModified":"2021-12-26T00:00:00-06:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mountaye.github.io/blog/articles/git-multiple-users"},"url":"https://mountaye.github.io/blog/articles/git-multiple-users","author":{"@type":"Person","name":"MountAye"},"@type":"BlogPosting","headline":".git 管理 GitHub 不同用户身份的仓库","description":"多用户多账户，如何告诉 GitHub 某个项目文件夹该由哪个账号来做版本管理。","datePublished":"2021-12-26T00:00:00-06:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <meta name="description" content="智力活动是一种生活态度">
    <meta name="viewport" content="width=device-width, initial-scale=0.9, user-scalable=0">
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="/blog/css/materialize.min.css" media="screen,projection" />
    <link rel="stylesheet" href="/blog/css/main.css">
    <link rel="canonical" href="https://mountaye.github.io/blog/articles/git-multiple-users">
    <script type="text/javascript" async
    src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
    <script type="text/javascript" src="/blog/js/jquery.min.js"></script>
    <script src="/blog/js/jquery.nicescroll.min.js"></script>
    <script src="/blog/js/jquery.nicescroll.plus.js"></script>
    <script src="/blog/js/velocity.min.js"></script>
    <script src="/blog/js/skrollr.min.js"></script>
    <script src="/blog/js/jquery.scrolline.js"></script>
    <script type="text/javascript" src="/blog/js/modernizr.js"></script>
    <script type="text/javascript" src="/blog/js/materialize.min.js"></script>
    <script type="text/javascript" src="/blog/js/main.js"></script>
    <link rel="alternate" type="application/rss+xml" title="阿掖山：一个博客" href="/blog/feed.xml" />
    <link rel="shortcut icon" href="/blog/assets/img/favicon.ico" >
</head>

  <body class="blue lighten-5"> 
    <div class="preloader blue container-fluid row">
      <div class="white-text text-darken-4 xpretext"><h4>阿掖山：一个博客</h4></div>
      <div class="progress blue lighten-2 xpreloading">
        <div class="indeterminate blue darken-3"></div>
      </div>
    </div> 
    <header class="site-header">
  <div class="navbar-fixed">
    <nav class="blue darken-2 waves-effect waves-light">
      <div class="nav-wrapper">
        <div class="container">
          <a href="/blog/" class="brand-logo">
            <i class="mdi-communication-chat"></i>
            阿掖山：一个博客
          </a>
          <ul id="nav-mobile" class="right side-nav">
            <li><a href="/blog/History/">历史</a></li>
            <li><a href="/blog/Topics/">分类</a></li>
            <li><a href="/blog/Comments/">留言</a></li>
            <li><a href="/blog/Links/">友链</a></li>
            <li><a href="/blog/About/">关于</a></li>
          </ul>
          <a class="button-collapse" href="#" data-activates="nav-mobile"><i class="mdi-navigation-menu"></i></a>
        </div>
      </div>
    </nav>
  </div>
</header>

    <a class="darken-2 scrollToTop btn-floating btn-large waves-effect waves-light blue"><i class="mdi-hardware-keyboard-arrow-up"></i></a>
    <div id="page-wrap">
      <div id="main-content">
        <div id="guts">
          <div class="container">
            <div class="wrapper text-darken-3">
              <div id="skrollr-body">
  <div class="post container paper card" style="margin-top: 8em; margin-bottom: 5em;">
    <header class="post-header">
      <h1 class="post-title">.git | 管理 GitHub 不同用户身份的仓库</h1>
      <p class="post-meta">Dec 26, 2021</p>
    </header>
    <article class="post-content">
        <p>很显然，我不可能把“阿掖山”这个名字写到论文里，与研究相关的项目、组里的代码和数据，都由另一个实名的 GitHub 账号来处理。这就有个问题——如何告诉 GitHub 某个项目文件夹该由哪个账号来做版本管理。</p>

<p>于是 STFW，结果看到了GitHub  官方的回答：<a href="https://docs.github.com/en/account-and-profile/setting-up-and-managing-your-github-user-account/managing-user-account-settings/merging-multiple-user-accounts">“这边建议您把两个账号合并呢～”</a></p>

<p>其实这个问题在建立这个博客站之前就解决了，但是因为很长时间我的研究代码都是自己在用，而且只在台式机上用，一直没有推到 GitHub 上去，实名账号一直没在笔记本上用过。具体细节忘得差不多了，这次复习一下。</p>

<p>作为例子，两个账号的用户名分别是 <code class="language-plaintext highlighter-rouge">USER1</code> 和 <code class="language-plaintext highlighter-rouge">USER2</code>，注册邮箱分别是 <code class="language-plaintext highlighter-rouge">USER1@EMAIL.com</code> 和 <code class="language-plaintext highlighter-rouge">USER2@EMAIL.com</code>。</p>

<h2 id="多个计算机用户">多个计算机用户</h2>

<p>当然了，最简单的方法就是新建一个操作系统用户，每个用户登录一个 GitHub 账号。这种方法好处很多：</p>

<ul>
  <li>不需要特殊操作。</li>
  <li>适用于不同操作系统。</li>
  <li>切换身份需要专门切换账号，有助于防止操作者忘记自己所处的身份。</li>
</ul>

<p>但是这篇文章不会涉及这种方法，因为当初买电脑的时候并没有注意到需要做身份隔离，等到发现事情不妙的时候已经混装和两个身份需要的不同软件，积重难返。于是采用了以下两节的解决方案。</p>

<h2 id="单个计算机用户windows-github-desktop">单个计算机用户@Windows: GitHub Desktop</h2>

<p><img src="/blog/assets/photos/2021-12-26-github-desktop.png" alt="" /></p>

<ul>
  <li>在官网下载、安装、打开 <a href="https://desktop.github.com/">GitHub Desktop</a> 客户端。</li>
  <li>在 GitHub 网页版上切换到新的账户。</li>
  <li>点击左上角 <code class="language-plaintext highlighter-rouge">File &gt; Options</code>，默认界面就是账户信息。点击 <code class="language-plaintext highlighter-rouge">Sign Out</code> 退出登录，然后再点击 <code class="language-plaintext highlighter-rouge">Sign In</code>，根据弹出窗口的提示操作，就来到了新的账户。</li>
</ul>

<h2 id="单个计算机用户linux--sshconfig">单个计算机用户@Linux : <code class="language-plaintext highlighter-rouge">.ssh/config</code></h2>

<p>具体操作看以下两个连接就够了：</p>

<ul>
  <li><a href="https://gist.github.com/JoaquimLey/e6049a12c8fd2923611802384cd2fb4a">https://gist.github.com/JoaquimLey/e6049a12c8fd2923611802384cd2fb4a</a></li>
  <li><a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh">https://docs.github.com/en/authentication/connecting-to-github-with-ssh</a></li>
</ul>

<p><del>但是为了水字数，</del> 还是写得详细一点……</p>

<h3 id="本地生成并启用-ssh-key">本地：生成并启用 SSH key</h3>

<p>打开命令行，输入以下命令，生成 SSH key：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
ssh-keygen <span class="nt">-t</span> rsa <span class="nt">-b</span> 4096 <span class="nt">-C</span> <span class="s2">"USER1"</span> 
ssh-keygen <span class="nt">-t</span> rsa <span class="nt">-b</span> 4096 <span class="nt">-C</span> <span class="s2">"USER2"</span>
</code></pre></div></div>

<p>其中 <code class="language-plaintext highlighter-rouge">-t</code> 指定加密算法，<code class="language-plaintext highlighter-rouge">-b</code> 指定密钥的位数，<code class="language-plaintext highlighter-rouge">-C</code> 相当于注释。</p>

<p>然后命令行会弹出几个选项，可以一路按回车使用默认值。</p>

<p>上述命令完成后，在 <code class="language-plaintext highlighter-rouge">~/.ssh</code> 文件夹应该会有两对四个密钥文件：</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">~/.ssh/USER1</code></li>
  <li><code class="language-plaintext highlighter-rouge">~/.ssh/USER1.pub</code></li>
  <li><code class="language-plaintext highlighter-rouge">~/.ssh/USER2</code></li>
  <li><code class="language-plaintext highlighter-rouge">~/.ssh/USER2.pub</code></li>
</ul>

<p>然后输入以下命令，启用刚刚生成的密钥。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nb">eval</span> <span class="s2">"</span><span class="si">$(</span>ssh-agent <span class="nt">-s</span><span class="si">)</span><span class="s2">"</span> <span class="c"># 启动 ssh-agent</span>
ssh-add ~/.ssh/USER1   <span class="c"># 添加 USER1 的密钥</span>
ssh-add ~/.ssh/USER2   <span class="c"># 添加 USER2 的密钥</span>
</code></pre></div></div>

<h3 id="网页把密钥添加到对应的账号">网页：把密钥添加到对应的账号</h3>

<p>在网页端以 <code class="language-plaintext highlighter-rouge">USER1</code> 身份登录 GitHub 之后，在 “Settings” 页面找到 “SSH and GPG keys” 选项卡，点击绿色的 “New SSH key” 按钮之后，将 <code class="language-plaintext highlighter-rouge">~/.ssh/USER1.pub</code> 中的内容复制到 “Key” 填空区，然后起一个名字，点击 “Add SSH key” 按钮。</p>

<p><img src="/blog/assets/photos/2021-12-26-github-key.png" alt="" /></p>

<p>USER2也照此办理。</p>

<p><strong>千万要注意</strong>复制的应该是 <code class="language-plaintext highlighter-rouge">.pub</code> 后缀的文件！</p>

<h3 id="本地编辑-sshconfig-文件">本地：编辑 <code class="language-plaintext highlighter-rouge">~/.ssh/config</code> 文件</h3>

<p>在 ~/.ssh/ 找到或者新建一个名为 config 的文本文件。打开之后，将以下内容添加到文件中：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Host github.com-user1
	Hostname github.com
	User git
	IdentityFile ~/.ssh/user1
Host github.com-user2
	Hostname github.com
	User git
	IdentityFile ~/.ssh/user2
</code></pre></div></div>

<h3 id="git-clone-时-repo-地址的改动"><code class="language-plaintext highlighter-rouge">git clone</code> 时 repo 地址的改动</h3>

<p>一般的 git clone, 直接把 GitHub 提供的命令复制粘贴到命令行就行了。</p>

<p><img src="/blog/assets/photos/2021-12-26-git-clone.png" alt="" /></p>

<p>但是我们这个不同，首先是只能选择 SSH 模式，然后是需要在域名<code class="language-plaintext highlighter-rouge">github.com</code> 后面加上<code class="language-plaintext highlighter-rouge">-user1</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
git clone git@github.com-user1:User/Repo.git
</code></pre></div></div>

<p>这里就体现出之前在 <code class="language-plaintext highlighter-rouge">~/.ssh/config</code> 把 Host 命名为 <code class="language-plaintext highlighter-rouge">github.com-****</code> 的好处了。</p>

<h3 id="git-commit-前填写在-repo-中填写账户信息"><code class="language-plaintext highlighter-rouge">git commit</code> 前填写在 repo 中填写账户信息</h3>

<p>第一次做完改动推送到 GitHub 之前，需要专门在 repo 级别写明自己的身份，也就是在命令行输入：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
git config <span class="nt">--local</span> user.name  <span class="s2">"USER1"</span>
git config <span class="nt">--local</span> user.email <span class="s2">"USER1@EMAIL.com"</span>
</code></pre></div></div>

<h3 id="注意为了防止操作者忘记自己所处的身份"><strong>注意：</strong>为了防止操作者忘记自己所处的身份</h3>

<p>强烈建议去掉用户信息的全局设置：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
git config <span class="nt">--global</span> <span class="nt">--unset</span> user.name
git config <span class="nt">--global</span> <span class="nt">--unset</span> user.email
</code></pre></div></div>

<p>这样假如忘记之前的 <code class="language-plaintext highlighter-rouge">git config --local</code>, 第一次 git commit 的时候会报错，提示信息缺失。</p>

<p>这样操作一次之后，之后的操作几乎感受不到账户的不同。</p>

    </article>
    <br/><br/><br/>
  </div>
  <div class="comment container paper card" style="margin-bottom: 10em;">
    <h2>读者评论</h2><br>
    <div class="center" style="margin: auto; width: 80%;">
    <script src="https://giscus.app/client.js"
            data-repo="MountAye/blog"
            data-repo-id="R_kgDOGc3UIA"
            data-category="Comments"
            data-category-id="DIC_kwDOGc3UIM4CAI4h"
            data-mapping="title"
            data-reactions-enabled="1"
            data-emit-metadata="0"
            data-theme="light"
            data-lang="zh-CN"
            crossorigin="anonymous"
            async>
    </script>
</div>
    <!-- <div class="row">
  <div class="col s8">
    <ul class="tabs blue z-depth-1">
      <li class="waves-effect tab col s3 blue darken-1"><a class="white-text text-darken-4 active" href="#markdown">Markdown</a></li>
      <li class="waves-effect tab col s3 blue darken-1"><a class="white-text text-darken-4" href="#preview">Preview</a></li>
    </ul>
  </div>
  <br><br><br>
  <div id="markdown" class="col s8">
    <div class="row">
      <form class="col s12">
        <div class="row blue-text">
          <div class="input-field col s12">
            <input id="first_name" type="text" class="validate materialize-textarea blue-text text-darken-3">
            <label for="first_name" class="blue-text text-darken-3">Title</label>
          </div>
          <div class="input-field col s12 blue-text">
            <textarea id="textarea1" class="materialize-textarea blue-text text-darken-3"></textarea>
            <label for="textarea1" class="blue-text text-darken-3">Enter comment</label>
          </div>
        </div>
      </form>
    </div>
    <button class="blue darken-1 white-text text-darken-3 waves-effect waves-cyan waves-light btn" href="/"><i class="mdi-action-backup"></i> &nbsp; Log in to comment</button>
  </div>
  <div id="preview" class="col s12">
    hhhh
  </div>
</div> -->
    <br><br><br>
  </div>
</div>

            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- 
<footer class="page-footer blue darken-2">
  <div class="container">
    <div class="row">
      
      <div class="col l3 m6 s12">
        <h5 class="white-text">social-links</h5>
        <ul>
          <li><a class="grey-text text-lighten-3" href="http://facebook.com/xSF.AzraeL/" target="_blank"><i class="mdi-social-person-add"></i> Facebook</a></li>
          <li><a class="grey-text text-lighten-3" href="https://plus.google.com/u/0/114363400342894379257/posts" target="_blank"><i class="mdi-social-plus-one"></i> Google+</a></li>
          <li><a class="grey-text text-lighten-3" href="http://github.com/naveenshaji/" target="_blank"><i class="mdi-notification-adb"></i> GitHub</a></li>
        </ul>
      </div>
             
      <div class="col l3 m6 s12">
      <h5 class="white-text">where-i-live</h5>
      <p class="grey-text text-lighten-4">TC 11/1827<br>West Cliff Gardens 35<br>Kowdiar, Trivandrum<br>&nbsp;</p>
      </div>
      
      <div class="col l3 m6 s12">
        <h5 class="white-text">contact-me</h5>
        <p class="grey-text text-lighten-4">+91-9496-74-7070<br>naveen@pixelblenders.com<br>xsf.azrael@gmail.com</p>
      </div>

                         
      <div class="col l3 m6 s12">
        <h5 class="white-text">MountAye</h5>
        <p class="grey-text text-lighten-4">MountAye: A Blog</p>
      </div>


    </div>
  </div>
  <div class="footer-copyright">
    <div class="container">
      © 2021 MountAye
      <a class="grey-text text-lighten-4 right" href="http://mountaye.github.io/" target="_blank">MountAye</a>
    </div>
  </div>
</footer> -->

  </body>
</html>
