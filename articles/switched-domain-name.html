<!DOCTYPE html><html lang="zh-CN"><head><title>通知：本站网址変更 | 阿掖山·博客</title><meta property="og:title" content="通知：本站网址変更 | 阿掖山·博客"/><meta name="twitter:title" content="通知：本站网址変更 | 阿掖山·博客"/><meta name="description" content="未来可能无法自动跳转，请浏览器收藏和 RSS 订阅的读者更新网址。"/><meta property="og:description" content="未来可能无法自动跳转，请浏览器收藏和 RSS 订阅的读者更新网址。"/><meta name="twitter:description" content="未来可能无法自动跳转，请浏览器收藏和 RSS 订阅的读者更新网址。"/><meta property="og:image" content="https://blog.mountaye.com/assets/img/before_h2.png"/><meta name="twitter:image" content="https://blog.mountaye.com/assets/img/before_h2.png"/><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/><meta name="generator" content="Next.js v14.2.6"/><link rel="canonical" href="https://blog.mountaye.com/articles/switched-domain-name"/><link rel="icon" href="/favicon.ico" type="image/x-icon"/><meta property="og:locale" content="zh-CN"/><meta property="og:url" content="https://blog.mountaye.com/articles/switched-domain-name"/><meta name="twitter:card" content="summary_large_image"/><meta name="next-head-count" content="17"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css"/><link rel="preload" href="/_next/static/css/70a087ca0a2aa809.css" as="style"/><link rel="stylesheet" href="/_next/static/css/70a087ca0a2aa809.css" data-n-g=""/><link rel="preload" href="/_next/static/css/e94e0c2dba26aa75.css" as="style"/><link rel="stylesheet" href="/_next/static/css/e94e0c2dba26aa75.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-2df7a8d27de1794c.js" defer=""></script><script src="/_next/static/chunks/framework-64ad27b21261a9ce.js" defer=""></script><script src="/_next/static/chunks/main-e618b1edbb350739.js" defer=""></script><script src="/_next/static/chunks/pages/_app-82a2279cdebeb61d.js" defer=""></script><script src="/_next/static/chunks/24-03c6412f1cc555e5.js" defer=""></script><script src="/_next/static/chunks/923-376360315f0822f9.js" defer=""></script><script src="/_next/static/chunks/pages/articles/%5Bid%5D-9564c34343a7e645.js" defer=""></script><script src="/_next/static/buildID/_buildManifest.js" defer=""></script><script src="/_next/static/buildID/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div id="all" class="w-full h-max"><nav id="top" class="w-full h-11 sm:h-12 lg:h-14 fixed top-0 flex flex-row justify-between items-center z-50 bg-white dark:bg-black shadow-lg dark:shadow-gray-700 transition-transform"><a class="whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:text-slate-400 text-primary underline-offset-4 hover:underline h-10 py-2 w-max px-2 flex flex-row justify-end items-center grow-0 shrink-0" href="/"><span class="relative flex shrink-0 overflow-hidden rounded-full h-9 w-9 sm:h-10 sm:w-10 md:h-12 md:w-12"><span class="flex h-full w-full items-center justify-center rounded-full bg-muted">Aye</span></span><div id="site title" class="pl-2 hidden sm:block"><span class="text-2xl font-serif dark:font-sans">阿掖山</span><span class="ml-[0.5em] text-base font-sans hidden lg:inline">博客</span></div></a><div class=" grow-0 shrink flex w-[25%]"><input type="text" class="flex h-10 w-full rounded-md border border-input px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 rounded-r-none bg-inherit dark:border-gray-700" id="search-input" placeholder="Search"/><button class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:text-slate-400 border border-input hover:bg-accent hover:text-accent-foreground h-10 w-10 rounded-none border-x-0 bg-inherit dark:border-gray-700" type="button" id="radix-:R19km:" aria-haspopup="menu" aria-expanded="false" data-state="closed"><span class="relative flex shrink-0 overflow-hidden h-5 w-5 rounded-none"><span class="flex h-full w-full items-center justify-center rounded-full bg-muted">Aye</span></span></button><button class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:text-slate-400 border border-input hover:bg-accent hover:text-accent-foreground h-10 w-10 rounded-l-none bg-inherit dark:border-gray-700"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-search h-4 w-4"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.3-4.3"></path></svg></button></div><div class="flex flex-row"><button class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:text-slate-400 hover:bg-accent hover:text-accent-foreground h-10 py-2 md:hidden px-1 md:px-2 lg:px-3" type="button" id="radix-:R2tkm:" aria-haspopup="menu" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-layers"><path d="m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z"></path><path d="m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65"></path><path d="m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65"></path></svg></button><div class="hidden md:block "><a class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:text-slate-400 hover:bg-accent hover:text-accent-foreground h-10 py-2 px-1 md:px-2 lg:px-3" href="/history"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-history"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path><path d="M12 7v5l4 2"></path></svg></a><a class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:text-slate-400 hover:bg-accent hover:text-accent-foreground h-10 py-2 px-1 md:px-2 lg:px-3" href="/topics"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-tags"><path d="m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19"></path><path d="M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z"></path><circle cx="6.5" cy="9.5" r=".5" fill="currentColor"></circle></svg></a><a class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:text-slate-400 hover:bg-accent hover:text-accent-foreground h-10 py-2 px-1 md:px-2 lg:px-3" href="/discuss"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-messages-square"><path d="M14 9a2 2 0 0 1-2 2H6l-4 4V4c0-1.1.9-2 2-2h8a2 2 0 0 1 2 2z"></path><path d="M18 9h2a2 2 0 0 1 2 2v11l-4-4h-6a2 2 0 0 1-2-2v-1"></path></svg></a></div><button class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:text-slate-400 hover:bg-accent hover:text-accent-foreground h-10 py-2 px-1 md:px-2 lg:px-3" type="button" id="radix-:R1dkm:" aria-haspopup="menu" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-languages w-5 h-5"><path d="m5 8 6 6"></path><path d="m4 14 6-6 2-3"></path><path d="M2 5h12"></path><path d="M7 2h1"></path><path d="m22 22-5-10-5 10"></path><path d="M14 18h6"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down w-4 h-4 hidden md:block"><path d="m6 9 6 6 6-6"></path></svg></button><div class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:text-slate-400 hover:bg-accent hover:text-accent-foreground h-10 py-2 px-1 md:px-2 lg:px-3 flex items-center space-x-1"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg><button type="button" role="switch" aria-checked="false" data-state="unchecked" value="off" class="peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input" id="night-mode"><span data-state="unchecked" class="pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0 dark:bg-slate-500"></span></button><input type="checkbox" aria-hidden="true" style="transform:translateX(-100%);position:absolute;pointer-events:none;opacity:0;margin:0" tabindex="-1" value="off"/><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 hidden md:block" for="night-mode"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg></div></div></nav><aside id="side" class="
                        hidden md:flex flex-col 
                        w-36 h-screen
                        fixed left-0 bottom-0 
                        z-40 bg-white dark:bg-black shadow-2xl dark:shadow-gray-700         
             "><div class="h-16 grow-0"></div><div class="grow py-20 px-4 text-base font-serif dark:font-sans text-wrap overflow-x-auto utils_right2left__q5Pl7 utils_verticalLines__s6Q8n"><p id="quote-line">智力活动是一种生活态度</p><p>——<span id="quote-author">阿掖山，一个博客</span></p></div><footer class="py-1 grow-0 shrink-0 flex flex-col items-center"><div class="text-sm"><p>阿掖山<!-- --> © <!-- -->2024<br/>作者保留版权</p></div><div class="flex flex-row"><a class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:text-slate-400 hover:bg-accent hover:text-accent-foreground h-10 py-2 px-1" href="/feed.xml"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-rss stroke-[#3c70c6]"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a><a class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:text-slate-400 hover:bg-accent hover:text-accent-foreground h-10 py-2 px-1" href="https://www.github.com/MountAye"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github stroke-[#3c70c6]"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path><path d="M9 18c-4.51 2-5-2-7-2"></path></svg></a><a class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:text-slate-400 hover:bg-accent hover:text-accent-foreground h-10 py-2 px-1" href="https://www.twitter.com/MountAye"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-twitter stroke-[#3c70c6]"><path d="M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z"></path></svg></a><a class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:text-slate-400 hover:bg-accent hover:text-accent-foreground h-10 py-2 px-1" href="https://github.com/MountAye/comments/discussions/categories/blog"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-mail stroke-[#3c70c6]"><rect width="20" height="16" x="2" y="4" rx="2"></rect><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path></svg></a></div></footer></aside><div id="main" class="
                    block h-full w-screen pt-16
                    sm:w-[640px] sm:ml-auto sm:mr-0 
                    md:w-[calc(100vw-144px)]
         "><div class="rounded-lg bg-card text-card-foreground w-full md:m-auto lg:w-[800px] shadow-2xl relative top-5 border-0 dark:shadow-gray-700"><div class="rounded-lg bg-card text-card-foreground w-full h-full border-0 shadow-lg dark:shadow-gray-700" id="top" style="background-image:none;background-size:cover"><div class="p-6 pt-0 backdrop-blur-sm bg-gray-50/70 dark:bg-black/70"><div data-orientation="vertical"><div data-state="closed" data-orientation="vertical" class="border-b border-none"><h3 data-orientation="vertical" data-state="closed" class="flex"><button type="button" aria-controls="radix-:R4nkm:" aria-expanded="false" data-state="closed" data-orientation="vertical" id="radix-:Rnkm:" class="flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&amp;[data-state=open]&gt;svg]:rotate-180" data-radix-collection-item=""><div style="position:relative;width:100%;padding-bottom:25%" data-radix-aspect-ratio-wrapper=""><div class="h-full flex flex-col justify-end items-start" style="position:absolute;top:0;right:0;bottom:0;left:0"><p id="date">2024 年 9 月 30 日</p><h1 id="title" class="py-2 text-start text-lg sm:text-2xl md:text-4xl text-[#3c70c6] font-semibold font-serif dark:font-sans">通知：本站网址変更</h1><div id="tags" class="mt-1"><div class="inline-flex items-center rounded-full border px-2.5 py-0.5 font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-primary hover:bg-primary/80 text-white dark:text-slate-400 text-sm mr-1 font-mono" style="background-color:#ffbf00"><a alt="IT类业余笔记" href="/articles/switched-domain-name#collection-md">md</a></div><div class="inline-flex items-center rounded-full border px-2.5 py-0.5 font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-primary hover:bg-primary/80 text-white dark:text-slate-400 text-sm mr-1 font-mono" style="background-color:#551a8b"><a alt="转载和二次创作" href="/articles/switched-domain-name#collection-html">html</a></div></div></div></div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4 shrink-0 transition-transform duration-200"><path d="m6 9 6 6 6-6"></path></svg></button></h3><div data-state="closed" id="radix-:R4nkm:" hidden="" role="region" aria-labelledby="radix-:Rnkm:" data-orientation="vertical" class="overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down" style="--radix-accordion-content-height:var(--radix-collapsible-content-height);--radix-accordion-content-width:var(--radix-collapsible-content-width)"></div></div></div></div></div><div class="p-6 typeset_written___p4iY pt-10 pb-20"><p>2024 年 9 月 30 日起，本站网址</p>
<ul>
<li>从 <code>https://mountaye.github.io/blog/</code></li>
<li>变更为 <code>https://blog.mountaye.com</code>.</li>
</ul>
<p>因为网站仍然架设在 GitHub Pages 上，所以旧网址可以自动跳转到新网址。</p>
<p>但是下一步计划把网站迁移到 Cloudflare Pages 上，因为 Next.js 项目不同构建之间文件差异过多，不适合作为 git 仓库的内容进行托管。</p>
<p>所以无法保证将来旧网址依然可以自动跳转。请使用浏览器收藏功能的读者更新收藏夹，使用 RSS 订阅功能的读者更新 RSS 源。</p>
<p>根据初步计划，过渡期将持续到 2024 年 12 月 31 日。</p></div><div class="absolute right-0 lg:-right-20 top-0 h-full"><div class="sticky top-[calc(100vh-60px)] lg:top-[calc(100vh-250px)] flex flex-row-reverse lg:flex-col"><a class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:text-slate-400 text-primary-foreground hover:bg-primary/90 bg-[#3c70c6] h-fit w-fit px-2 py-2 m-2 rounded-full opacity-75 lg:opacity-100 hover:opacity-100" title="顶部" href="/articles/switched-domain-name#top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-big-up stroke-white dark:stroke-slate-400"><path d="M9 18v-6H5l7-7 7 7h-4v6H9z"></path></svg></a><a class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:text-slate-400 text-primary-foreground hover:bg-primary/90 bg-[#3c70c6] h-fit w-fit px-2 py-2 m-2 rounded-full opacity-75 lg:opacity-100 hover:opacity-100" title="评论" href="/articles/switched-domain-name#comments"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-message-circle-more stroke-white dark:stroke-slate-400"><path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z"></path><path d="M8 12h.01"></path><path d="M12 12h.01"></path><path d="M16 12h.01"></path></svg></a><button class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:text-slate-400 text-primary-foreground hover:bg-primary/90 bg-[#3c70c6] h-fit w-fit px-2 py-2 m-2 rounded-full opacity-75 lg:opacity-100 hover:opacity-100" title="分享"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-share2 stroke-white dark:stroke-slate-400"><circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" x2="15.42" y1="13.51" y2="17.49"></line><line x1="15.41" x2="8.59" y1="6.51" y2="10.49"></line></svg></button><button class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:text-slate-400 text-primary-foreground hover:bg-primary/90 bg-[#3c70c6] h-fit w-fit px-2 py-2 m-2 rounded-full opacity-75 lg:opacity-100 hover:opacity-100" title="恰饭"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-hand-heart stroke-white dark:stroke-slate-400"><path d="M11 14h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 16"></path><path d="m7 20 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9"></path><path d="m2 15 6 6"></path><path d="M19.5 8.5c.7-.7 1.5-1.6 1.5-2.7A2.73 2.73 0 0 0 16 4a2.78 2.78 0 0 0-5 1.8c0 1.2.8 2 1.5 2.8L16 12Z"></path></svg></button></div></div></div><div class="rounded-lg bg-card text-card-foreground w-full md:m-auto lg:w-[800px] relative top-14 shadow-2xl border-0 dark:shadow-gray-700" id="collections"><div class="flex flex-col space-y-1.5 p-6">本文收录于以下合集：</div><div class="p-6 pt-0"><div data-orientation="vertical"><div data-state="closed" data-orientation="vertical" class="border-b border-none"><h3 data-orientation="vertical" data-state="closed" class="flex"><button type="button" aria-controls="radix-:Rbbkm:" aria-expanded="false" data-state="closed" data-orientation="vertical" id="collection-md" class="flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&amp;[data-state=open]&gt;svg]:rotate-180" data-radix-collection-item=""><p><span class="scroll-m-20 text-2xl font-semibold tracking-tight">.<!-- -->md</span><span class="ml-4">IT类业余笔记</span></p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4 shrink-0 transition-transform duration-200"><path d="m6 9 6 6 6-6"></path></svg></button></h3><div data-state="closed" id="radix-:Rbbkm:" hidden="" role="region" aria-labelledby="radix-:R3bkm:" data-orientation="vertical" class="overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down" style="--radix-accordion-content-height:var(--radix-collapsible-content-height);--radix-accordion-content-width:var(--radix-collapsible-content-width)"></div></div><div data-state="closed" data-orientation="vertical" class="border-b border-none"><h3 data-orientation="vertical" data-state="closed" class="flex"><button type="button" aria-controls="radix-:Rdbkm:" aria-expanded="false" data-state="closed" data-orientation="vertical" id="collection-html" class="flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&amp;[data-state=open]&gt;svg]:rotate-180" data-radix-collection-item=""><p><span class="scroll-m-20 text-2xl font-semibold tracking-tight">.<!-- -->html</span><span class="ml-4">转载和二次创作</span></p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4 shrink-0 transition-transform duration-200"><path d="m6 9 6 6 6-6"></path></svg></button></h3><div data-state="closed" id="radix-:Rdbkm:" hidden="" role="region" aria-labelledby="radix-:R5bkm:" data-orientation="vertical" class="overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down" style="--radix-accordion-content-height:var(--radix-collapsible-content-height);--radix-accordion-content-width:var(--radix-collapsible-content-width)"></div></div></div></div></div><div class="rounded-lg bg-card text-card-foreground w-full md:m-auto lg:w-[800px] relative top-20 shadow-2xl border-0 dark:shadow-gray-700" id="comments"><div class="p-6 pt-0"><div id="giscus" class="pt-16 utils_giscus__lppxx"></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"metadata":{"slug":"switched-domain-name","filename":"2024-09-30-switched-domain-name.md","date":"2024-09-30","title":"通知：本站网址変更","layout":"post","keywords":["md","html"],"excerpt":"未来可能无法自动跳转，请浏览器收藏和 RSS 订阅的读者更新网址。","content":"\n2024 年 9 月 30 日起，本站网址\n- 从 `https://mountaye.github.io/blog/` \n- 变更为 `https://blog.mountaye.com`.\n\n因为网站仍然架设在 GitHub Pages 上，所以旧网址可以自动跳转到新网址。\n\n但是下一步计划把网站迁移到 Cloudflare Pages 上，因为 Next.js 项目不同构建之间文件差异过多，不适合作为 git 仓库的内容进行托管。\n\n所以无法保证将来旧网址依然可以自动跳转。请使用浏览器收藏功能的读者更新收藏夹，使用 RSS 订阅功能的读者更新 RSS 源。\n\n根据初步计划，过渡期将持续到 2024 年 12 月 31 日。\n"},"tocStr":"{\"index\":null,\"endIndex\":null,\"map\":null}","htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"2024 年 9 月 30 日起，本站网址","position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":22,"offset":22}}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":22,"offset":22}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"从 ","position":{"start":{"line":3,"column":3,"offset":25},"end":{"line":3,"column":5,"offset":27}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"https://mountaye.github.io/blog/","position":{"start":{"line":3,"column":5,"offset":27},"end":{"line":3,"column":39,"offset":61}}}],"position":{"start":{"line":3,"column":5,"offset":27},"end":{"line":3,"column":39,"offset":61}}}],"position":{"start":{"line":3,"column":1,"offset":23},"end":{"line":3,"column":40,"offset":62}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"变更为 ","position":{"start":{"line":4,"column":3,"offset":65},"end":{"line":4,"column":7,"offset":69}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"https://blog.mountaye.com","position":{"start":{"line":4,"column":7,"offset":69},"end":{"line":4,"column":34,"offset":96}}}],"position":{"start":{"line":4,"column":7,"offset":69},"end":{"line":4,"column":34,"offset":96}}},{"type":"text","value":".","position":{"start":{"line":4,"column":34,"offset":96},"end":{"line":4,"column":35,"offset":97}}}],"position":{"start":{"line":4,"column":1,"offset":63},"end":{"line":4,"column":35,"offset":97}}},{"type":"text","value":"\n"}],"position":{"start":{"line":3,"column":1,"offset":23},"end":{"line":4,"column":35,"offset":97}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"因为网站仍然架设在 GitHub Pages 上，所以旧网址可以自动跳转到新网址。","position":{"start":{"line":6,"column":1,"offset":99},"end":{"line":6,"column":42,"offset":140}}}],"position":{"start":{"line":6,"column":1,"offset":99},"end":{"line":6,"column":42,"offset":140}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"但是下一步计划把网站迁移到 Cloudflare Pages 上，因为 Next.js 项目不同构建之间文件差异过多，不适合作为 git 仓库的内容进行托管。","position":{"start":{"line":8,"column":1,"offset":142},"end":{"line":8,"column":80,"offset":221}}}],"position":{"start":{"line":8,"column":1,"offset":142},"end":{"line":8,"column":80,"offset":221}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"所以无法保证将来旧网址依然可以自动跳转。请使用浏览器收藏功能的读者更新收藏夹，使用 RSS 订阅功能的读者更新 RSS 源。","position":{"start":{"line":10,"column":1,"offset":223},"end":{"line":10,"column":63,"offset":285}}}],"position":{"start":{"line":10,"column":1,"offset":223},"end":{"line":10,"column":63,"offset":285}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"根据初步计划，过渡期将持续到 2024 年 12 月 31 日。","position":{"start":{"line":12,"column":1,"offset":287},"end":{"line":12,"column":33,"offset":319}}}],"position":{"start":{"line":12,"column":1,"offset":287},"end":{"line":12,"column":33,"offset":319}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":13,"column":1,"offset":320}}},"collectedBy":[["md",[{"slug":"notes-on-pytorch-autograd","filename":"2024-11-10-notes-on-pytorch-autograd.md","date":"2024-11-10","title":".ai | PyTorch 中的自动微分 autograd","layout":"post","keywords":["md","py","ai"],"excerpt":"我对 PyTorch 中的自动微分还是一知半解，停留在知道计算图和反向传播的概念，以及能看懂和小改别人写好的代码的水平。之所以存在这样的认知断层，是因为介绍自动微分的时候一般是手动计算张量，然后给读者画个计算图；而真正干活的时候一般是写一个神经网络的类，这个类继承自 `torch.nn.Module`。","cover":"2024-11-10-computation-graph.png","content":"\n\u003e 装了这么久的 ML/AI 爱好者，我发现我对 PyTorch 中的自动微分还是一知半解，停留在知道计算图和反向传播的概念，以及能看懂和小改别人写好的代码的水平。所以自觉还得再补补课。\n\u003e \n\u003e ~~真实动机是前女友找到了国内的研发工作，马上要回国赚大钱了，我破防了~~\n\u003e \n\u003e 之所以存在这样的认知断层，是因为介绍自动微分的时候一般是手动计算张量，然后给读者画个计算图；而真正干活的时候一般是写一个神经网络的类，这个类继承自 `torch.nn.Module`。\n\u003e \n\u003e 这样一包装，承载微分的张量很少被点名取用；而计算过程被一刀两段，绝大多数计算包装在了这个类的 `forward()` 方法中，但是最后一步计算模型预测和训练目标的差异 (loss)，往往留在了训练的控制流中，让人以为两者之间有什么本质区别。\n\u003e \n\u003e 其实不然——自动微分只针对 PyTorch 张量，`torch.nn.Module` 的实例是一个包含若干参数的函数，其参数要么是 `torch.nn.Parameter`，要么是其他含参的 `torch.nn.Module` 实例的参数，（用 `.parameters()` 方法取得，常见于 optimizer 的首个参数）。每次把训练输入张量带入这个函数，中间的数学计算就会被自动微分机制记录。对于自动微分来说，这些计算和最后对 loss 的计算没什么不同。\n\u003e \n\u003e 这个道理其实在做《[**一个 PyTorch 机器学习项目长什么样**](what-a-PyTorch-project-looks-like)》这篇笔记的时候就应该理解，而实际上没有理解，说明——\n\u003e \n\u003e - 一来信息和知识不是同一层面的概念，相同的信息嵌入在不同元信息中，可以给出不同深度的知识；\n\u003e - 再者费曼学习法虽然像实验记录一样有让人快速恢复学习进度的好处，但也有让人沉溺于流量，忘记学习本心的危险，戒之在躁。\n\n一个机器学习项目的过程包括：准备数据、定义模型、训练、评估效果。先来个简单例子：\n\n```python\nimport torch\nfrom torch import data,nn,optim\n# Data Preparation\ndataset = data.Dataset(...)\ntrainloader = data.DataLoader(dataset,...)\n# Model Definition\nclass Net(nn.Module):\n    def __init__(self):\n        super(Net, self).__init__()\n        # ...\n    def forward(self, x):\n        # forward calculation ...\n        return x\nnet = Net()\ncriterion = nn.CrossEntropyLoss()\noptimizer = optim.SGD(net.parameters(), lr=0.001, momentum=0.9)\n# Training\nfor epoch in range(2):\n    running_loss = 0.0\n    for i, data in enumerate(trainloader, 0):\n        # get the inputs\n        inputs, labels = data\n        # zero the parameter gradients\n        optimizer.zero_grad()\n        # forward + backward + optimize\n        outputs = net(inputs)\n        loss = criterion(outputs, labels)\n        loss.backward()\n        optimizer.step()\n        # print statistics\n        # ...\nprint('Finished Training')\n# Validation\ncorrect = 0\ntotal = 0\nwith torch.no_grad():\n    for data in testloader:\n        images, labels = data\n        outputs = net(images)\n```\n\n## [张量——自动微分的对象](https://pytorch.org/tutorials/beginner/introyt/tensors_deeper_tutorial.html)\n\n对于基本数据结构——张量，~~不应该~~ 也可以用大写的 `torch.Tensor(data)` 来创建；官方推荐的方法是小写的 `torch.tensor(data)`，产生的张量是 `data` 的拷贝，对一方的改动不反映到另一方。\n\n如果数据已经是 `numpy.ndarray` 了，可以用 `x_tensor = torch.from_numpy(x_array)` 和 `x_array = x_tensor.numpy()` 互相转化，他们使用同一片内存，对一方的改动会反映到另一方。\n\n更推荐的方法是用各种工厂函数，比如 \n\n- `torch.empty()`\n- `torch.zeros()`, `torch.zeros_like()`\n- `torch.ones()`, `torch.ones_like()`\n- `torch.eye()`\n- `torch.rand()`, `torch.rand_like()`\n\n其中在声明随机张量之前使用 `torch.manual_seed(seed)`，可以让距离该函数相同执行距离的随机数代码总是产生相同的数值：\n\n\u003e [https://pytorch.org/docs/stable/notes/randomness.html](https://pytorch.org/docs/stable/notes/randomness.html)\n\u003e \n\n### 尺寸相关\n\n张量的尺寸是一个它本身的一个性质 `x.shape`, 属于 `torch.Size` 类。\n\n张量之间的计算，在尺寸不同时，遵循类似 NumPy 的 broadcasting 规则。\n\n`x.item()` 从一个单元素张量（不一定是标量）里取出它的值，返回值的数据类型不再是 PyTorch 自己的类型，而是 python 原生类型。\n\n`x.unsqueeze(dim)` 在第 dim 个维度增加一个长度为 1 的维度。\n\n更一般的改变形状需要 `x.reshape(*new_shape)` 和 `torch.reshape(x,new_shape)`\n\n### 物理设备相关\n\n一般数学函数也有 `out` 参数，可以原位写入已存在的张量，不改变原张量的 id。\n\n原位计算是在一般数学函数名字后面加一下划线，如 `torch.sin_(x)`, `x1.add_(x2)`\n\n张量的赋值是传递指针，而不是传递数值。数值拷贝需要 `x2 = x1.clone()`. 克隆产物会保持和之前一样的 `requires_grad` 参数值。如果原张量在计算图里，新张量不需要的话应该 `c = a.detach().clone()`\n\n参与运算的两个张量需要在同一设备 (CPU/GPU). 创建张量的时候可以用 `device` 参数声明设备，已经创建的张量可以用 `x.to(device)` 改变设备。\n\n### 自动微分和神经网络相关\n\nPyTorch 中的张量都有 `requires_grad` 参数，默认为 False。\n\n对于带有 `requires_grad=True` 参数的张量，都受到自动微分机制 autograd 的控制。\n\n前面每个每个创建张量的函数都接受这个参数，也自动传染给对自动微分的张量进行数学计算的结果。\n\n神经网络，也就是继承自 `torch.nn.Module` 的对象（假设实例化为 `net`），内部有两个方法`net.parameters()` 和 `net.buffers()`，它们取到的是张量的 iterator，其中前者里面的张量（绝大多数）受 autograd 控制，后者不然。\n\n要想取得某个神经网络的单个参数，需要知道 `__init__()` 方法中的变量名，以及官网文档中的参数名（一般在 Variables 小节，比如[这个例子](https://pytorch.org/docs/stable/generated/torch.nn.Linear.html)）\n\n```python\nclass MyNetwork(torch.nn.Module):\n    def __init__(self):\n        super().__init__()\n        self.param1 = torch.nn.Parameter(torch.zeros((5,)),requires_grad=True)\n        self.linear = torch.nn.Linear(in_features=5,out_features=1,bias=True)\n    def forward(self,x):\n        return self.linear(x * self.param1)\nnet = MyNetwork()\nwith torch.no_grad():\n    print(net.param1)\n    print(net.linear.weight)\n    print(net.linear.bias)\n```\n\n## [自动微分](https://pytorch.org/tutorials/beginner/introyt/autogradyt_tutorial.html)\n\nautograd 自动根据代码动态构建计算图：\n\n```python\na = torch.linspace(0., 2. * math.pi, steps=25, requires_grad=True)\nb = torch.sin(a)\nc = 2 * b\nd = c + 1\nout = d.sum()\n```\n\n![上述代码构成的计算图](/photos/2024-11-10-computation-graph.png)\n\n对于数学函数 `b = f(a,*args)` 计算出来的张量 `b` ——\n\n### `.grad_fn` 是一个函数\n\n- 输入只有一个，尺寸需要和 `a` 的尺寸对齐 ~~（我感觉很奇怪）~~\n- 输出的数量等于计算出这个张量的函数的输入的数量。\n- ~~直接运行这个函数 ，基本就是把输入张量重复输出~~。从[这个问答](https://stackoverflow.com/questions/66402331/in-pytorch-what-exactly-does-the-grad-fn-attribute-store-and-how-is-it-used)来看，直接运行这个函数几乎没有意义，因为自动微分是用其他编程语言实现的，`SinBackward0` 并不是 Python 对象。\n- `t.grad_fn.next_functions` 是一个 tuple，成员是 `x1` 等参数的 `.grad_fn`, 可以继续递推到工厂函数创建的张量，也就是这个计算图的叶节点。叶节点的 `.grad_fn` 为 `None`\n\n```python\nprint(a.grad_fn)   # None\nprint(b.grad_fn)   # \u003cSinBackward0 object at 0x000001C8E240F400\u003e\nprint(c.grad_fn)   # \u003cMulBackward0 object at 0x000001C8E240EB30\u003e\nprint(d.grad_fn)   # \u003cAddBackward0 object at 0x000001C8E240F400\u003e\nprint(out.grad_fn) # \u003cSumBackward0 object at 0x000001C8E240F190\u003e\n```\n\n### `.backward()`\n\n- 默认状态下，计算图的最终节点 `out` 是一个标量，也就是 0 阶张量。\n    - 要想让计算图的最终节点是一个高阶张量，需要指定 `out.backward(gradient)` 参数。`gradient`和 `out` 尺寸相同，两者对应元素相乘后求和，从而成为一个标量。\n    - 这种设定可以让一个张量的梯度 `.grad` 的尺寸只和自身的尺寸相等；如果允许计算从 `out` 到自身的 Jacobian 矩阵，会导致计算规模按多项式（一般是平方）增长。\n- 默认状态下，一个计算图只能有一个`.backward()`，且只能执行一次。多次执行会报 `RuntimeError`: “Trying to backward through the graph a second time”。\n    - 要想对完全相同的计算图做多次 `.backward()`, 需指定 `out.backward(retain_graph-True)` 参数。\n\n### `t.grad`\n\n- 偏导数张量 $$\\partial\\mathrm {out}/\\partial \\mathrm t$$，在最终节点运行 `.backward()` 之后，计算图中各节点的 `.grad` 会自动被 autograd 赋值\n- 默认情况下，只有计算图的叶节点可以访问其 `.grad`\n- 要取得中间节点的 `.grad`，需要在 `.backward()` 之前对相应张量执行 `.retain_grad()`\n\n```python\nb.retain_grad()\nout.backward()\n\nprint(a.grad)   # tensor([...],...), 约等于 2 * torch.cos(a)\nprint(b.grad)   # tensor([2.,2.,2.,...2.],...)\nprint(c.grad)   # None，不是计算图的叶节点，也没有 .retain_grad()\nprint(d.grad)   # None，不是计算图的叶节点，也没有 .retain_grad()\nprint(out.grad) # None，不是计算图的叶节点，也没有 .retain_grad()\n```\n\n以上各个操作基本上符合数学的习惯。\n\n## 张量及其微分的更新\n\n以下设定更多的是为了工程上方便：\n\n`.grad` 是一个张量的性质，不是最终节点和该张量两者之间的性质，也不是计算图整体的性质。\n\n不论是 `.backward(retain_graph=True)`，还是另外构建了新的计算图并运行 `.backward()`（比如训练时加载了训练集的新一轮 batch），当一个已有 `.grad` 的张量被新的 `.backward()` 波及时，`.grad` 的新值会是旧值和本轮偏导数的相加。\n\n如果不想要这种累加，需要主动提前将张量 `.grad` 改成 0 或者 None。\n\n除了梯度张量的置 0，\n\n### 手动\n\n正常情况下，`requires_grad=True` 的张量，对其做的所有操作都会被 autograd 记录，包括赋值操作，这就导致正常情况下，不论是清空梯度，还是根据梯度更新模型的参数，会导致 auto grad 的混乱。\n\n所以需要特殊操作，通知 autograd 某些对受控张量的改动，不需要成为计算图的一部分。\n\n所谓的特殊操作就是 `torch.no_grad()`\n\n```python\na = torch.arange(5.,requires_grad=True)\nb = torch.sin(a)\nb.backward(gradient=torch.ones_like(b))\nwith torch.no_grad():\n    a[1] = 10\n    a.grad.zero_()  # a.grad = 0\nprint(a)  # tensor([0,10,2,3,4], requires_grad=True)\n```\n\n在完全不涉及训练，只需要推理的环境，`with torch.inference():` 比 `with torch.no_grad():` 更节省计算资源。\n\n### 自动\n\nPyTorch 提供了上述操作的接口。\n\n神经网络的参数的更新有一整个 `torch.optim` [模块](https://pytorch.org/docs/stable/optim.html#algorithms) 提供的更新参数的方式（`Optimizer` 的子类）。里面的优化器都实现了两个方法：`.step()` 和 `.zero_grad()`，前者修改参数本身的值，后者将各参数的梯度归零。\n\n```python\nclass MyModel(torch.nn.Module):\n    def __init__():\n        # ...\n    def forward(x):\n        # ...\n        return x\nnet = MyModel()\nopt = torch.optim.SGD(net.parameters(),lr=0.01)\nfor e in range(epoch):\n    # ...\n    opt.step()\n    opt.zero_grad()\n```\n\n如果只需要将梯度归零的话，nn.Module 也有一个 `.zero_grad()` 方法。\n\n### `tensor` vs. `tensor.data`\n\n看 SGD 优化器的源码的时候，看到更新权重的时候不是 `with torch.no_grad():`，而是用到了张量的 `a.data` 和 `a.grad.data`\n\n`a` vs. `a.data`, `b.grad` vs. `b.grad.data` 的区别今天不需要知道，不应该知道。这是旧的 Variable 对象的残留，新的接口将 Variable 合并进了 Tensor，`.data` 只是为了兼容旧代码而存在的，不再推荐这种用法。\n"},{"slug":"switched-domain-name","filename":"2024-09-30-switched-domain-name.md","date":"2024-09-30","title":"通知：本站网址変更","layout":"post","keywords":["md","html"],"excerpt":"未来可能无法自动跳转，请浏览器收藏和 RSS 订阅的读者更新网址。","content":"\n2024 年 9 月 30 日起，本站网址\n- 从 `https://mountaye.github.io/blog/` \n- 变更为 `https://blog.mountaye.com`.\n\n因为网站仍然架设在 GitHub Pages 上，所以旧网址可以自动跳转到新网址。\n\n但是下一步计划把网站迁移到 Cloudflare Pages 上，因为 Next.js 项目不同构建之间文件差异过多，不适合作为 git 仓库的内容进行托管。\n\n所以无法保证将来旧网址依然可以自动跳转。请使用浏览器收藏功能的读者更新收藏夹，使用 RSS 订阅功能的读者更新 RSS 源。\n\n根据初步计划，过渡期将持续到 2024 年 12 月 31 日。\n"},{"slug":"static-blog-with-nextjs-tailwindcss-shadcn","filename":"2024-09-17-static-blog-with-nextjs-tailwindcss-shadcn.md","date":"2024-09-17","title":".js | 博客改用 Next.js + TailwindCSS + Shadcn.UI","layout":"post","keywords":["md","js"],"excerpt":"我的博客本来是用 Jekyll 生成的静态网站，如今改用 Next.js + TailwindCSS + Shadcn.UI","content":"\n## 技术选型\n\n### 不再选择静态网站生成工具\n\n我的博客本来是用 Jekyll 生成的静态网站，因为网站架在 GitHub Pages 上，而 Jekyll 是 GitHub Pages 默认的构建工具。但是 Jekyll 的核心开发者年事已高，有的甚至已经去世，所以我感觉这个项目未来的活力堪忧。\n\nJekyll 是用 Ruby on Rails 写成的，其他编程语言，和 Jekyll 功能类似的工具有：\n\n- Python 的 Pelican\n- JavaScript 的 Hexo\n\n但是我还想做些更复杂的事情，预计需要靠服务端来实现。所以与其花时间移植到一个和 Jekyll 功能类似的工具，不如直接一步到位，学习一个全栈框架。\n\n### Next.js\n\n虽然不同的编程语言也都有自己的全栈框架，比如 Python 有 Django，但是既然浏览器主要支持 JavaScript，所以索性前后端都用 JS 比较方便，而且这样想的人很多，社区规模使得遇到问题更容易找到答案（这个优势在生成式语言模型的时代似乎没那么重要了）。\n\nJavaScript 语言之下，也存在至少 React 和 Vue 两大阵营。之所以选择 Next.js 这样一个基于 React.js 的框架，主要是路径依赖，很久很久以前学过[赫尔辛基大学的全栈公开课](https://fullstackopen.com/zh/)，那里教的就是 React。\n\n对于 Next.js 本身，Youtube@Fireship 有一个很简洁的介绍：[https://www.youtube.com/watch?v=Sklc_fQBmcs](https://www.youtube.com/watch?v=Sklc_fQBmcs)\n\n官网提供的教程在这里：[https://nextjs.org/learn](https://nextjs.org/learn)，和我学习的时候已经不一样了，那时候只有 page router，没有 app router。开发这一框架的 Vercel 公司也提供 Next.js 的云服务。但是鉴于其有过把用户引诱到 app router 架构然后给自家服务提价的黑历史，所以短期内不打算学和用 app router.\n\n### TailwindCSS\n\n[https://tailwindcss.com/](https://tailwindcss.com/)\n\n早就学过了，但是一直没有机会用。这次本来也可以不用的，直到决定使用 Shadcn.ui 组件库，因为 TailwindCSS 是它的一个依赖项。既然已经安装了，那不用白不用。\n\n### Shadcn.UI 而非 HeadlessUI\n\nhttps://ui.shadcn.com/\n\n一套组件库，也就是网页中经常出现的功能单元。这个库相对于竞品的最大优势，是允许直接复制粘贴代码而不用安装，用多少抄多少～\n\nTailwindCSS 自家也有一个组件库 [HeadlessUI](https://headlessui.com/)，但是主要是 `\u003cform/\u003e` 表单及其成员，侧重于向后端传数据的 HTML 元素的封装。而 Shacn 有很多炫酷的交互方面的组件，突出一个现成且好看。\n\n### 没用 Figma\n\n有用的功能都收钱，免费的功能不如直接 `next dev` 实时预览。\n\n## ~~踩过的坑~~ 学到的经验\n\n### 组件化作为一种思路\n\n正常的网页，HTML 负责内容，CSS 负责装饰，JavaScript 负责交互。这种分工，专业上叫做解耦。\n\n工程实践表明，这种解耦方式非常反人类。用户看到和使用的网页，是以功能上的相似、空间上的相邻为组织的，而要对其修改时，则需要到不同源代码的不同位置去；反之，某处代码的改动，无意中可能对远处的另一部分视觉效果和功能造成破坏。\n\n于是较新的全栈框架，其解耦的方式都是以组件为单位的，内容、样式、交互逻辑都写在一起。\n\n### JavaScript/JSX 语法中的 `{}`\n\nJSX 是对 JavaScript 语法的扩展，添加了类似于 HTML 标记的写法 `\u003cMyComponent\u003e\u003c/MyComponent\u003e`，用来表示 react 组件。\n\n在 jsx 语言的内部写 Javascript 时，需要将 JS 外面包裹一层 `{}`\n\nJavaScript 里类似 Python f-string 的结构写作``${}``，名叫 template literal: ``this is var: ${var}``\n\n——以上规则结合起来，会产生让初学者迷惑的现象：\n\n- `\u003cMyComponent className=’dark’/\u003e`: 一个正常的类名，直接用引号\n- `\u003cMyComponent className={dark}/\u003e:` 类名是一个 JS 字符串变量\n- 类名的一部分根据一个变量取值:\n  ```javascript\n  \u003cMyComponent className={`bg-${dark}`}/\u003e\n  ```\n\n### JavaScript 箭头函数中的 `{}` 和 `()`\n\nJavaScript 的箭头函数类似于 python 的 lambda 纯函数，但是有不同。\n\n`(var) =\u003e (expression(var))` 相当于 Python 中的 `lambda x: expression(x)` \n\n但是箭头函数的右侧可以是 `{}` 包裹的若干表达式，此时需要显式 return：\n\n```jsx\n(var) =\u003e {\n    expression1(var);\n    expression2(var);\n    return expression3(var);\n}\n```\n\nPython 的 lambda 必须是单一表达式的纯函数，不允许上面第二种写法。\n\n### 对象解包中的 `{}`\n\n当有一个包含若干键值对的对象时\n\n```jsx\nobj = {\n\t\tk1: \"value1\",\n\t\tk2: \"value2\",\n\t\tk3: \"value3\",\n\t\t...\n}\n```\n\n可以用 `const { k2 } = obj;` 的方式拿到 `obj[’k2’]` 的值，赋给 `k2`。\n\n结合上一节，\n\n- `(k1,k2)=\u003e(k1+k2);` 是一个两个自变量的函数；\n- `({k1,k2})=\u003e(k1+k2);` 是以一个 Object 为自变量的函数，这个 Object 的名字无所谓，也不确定一共有多少个属性，但属性中至少包含 `k1` 和 `k2`.\n\n### TailwindCSS 的 arbitrary value、JavaScript 的模板字符串、Shadcn 中的 `cn()` 函数\n\nTailwindCSS 的很多属性都允许在方括号中使用任意值，比如背景色 `bg-[#a4b4c4]`\n\n本以为可以直接在 `className` 里面用 template literal `\u003cdiv className={`bg-[${myColor}]`}\u003e`，但是并不总是生效。\n\n这个“并不总是”是个大坑，一开始在开发模式用得好好的，结果某次刷新页面之后就挂了，简直莫名其妙。\n\n好在 Shadcn 提供了一个 [`cn()` 函数](https://github.com/shadcn-ui/ui/blob/main/apps/www/lib/utils.ts)，接受一个或多个 TailwindCSS 类名字符串作为输入，就可以正常使用 template literal 了，例如 `\u003cdiv className={cn(\"block\",\"border-0\",`bg-[${myColor}]`)}\u003e\u003c/div\u003e`\n\n### HTML + CSS 布局\n\n两类套路：\n\n1. 传统的 `display`, `position`, `float` 属性；\n2. Flex 和 Grid 布局，看阮一峰先生的博客里的教程就挺方便：[Flex](https://www.ruanyifeng.com/blog/2015/07/flex-grammar.html), [Grid](https://www.ruanyifeng.com/blog/2019/03/grid-layout-tutorial.html).\n\n理论上后者新一些，消耗的脑力也更少一些，应该是更好的选择。\n\n但是前者也有一些优势场景。比如现在整个博客页面的上边栏和剩下的部分就是一个上下结构的 flex 布局，这导致屏幕最右侧的滚动条其实是页面一部分的，而不是整个页面的的滚动条。在 iOS 的 Safari 浏览器下，会导致网址栏不能自动隐藏，浪费很大一片屏幕空间。之后可能会换回传统功夫。\n\n而像是目录，文章跳转开头和评论区的按钮等等，需要在页面滚动时相对屏幕静止的元素，就不得不用 position，而且为了锚定在正文上，还需要嵌套好几层。\n\n按照传统功夫——\n\n- `display`可选的取值有 4 个: block | inline | inline-block | none\n    - block: 竖排，哪怕同一行内仍有空间容纳 html 中的下一个元素。\n    - inline: 横排，像文字内容一样，没有盒模型\n    - inline-block: 横排，但是有盒模型\n    - none: 不显示，和 `visibility:hidden` 的区别是，后者依然占有显示时的空间。\n- `position`可选的取值有 5 个: static | relative | fixed | absolute | sticky\n    - static: 默认值，按照 html 文件的顺序排列。\n    - relative: 相对于 static 默认值进行偏移，偏移量由 `top`, `right`, `bottom`, `left` 四个性质决定。所谓 `left: 50px` 的意思是左侧 margin 外多出 50 像素的空间，实际是向右偏移的效果。\n    - fixed: 相对于**视窗**的位置固定，位置由 `top`, `right`, `bottom`, `left` 四个性质决定。`left: 50px` 的意思是该元素的左侧 border **外沿**距离窗口左边 50 像素。\n    - absolute: 相对于最近一层父元素的位置固定，位置由 `top`, `right`, `bottom`, `left` 四个性质决定。`left: 50px` 的意思是该元素的左侧 border **外沿**距离父元素左侧**内沿** 50 像素。设计的时候需要考虑 border 宽度。\n    - sticky: 网页加载时按照 html 文件的顺序排列，直到网页滑动到某一位置，之后该元素固定在视窗，就像 fixed 一样，行为改变的位置由 `top`, `right`, `bottom`, `left` 四个性质决定。\n- `float`:  none | left | right | inherit\n    - none: 默认值，按照 html 文件的顺序排列。\n    - left: 保持在父元素左侧，其他元素环绕之。\n    - right: 保持在父元素右侧，其他元素环绕之。\n    - inherit: 和父元素的 float 的取值一致。\n\n### Unified.js 将 Markdown 文档转换为基于 JSX 的 HTML\n\nJekyll 等静态网站生成器的核心功能，就是把 markdown 文档翻译成 html 网页文档。在 Next.js 框架下，这一工作由以 unified.js 为基础的一群第三方库来完成。\n\n最早看到这个框架是在 DIYGOD 的博文《[如何优雅编译一个 Markdown 文档](https://diygod.cc/unified-markdown)》里，但是直接抄他在 xlog 里面的代码的话，在 next.js 之下好像会报错。所以又去官网仔细读了一下文档，现在可以说是略懂。\n\n这个话题本身值得专门写一篇文章，所以不在这里展开了。\n\n### Giscus 评论区切换黑夜模式\n\n自己写的组件的亮暗切换，是通过在 `\u003chtml/\u003e` 元素添加和删除 `dark` 类，然后搭配 TailwindCSS 的 `dark:` 来实现的。\n\nGiscus 官方支持切换黑夜模式：[https://github.com/giscus/giscus/blob/main/ADVANCED-USAGE.md#parent-to-giscus-message-events](https://github.com/giscus/giscus/blob/main/ADVANCED-USAGE.md#parent-to-giscus-message-events)。这套方法的关键，在于服务端返回的 iframe 有一个名为 `giscus-frame` ****的类。\n\nGiscus 为 react 提供了一套组件可以直接使用，但是在这套组件里面并没有这个类。\n\n所以只能弃用官方的组件，自己用 `useEffect` 模拟官网的 `\u003cscript/\u003e`\n\n```jsx\nexport function MyGiscus() {\n  useEffect(\n    () =\u003e {\n      const onPageLoad = () =\u003e {\n        console.log(\"\u003cMyGiscus/\u003e: activated on page load.\")\n        // START real business\n        const script = document.createElement('script');\n        script.src = \"https://giscus.app/client.js\";\n        script.setAttribute('data-repo',              '');\n        script.setAttribute('data-repo-id',           '');\n        script.setAttribute('data-category',          '');\n        script.setAttribute('data-category-id',       '');\n        script.setAttribute('data-mapping',           '');\n        script.setAttribute('data-strict',            '');\n        script.setAttribute('data-reactions-enabled', '');\n        script.setAttribute('data-emit-metadata',     '');\n        script.setAttribute('data-input-position',    '');\n        script.setAttribute('data-theme',             '');\n        script.setAttribute('data-lang',              '');\n        script.crossOrigin = 'anonymous';\n        script.async = true;\n        document.getElementById(\"comments\").appendChild(script);\n        // END real business\n      };\n      // Check if the page is already loaded\n      if (document.readyState==='complete') {\n        onPageLoad();\n      } else {\n        // Add event listener for page load\n        window.addEventListener('load',onPageLoad);\n        // Cleanup the event listener on component unmount\n        return () =\u003e { window.removeEventListener('load',onPageLoad); }\n      };\n    },\n    []\n  );\n  return (\u003cdiv id='comments'\u003e\u003c/div\u003e);\n}\n```\n\n### Next.js 的构建参数部分\n\n要让 next.js 构建静态网站，需要在 next.config.js 中写：\n\n```jsx\nmodule.exports = {\n  basePath: '/blog',\n  output: 'export',\n  generateBuildId: async () =\u003e \"buildID\",\n  // i18n: {\n  //   locales: ['zh-CN', 'en'],\n  //   defaultLocale: 'zh-CN',\n  //   localeDetection: false,\n  // },\n}\n```\n\n`basePath` 是因为博客的 GitHub 仓库 blog 不是默认的个人网站仓库；需要注意的是，next.js 自己的 Link 组件的 `href` 参数不需要包含这个值，但是图片等等的 `src` 参数需要。\n\n`generateBuildId` 函数的返回值是随便写的，不设定的话会导致输出里的 `_next/` 文件夹里有很多哈希值为名的文件夹，在 git 下会被当成不同的 blob 一直留在项目里。\n\n`i18n` 参数被注释掉了，因为静态生成的 next.js 项目不支持自动 i18n.\n\n### RSS 源和 sitemap\n\nRSS 由 feed 这个 npm 包来构建；\n\nsitemap 则是在 ChatGPT 的帮助下手写字符串。\n\n写好的字符串，通过在主页或者历史归档页面的 `getStaticProps()` 函数，写入 next.js 项目的 `public/` 文件夹。\n\n## 还没解决的问题\n\n### 手机端搜索框的汉字输入问题\n\n页面顶端的搜索框在手机触摸屏上，用汉字输入法输入关键词之后，直接按回车键，会导致已经输入的汉字被当成拼音，传递给搜索引擎。\n\n暂时的办法是在输入汉字之后，按回车键之前按一下空格。\n\n### Shadcn.Drawer 组件的上游代码报错；Google Ads\n\n新博客把谷歌广告撤了。赚不到多少钱不说，它还会往网页里动态添加元素，破坏原来的排版。\n\n话虽如此，每篇文章的右下角还是有个[要饭的图标](https://lucide.dev/icons/hand-heart)，计划用 shadcn 的 Drawer，放赞赏二维码，或者交换来的友站链接。\n\n但是目前 Drawer 的上游代码会报错，看起来作者已经在修复了，等更新。\n\n### Google Analytics\n\nnext.js 提供了 Google analytics: [https://nextjs.org/docs/pages/building-your-application/optimizing/third-party-libraries](https://nextjs.org/docs/pages/building-your-application/optimizing/third-party-libraries)\n\n但是加入之后没有反应，google 后台看不到，数据一落千丈。\n\n据说把相应的代码放到 `pages/_app.js` 可以解决问题，还没试。"},{"slug":"Python-test-notes","filename":"2023-10-16-Python-test-notes.md","date":"2023-10-16","title":".py | Python 测试笔记","layout":"post","keywords":["md","py"],"excerpt":"如题","content":"\n## 一些名词\n\n### 调试和测试\n\n调试一般是由代码的作者进行，用于自行检查程序运行过程，是否存在思路和实现不匹配的错误，调试的代码一般和程序主体写在一起，主要包括错误处理和日志记录。简单的可以用 print 和 assert，复杂的程序可以用 logging。\n\n测试一般由第三方进行，测试代码和程序代码分离，写测试的人甚至不需要理解程序的具体工作原理，只关注给定的输入能否得到程序宣称的输出。\n\n### 单元测试\n\n对一个模块、一个函数或者一个类来进行正确性检验的测试工作。\n\n检验的方法是写一堆测试用例，把测试员拍脑袋想的输入交给相应的模块，看模块的输出是否正确；以及不合理的输入是否被程序识别，抛出异常。\n\n单元测试全通过了不代表程序整体一定就没错误，但是单元测试通不过的程序一定有问题。\n\n### 文档测试\n\n文档是对代码的功能介绍，其中不免要举例子，给出实例代码和相应的输出，这个过程很像是单元测试，只不过是纯嘴炮。\n\n文档测试就是自动寻找文档中的示例代码，运行之后，和文档中的结果进行比对。\n\n### 集成测试\n\n集成测试模拟用户的行为，测试各个模块之间的配合，测试结果应该保证程序可以在生产环境中工作。\n\n## Python 中的测试\n\n### 文件结构\n\n上一篇文章里面提到了 src-layout，在 setuptools 的官方文档里提供了[一篇博客文章](https://blog.ionelmc.ro/2014/05/25/python-packaging/#the-structure)，里面提到，这种文件结构的一个优点就是，测试代码的文件夹一般和 `src/` 而不是 package 平级，这就导致运行测试的时候只能先（在虚拟环境里）安装待测试的包，而不会无意中出现测试的代码和用户下载到的内容不同的问题。\n\n```\n\u003cproject_name\u003e\n├── LICENSE\n├── pyproject.toml\n├── README.md\n├── src/\n│   └── \u003cpackage_name\u003e/\n│       ├── __init__.py\n│       └── example.py\n└── tests/\n```\n\n### 单元测试·`unittest`\n\n`unittest` 是 Python 自带的单元测试库。\n\n测试脚本的内容基本如下：\n\n```\nimport unittest\n\nclass TestName1(unittest.TestCase):\n\n    def test_sum(self):\n        self.assertEqual(sum([1, 2, 3]), 6, \"Should be 6\")\n\n    def test_sum_tuple(self):\n        self.assertEqual(sum((1, 2, 2)), 6, \"Should be 6\")\n\nclass TestName2(unittest.TestCase):\n\n    def test_sum(self):\n        self.assertEqual(sum([1, 2, 3]), 6, \"Should be 6\")\n\n    def test_sum_tuple(self):\n        self.assertEqual(sum((1, 2, 2)), 6, \"Should be 6\")\n\nif __name__ == '__main__':\n    unittest.main()\n```\n\n- 测试用例包装在一个 class 里面，这个 class 继承自 `unittest.TestCase`\n- 所有测试方法名字以 “test” 开头，能测试的性质有限，都是类自带的方法，以 `self.` 开头。支持的方法见下表，感觉 `[assertTrue(x)](https://docs.python.org/3/library/unittest.html#unittest.TestCase.assertTrue)` 和 `assertRaises(Exception)` 包打一切\n- 作为 `'__main__'` 运行，运行的是自带的函数 `unittest.main()`。\n- 运行时需要 python 指明脚本的文件名。安装了 nose2 这个库的话，可以直接运行 `python -m nose2`, 它会自动寻找所有的测试依次运行。（后面发现 `unittest` 好像也有自动发现功能）\n\n| Method | Checks that | New in |\n| --- | --- | --- |\n|         [unittest.TestCase.assertEqual](https://docs.python.org/3/library/unittest.html#unittest.TestCase.assertEqual) | a == b |  |\n|      [unittest.TestCase.assertNotEqual](https://docs.python.org/3/library/unittest.html#unittest.TestCase.assertNotEqual) | a != b |  |\n|          [unittest.TestCase.assertTrue](https://docs.python.org/3/library/unittest.html#unittest.TestCase.assertTrue) | bool(x) is True |  |\n|         [unittest.TestCase.assertFalse](https://docs.python.org/3/library/unittest.html#unittest.TestCase.assertFalse) | bool(x) is False |  |\n|            [unittest.TestCase.assertIs](https://docs.python.org/3/library/unittest.html#unittest.TestCase.assertIs) | a is b | 3.1 |\n|         [unittest.TestCase.assertIsNot](https://docs.python.org/3/library/unittest.html#unittest.TestCase.assertIsNot) | a is not b | 3.1 |\n|        [unittest.TestCase.assertIsNone](https://docs.python.org/3/library/unittest.html#unittest.TestCase.assertIsNone) | x is None | 3.1 |\n|     [unittest.TestCase.assertIsNotNone](https://docs.python.org/3/library/unittest.html#unittest.TestCase.assertIsNotNone) | x is not None | 3.1 |\n|            [unittest.TestCase.assertIn](https://docs.python.org/3/library/unittest.html#unittest.TestCase.assertIn) | a in b | 3.1 |\n|         [unittest.TestCase.assertNotIn](https://docs.python.org/3/library/unittest.html#unittest.TestCase.assertNotIn) | a not in b | 3.1 |\n|    [unittest.TestCase.assertIsInstance](https://docs.python.org/3/library/unittest.html#unittest.TestCase.assertIsInstance) | isinstance(a, b) | 3.2 |\n| [unittest.TestCase.assertNotIsInstance](https://docs.python.org/3/library/unittest.html#unittest.TestCase.assertNotIsInstance) | not isinstance(a, b) | 3.2 |\n\n### 文档测试\n\n[https://www.liaoxuefeng.com/wiki/1016959663602400/1017605739507840](https://www.liaoxuefeng.com/wiki/1016959663602400/1017605739507840)\n\nPython 的文档测试用的是 `doctest` 库，写法如下：\n\n```python\nclass Dict(dict):\n    '''\n    Simple dict but also support access as x.y style.\n\n    \u003e\u003e\u003e d1 = Dict()\n    \u003e\u003e\u003e d1['x'] = 100\n    \u003e\u003e\u003e d1.x\n    100\n    \u003e\u003e\u003e d1.y = 200\n    \u003e\u003e\u003e d1['y']\n    200\n    \u003e\u003e\u003e d2 = Dict(a=1, b=2, c='3')\n    \u003e\u003e\u003e d2.c\n    '3'\n    \u003e\u003e\u003e d2['empty']\n    Traceback (most recent call last):\n        ...\n    KeyError: 'empty'\n    \u003e\u003e\u003e d2.empty\n    Traceback (most recent call last):\n        ...\n    AttributeError: 'Dict' object has no attribute 'empty'\n    '''\n    def __init__(self, **kw):\n        super(Dict, self).__init__(**kw)\n\n    def __getattr__(self, key):\n        try:\n            return self[key]\n        except KeyError:\n            raise AttributeError(r\"'Dict' object has no attribute '%s'\" % key)\n\n    def __setattr__(self, key, value):\n        self[key] = value\n\nif __name__=='__main__':\n    import doctest\n    doctest.testmod()\n```\n\n在保持 docstring 缩进的前提下，`\u003e\u003e\u003e`  开头的注释会被当作测试运行，紧随其后的行将作为对比基准。只有当预期报错的时候，可以用 `...` 省略中间的报错信息。\n\n### 集成测试\n\n也可以用 `unittest` 完成。\n\n和单元测试的区别在于，一般来说需要构建测试数据集等等。这需要重写 `unittest.TestCase.setup()`\n\n```python\nclass TestComplexData(unittest.TestCase):\n    def setUp(self):\n        # load test data\n        self.app = App(database='fixtures/test_complex.json')\n\n    def test_customer_count(self):\n        self.assertEqual(len(self.app.customers), 10000)\n\n    def test_existence_of_customer(self):\n        customer = self.app.get_customer(id=9999)\n        self.assertEqual(customer.name, u\"バナナ\")\n        self.assertEqual(customer.address, \"10 Red Road, Akihabara, Tokyo\")\n\nif __name__ == '__main__':\n    unittest.main()\n```"},{"slug":"python-packaging","filename":"2023-10-13-python-packaging.md","date":"2023-10-13","title":".py | 让自己的代码可以被别人使用","layout":"post","keywords":["md","py"],"excerpt":"这里所说的“别人”，也包括6个月之后，已经不记得当初如何写出这段代码的自己。","content":"\n\u003e 这里所说的“别人”，也包括6个月之后，已经不记得当初如何写出这段代码的自己。\n\u003e \n\n很久以前写过一篇《**[import 引用现成的代码](https://mountaye.github.io/blog/articles/python-import-script-module-package)**》讲如何使用别人的代码，最后讲到一个模块的 `setup.py` 文件就没再往下写，这次继续。\n\n- [https://packaging.python.org/en/latest/tutorials/packaging-projects/](https://packaging.python.org/en/latest/tutorials/packaging-projects/)\n- [https://setuptools.pypa.io/en/latest/userguide/quickstart.html](https://setuptools.pypa.io/en/latest/userguide/quickstart.html)\n\n## 基本流程\n\n- 写代码，且让代码项目文件的结构符合一定的要求（见下一节）\n- 根据项目的文件结构，填写 `pyproject.toml`、`setup.cfg` **或** `setup.py` **文件**\n- 安装 build 这个库，然后运行 `python -m build`，产生 `dist/` 文件夹及下面的文件。（可选）将项目上传到 PyPi 或者 Conda\n\n## 项目文件结构\n\n常用的文件结构有两种：src-layout 和 flat-layout，另外一些小项目只有一个 python 文件。\n\n### src-layout\n\n在 src-layout 里，写有 package 源代码的文件夹上层还套了一个文件夹，这个文件夹习惯上命名为 src，当然也可以是别的。`pyproject.toml` 和 `src/` 文件夹同级。\n\n```\n\u003cproject_name\u003e\n├── LICENSE\n├── pyproject.toml\n├── README.md\n├── src/\n│   └── \u003cpackage_name\u003e/\n│       ├── __init__.py\n│       └── example.py\n└── tests/\n```\n\n### flat-layout\n\nflat-layout 指的是写有 package 源代码的文件夹直接作为开发项目的第一级子文件夹，和 `pyproject.toml` 处于同一级。\n\n这种结构比较古老，不太推荐\n\n```\n\u003cproject_name\u003e\n├── pyproject.toml  # and/or setup.cfg/setup.py (depending on the configuration method)\n├── \u003cpackage_name\u003e\n|   ├── __init__.py\n|   └── ... (other Python files)\n├── test\n|   └── ... (test files)\n├── # README.rst or README.md (a nice description of your package)\n└── # LICENCE (properly chosen license information, e.g. MIT, BSD-3, GPL-3, MPL-2, etc...)\n```\n\n### 单文件项目\n\n可以看作是 flat-layout 的一种特殊情况\n\n```\n\u003cproject_name\u003e\n├── pyproject.toml  # and/or setup.cfg/setup.py (depending on the configuration method)\n├── \u003cmy_module\u003e.py\n├── # README.rst or README.md (a nice description of your package)\n└── # LICENCE (properly chosen license information, e.g. MIT, BSD-3, GPL-3, MPL-2, etc...)\n```\n\n## 填写 `pyproject.toml`、`setup.cfg` **或** `setup.py` **文件**\n\n要想让构建程序把我们的代码打包成安装包，标题中的三个文件至少有一个要出现在 project 的根目录。\n\n文件中要按照各自拓展名对应的语法，填写项目的有关信息，绝大多数可以顾名思义。\n\n各参数的取值和代码文件结构相关，参数主要包括 `name`, `packages`, `package_dir`。如果文件结构完全满足上一节的结构，那么 `setuptools.find_packages()` 的[自动发现机制](https://setuptools.pypa.io/en/latest/userguide/package_discovery.html#automatic-discovery)就够用了。\n\n### `name`\n\n这是一个必填项。\n\n注意：上一节的文件结构中，有两个名字 `\u003cproject_name\u003e` 和 `\u003cpackage_name\u003e` ——\n\n`\u003cproject_name\u003e` 是整个开发项目的名字，如果用了类似 git 的版本控制的话，这个名字就是你的 repository 的名字。\n\n`\u003cpackage_name\u003e` 比较复杂，它可以是，但不一定是你在其他代码中 `import __` 的名字，import 的名字由 `pyproject.toml` / `setup.cfg` **/** `setup.py` 里面的 `name` 参数指定。不能有连字符，只能用下划线。\n\n如果你的 `name` 参数和 `\u003cpackage_name\u003e` 不同，还需要填写 `package_dir` 参数，\n\n此外还有第三个名字，就是 `pip install __` 时候的名字，上传到 PyPI 的时候填写，可以带有连字符，比如 scikit-image。\n\n### `packages`\n\n参数是一个 list，但是一般都使用 `setuptools.find_packages()` 的结果。\n\n该函数常用三个参数，都是可选的：\n\n- `where`: 一个路径，相对于 `setup.py`\n- `include`: 一个 list，元素是 glob patterns\n- `exclude`: 一个 list，元素是 glob patterns\n\n不指明任何参数 = 使用自动发现机制\n\n### `package_dir`\n\n参数是一个 dict，两种用法：\n\n- 标准的 src-layout，直接写 `{\"\": \"src/\"}`, 表示所有的代码都在这个文件夹里。\n- 当 python 模块的结构和代码的文件结构不同的时候，用这个 dict 指明 模块-文件夹 之间的关系。\n\n文件的路径相对于 `setup.py` 而言\n\n### `py_modules`\n\n参数是一个文件路径的列表，几乎专为单文件结构而存在。\n\n## 打包和上传\n\n安装 build 工具：`python3 -m pip install --upgrade build`\n\n运行 build：`python3 -m build`\n\n如此会生成一个 `dist/` 文件夹，里面包含打包的结果。\n\n要想让自己的程序可以被别人用 `pip install` 的方式安装，需要将打包成果上传到 PyPI，方法在[这里](https://packaging.python.org/en/latest/tutorials/packaging-projects/#uploading-the-distribution-archives)。\n\n## 安装\n\n### 静态安装\n\n已经上传到 PyPI 的包，可以直接用 `pip install \u003cpackage\u003e` 安装，这种方法叫做静态安装\n\n### 动态安装\n\n还在开发过程中的包，可以在 `setup.py` 所在的位置，运行 `pip install -e .` 这种安装方法叫做动态安装，因为代码的修改可以实时反映在引用的项目中。\n\n## 思考题\n\n上篇文章提到的一个[数据分析项目](https://gist.github.com/ericmjl/27e50331f24db3e8f957d1fe7bbbe510)，其文件结构是这样的（我稍微改动了一下）：\n\n```\n/path/to/project/directory/\n|-- notebooks/\n    |-- 01-first-logical-notebook.ipynb\n    |-- 02-second-logical-notebook.ipynb\n    |-- prototype-notebook.ipynb\n    |-- archive/\n\t      |-- no-longer-useful.ipynb\n|-- src/\n    |-- projectname/\n\t      |-- __init__.py\n\t      |-- config.py\n\t      |-- data.py\n\t      |-- utils.py\n    |-- setup.py\n|-- README.md\n|-- data/\n    |-- raw/\n    |-- processed/\n    |-- cleaned/\n|-- scripts/\n    |-- script1.py\n    |-- script2.py\n    |-- archive/\n        |-- no-longer-useful.py\n|-- environment.yml\n```\n\n问：\n\n1. 这是一个 flat-layout 还是 src-layout？\n2. setup.py 应该怎么写？执行动态安装时的 `pwd` 结果是什么？\n"},{"slug":"notes-on-TailwindCSS","filename":"2023-10-11-notes-on-TailwindCSS.md","date":"2023-10-11","title":".css | TailwindCSS 笔记","layout":"post","keywords":["md","js"],"excerpt":"一直听说“全栈项目 = Next.js + TailwindCSS + HeadlessUI”，但是 TailwindCSS 到底是啥，之前一直妹整明白","content":"\n\u003e 一直听说“全栈项目 = Next.js + TailwindCSS + HeadlessUI”\n但是 TailwindCSS 到底是啥，之前一直妹整明白\n\u003e \n\n## 思路：utility-first\n\n\u003e [https://tailwindcss.com/docs/utility-first](https://tailwindcss.com/docs/utility-first)\n\u003e \n\n传统设计需要根据 html 中的结构，在 CSS 中给相应的元素/class/id 定义所需要的所有样式 style。\n\n问题很明显：\n\n- 最低效的情况下，每个 `\u003cdiv/\u003e` 都要定义一个 class。\n- 每个定义里包含若干不同的性质，背景颜色、字体、边框样式等等都挤在一个大括号里，耦合过强。\n\nTailwindCSS 的思路名叫 utility-first, 预先定义一批“性质-取值”的组合，每个组合给出一个有规律命名的类。使用时，一个 `\u003cdiv/\u003e` 后面声明几个甚至几十个不同的 class。缺点就是不灵活了，每个性质只搭配有限几种取值，且类的数量很多。好处是——\n\n- 不用绞尽脑汁给类取名字\n- CSS 不会再变大了（也可以说已经大得不能再大了）\n- 修改视觉效果时更换一个类，而不是修改类的定义，也就不用担心对类的修改在自己不记得的地方生效。\n\n与之相对的另一种思路，是直接用 html 元素的 style 属性，或者用 module.css 让样式只对某一 component 生效。TailwindCSS 派对这种方法的批评是：\n\n- 每个取值都是设计者拍脑袋想出来的，一个项目要拍太多次脑袋，容易风格不统一。\n- 难以做 responsive design （真的吗？很怀疑）\n- 难以处理鼠标悬浮、聚焦等等状态（这玩意应该由 CSS 处理吗？）\n\nutility-first 在维护性方面收到批评的一点是，很多地方要不断重用相同的组合，少了一点封装和抽象。TailwindCSS 对此的辩护是，可以抽象出 components 和 partials（见下节），或者使用编辑器的多光标功能。（绷……）\n\n## 技术细节\n\n- 样式重用\n- 状态，比如鼠标悬浮、聚焦\n- Responsive design\n- 夜间模式\n- 添加自定义样式\n- 函数和 directives\n\n### 状态，比如鼠标悬浮、聚焦\n\n在正常的类名字之前添加 `\u003c状态\u003e:` 标记，用来指明在相应状态时的样式。这些状态可以叠加，之间用 `:` 分隔。比如 `\u003cbutton class=\"hover:bg-sky-700\"\u003e`\n\n可以标记的状态：[https://tailwindcss.com/docs/hover-focus-and-other-states#appendix](https://tailwindcss.com/docs/hover-focus-and-other-states#appendix)\n\n- Pseudo-classes\n    - 举例： [https://tailwindcss.com/docs/hover-focus-and-other-states#pseudo-class-reference](https://tailwindcss.com/docs/hover-focus-and-other-states#pseudo-class-reference)\n        - `hover:`, `focus:`, `active:`\n        - `first:`, `last:`, `odd:`, `even:`\n        - `required:`, `invalid:`, `disabled:`: 主要用在 `\u003cform\u003e` 中\n    - 需要父元素的状态信息时，\n        - 如果因为嵌套，存在多个 group 时，可以给每一个父元素的类命名 `group/\u003cname\u003e`, 子元素的类名需要写在伪类的后面，有点反直觉 `group-hover/\u003cname\u003e:`\n        - 给父元素添加 `group` 的 class，然后给需要变化的子元素添加 `group-\u003cpseudo-class\u003e:` 前缀。如 `group-hover:`\n        - 当需要更细致的选择时，可以在子元素的 group 后面添加自定义内容，如 `group-[.is-published]:`, `group-[:nth-of-type(3)_\u0026]:`\n    - 需要姊妹元素的状态信息时：\n        - 给被跟踪的姊妹元素添加 `peer` class, 被跟踪的元素只能在跟踪元素的前面。\n        - 其余特性类比 group\n- [Pseudo-elements](https://tailwindcss.com/docs/hover-focus-and-other-states#pseudo-elements), like `::before`, `::after`, `::placeholder`, and `::selection`\n    - 写作 `before:` 等等，默认相当于 `before:content-['*']`\n    - 当想要调整 content 以外的性质时，需要指明 `before:block`, `before:absolute`, `before:-inset-1` 等等\n    - `placeholder:` 用于调整表格中代填内容的样式\n    - `file:` 上传文件按钮的样式\n    - `list:` 列表开头的\n    - `selection:` （鼠标）选中文字之后的样式\n    - `first-line:`, `first-letter:` 杂志常用的首行、首字母的特殊样式\n- [Media and feature queries](https://tailwindcss.com/docs/hover-focus-and-other-states#media-and-feature-queries), like responsive breakpoints, dark mode, and `prefers-reduced-motion`\n    - 结合响应式设计 responsive design 一节，使用 `md:`, `lg:` 等前缀\n    - `dark:` 黑夜模式\n    - `motion-reduce:` 用户选择屏蔽动画效果时的样式，`motion-safe:` 只有不屏蔽动画才会生效的样式\n    - `portrait`,`landscape` 屏幕朝向\n    - `print:` 打印时的样式\n    - `supports-[...]` 当浏览器支持某种特性时启动。也可在 `tailwind.config.js` 文件中设置 `theme.supports` 变量\n- [Attribute selectors](https://tailwindcss.com/docs/hover-focus-and-other-states#attribute-selectors), like `[dir=\"rtl\"]` and `[open]`\n    - `aria-*` modifier to conditionally style things based on [ARIA attributes](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Attributes).\n    - `data-[key=value]` data 参数的值\n    - `ltr:` \u0026 `rtl:` 从右往左书写的文字\n    - `open:` \u0026 `close:` 用于可以展开的元素\n    - 自定义选择符：用中括号包围，`\u0026` 开头选择元素，下划线表示空格，如 `[\u0026:nth-child(3)]:`, `[\u0026_p]:mt-4`, `[@supports(display:grid)]:grid`\n\n### Responsive design\n\n| Breakpoint prefix | Minimum width | CSS |\n| --- | --- | --- |\n| sm | 640px | @media (min-width: 640px) { ... } |\n| md | 768px | @media (min-width: 768px) { ... } |\n| lg | 1024px | @media (min-width: 1024px) { ... } |\n| xl | 1280px | @media (min-width: 1280px) { ... } |\n| 2xl | 1536px | @media (min-width: 1536px) { ... } |\n\n移动端优先的思路，所有尺寸限定的都是大于该宽度时的样式。\n\n要限定上限，要用 `max-\u003csize\u003e:` 比如 `md:max-xl:flex`\n\n要想自定义 breakpoints，可以看 [customizing breakpoints documentation](https://tailwindcss.com/docs/breakpoints).\n\n也可以单独设定 `min-[320px]:`, `max-[600px]:` 等等\n\n### 夜间模式\n\n默认使用操作系统的设定。\n\n要想手动设定，须在 tailwind.config.js 中加入\n\n```jsx\n/** @type {import('tailwindcss').Config} */\nmodule.exports = {\n  darkMode: 'class',\n  // ...\n}\n```\n\n然后含有 `class=’dark’` 的元素的子元素都时夜间模式的效果\n\n这个[链接](https://tailwindcss.com/docs/dark-mode#supporting-system-preference-and-manual-selection)包含了同时兼容系统设置和手动设置的做法\n\n### 样式重用\n\n- 编辑器的多光标功能：[https://code.visualstudio.com/docs/editor/codebasics#_multiple-selections-multicursor](https://code.visualstudio.com/docs/editor/codebasics#_multiple-selections-multicursor)\n- 标记语言的循环语法\n- react 等框架的 component 概念\n- `@apply` and `@layer` in the [Functions \u0026 Directives](https://tailwindcss.com/docs/functions-and-directives#layer) documentation.\n- 避免提前过度抽象\n\n### 添加自定义样式\n\n- 编辑 `tailwind.config.js`, 文档在此：[https://tailwindcss.com/docs/theme](https://tailwindcss.com/docs/theme)\n- [Arbitrary properties](https://tailwindcss.com/docs/adding-custom-styles#arbitrary-properties) 和 [arbitrary variants](https://tailwindcss.com/docs/adding-custom-styles#arbitrary-variants)\n- [Using CSS and @layer](https://tailwindcss.com/docs/adding-custom-styles#using-css-and-layer), 使用多个 CSS 文件时，需在 postcss.config.js 文件中添加 `plugins: {’postcss-import’:  {},}` 字段\n- [Writing plugins](https://tailwindcss.com/docs/adding-custom-styles#writing-plugins)\n\n### 函数和 directives\n\ndirectives 是 CSS 文件中的 `@` 开头的语句\n\n`@layer` 用来把一些需要打包的样式绑在一起，后面三个取值：base, components, utilities\n\n`@apply` 后面接 TailwindCSS 已经定义的类，表示把类的定义移植于此处。\n\n**[`@config`](https://tailwindcss.com/docs/functions-and-directives#config)** 指定所在 CSS 文件需要使用的 TailwindCSS 配置文件，放在 @import 语句后面\n\n```css\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n@layer base {\n  h1 {\n    @apply text-2xl;\n  }\n  h2 {\n    @apply text-xl;\n  }\n}\n\n@layer components {\n  .btn-blue {\n    @apply bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded;\n  }\n}\n\n@layer utilities {\n  .filter-none {\n    filter: none;\n  }\n  .filter-grayscale {\n    filter: grayscale(100%);\n  }\n}\n```\n\nTailwindCSS 还自定义了一些 CSS 函数：\n\n- `theme()`: 返回 config 文件中的参数，比如\n    \n    ```css\n    .content-area {\n      height: calc(100vh - theme(spacing.12));\n    }\n    ```\n    \n- [`screen()`](https://tailwindcss.com/docs/functions-and-directives#screen): 以预定义的 breakpoint 为参数，避免代码中间出现硬编码的数值\n    \n    ```css\n    @media screen(sm) { /* ... */ }\n    ```\n    \n\n## 在 Next.js 项目中安装 TailwindCSS\n\n\u003e [https://nextjs.org/docs/pages/building-your-application/styling/tailwind-css](https://nextjs.org/docs/pages/building-your-application/styling/tailwind-css)\n\u003e \n\n在命令行\n\n```bash\nnpm install -D tailwindcss postcss autoprefixer\nnpx tailwindcss init -p\n```\n\n如此会在项目的根目录新建 `tailwind.config.js` \u0026 `postcss.config.js` 文件\n\n然后编辑 `tailwind.config.js` 文件，添加需要用到 TailwaindCSS 的路径\n\n```jsx\n/** @type {import('tailwindcss').Config} */\nmodule.exports = {\n  content: [\n    './app/**/*.{js,ts,jsx,tsx,mdx}', // Note the addition of the `app` directory.\n    './pages/**/*.{js,ts,jsx,tsx,mdx}',\n    './components/**/*.{js,ts,jsx,tsx,mdx}',\n \n    // Or if using `src` directory:\n    './src/**/*.{js,ts,jsx,tsx,mdx}',\n  ],\n  theme: {\n    extend: {},\n  },\n  plugins: [],\n}\n```\n\n在全局样式表 `styles/globals.css` 中引入 TailwaindCSS\n\n```css\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n```\n\n在 `pages/_app.js` 中引入全局样式表。`@` 的含义不明\n\n```jsx\n// These styles apply to every route in the application\nimport '@/styles/globals.css'\nimport type { AppProps } from 'next/app'\n \nexport default function App({ Component, pageProps }: AppProps) {\n  return \u003cComponent {...pageProps} /\u003e\n}\n```\n\n在项目的 components 中使用 TailwindCSS 的类：\n\n```tsx\nexport default function Page() {\n  return \u003ch1 className=\"text-3xl font-bold underline\"\u003eHello, Next.js!\u003c/h1\u003e\n}\n```"},{"slug":"afaik-generative-ai","filename":"2023-09-11-afaik-generative-ai.md","date":"2023-09-11","title":"·如是我闻 | 生成式人工智能","layout":"post","keywords":["md","ai","rss"],"excerpt":"","content":"\n## 生成式语言模型\n\n### 模型\n\n- OpenAI/GPT\n- Claude\n- `bloomchat`, 可以商用 [[GitHub](https://github.com/sambanova/bloomchat)]\n- `falcon40B`\n    - apache 2.0 许可证，可商用[[huggingface](http://huggingface.co/tiiuae)]\n    - gpt3 的性能，更少的运算资源，其中Falcon 7B可以跑在苹果Mac上 [[推特](https://twitter.com/rickawsb/status/1666148546285043714)]\n- `TigerBot`: 一款国产自研的多语言任务大模型，70亿参数和1800亿参数两个版本 [[GitHub](https://github.com/TigerResearch/TigerBot)]\n- `QLoRA`: 单个GPU，ChatGPT 99%的能力，消费级GPU微调12个小时就可以达到97%的ChatGPT水平，4B就可以保持16B精度的效果 [[论文](https://www.notion.so/Endocytic-trafficking-promotes-vacuolar-enlargements-for-fast-cell-expansion-rates-in-plants-6b8f0a313c184ccba9fb5a035bb04a0e?pvs=21)] [[GitHub](https://www.notion.so/pdf-14a94950d61c42d3b03bb132f7655589?pvs=21)]\n- `MBT 30B`: 开源商用模型为数不多的选择里出现了一个比Falcon 40B更好的模型 [[Twitter](https://twitter.com/fi56622380/status/1672137540281974784)]\n- `GLM-6B` \u0026 `GLM2-6B`: 智谱AI发布，对学术研究完全开放，并且在完成企业登记获得授权后，允许免费商业使用。[[Twitter](https://twitter.com/GanymedeNil/status/1679892021807550465)][[微信公众号@GLM大模型](https://mp.weixin.qq.com/s?__biz=MzkxNjMzMjM3NA==\u0026mid=2247484214\u0026idx=1\u0026sn=e42153f987a74d1ffc7882f7cc09670d)]\n- `Llama 2`: Meta开源大语言模型Llama 2，可免费商用. [[微信](https://mp.weixin.qq.com/s/9pcmrCEyp2AQsL3MbPYx-Q?utm_source=pocket_saves)介绍]\n    - Jim Fan 评论 [[推特，翻译](https://twitter.com/dotey/status/1681553916373135362?utm_source=pocket_saves)]\n    - 很多团队几乎都达成共识， RLHF 不重要，SFT 就够了。现在 Llama2 的论文说 RLHF 非常非常重要。[[推特](https://twitter.com/oran_ge/status/1681793774685659136?utm_source=pocket_saves)]\n    - `LLaMA-2-7B-32K`, context为32K的模型 [[推特](https://twitter.com/JefferyTatsuya/status/1685423475979325440)][[Twitter](https://twitter.com/togethercompute/status/1685048832168714240)]\n\n### 基于模型，直接可用的产品\n\n- OpenAI/GPT\n    - ChatGPT\n        - 2023年6月13日，GPT提供了函数调用，让ChatGPT来自己调用函数。[[Twitter](https://twitter.com/cryptonerdcn/status/1668733300070924288)][[OpenAI](https://openai.com/blog/function-calling-and-other-api-updates)][[用法 Twitter@宝玉](https://twitter.com/dotey/status/1668728109376450566)]\n    - ChatGPT - Code Interpreter\n        - 介绍 [[推特](https://twitter.com/fuyufjh/status/1684191835210809344)][[YouTube](https://www.youtube.com/watch?v=4wGlRrir_u4)]\n        - 《ChatGPT 探索：Code Interpreter 高级指南》[[微信@浮之静](https://mp.weixin.qq.com/s/K_csi1oWDv5tEaeeKSlvwA?utm_source=pocket_saves)]\n        - 源码可能被套出。[[Twitter](https://twitter.com/fuergaosi/status/1679457847237820416)]\n        - 对 code interpreter 的逆向工程 [[Twitter](https://twitter.com/Yampeleg/status/1678045605527003136)][[Mem](https://mem.ai/p/xyy8ULiAce1BecTxnU0M)]\n    - OpenAI API\n        - 2023年8月23日，OpenAI 开放了 GPT-3.5 的微调的API [[推特](https://twitter.com/dotey/status/1694207797351616703)]\n    - OpenAI on Azure 内置了一个内容过滤器 [[推特1](https://twitter.com/jw1dev/status/1666613728106938368)][[推特2](https://twitter.com/jw1dev/status/1666622878962548740)]\n    - `forefront`: 完全免费 GPT-4 的工具 [[登录](https://accounts.forefront.ai/)]，大概基于 `gptfree-ts` [[GitHub](https://github.com/xiangsx/gpt4free-ts)]\n    - `BratGPT`: ChatGPT的激进版本。[[官网](https://bratgpt.com/)]\n    - `SmartStudy`: 提供文本文档，创建10个问题的小测验。[[官网](https://smartstudy.streamlit.app/)]\n    - `XrayGPT`: 通过给定的 X 光片来促进围绕胸部 X 光片的自动化分析的研究。[[GitHub](https://twitter.com/CarsonYangk8s/status/1661588037892198401)]\n    - `FinGPT`: 类似BloomBerg的开源方案，RLHF 和 Lora 的低秩技术 [[Twitter](https://twitter.com/JefferyTatsuya/status/1668433680887615488)]\n- 微软\n    - BingAI\n        - 本地部署方案 [[推特](https://twitter.com/geekbb/status/1665692703055552513)][[GitHub](https://github.com/adams549659584/go-proxy-bingai)]\n    - VsCode Copilot\n    - Office 365 Copilot: 每月每名用户30美元. [[verge](https://www.theverge.com/2023/7/18/23798627/microsoft-365-copilot-price-commercial-enterprise)][[微信](https://mp.weixin.qq.com/s/9pcmrCEyp2AQsL3MbPYx-Q?utm_source=pocket_saves)]\n- Claude+\n    - 例子：阅读多份行业报告 [[推特](https://twitter.com/iamshaynez/status/1684398211958730753)]\n- `Llama`\n    - llama2.ai: 一个基于 llama 2 的聊天机器人，非官方。[[网站](https://llama2.ai/)]\n    - WizardCoder 34B based on Code Llama 写代码 [[推特](https://twitter.com/dotey/status/1696202647269785875)]\n- WebGLM: 清华开源的带网络搜索功能的 GLM 实现 [[GitHub](https://www.notion.so/pdf-14a94950d61c42d3b03bb132f7655589?pvs=21)]\n- mendable: 根据开发文档进行问答 [[官网](https://www.mendable.ai/usecases/documentation)]\n- 阅读 PDF 文档\n    - Humata.ai\n    - explainpaper\n    - ChatPDF\n    - [[对比](https://twitter.com/oran_ge/status/1683432444169711616?utm_source=pocket_saves)] Claude2支持超长上下文，摘要信息量更大，更适合长文提炼。ChatDOC 具有页码溯源、表格解析、原文定位功能，数据找得准，也方便二次验证，能够限制大语言的幻觉问题。\n- Obsidian-copliot: 快速获取文字的核心观点\n- 视频内容梗概\n    - Glarity: 浏览器插件，基于ChatGPT和字幕生成Youtube摘要，20秒看完梗概 [[Twitter](https://twitter.com/starzqeth/status/1640867876109422595)]\n    - summarize-tech: 5分钟了解长视频的要点. [[Twitter](https://twitter.com/starzqeth/status/1640867876109422595)]\n- webpilot: 可联网可读网页链接的插件 Webpilot 推出的 Chrome 版插件 [[chrome](https://chrome.google.com/webstore/detail/webpilot-copilot-for-all/biaggnjibplcfekllonekbonhfgchopo?utm_source=link)]\n\n### 模型教程、评论、二次开发\n\n- 一般性原理\n    - 《Prompt 编写模式》[[phodal](https://prompt-patterns.phodal.com)]\n    - 《LLM+Embedding构建问答系统的局限性及优化方案》[[知乎](https://zhuanlan.zhihu.com/p/641132245)]\n    - 基于检索的 LM，外挂一个数据库用来检索。[[推特](https://twitter.com/cosmtrek/status/1678077835418955781)][[GitHub.io](https://acl2023-retrieval-lm.github.io/)]\n    - 一篇泼冷水的论文 [[ACL Anthology](https://aclanthology.org/2023.findings-acl.426/)]\n    - 即刻出的Prompt调试工具。[[Twitter](https://twitter.com/vista8/status/1678784460786135040)][[官网](https://promptknit.com/)]\n- GPT\n    - GPT best practice [[OpenAI](https://platform.openai.com/docs/guides/gpt-best-practices?utm_source=pocket_saves)]\n    - Andrew Ng 吴恩达 \u0026 Isa Fulford from OpenAI 《Build system with [#ChatGPT](https://twitter.com/hashtag/ChatGPT?src=hashtag_click) API》[推特@**[金田達也](https://twitter.com/JefferyTatsuya)**]\n        - 借助 CoT 的思路，翻译字幕，返回正确的 JSON 格式 [[推特](https://twitter.com/dotey/status/1665476562219573249)]\n        - 同样的加入了CoT（Chain of Though）的Prompt，如果让GPT打印出来步骤，效果非常好，但是如果不让GPT打印（省点token，以及更容易解析），那么GPT就会偷懒 [[Twitter](https://twitter.com/dotey/status/1668736426286915590)1][[Twitter2](https://twitter.com/dotey/status/1664335473500626946)]\n    - 熊猫吃短信是 Twitter@威力狈 开发的垃圾短信过滤工具。将其与 GPT 结合的一些讨论\n        - [Twitter@威力狈](https://twitter.com/waylybaye/status/1664253928970788864)：尝试了下用 ChatGPT 自动标注数据，效果太差了。\n        - [Twitter@宝玉](https://twitter.com/dotey/status/1669028955842650139)：通常如果我写的话，会做一些小调整\n        - [Twitter@IIInoki](https://twitter.com/IIInoki)：是的，感觉八爷用 API 用得有点糙……就只是很简单的 prompt 达到的效果都还不错\n    - 《ChatGPT 越过山丘之后，再来谈谈 LLM 应用方向》[[橘子汽水铺](https://quail.ink/orange/p/chatgpt-cross-over-the-hills-and-discuss-llm-application-directions)]\n- `LangChain`:\n    - 官方教程 [[推特](https://twitter.com/LangChainAI/status/1665009694627250176)][[streamlit](https://blog.streamlit.io/langchain-tutorial-1-build-an-llm-powered-app-in-18-lines-of-code/)]\n    - 一个使用 LangChain 和 GPT Index 的教程 [[leanpub, 收费](https://leanpub.com/langchain)][[Pocket](https://getpocket.com/read/3839490971)]\n    - LangChain for LLM Application Development 基于LangChain的大语言模型应用开发 [[YouTube](https://t.co/JXV1SBI2OA)]\n        - 基于Embedding的文档问答。stuff, map reduce, refine, map rerank [[Twitter@宝玉](https://twitter.com/dotey/status/1667790801420558342)]\n    - Chanin Nantasenamat: LangChain tutorial #1: Build an LLM-powered app in 18 lines of code [[streamlit](https://blog.streamlit.io/langchain-tutorial-1-build-an-llm-powered-app-in-18-lines-of-code/?utm_source=pocket_saves)]\n    - 把一篇很长的 PDF 内容喂给 ChatGPT，然后向他提问\n        - 纯 JS 开源工具推荐 [[推特](https://twitter.com/Barret_China/status/1638119945749037056)]\n        - 用 `LangChain` 六七行代码就可以搞定了 [[LangChain](https://js.langchain.com/docs/get_started/introduction)]\n- `AutoChain`\n    - 介绍 [[推特](https://twitter.com/zhangjintao9020/status/1683996172980199429)][[GitHub](https://github.com/Forethought-Technologies/AutoChain)]\n    - 《我为什么放弃了 LangChain》[[推特](https://twitter.com/Barret_China/status/1683135367862718465)][[微信](https://mp.weixin.qq.com/s/jIbz9JYc8-_ua-QLENX__A)] 推友提出的 AutoChain 替代方案 [[推特](https://twitter.com/Barret_China/status/1684211570186887170?utm_source=pocket_saves)]\n- `OpenDAN`: 为各类 AI 模块提供运行环境，并提供它们之间的互操作性协议。可创建诸如律师、医生、教师，甚至男女朋友等角色 [[GitHub](https://twitter.com/Barret_China/status/1666455683758161920)]\n- “视频语音↔文字”任务相关\n    - 指定视频URL，识别文字，翻译 [[GitHub](https://github.com/lewangdev/autotranslate)]\n    - `WhisperX`: 按照单词对齐时间戳，生成的字幕都是完整的句子 [[GitHub](https://github.com/m-bain/whisperX)]。[[Twitter@宝玉](https://twitter.com/dotey/status/1667394662628204546)] 写了一个可以根据 YouTube Url 识别 YouTube 字幕的 [Jupyter Notebook](https://github.com/JimLiu/whisper-subtitles/blob/main/whisperx_youtube_subtitle.ipynb)\n    - `audiocraft`: audio processing and generation with deep learning. [[GitHub](https://github.com/facebookresearch/audiocraft)]\n    - [[推特]](https://twitter.com/Barret_China/status/1684218981639413760) 小作文\n    - `yt-dlp` 一行命令下载视频字幕的工具，不需 puppeteer 无头浏览器 [[推特](https://twitter.com/Barret_China/status/1684228477644570624)][[GitHub](https://github.com/yt-dlp/yt-dlp)]\n- ChatGPT + AI agent + ScholarAI + Noteable 写的小综述 [[链接失效](https://t.co/eqVc2LIfSz)]\n- `MusicGen`: 将文本和旋律转化为完整乐曲 [[Twitter](https://twitter.com/Fenng/status/1668141100610248705)][[ReadHub](https://www.notion.so/3753e42dc4204a99ab83a725b655a632?pvs=21)]\n- `MMS`: 一个声音模型 [[HuggingFace](https://huggingface.co/docs/transformers/main/en/model_doc/mms)]\n- `FRVR Forge`: AI-Powered End-to-End Game Creation [[Twitter](https://twitter.com/FRVRGames/status/1669758477789540365)][[官网](https://www.notion.so/ai-University-Cloud-8078b4682e454a5fba982f67e4530498?pvs=21)]\n\n### 开发平台\n\nRunpod: 租用 GPU 跑模型并创建 Serverless API 一站式服务，最低只要0.2刀/hr。[[官网](http://runpod.io)]\n\n### 杂项\n\n- 2023年5月27日、28日，OpenAI 使用 Sentry 审计工具封禁来自中国的用户，解决方案：\n    - 路由器 Clash 规则 [[推特](https://twitter.com/wey_gu/status/1663003950214438912?utm_source=pocket_saves)]\n    - 改用 Azure OpenAI service [[推特](https://twitter.com/zhangjintao9020/status/1662865819041402880)]\n    - Cloudflare WARP [[左耳朵](https://haoel.github.io/)]\n\n## 生成式图像模型\n\n2023年5月31日，Adobe 添加人工智能相关功能 generative fill。[[推特](https://twitter.com/CodeByPoonam/status/1663824055164887040)]\n\n- 配置要求极低，连Win掌机都能跑，但是不能断网。[[推特](https://twitter.com/OfflineHelper/status/1666042746866663424)]\n- 填充将横屏的视频转换为竖屏。[[推特](https://twitter.com/Alex_Cerrato/status/1681677307843432449)]\n\n`MidJourney`\n\n- 在提示词中添加相机镜头信息。[[推特](https://twitter.com/4rtofficial/status/1663310457854099458)]\n- zoom [[Twitter](https://twitter.com/jesselaunz/status/1674210886695923712)]\n\n`StableDiffusion`\n\n- Eric Fu: 训练指南. [[Coding Husky](https://ericfu.me/stable-diffusion-finetune-guide/?utm_source=pocket_reader)]\n- 文字或者符号融合生成图片 [[Twitter](https://twitter.com/op7418/status/1680223090138316800)][[微信](https://mp.weixin.qq.com/s/rvpU4XhToldoec_bABeXJw)]\n\n`StyleDrop`: Google 基于 MUSE 的样式迁移 transformer [[推特](https://twitter.com/recatm/status/1665056017107886080)][[GitHub.io](https://styledrop.github.io/)]\n\n`Redream`: 从视频到二次元动画 [[推特](https://twitter.com/heyBarsee/status/1665034805384290307)][[GitHub](https://github.com/Fictiverse/Redream)]\n\n`Runway` Gen-2: 文本生成视频和图片生成视频, 4 秒钟 [[推特](https://twitter.com/op7418/status/1666461595818504192)][[需注册](https://app.runwayml.com/login)]\n\n一个 AI 视频解决方案，来自南洋理工，代码尚未开源 [[Twitter](https://twitter.com/op7418/status/1669026494885285888)] [[GitHub.io](https://anonymous-31415926.github.io/)][[Twitter2](https://twitter.com/rickawsb/status/1672310994390126593)][[arxiv](https://arxiv.org/abs/2306.07954)]\n\n`AWPortrait1.1`: 图像生成 [[Twitter](https://twitter.com/dynamicwangs/status/1673730591462928385)][[LibLibai](https://www.liblibai.com/modelinfo/721fa2d298b262d7c08f0337ebfe58f8)] \n\n`Anything AI`: 可以取代照片中的任何物体。免费，不需要注册. [[官网](https://www.anything-ai.com/)]\n\n`PixelLab`: 草图创建2D图像. [[官网](https://www.pixellab.ai/)]\n"},{"slug":"what-is-intelligence-not-same-as-intelligence-is-what","filename":"2023-06-17-what-is-intelligence-not-same-as-intelligence-is-what.md","date":"2023-06-17","title":".tex | 什么是智能≠智能是什么","layout":"post","keywords":["tex","doc","md","ai"],"hasMath":true,"excerpt":"“什么是智能”的问题每每得不到回答，是因为它的逆问题“智能是什么”没有答案。","content":"\n## 0\n\n这是一篇酬和之作。\n\n徵文标题说的是：\n\n\u003e **機器會製造「內涵」嗎？**\n\u003e \n\n但是正文提出的问题是：\n\n\u003e AI透過程式組合出回答你問題的文字組合，有「涵義」嗎？\n\u003e \n\n可是，「內涵」和「涵義」两个词的——内涵/涵义——就不完全一样啊……\n\n“内涵”(connotation) 通常指词语或表达方式所隐含的情感、态度、暗示或附加的意义。它涉及到词语或表达方式所引起的情感、联想或隐含的观点。也就是弦外之音。\n\n而“涵义”(meaning) 一般指词语、表达方式或行为所传达的字面意义或字面上的定义。它强调的是直接的、明确的意义。\n\n看热闹不嫌事大，那我们再把问题搞复杂一点——在逻辑学里也有一个“内涵”(intension)，和“外延”(extension) 相对应。用**面向对象编程**的说法来理解，一个类里面定义的所有状态量和内部方法的集合，就构成这个类的“**内涵**”；所有（已经和将来能够）从这个类实例化出来的对象的集合，就构成这个类的“**外延**”。\n\n所以看起来，征文者想问的是日常“内涵”也就是言外之意，但是怕杠精（比如我）用有严格定义的逻辑“内涵”解构掉，所以换了“涵义”一词。\n\n这个问题很显然是因应最近大语言模型掀起的这一波 AI 浪潮。这个问题往前再问一句，就是“大语言模型是智能体/有智能吗？”\n\n- 前两年 DeepMind 的 AlphaGo/AlphaZero 系列 AI 在围棋中击败人类棋手时，人们也在问这个问题。\n- 上世纪四五十年代专家系统 (expert system) 刚刚开发的时候，人们也在问这个问题。\n- 从电子计算机往前追溯到机械计算机，甚至是巴比奇的差分机的时候，人们就已经开始问这样的问题了。\n\n这些问题求并集，然后在问题数量趋近于无穷下的极限，就是“什么是智能”。\n\n这样的问题每每得不到回答，是因为它的逆问题“智能是什么”没有答案。我们并没有智能的准确定义，只能一事一论。而之前的智能和非智能体的区别太明显，以至于作出判断也不能对智能的定义有所启发。\n\n## 1\n\n而对“智能是什么”的探究，哲学、逻辑学、计算机科学、生物学、管理学，不同领域的研究者有着不同的思路。\n\n### 古哲学·洞穴之壁与理念世界\n\n古希腊哲学家柏拉图在《理想国》里提到了“洞穴之壁”的寓言故事。\n\n有一群被囚禁在一个深洞的囚徒，从出生开始就被束缚在这个洞穴里，脖子和腿都被铁链锁住，没办法转身或离开。囚徒身后的洞穴入口处有一道火焰，火焰后有人持物体走过，物体的投射在洞穴内的墙壁上形成了影子。囚徒们就以为这些影子就是唯一的存在。\n\n这里的囚徒代表着人类，洞穴代表着世界，影子则代表着我们对于现象世界的感知和观念。人们的知识和信念往往受限于自己的经验和感知，就像囚徒们只看到了洞穴墙壁上的影子，而在影子之外还存在一个理想的理性世界。柏拉图用这个寓言故事表达了他对于人类认识和智慧的理解。所谓智慧，就是从洞穴的影子反过去推测火把前物体的能力。\n\n当然，这种思想被 Marx 主义定性为一种客观唯心主义、唯理论，是受其批判的。\n\n### 逻辑学·从命题到希尔伯特算符\n\n柏拉图的学生亚里士多德，今天在低年级的物理教科书里基本是个反面典型，但他对逻辑学进行了系统化和全面的研究，提出了许多逻辑学的基本概念和原理。这些成果后来成为了欧洲哲学和逻辑学的基石，对西方哲学和科学的发展产生了深远影响。\n\n所谓逻辑，就是研究命题的对错，以及如何判断命题对错的学问。而命题，就是能被判断对错的句子。但是句子显然可以再分成不同成分，于是就发明/发现了主体、客体、谓词、谓词的量词……等等概念，以及用这些概念构造命题的方法。\n\n但是要注意，虽然逻辑主要由语言来表达，但是逻辑还是和语言不同，主体、客体也不等于句子的主语、宾语。这两者的区别，基本可以类比于之前洞穴之壁寓言里的实体和影子。\n\n这种努力到目前为止的巅峰，基本上要数希尔伯特形式化逻辑系统了。感兴趣的朋友可以自行查阅戈得门特《代数学教程》的第一章，这玩意相当于思想界的引体向上，反正我是一个也拉不上去……\n\n### 计算机·从半导体到抽象语法树\n\n希尔伯特是德国的数学家，《代数学教程》也是数学而不是哲学教材。显而易见，逻辑虽然由哲学家奠基，但是主导权很快落到数学家，至少是哲学家兼数学家手里了。\n\n命题的“真”与“非真”同构于 {1, 0}，各种逻辑运算都可以分解成“或”与“非”两种基本逻辑运算的组合，这就是以数学家乔治·布尔 (George Boole) 命名的布尔代数。因为 {1, 0} 又可以同构于半导体电路的高低电位，和各种类似继电器的门电路组合，所以很容易用计算机在物理世界表示出这些逻辑运算。\n\n我们的电脑由上亿个这样的电位和逻辑门组成，一般的科普文章应该会去介绍芯片啊光刻机之类的东西，本文关注的是另一个方面：虽然生产电脑配件的厂商很多，不同的型号的元器件设计不同，组装出的成品应该千差万别，但是他们可以运行同样的程序，理想条件下（虽然实际工程中常常不理想）我们也可以期望他们跑出同样的结果。\n\n这说明所谓计算机科学，并不等同于研究计算机元件的电子科学和工程，这里电科和电子工程相当于洞穴岩壁上的影子，而计算机科学就相当于火光前的物体。这种超越物理的计算本质，一般用一种叫做“抽象语法树”的数据结构来表示。\n\n### 生物学·从神经元到神经网络\n\n人们发明计算机的时候，基本上还是把它当作工具，就没期望它有什么主体性和智慧。\n\n而随着生物学逐渐发现了神经系统及其作用，也随着物理学在二十世纪初的大发展之后的相对平静，很多物理学家开始插手其他学科。既然生命和非生命体的背后都服从同一套物理规律，既然物理学的众多成功经验说明，搞清楚构成系统的所有微观组成就可以理解宏观的系统，那么搞清楚人类的智力器官的基本单元以及相互作用，按理说也就能够理解什么是智慧。\n\n![a cartoon illustrating a neuron](/photos/2023-06-17-neuron.png)\n\n上图是一个神经细胞的结构示意图。从其他神经细胞释放出来的名为神经递质的化学物质，到达神经元左侧短且密集的树突之后，激活细胞膜表面的离子泵，主动运输离子跨过细胞膜，从而产生电信号。电信号沿细胞膜传导到右侧的树突，刺激凸触释放神经递质给下一个细胞。\n\n![a handdrawing style illustration of perceptron](/photos/2023-06-17-perceptron.png)\n\n上图就是根据神经元的工作原理抽象出的数学模型，名为 perceptron。一个 perceptron 就是一个函数，接受多个输入的自变量，加权求和之后套一个非线性的激活函数，得到一个输出。很多个这样的 perceptron 并连和串联，就构成下图，计算机算法中的神经网络。\n\n![a handdrawing style illustration of a neural network](/photos/2023-06-17-neural-network.png)\n\n而从实验方向研究神经系统，我们隔壁系就有，经常来我们系招人。基本上就是在小鼠的天灵盖上锯开一个天窗，然后给它带上个头盔，头盔上有能从天窗伸进去的电极，采集脑神经的电信号。以前头盔有网线伸到实验室天花板，实时传到数据中心的超算。现在好像进步了，改用 Wi-Fi 了。\n\n这实验怎么通过的伦理审查，咱也不知道，咱也不敢问……\n\n### 管理学·DIKW “数据-信息-知识-智慧”模型\n\n![a pyramid of DIKW model](/photos/2023-06-17-DIKW.png)\n\nDIKW 四个字母分别代表 data, information, knowledge, wisdom，即数据、信息、知识、智慧，是一种知识管理中的心智模型。\n\n四个层次，前一层都是后一层的基础，后一层都是对前一层的理解。\n\n如果是书面文字，数据就是笔画和字母；如果是语言，数据就是人声的响度、频率和音色。由笔画/字母/声音组成的有含义的字词就是信息。表示信息之间的关系的，可以判断对错的命题就是知识。包含和统摄各条知识的思想体系，就是智慧。\n\n反过来说，虽然智慧高于思想，但它仍需要通过把各条知识的表达汇总起来，才能被人感知。对知识的命题的理解依赖于构成名字的各个概念的涵义，属于信息水平的内容。而每个字都有不考虑其涵义的笔画字母构成。\n\n这层与层之间**看似**并没有插入额外的内容，智慧可以直接由笔画构成。但是我们一层层理解的深入，其实是不自觉地借用了我们当前社会约定俗成的解读方式。\n\n比如下面这个图片里的符号，对于现代人就只是数据，无法解读成信息。但是对于苏美尔人，这是用楔形文字表示的数字，是等腰直角三角形的腰和直角边的比值，也就是 $$\\sqrt{2}$$ 的近似值。\n\n![sumerian numerical approximation to square root of two](/photos/2023-06-17-ancient-root-2.png)\n\n约定俗成的数据解读方式，也就是关于**数据的数据**，根据西方的构词法，可以叫做“**元**数据”(meta-data)。\n\n数据和元数据一起构成信息，信息和元信息一起构成知识，知识和元知识一起构成智慧。俺坚持写博客的动机，就是用费曼学习法，把无意间使用的元知识显式地表达出来，而且记录下来，争取学而不退转。\n\n## 2\n\n回顾了这些，再来看大语言模型，就会发现它落在了各方努力的延长线的交点。\n\n大语言模型里有一个重要概念叫做“嵌入”(embedding)，就是把语言的基本字元 (token) 可逆地映射到一个超多维度的向量空间里。本来“国王”和“儿子”之间没办法加减乘除，但是嵌入后的向量空间里有加法和数乘，如果嵌入函数选得好，“国王”的向量 + “儿子”的向量，结果向量就约等于“王子”的向量。\n\n![illustration of vector addition from wikipedia](/photos/2023-06-17-vector-addition.png)\n\n生成式语言模型的核心就是一个超多元函数，接受前一个字嵌入后的向量作为输入，给出另一个向量作为输出，用嵌入函数的逆映射翻译成字元；再把旧的输出作为新的输入，直到输出结果是“语段结束”这样一个特殊字元为止。模型训练的过程，主要就是通过现成的语料，拟合这个超多元函数的参数。\n\n从 DIKW 模型来看，语言模型操作的是最基本的数据，它的输出究竟是什么信息，是不是正确的知识，体现了多少智慧，是人根据当下的社会文化来解读的。\n\n而实现 AI 的电子计算机，或是复杂生命的大脑，他们和智能之间的关系，应该就类似于具体的计算机电路和抽象语法树之间的关系。以此类比，未来的智能科学应该会成为一门独立的专业，它和计算机科学和神经生物学的区别，就像今天的电子科学与工程，和计算机科学之间的区别一样。当下神经生物学的热度，将来恐怕多半会被分流。\n\n这种对字符的计算不同于逻辑运算，语言模型不判断输出结果在逻辑上的正确与错误，这既给了他啥都能说几句的 feature，又给了它经常编假消息的 bug。\n\n想要改掉这种错误，引入对 AI 的纠错机制，治本之道恐怕还是诉诸于对世界的正确描述，与理论相关的还是要靠逻辑，与现实相关的还是要靠科学。\n\n只不过，大语言模型提供了一种数据结构，有希望把人类已知的真理储存在一起。对这种数据结构本身的研究，有可能反过来启发科学的发展。柏拉图的洞穴之壁可能不再是一个比喻，未来更大的语言模型的，亿万维度的参数空间有希望成为洞穴门口的那团火。\n\n只不过这一切都是“可能”，现在还只是 AI 的萌芽阶段，还没有足够的证据来证实或者证伪这种畅想。而且 AI 的参数量再大也是有限的，它所能表达的信息也就有限，而真理应当是无限的，就像科学一样，总要训练更新更大的模型，总要发现已知的未知，然后欣然接受更多未知的未知之存在。\n\n如果电子计算机实现的 AI 独立于人类产生了意识和超出人类的智慧，很难想象他们会继续用人类语言这种对他们来说很不方便的方式来交流。\n\n所以，哪怕是做个 AI 生成内容的质检员，科学家依然有事可做。这算是科学的堕落吗？当然不算，如果算的话，那从计算物理也被当作理论物理的那天起，人类就已经投降了（逃）\n\n## 3\n\n现在正面来回答问题：AI透過程式組合出回答你問題的文字組合，有「涵義」嗎？\n\n答：有。\n\n因为语言的「涵義」来自于语言的内容，和整个社会的文化，并不来自于这句话的作者的身份。即便是人与人之间的交流，诉诸身份也是一种非形式逻辑谬误，是理性不足的表现。只有在信息不足仍不得不下结论的时候才该使用，比如法律判决时的自由心证主义和/或法定证据主义。\n\n而鹿妈眼里真人鹿酱与 AI 鹿酱的区别，如果有的话，好像主要体现在动机的区别。动机这种东西，很多智慧不高的生物，比如小猫小狗都会有；而现在的 AI，似乎还没有展现出超出编程者设计的动机。编程写入的信息有限，现有 AI 的动机也就有限，鹿酱的赢面还是很大的。\n\n而动机是生物与非生物的区别吗？而什么是生物 ≠ 生物是什么，那就是另一个含混而复杂的问题了。\n\n## 4\n\n这篇博文发布的时候，高考应该已经结束了，马上该填报志愿了。\n\n那么，西元 2023 年，AI 来袭的当下，该选个啥专业在 AI 浪潮中幸存，或者选个啥专业给 AI 老爷带路呢？\n\n![a screenshot of a quotation from Three Body about attitudes towards aliens](/photos/2023-06-17-three-body-quotation.png)\n\n我的建议是，不要听别人的建议，按自己的兴趣来就好了。\n\n刚刚改开的时候，有一个超级热门的专业，叫科技英语。科技落下了好多年，对外开放需要语言交流，两者一结合应该是热门又稀缺了。结果呢，你现在还听说过这个专业吗？\n\n科技很重要是不错，语言很重要也不错，但是搞科技的人自己可以学英语，学英语的有几个搞得了科技？社会的进步主要靠创新，而创新的方向难以预测，不论这种预测分析听起来多有道理。\n\n如果真的找不到兴趣，那就在能力范围之内，找个难度最高的。如果想从事智力劳动，那数学含量是个不错的衡量标准；如果不排斥体力劳动，那训练时间越长越值得考虑。\n\n但这只是填志愿来不及时的权宜之计，发掘兴趣是人一生的课题。\n\n兴趣不是为了让你成功的时候更得意，毕竟成功的话不论做什么都很得意；\n\n兴趣是为了你不成功时也可以不失意，毕竟平凡才是人生的真谛。\n"},{"slug":"physics-based-neural-network-review-note","filename":"2023-03-20-physics-based-neural-network-review-note.md","date":"2023-03-20","title":".tex | 基于物理的神经网络 (PINN) 综述笔记","layout":"post","keywords":["tex","phy","md","ai"],"hasMath":true,"excerpt":"本文是《Scientific Machine Learning Through Physics–Informed Neural Networks: Where we are and What’s Next》这篇综述的读书笔记。","content":"\n\u003e 本文是《[Scientific Machine Learning Through Physics–Informed Neural Networks: Where we are and What’s Next](https://link.springer.com/article/10.1007/s10915-022-01939-z)》这篇综述的读书笔记。\n\u003e \n\n年前，今年新入职的天文学方面的一位老师给我们群发邮件，宣传某国家实验室超算的 GPU 编程马拉松活动，他可以担任指导老师。于是毫不意外地，我报了名。该编程马拉松项目还需要专门申请，申请材料里要写清楚打算干什么，于是报名的五六个人七嘴八舌地想创意。基于物理的神经网络 PINN 就是天文老师的点子。\n\n~~写到这里，我才意识到，老哥是不是想拿我们当免费劳动力啊~~~\n\n神经网络可以看作是一个复杂的非线性函数，接受一个（一般来说维度很高的）向量作为输入，一番计算后输出另一个向量。训练神经网络，就是找到这个函数的参数，绝大多数找参数的方法涉及计算网络输出对参数的偏导数，因此神经网络计算框架的核心功能就是自动微分 (auto-differentiation)。\n\n而很多物理问题，都可以用（偏）微分方程来描述，微分方程的解不是变量，而是函数，而且往往是复杂的非线性函数。所以基于物理的神经网络 (PINN) 就是以神经网络来表达这个函数，然后把这个函数带入到物理的微分方程中，把神经网络输出和真正的物理解之间的差距当作损失函数，反向传播回去来优化神经网络的参数。代入方程时的微分计算，正好可以利用现成框架的自动微分功能。\n\n在以 GPT 为代表的 transformer 类神经网络模型出现之前，自然语言处理类的机器学习项目，往往要在网络之外，利用人类的语法知识，对语段进行语义分割等等“中间任务”。Transformer 一出，算力出奇迹，中间任务逐渐变得没有必要了。\n\n在 GPT 崭露头角，并且越来越有迹象表明其将会涌现出通用人工智能的今天，这些基于物理的神经网络，会不会还未成熟就已过时？这种心情，就和《三体》第二卷开始，章北海和吴岳面对焊渍未漆的“唐”号航空母舰时差不多吧……\n\n\u003chr class=\"slender\"\u003e\n\n- Abstract\n    - PINNs are neural networks that encode model equations. a NN must fit observed data while reducing a PDE residual.\n\n1. Introduction\n    - The “curse of dimensionality” was first described by Bellman in the context of optimal control problems. (Bellman R.: Dynamic Programming. Sci. 153(3731), 34-37 (1966))\n    - Early work: MLP ([multilayer perceptron](https://en.wikipedia.org/wiki/Multilayer_perceptron)) with few hidden layers to solve PDEs. ([https://doi.org/10.1109/72.712178](https://doi.org/10.1109/72.712178))\n    - 感觉可能更全面的一篇综述：[https://doi.org/10.1007/s12206-021-0342-5](https://doi.org/10.1007/s12206-021-0342-5)。该文关注 what deep NN is used, how physical knowledge is represented, how physical information is integrated，本文只关于 PINN, a 2017 framework。\n\n    1. What the PINNs are\n        - PINNs solve problems involving PDEs:\n            - approximates PDE solutions by training a NN to minimize a loss function\n            - includes terms reflecting the initial and boundary conditions\n            - and PDE residual at selected points in the domain (called **collocation points**)\n            - given an input point in the integration domain, returns an estimated solution at that point.\n            - incorporates a [residual network](https://en.wikipedia.org/wiki/Residual_neural_network) that encodes the governing physical equations\n            - can be thought of as an **unsupervised strategy** when they are trained solely with physical equations in forward problems, but **supervised learning** when some properties are derived from data\n        - Advantages:\n            - [mesh-free](https://en.wikipedia.org/wiki/Meshfree_methods)? 但是我们给模型喂训练数据的时候往往已经暗含了 mesh 了吧\n            - on-demand computation after training\n            - forward and inverse problem using the same optimization, with minimal modification\n    2. What this Review is About\n        - 提到了一个做综述找文章的方法：本文涉及的文章可以在 Scopus 上进行高级搜索：`((physic* OR physical)) W/2 (informed OR constrained) W/2 “neural network”)`\n2. The Building Blocks of a PINN\n    - question:\n    \n    $$\n    F(u(z);\\gamma)=f(z),\\quad z\\ \\in\\ \\Omega \\\\ B(u(z))=g(z), \\quad z\\ \\in\\ \\partial \\Omega\n    $$\n    \n    - solution:\n    \n    $$\n    \\hat u_{\\theta}(z)\\approx u(z)\\\\ \\theta^* = \\arg\\min_{\\theta}\\left(\\omega_F L_F(\\theta)+\\omega_BL_B(\\theta)+\\omega_{data}L_{data}(\\theta)\\right)\n    $$\n    \n    1. Neural Network Architecture\n        - DNN (deep neural network) is an artificial neural network that is deeper than 2 layers.\n        \n        1. Feed-Forward Neural Network: \n            - $$u_{\\theta}(x) = C_{K} \\circ C_{k-1} ...\\alpha \\circ C_1(x),\\quad C_k(x) = W_k x_k + b_k$$\n            - Just change CNN from convolution to fully connected.\n            - Also known as multi-layer perceptrons (MLP)\n            \n            1. FFNN architectures \n                - Tartakovsky et al used 3 hidden layers, 50 units per layer,  and a hyperbolic tangent activation function. Other people use different numbers but of the same order of magnitude.\n                - A comparison paper: *Blechschmidt, J., Ernst, O.G.: Three ways to solve partial differential equations with neural networks –A review. GAMM-Mitteilungen 44(2), e202100,006 (2021).*\n            2. multiple FFNN: 2 phase [Stephan problem](https://en.wikipedia.org/wiki/Stefan_problem).\n            3. shallow networks: for training costs\n            4. activation function: the swish function in the paper has a learnable parameter, so — [how to add a learnable parameter in PyTorch](https://discuss.pytorch.org/t/how-could-i-create-a-module-with-learnable-parameters/28115)\n        2. Convolutional Neural Networks: \n            - I am most familiar with this one.\n            - $$f_i(x_i;W_i)=\\Phi_i(\\alpha_i(C_i(W_i,x_i)))$$\n            - performs well with multidimensional data such as images and speeches\n            \n            1. CNN architectures: \n                - `PhyGeoNet`: a physics-informed geometry-adaptive convolutional neural network. It uses a coordinate transformation to convert solution fields from irregular physical domains to rectangular reference domains.\n                - According to Fang ([https://doi.org/10.1109/TNNLS.2021.3070878](https://doi.org/10.1109/TNNLS.2021.3070878)), a Laplacian operator can be discretized using the finite volume approach, and the procedures are equivalent to convolution. Padding data can serve as boundary conditions.\n            2. convolutional encoder-decoder network\n        3. Recurrent Neural Network\n            - $$f_i(h_{i-1})=\\alpha\\left(W\\cdot h_{i-1}+U\\cdot x_i+b\\right)$$, where f is the layer-wise function, x is the input, h is the hidden vector state, W is a hidden-to-hidden weight matrix, U is an input-to-hidden matrix and b is a bias vector. 我认为等号左边的 $$h_{i-1}$$ 应当作为下标\n            - 感觉有点像 hidden Markov model，只不过 Markov 中间的 hidden layers 好像与序号无关（记不清了），~~RNN 看起来各个 W 和 H 似乎不同~~。**RNN cell is actually the exact same one and reused throughout.** (from [https://blog.floydhub.com/a-beginners-guide-on-recurrent-neural-networks-with-pytorch/](https://blog.floydhub.com/a-beginners-guide-on-recurrent-neural-networks-with-pytorch/)). Cartoon from Wikipedia:\n                \n                ![RNN 的构成单元](/photos/2023-03-20-rnn-unit.png)\n                \n            - From [https://blog.floydhub.com/a-beginners-guide-on-recurrent-neural-networks-with-pytorch/](https://blog.floydhub.com/a-beginners-guide-on-recurrent-neural-networks-with-pytorch/):\n                \n                ![RNN 的种类](/photos/2023-03-20-rnn-types.png)\n                \n            1. RNN architectures\n                - can be used to perform numerical Euler integration\n                - 基本上输出的第 i 项只与输入的第 i 和 i-1 项相关。\n            2. LSTM architectures\n                - 比 RNN 多更多中间隐变量，至于怎么做到整合长期记忆的，技术细节现在可以先略过\n        4. other architectures for PINN\n            1. Bayesian neural network: weights are distributions rather than deterministic values, and these distributions are learned using Bayesian inference. 只介绍了[一篇文章](https://doi.org/10.1016/j.jcp.2020.109913)\n            2. GAN architectures: \n                - two neural networks compete in a zero-sum game to deceive each other\n                - physics-informed GAN uses automatic differentiation to embed the governing physical laws in stochastic differential equations. The discriminator in PI–GAN is represented by a basic FFNN, while the generators are a combination of FFNNs and a NN induced by the SDE\n            3. multiple PINNs\n    2. Injection of Physical Laws\n        - 既然是要解常/偏微分方程，那么微分计算必不可少。四种方法：hand-coded, symbolic, numerical, auto-differentiation，最后一种显著胜出。所谓 auto-differentiation, 就是利用现成框架，框架自动给出原函数的导数的算法。\n        - Differential equation residual:\n            - $$r_F[\\hat u_\\theta](z)=r_\\theta(z):=F(\\hat u_\\theta(z);\\gamma)-f$$\n            - $$r_F[\\hat u_\\theta](z)=r_\\theta(x,t)=\\frac{\\partial}{\\partial t}\\hat u_\\theta(x,t)+F_x(\\hat u_\\theta(x,t))$$: 原文给出了来源，但是从字面上看不出来与前式的等价性\n        - Boundary condition residual: $$r_B[\\hat u_\\theta](z):=B(\\hat u_\\theta(z))-g(z)$$\n    3. Model Estimation by Learning Approaches\n        1. Observations about the Loss\n            - $$\\omega_F$$ accounts for the fidelity of the PDE model. Setting it to 0 trains the network without knowledge of underlying physics.\n            - In general, the number of $$\\theta$$ is more than the measurements, so regularization is needed.\n            - The number and position of residual points matter a lot.\n        2. Soft and Hard Constraints\n            - Soft: penalty terms. Bad:\n                - satisfying BC is not guaranteed\n                - assignment of the weight of BC affects learning efficiency, no theory for this.\n            - Hard: encoded into the network design. [Zhu et. al](https://doi.org/10.1007/s00466-020-01952-9)\n        3. Optimization methods\n            - minibatch sampling using the Adam algorithm\n            - increased sample size with L-BFGS (limited-memory Broyden-Fletcher-Goldfarb-Shanno)\n    4. Learning theory of PINN: roughly in DE, consistency + stability → convergence\n        1. convergence aspects: related to the number of parameters in NN\n        2. statistical learning error analysis: use *risk* to define *error*\n            - Empirical risk: $$\\hat R[u_\\theta]:=\\frac{1}{N}\\sum_{i=1}^N \\left\\|\\hat u_{\\theta}(z_i)-h_i\\right\\|^2$$\n            - Risk of using approximator: $$R[\\hat u_{\\theta}]:=\\int_{\\bar \\Omega}(\\hat u_{\\theta}(z)-u(z))^2dz$$\n            - Optimization error: the difference between the local and global minimum, is still an open question for PINN. $$E_O:=\\hat R[\\hat u_{\\theta}^*]-\\inf_{\\theta \\in \\Theta}\\hat R[u_\\theta]$$\n            - Generalization error: error when applied to unseen data. $$E_G:=\\sup_{\\theta \\in \\Theta}\\left\\|R[u_\\theta]-\\hat R[u_\\theta]\\right\\|$$\n            - Approximation error: $$E_A:=\\inf_{\\theta \\in \\Theta}R[u_\\theta]$$\n            - Global error between trained deep NN $$u^*_\\theta$$ and the correct solution is bounded: $$R[u^*_\\theta]\\le E_O+2E_G+E_A$$\n            - 有点乱，本来说 error 是误差，结果最后还是用 risk 作为误差\n        3. error analysis results for PINN\n3. Differential Problems Dealt with PINNs：读来感觉这一部分意义不大，将来遇到需要解决的问题时，回来看看之前有没有人做过就行了——另一方面看，一类方程就需要一类特殊构造的神经网络来解，那么说明神经网络解方程的通用性并不好~\n    1. Ordinary differential equations: \n        - Neural ODE as learners, a continuous representation of **ResNet**. [[Lai et al](https://doi.org/10.1016/j.jsv.2021.116196)], into 2 parts: a physics-informed term and an unknown discrepancy\n        - LSTM [[Zhang et al](https://doi.org/10.1016/j.cma.2020.113226)]\n        - [Directed graph models](https://doi.org/10.1016/j.compstruc.2020.106458) to implement ODE, and Euler RNN for numerical integration\n        - Symplectic Taylor neural networks in [Tong et al](https://doi.org/10.1016/j.jcp.2021.110325) use symplectic integrators\n    2. Partial differential equations: steady/unsteady的区别就是是否含时\n        1. steady-state PDEs\n        2. unsteady PDEs\n            1. Advection-diffusion-reaction problems\n                1. diffusion problems\n                2. advection problems\n            2. Flow problems\n                1. Navier-Stokes equations\n                2. hyperbolic equations\n            3. quantum problems\n    3. Other problems\n        1. Differential equations of fractional order\n            - automatic differentiation not applicable to fractional order → [L1 scheme](https://doi.org/10.1515/fca-2019-0086)\n            - [numerical discretization for fractional operators](https://doi.org/10.1137/18M1229845)\n            - [separate network to represent each fractional order](https://doi.org/10.1038/s43588-021-00158-0)\n        2. Uncertainty Estimation: [Bayesian](https://doi.org/10.1016/j.jcp.2020.109913)\n    4.  Solving a Differential Problem with PINN\n        - 1d non-linear Schrödinger equation\n        - dataset by simulation with MATLAB-based Chebfun open-source(?) software\n4. PINNs: Data, Applications, and Software\n    1. Data\n    2. Applications\n        1. Hemodynamics\n        2. Flows Problems\n        3. Optics and Electromagnetic Applications\n        4. Molecular Dynamics and Materials-Related Applications\n        5. Geoscience and Elastiostatic Problems\n        6. Industrial Application\n    3. Software\n        1. `DeepXDE`: initial library by one of the vanilla PINN authors\n        2. `NeuroDiffEq`: PyTorch based used at Harvard IACS\n        3. `Modulus`: previously known as Nvidia SimNet\n        4. `SciANN`: implementation of PINN as Keras wrapper\n        5. `PyDENs`: heat and wave equations\n        6. `NeuralPDE.jl`: part of SciML\n        7. `ADCME`: extending TensorFlow\n        8. `Nangs`: stopped updates, but faster than PyDENs\n        9. `TensorDiffEq`: TensorFlow for multi-worker distributed computing\n        10. `IDRLnet`: a python toolbox inspired by Nvidia SimNet\n        11. `Elvet`: coupled ODEs or PDEs, and variational problems about the minimization of a functional\n        12. Other Packages\n5. PINN Future Challenges and Directions\n    1. Overcoming Theoretical Difficulties in PINN\n    2. Improving Implementation Aspects in PINN\n    3. PINN in the SciML Framework\n    4. PINN in the AI Framework\n6. Conclusion\n"},{"slug":"parameters-in-convolution-in-neural-network-and-transposeconv","filename":"2022-12-29-parameters-in-convolution-in-neural-network-and-transposeconv.md","date":"2022-12-29","title":".ai | 神经网络中的卷积及其参数","layout":"post","keywords":["ai","py","md","m"],"hasMath":true,"excerpt":"在读 PyTorch 的文档和源码的时候，发现写文档的人也不怎么解释啥是卷积，卷积的各个参数是什么意思，只在文档里扔了个链接就完事了……","content":"\n在读 PyTorch 的文档和源码的时候，发现写文档的人也不怎么解释啥是卷积，卷积的各个参数是什么意思，只在文档里扔了个链接就完事了，链接那头是一个 GitHub 上的动图演示仓库，是一篇论文《A guide to convolution arithmetic for deep learning》（链接在文末）的附件。于是这篇文章，基本上就是论文的读书笔记了。\n\n## 数学的卷积：连续 vs. 离散\n\n### 定义\n\n连续的情况，两个单变量函数 $$f(\\cdot)$$ 和 $$g(\\cdot)$$ 的卷积，定义为：\n\n$$\n\\left(f*g\\right)(x):=\\int_{-\\infty}^{\\infty}f(\\tau)g(x-\\tau)d\\tau\n$$\n\n离散的情况，两个向量（也就是一阶张量） $$\\vec f$$ 和 $$\\vec g$$ 的卷积，定义为：\n\n$$\n\\left(\\vec f * \\vec g\\right)_i := \\sum_{j=-\\infty}^{\\infty} f_j g_{i-j}\n$$\n\n多变量函数/高阶张量的情况，只需要多加几重积分/求和号就可以类推了。\n\n看这两个定义——\n\n只看等号左边的话，可以把卷积看作是一种特殊的乘法，也就是一种**运算。**f 和 g 的地位是平等的，卷积甚至还满足交换律，你甚至可以把两者的顺序变一变；\n\n但是看等号右边的话，卷积就应该被看作是一种**变换**。f 和 g 的地位不再平等，f 是被变换的函数/向量，g 是变换的核 (kernel)。函数的情况里，g 把定义在 $$\\tau$$ 空间里的函数 f 变换成了 x 空间里的另一个函数；向量的情况里，g 把一个 J (j 所有可能取值的数量) 维向量 f 变换成了一个 I (i 所有可能取值的数量) 维向量。\n\n神经网络中的卷积，**借用**的主要是第二种**理解**。\n\n### 手算一个例子\n\n例如 $$\\vec f = (1,2,3,4)$$, $$\\vec g = (1,2,3)$$，而且约定下标从 0 开始的话——\n\n\u0026nbsp; $$(\\vec f*\\vec g)_0 = f_0g_0 = 1$$\n\n\u0026nbsp; $$(\\vec f*\\vec g)_1 = f_0g_1 + f_1g_0  = 4$$\n\n\u0026nbsp; $$(\\vec f*\\vec g)_2 = f_0g_2 + f_1g_1 + f_2g_0 = 10$$\n\n\u0026nbsp; $$(\\vec f*\\vec g)_3 = f_1g_2 + f_2g_1 + f_3g_0 = 16$$\n\n\u0026nbsp; $$(\\vec f*\\vec g)_4 = f_2g_2 + f_3g_1 = 17$$\n\n\u0026nbsp; $$(\\vec f*\\vec g)_5 = f_3g_2 = 12$$\n\n不想手算？\n\n```python\nimport numpy as np\nfrom scipy import signal\nsignal.convolve(np.array([1,2,3,4]),np.array([1,2,3]))\n```\n\n### 形象化表示\n\n上面的计算过程，可以看作是——\n\n1. 把 g 向量的**顺序反过来；**\n2. 把 g 的最右一个元素和 f 的最左元素对齐，\n3. 上下两行都有数字的列相乘（也就是把没有数字的地方看作 0），然后把所有乘积相加，得到 f*g 的第一项；\n4. 把 g 向右移动一格\n5. 重复第3、4步\n6. 直到 g 的最左项移动到 f 的最右一个元素。\n\n形如下列各表：\n\n| --- | --- | --- | --- | --- | --- | --- |\n| f |  |  | 1 | 2 | 3 | 4 |\n| g | 3 | 2 | 1 |  |  |  |\n| (f*g)(0) = 1 |  |  | 1 |  |  |  |\n\n\u003chr class=\"slender\"\u003e\n\n| --- | --- | --- | --- | --- | --- |\n| f |  | 1 | 2 | 3 | 4 |\n| g | 3 | 2 | 1 |  |  |\n| (f*g)(1) = 4 |  | 2 | 2 |  |  |\n\n\u003chr class=\"slender\"\u003e\n\n| --- | --- | --- | --- | --- |\n| f | 1 | 2 | 3 | 4 |\n| g | 3 | 2 | 1 |  |\n| (f*g)(2) = 10 | 3 | 4 | 3 |  |\n\n\u003chr class=\"slender\"\u003e\n\n| --- | --- | --- | --- | --- |\n| f | 1 | 2 | 3 | 4 |\n| g |  | 3 | 2 | 1 |\n| (f*g)(3) = 16 |  | 6 | 6 | 4 |\n\n\u003chr class=\"slender\"\u003e\n\n| --- | --- | --- | --- | --- | --- |\n| f | 1 | 2 | 3 | 4 |  |\n| g |  |  | 3 | 2 | 1 |\n| (f*g)(4) = 17 |  |  | 9 | 8 |  |\n\n\u003chr class=\"slender\"\u003e\n\n| --- | --- | --- | --- | --- | --- | --- |\n| f | 1 | 2 | 3 | 4 |  |  |\n| g |  |  |  | 3 | 2 | 1 |\n| (f*g)(5) = 12 |  |  |  | 12 |  |  |\n\n## 机器学习的卷积，是卷积吗？\n\n看论文给出的图 Figure 1.1，在卷积核是灰色 3\\*3 矩阵的情况下，对蓝色 5\\*5 矩阵的卷积就是直接把核对齐到蓝色矩阵上，**并没有把核的元素顺序颠倒过来**。\n\n这玩意能叫卷积吗？\n\n![convolution](/photos/2022-12-29-convolution.png)\n\n有人强行挽尊，说我们画图示的时候已经把核给颠倒过来了，想知道卷积核就把灰色小矩阵再颠倒回去——\n\n但是，不颠倒就对齐相乘的运算也是有名字的，叫 cross correlation。核有没有颠倒，convolution 还是 cross correlation 一组合，可以带来升维打击般的混乱，堪比高中化学的“还原剂被氧化，氧化剂被还原”……所以，对于计算机专业的数学水平，不予置评～\n\n\n## 卷积`torch.nn.Conv` 及其各个参数\n\n### `in_channels` \u0026 `out_channels`\n\n“卷积”的意义在于用一种比较省内存的方式，考虑输入张量中各个元素，和空间上相近的邻居元素之间的关系。所以只需要在真的存在空间关系的维度做卷积，其他维度可以留着不动。\n\n比如一张彩色图片，是一个 (颜色*高度*宽度) 的 3 阶张量，我们只需要对高度和宽度两个维度做卷积，颜色就是不参与“卷积”的 channel。\n\n`in_channel` 就是被“卷积”的张量的 channel 数，`out_channel` 是“卷积”结果的 channel 数。比如我们想从一张 RGB 三色图片中分辨出前景和背景两种不同区域，`in_channel=3`, `out_channel=2`。\n\n而 `in_channel` 如何能够与 `out_channel` 取值不同，原理见 Figure 1.3。我们使用 `out_channel` 个不含 channel 维度的“卷积”核，每一个核都与每一个 in channel 做卷积，得到图中的蓝、紫色小矩阵，然后直接把不同的 in channel 暴力求和，得到的结果分别作为卷积结果的 out channel。（这个暴力求和与我以前想得不一样，我以为是什么每一元素都做了一个`in_channel`*`out_channel` 的全联通层）\n\n![channels](/photos/2022-12-29-channels.png)\n\n PyTorch 的习惯，对于一个 N 阶“卷积”，参与卷积的是张量的最后 N 阶，`in_channel` 和 `out_channel` 也就是被卷张量和卷积结果的 `Tensor.shape[-(N+1)]`\n\n后面图示的例子都没有考虑 `in_channel` 和 `out_channel` 的数量，也就是都当作 1 了。\n\n### `kernel_size`\n\n就是灰色矩阵“卷积”核，每边有几个数字。如果不同方向的边长不一，该参数就需要用一个 tuple 来表示。Figure 1.1 的灰色卷积核，`kernel_size=(3,3)`\n\n![kernel](/photos/2022-12-29-kernel.png)\n\n### `padding` \u0026 `padding_mode`\n\n前面手算例子的时候很鸡贼地把 0 作为向量下标的起点。如果采用日常 1 开头的下标来算，第 1 项结果为零，整个卷积结果的长度会长很多，而且多出来的后面几项也都是零。\n\n而且在这个过程中，我们实际上是把一个有限长度的向量，看作了一个以所有整数 $$\\Z$$ 为定义域的函数，除了那有限的几项之外，其余地方都定义函数值为 0。\n\n用计算机计算的话显然没法如此奢侈地谈“无限多个”，例子中实际用到的，在 $$\\vec f$$ 左右两边各需要 2 个 0，也就是说 `padding=2`, `padding_mode='zeros'`\n\nFigure 1.2 表示的就是 `padding=(1,1)` 的情况（蓝色是被卷张量，白色是 padding，灰色是卷积核，绿色是卷积结果）：\n\n![padding](/photos/2022-12-29-padding.png)\n\n既然神经网络中的卷积并不是真正的卷积，所以他们索性不装了——\n\n正常卷积的结果往往比被卷张量大一圈（具体大多少取决于  `kernel_size`, `padding`, `stride` 多个参数），但是图像处理的时候经常希望输出图片和输入图片一样大，此时可以用字符串 `“same”` 作为 `padding` 的参数，自动计算 padding 的大小。`“strict”` 则表示 `padding=0`, 这样输出图片尺寸会变小，但是没有 padding，也就没有往图片里掺杂研究者对图片边缘以外信息的臆测。\n\n同时 `padding_mode` 参数表示往被卷张量四周填充的数字也不一定是 0。比如对于图片，0 往往表示纯黑，而绝大多数图片的视野之外，往往是和图片边缘像素值相差不大的值。所以 `padding_mode` 除了 `zeros` 之外，还接受以下取值：\n\n- `reflect`: 以图片边缘为镜面，把边缘附近的像素值对陈反射出去；\n- `replicate`: 只取边缘的像素值作为常数，直接向外延拓；\n- `circular`: 类似于物理中的周期性边界条件，取对边附近的像素值作为 padding 内容。\n\n### `stride`\n\n前面手算卷积的第4步，把卷积核向右移动了1格，如果每次移动超过1格，就需要这个参数指定移动步长。如果不同方向的步长不同，也是用 tuple 来表示。\n\nFigure 1.4 表示的就是 `stride=(2,2)` 的情况（蓝色是被卷张量，蓝色中的深色块是卷积核，绿色是卷积结果）：\n\n![stride](/photos/2022-12-29-stride.png)\n\n### `dilation`\n\n这个参数把“卷积”核撑开，也就相当于在“卷积”核的相邻元素之间加 0。Figure 1.5 表示的就是 `dilation=(1,1)` 的情况（蓝色是被卷张量，蓝色中的深色块是卷积核，绿色是卷积结果）：\n\n![dilation](/photos/2022-12-29-dilation.png)\n\n比如 `dilation=1` 时，(1,2,3) 的卷积核就相当于 (1,0,2,0,3)\n\n比如 `dilation=2` 时，(1,2,3) 的卷积核就相当于 (1,0,0,2,0,0,3)\n\n这样可以让卷积核在尺寸比较小的情况下，覆盖到更大面积的被卷张量。当然具体实现时，不可能直接补 0 这么浪费内存。\n\n### `groups`\n\n该参数必须是 `in_channel` 和 `out_channel` 的公约数，当其不为 1 时，就相当于同时做 `groups` 个卷积，其中每个卷积的 `in_channel=in_channel/groups`, `out_channel=out_channel/groups`\n\n### `bias`\n\n该参数是一个布尔值，卷积类似于一种高维空间里的乘法，这个参数就决定是否要拟合 `y=kx+b` 中的 `b`\n\n## “卷积”的“逆运算”： `TransposeConv`\n\n卷积的结果比 padding 之后的被卷张量要小。尤其当“卷积”的 `stride` 约等于 `kernel_size` 时，卷积的就变成了某些池化 (pooling)（求最大值不是一种线性算子，所以最大值池化不能用卷积表示，但是平均值池化可以）。\n\n那么在类似 U-net 这样的模型里，右半边的数据升维（下图中的绿箭头），就需要一种“卷积”的“逆运算”。有人把这种运算叫做 deconvolution，有人叫做 transposed convolution，还有人叫做 convolution with fractional strides。\n\n![Unet](/photos/2022-12-29-unet.png)\n\nPyTorch 取的是第二种名字。论文解释了为什么这么取名字，笔记以后有时间再补上把……\n\n因为这个与运算本身就是作为“卷积”的逆运算出现的，所以 PyTorch 的文档里这么说：\n\n\u003e This is set so that when a `Conv2d` and a `ConvTranspose2d` are initialized with same parameters, they are inverses of each other in regard to the input and output shapes.\n\u003e \n\n也就是说，把 `ConvTranspose` 的输入和输出反过来，然后按照 `Conv` 的规则确定各个参数，填入 `ConvTranspose` 的括号里就可以了，除了 `output_padding`\n\n### `output_padding`\n\n`ConvTranspose` 的输出就是对应 `Conv` 的输入。看 Figure 2.7：\n\n![padding_output](/photos/2022-12-29-output-padding.png)\n\n当 $$(input+2*padding)/stride$$ 不能整除的时候，最右的几列最下的几行就被卷积核忽略掉了。那么在逆运算 `TransposeConv` 中，这就意味着同一个输入可能对应着 $$stride-1$$ 种可能的输出。`output_padding`参数就可以消除这种歧义，调整 `TransposeConv` 输出张量的尺寸。\n\n## 参考链接\n\n- 给卷积正名: [https://www.kaggle.com/general/225375](https://www.kaggle.com/general/225375)\n- PyTorch Conv2d 源码: [https://pytorch.org/docs/stable/_modules/torch/nn/modules/conv.html#_ConvNd](https://pytorch.org/docs/stable/_modules/torch/nn/modules/conv.html#_ConvNd)\n- 论文: [https://arxiv.org/abs/1603.07285](https://arxiv.org/abs/1603.07285)\n- 动图演示: [https://github.com/vdumoulin/conv_arithmetic/blob/master/README.md](https://github.com/vdumoulin/conv_arithmetic/blob/master/README.md)\n- U-net: [https://lmb.informatik.uni-freiburg.de/people/ronneber/u-net/](https://lmb.informatik.uni-freiburg.de/people/ronneber/u-net/)\n- PyTorch TransposeConv 文档: [https://pytorch.org/docs/stable/generated/torch.nn.ConvTranspose2d.html](https://pytorch.org/docs/stable/generated/torch.nn.ConvTranspose2d.html)\n"},{"slug":"python-decorator","filename":"2022-11-09-python-decorator.md","date":"2022-11-09","title":".py | Python decorator 装饰器","layout":"post","keywords":["md","py"],"excerpt":"所谓装饰器 (decorator)，就是函数前一行 @ 打头的一串字符，是 python 的一种语法糖。","content":"\n最近参加了一个关于如何在 Python 项目中利用 GPU 提高运算效率的培训，里面提到了 `numba` 这个加速科学计算的库，而 `numba` 发挥作用的主要工具就是各种装饰器。\n\n所谓装饰器，就是读一些网上现成的 python 代码的时候会看到的，函数前一行 `@` 打头的一串字符，一般是一个名字，偶尔会附带有参数：\n\n```python\n@decorator\ndef myfunction():\n    # do something...\n    return results\n```\n\n它的实际作用相当于：\n\n```python\ndef myfunction():\n    # do something...\n    return None\n\nmyfunction = decorator(myfunction)\n```\n\nPython 是一种[函数式编程语言](https://program-think.blogspot.com/2012/02/why-choose-python-4-fp.html)，函数和各种类型的变量一样，在 Python 都是一种对象，所以可以把函数赋值给一个变量，可以在函数里定义另一个函数，可以把函数作为参数传递给另一个函数，可以把函数名作为另一个函数的返回值。\n\n`myfunction = decorator(myfunction)` 就是装饰器的定义，是 Python 的一个[语法糖](https://zh.m.wikipedia.org/zh-hans/%E8%AF%AD%E6%B3%95%E7%B3%96)。也就是说装饰器本身也是一个函数，我们的函数被装饰器装饰之后，函数名称不变，在完整实现函数原有功能的同时，额外执行装饰器中的命令。\n\n### 装饰器是如何做到的\n\n要想自己写一个装饰器的话，需要了解一下装饰器的实现原理。一个最简单的装饰器可以这么写：\n\n```python\ndef decorator(func):\n    def inner():\n        # do something\n        func()\n        # do some more\n        return None\n    return inner\n```\n\n也就是在装饰器内部再定义一个函数，这个内部函数的函数体执行被装饰的函数，然后外层装饰器把内层函数名当作返回值。\n\n### 如果一个函数需要多个装饰器\n\n把前面装饰器的定义套在多个装饰器的情况里：\n\n```python\n@decorator1\n@decorator2\ndef myfunction():\n    return None\n\nmyfunction = decorator1(decorator2(myfunction))\n```\n\n### 如果被装饰的函数有传入参数\n\n装饰器不知道自己要装饰的函数长什么样，也就不知道函数接受多少个参数，其中有几个是位置参数，几个是关键词参数。所以需要用单星号打包/解包位置参数，双星号打包/解包关键词参数。`args` 和 `kwargs` 是变量名的代词，可以换成其他自己喜欢的名字。\n\n```python\ndef decorator(func):\n    def inner(*args,**kwargs):\n        # do something\n        func(*args,**kwargs)\n        # something else\n        return None\n    return inner\n\n@decorator\ndef myfunction(x,y,mode=\"normal\",strict=True):\n    # do something...\n    return None\n```\n\n### 如果被装饰的函数有返回值\n\n则装饰器的内层函数需要把被装饰的函数的返回值返回出来：\n\n```python\ndef decorator(func):\n    def inner(*args,**kwargs):\n        # do something\n        func(*args,**kwargs)\n        # something else\n        return func(*args,**kwargs)\n    return inner\n\n@decorator\ndef myfunction(x,y,mode=\"normal\",strict=True):\n    # do something...\n    return results\n```\n\n### 如果想让装饰器本身接受参数\n\n也就是想达到下面的效果：\n\n```python\n@param_decorator(param=\"neat\")\ndef myfunction(x,y,mode=\"normal\",strict=True):\n    # do something...\n    return results\n```\n\n也就是让 `param_decorator(param=\"neat\")` 返回一个装饰器函数，也就是在之前的装饰器外面再加一层：\n\n```python\ndef param_decorator(param):\n    def decorator(func):\n        def inner(*args,**kwargs):\n            if param==\"neat\":\n                print(\"neat\")\n                # ...\n            else:\n                print(\"not neat\")\n                # ...\n            func(*args,**kwargs)\n            return func(*args,**kwargs)\n        return inner\n    return previous_decorator\n```\n\n### 如果想让装饰器既可以接受参数，也可以不接受参数～\n\n实在是有点过于高级了，直接说答案：\n\n```python\ndef flex_decorator(_func=None,*,kw1=\"val1\",kw2=\"val2\"):\n    def decorator(func):\n        def inner(*args,**kwargs):\n            print(kw1,kw2)\n            # do something\n            func(*args,**kwargs)\n            # something else\n            return func(*args,**kwargs)\n        return inner\n    if _func is None:\n        return decorator\n    else:\n        return decorator(_func)\n```\n\n根据 [https://peps.python.org/pep-3102/](https://peps.python.org/pep-3102/)，`*`作为一个单独的函数参数，表示后面所有的参数都是关键词参数，用来限定星号前面位置参数的数量。\n\n- 当 `@flex_decorator` 不加参数使用的时候:\n    - 根据定义 `myfunction = flex_decorator(myfunction)`\n    - `_func=myfunction`\n    - 此时 `else` 生效，`myfunction = decorator(myfunction)`\n- 当 `@flex_decorator(kw1=\"val1\",kw2=\"val2\")` 加上参数使用的时候:\n    - 根据定义 `myfunction = flex_decorator(kw1=\"val1\",kw2=\"val2\")(myfunction)`\n    - `_func=None`\n    - 此时 `if` 生效，`myfunction = decorator(myfunction)`\n\n——**接受的参数必须是关键词参数**，否则和被装饰的函数名无法区分。\n\n### `@functools.wraps`：刻章、办证\n\n以上各节基本完成了常用场景下装饰器的功能。\n\n但是，Python 作为一种动态语言，一大特征就是可以在运行时进行[类型内省](https://en.wikipedia.org/wiki/Type_introspection)。而按照我们上面的写法，被装饰之后的函数，Python 认为它不再是原来的函数，而是装饰器里面定义的那个内部函数，这样可能会出现意想不到的问题。\n\n解决方法是使用一个专门的装饰器根装饰器定义的内部函数办个假身份：\n\n```python\nimport functools\n\ndef decorator(func):\n    @functools.wraps(func)\n    def inner(*args,**kwargs):\n        # do something\n        func(*args,**kwargs)\n        # something else\n        return func(*args,**kwargs)\n    return inner\n```\n"},{"slug":"pytorch-dataset-dataloader-sampler","filename":"2022-09-01-pytorch-dataset-dataloader-sampler.md","date":"2022-09-01","title":".py | PyTorch 数据处理方面的封装","layout":"post","keywords":["md","py","ai"],"excerpt":"一般监督学习的数据结构和处理过程，以及 PyTorch 对上述结构和处理过程的封装","content":"\n## 一般监督学习的数据结构和处理过程\n\n### 训练集、验证集、测试集\n\n所有数据整体构成一个大集合，这个集合的每一个元素都包含一个输入和一个目标，分别记作 x 和 y。\n\n把这个大集合分成互相没有交集的三个子集，分别是训练集 (training set)、验证集 (validation set)、测试集 (test set)。\n\n- 训练集和验证集在训练过程中使用。\n    - 训练集的数据带入模型时，模型处于训练模式，模型输出对参数的导数被记录。通过比较把“模型输出”和“训练目标 y”代入**损失函数**的损失，更新模型的参数。同时记录“模型输出”和“训练目标 y”带入验证函数的结果，和验证集比较。\n    - 验证集的数据代入模型时，模型处于求值模式，模型只根据输入计算输出，对参数的导数不记录。通过观察“模型输出”和“训练目标 y”带入**验证函数**的结果，观察训练是否陷入“过拟合”。当训练集的验证函数结果不断下降，但是验证集的验证函数结果几乎不变时，可以认为模型过拟合。\n- 测试集在训练完成之后使用，代入模型时，模型处于求值模式。用于评价训练结果的好坏。\n\n### epoch vs. batch\n\n如果把所有数据同时进行训练，所需要的空间一般都大于电脑内存。所以一般会将训练集随机分成若干批次 (batch)，一个批次的数据同时塞入模型进行训练，在一个 batch 里每一个模型输出对参数的导数累加在一起，整个 batch 结束后更新模型参数，同时导数清零。因为 batch 这个概念和内存有关，所以数值一般选择为 2 的指数。\n\n将训练集所有的 batches 跑完一次称为而一个 epoch。一次训练一般需要很多 epochs，直到损失函数结果足够低，或验证集显示出现过拟合。\n\n## PyTorch 对上述结构和处理过程的封装\n\n### `Dataset`\n\n前面已经说了，数据集包括输入和目标两部分，`Dateset` 及其子类的作用就是\n\n如果在把数据装入 `Dataset` 之前就已经是规整的两个张量了的话——\n\n```python\nimport torch\nfrom torch.utils import data\n\n# ...\n\nfor x,y in zip(train_x,train_y):\n    # do something with x and y\n\ntrainset = TensorDataset(train_x,train_y)\nfor x,y in trainset:\n    # do something with x and y\n```\n\n——这一步确实没什么意思。\n\n有意思的地方在于可以自己写一个数据集类，继承 `Dataset`，然后重载 `__getitem__()` 和 `__len__()` 方法，这样可以把一些不适合用张量表示的数据塞进 `Dataset` 里面，对图像进行学习的话可以在此处加入图像增强的步骤，并进一步用于 `DataLoader`\n\n### `DataLoader`\n\n`DataLoader` = `Dataset` + `Sampler`，因为一般的教程里只需要讲数据集进行简单随机划分，也就只用到了 `batch_size` 等等参数，用到 Sampler 的地方很少。\n\n最常见的用例就是 `WeightedRandomSampler` 。训练分类器的时候，有时其中一个类别的数据远少于其他，那么训练器就更难判断出这一分类（因为只要无脑排除这个类别就能获得不错的正确率），所以需要平衡不同组别之间的权重。\n\n```python\nlist(WeightedRandomSampler(weights=[0.1, 0.9, 0.4, 0.7, 3.0, 0.6], num_samples=5, replacement=True))\n# [4, 4, 1, 4, 5]\nlist(WeightedRandomSampler(weights=[0.9, 0.4, 0.5, 0.2, 0.3, 0.1], num_samples=5, replacement=False))\n# [0, 1, 4, 3, 2]\n```\n\n平衡完之后转化为 batch，搭配 `BatchSampler`：\n\n```python\nlist(BatchSampler(WeightedRandomSampler(weights=[0.1, 0.9, 0.4, 0.7, 3.0, 0.6], num_samples=5, replacement=True), batch_size=2, drop_last=False))\n# [[4, 4], [1, 4], 5]\nlist(BatchSampler(WeightedRandomSampler(weights=[0.1, 0.9, 0.4, 0.7, 3.0, 0.6], num_samples=5, replacement=True), batch_size=2, drop_last=True))\n# [[0, 1], [4, 3]]\n```\n\n### 汇总一下\n\n```python\nimport torch\nfrom torch.utils import data\n\ntrain_x = torch.rand((100,5))\ntrain_y = torch.rand((100,2))\ntrainset = data.TensorDataset(train_x,train_y)\n\n# either:\ntrainloader = data.DataLoader(\n    trainset,\n    batch_size=2,\n    drop_last=True,\n    sampler=data.WeightedRandomSampler(\n        weights=[0.1, 0.9, 0.4, 0.7, 3.0, 0.6], \n        num_samples=5, \n        replacement=True))\n# or:\ntrainloader = data.DataLoader(\n    trainset,\n    batch_sampler=data.BatchSampler(\n        data.WeightedRandomSampler(\n            weights=[0.1, 0.9, 0.4, 0.7, 3.0, 0.6], \n            num_samples=5, \n            replacement=True), \n        batch_size=2, \n        drop_last=True))\n\nfor epoch in range(100):\n    for x,y in trainloader:\n        train(model,x,y,loss_function)\n```\n\n需要注意的是，`for x,y in trainset` 的 x 和 y 的维度是单个数据的维度，最简单的情况就是是 P 和 Q 维向量，而此时如果把 batch_size 记作 B，`for x,y in trainloader` 中的 x 和 y 是维度分别为 (B,P) 和 (B,Q) 的矩阵。`train()` 函数里面的计算要考虑到多出的这一个维度。\n\n## 参考链接：\n\n- [https://pytorch.org/tutorials/beginner/basics/data_tutorial.html](https://pytorch.org/tutorials/beginner/basics/data_tutorial.html)\n- [https://pytorch.org/tutorials/beginner/nn_tutorial.html](https://pytorch.org/tutorials/beginner/nn_tutorial.html)\n- [https://pytorch.org/tutorials/beginner/ptcheat.html](https://pytorch.org/tutorials/beginner/ptcheat.html)\n- [https://pytorch.org/docs/stable/data.html?highlight=dataset#torch.utils.data.Dataset](https://pytorch.org/docs/stable/data.html?highlight=dataset#torch.utils.data.Dataset)\n- [https://pytorch.org/docs/stable/data.html?highlight=dataloader#torch.utils.data.DataLoader](https://pytorch.org/docs/stable/data.html?highlight=dataloader#torch.utils.data.DataLoader)\n- [https://pytorch.org/docs/stable/data.html?highlight=dataloader#torch.utils.data.Sampler](https://pytorch.org/docs/stable/data.html?highlight=dataloader#torch.utils.data.Sampler)\n- [https://pytorch.org/docs/stable/_modules/torch/utils/data/dataset.html#Dataset](https://pytorch.org/docs/stable/_modules/torch/utils/data/dataset.html#Dataset)\n"},{"slug":"knowledge-structure-machine-learning-image-processing-summer-school","filename":"2022-08-17-knowledge-structure-machine-learning-image-processing-summer-school.md","date":"2022-08-17","title":".py | 深度学习暑期学校知识点","layout":"post","keywords":["md","py","ai"],"excerpt":"机器学习在图像处理当中的应用，知识结构树","content":"\n- 电脑设置、python 入门\n    - NoMachine, ssh, python, conda, jupyter\n    - 文件夹操作 `pathlib`, 图片操作 `skimage`\n    - 数据增强 (data augmentation): `imgaug`\n    - TensorBoard\n- 机器学习简介\n    - Linear Classifier\n    - `sklearn**.**model_selection**.**train_test_split()`\n    - Stochastic gradient descent\n    - TensorFlow:\n        - `tensorflow_addons as tfa`\n        - `tfa.image.rotate()`, `tf.image.random_flip_left_right()`\n        - **`from** tensorflow.keras **import** Model`, **`from** tensorflow.keras.models **import** Sequential`, **`from** tensorflow.keras.layers **import** Input, Flatten, Dense, Activation, BatchNormalization, Conv2D, MaxPool2D, Softmax`\n        - `tf**.**keras**.**losses**.**CategoricalCrossentropy()`, `tf**.**keras**.**optimizers**.**Adam(lr**=**1e-3, clipnorm**=**0.001)`\n        - `linear_classifier **=**``Model(...)`, `linear_classifier.compile()`, `linear_classifier.fit()`, `linear_classifier.predict()`\n- 深度学习简介\n    - Perceptron\n    - Perceptron-based XOR gate\n    - **decision boundary** of your model: `np.meshgrid`\n- 图像恢复 (image restoration)\n    - CARE network\n    - Noise2Nosie, Noise2Void\n- 图像翻译 (image translation)\n    - micro-DL: a tool to generate and train U-net from config files.\n- 图像语义分割 (image semantic segmentation): 比较详细，前两节有点水了。\n    - **`from** PIL **import** Image`, **`import** imageio`, **`from** torchvision **import** transforms`\n    - **`from** torch.utils.data **import** Dataset, DataLoader`, **`import** torch.nn **as** nn`, **`from** torch.nn **import** functional **as** F`,  **`from** torch.utils.tensorboard **import** SummaryWriter`,\n    - U-net on PyTorch\n- 图像实例分割 (instance segmentation)\n    1. Foreground segmentation: \n        - **Receptive Field of View**: The term is borrowed from biology where it describes the \"portion of sensory space that can elicit neuronal responses when stimulated\" (wikipedia). Each output pixel can look at/depends on an input patch with that diameter centered at its position. Based on this patch, the network has to be able to make a decision about the prediction for the respective pixel.\n        - **Early Stopping** to avoid overfitting: define an `EarlyStopping` class\n    2. Instance Segmentation:\n        - Ideas:\n            - Three-class model (foreground, background, boundary),\n            - Distance transform (label for each pixel is the distance to the closest boundary),\n            - Edge affinity (consider not just the pixel but also its direct neighbors, predicts the probability that there is an edge, this is called affinity.) 听的时候懂了，回来看的时候没太看懂\n            - Metric learning (learns to predict an embedding vector for each pixel.)\n    3. **Tile and Stitch：**\n        - 当需要处理的图片过大时，将图片切分成多个小图，分别预测之后拼接在一起。\n        - 文中说图片尺寸不是 某个参数的整数倍的时候拼贴结果会不连续，但是代码注释中说等于这个整数倍的时候会不连续，晕。\n        - [https://arxiv.org/pdf/2101.05846.pdf](https://arxiv.org/pdf/2101.05846.pdf)\n    4. 一个实例，epithelia cells\n- 失败模式：极其之水，就是科普了一下训练参数错误的后果，以及一点对抗学习的内容\n- 追踪：比较水，因为机器学习追踪的运算量极大，且主讲人感觉就是来做广告的，所以就直接用 CoLab 体验了一下就完事了。（就这还加州理工呢~）\n- 知识提取：\n    - 前面的基本上是从像素到像素的映射，这里的知识提取是从图片到标签的映射。\n    - CycleGAN\n    - **Create a balanced Dataloader**\n    "},{"slug":"what-a-PyTorch-project-looks-like","filename":"2022-08-17-what-a-PyTorch-project-looks-like.md","date":"2022-08-17","title":".py | 一个 PyTorch 机器学习项目长什么样","layout":"post","keywords":["md","py","ai"],"excerpt":"官网的一个pytorch教程的笔记，原文先按照第一性原理，尽量用原生 python 写了一遍，然后一步一步重构成接近生产环境的代码。这里我把顺序反过来，先放出重构之后的最终结果","content":"\n自学，或者说一切学习和教学，本质就是在已经掌握的知识和未知的目标知识之间修路。路有两种修法，一是理论或者说是第一性原理路线，从不证自明的公理或者已经掌握的知识出发，通过逻辑推理一步步得到新的知识；另一种是实践或者说工程师路线，拿到一个已经可以工作的产品，划分成各个子系统，通过输入的改变来观察输出的不同，直到子系统简化到自己可以理解的地步，不再是黑箱，借此了解整个系统的功能。\n\n但是当学习的对象复杂到一定程度之后，凭借一个人的自学能力，只用其中一种方法往往难以钻透。又或者两种方法学到的路线并非同一条路。对于机器学习，理论路线就是“让输入数据通过一个带有超多参数的函数，根据函数返回值和输出数据之间的差别修正参数，直到函数能够近似输入数据和输出数据之间的关系”；实践中代码往往会使用很多库作者封装好的函数，只读源码往往一头雾水。\n\n所以，看到 PyTorch 官网的这篇教程 **WHAT IS TORCH.NN *REALLY*?:** [https://pytorch.org/tutorials/beginner/nn_tutorial.html](https://pytorch.org/tutorials/beginner/nn_tutorial.html) 可以说是喜出望外，把两种路线写出的代码都给了出来，对于自学者来说，就像罗塞塔石碑一样可以互相对照。这里我把 CNN 相关的部分抽掉了，毕竟 CNN 只是深度学习的一个子集，深度学习只是机器学习的一个子集，和这篇文章的主题关系不大。\n\n原文先按照第一性原理，尽量用原生 python 写了一遍，然后一步一步重构成接近生产环境的代码。这里我把顺序反过来，先放出重构之后的最终结果：\n\n```python\nfrom pathlib import Path\nimport requests\nimport pickle\nimport gzip\nimport numpy as np\nimport torch\nimport torch.nn.functional as F\nfrom torch import nn\nfrom torch import optim\nfrom torch.utils.data import TensorDataset,DataLoader\n\n# Using GPU\n\nprint(torch.cuda.is_available())\ndev = torch.device(\"cuda\") if torch.cuda.is_available() else torch.device(\"cpu\")\n\n# Wrapping DataLoader\n# https://pytorch.org/tutorials/beginner/basics/data_tutorial.html?highlight=dataloader\n# https://pytorch.org/tutorials/beginner/data_loading_tutorial.html?highlight=dataloader\n\ndef preprocess(x, y):\n    return x.view(-1, 1, 28, 28).to(dev), y.to(dev)\n\ndef get_data(train_ds, valid_ds, bs):\n    return (\n        DataLoader(train_ds, batch_size=bs, shuffle=True),\n        DataLoader(valid_ds, batch_size=bs * 2),\n    )\n\nclass WrappedDataLoader:\n    def __init__(self, dl, func):\n        self.dl = dl\n        self.func = func\n\n    def __len__(self):\n        return len(self.dl)\n\n    def __iter__(self):\n        batches = iter(self.dl)\n        for b in batches:\n            yield (self.func(*b))\n\n# Define the neural network model to be trained\n\n# # If the model is simple:\n# model = nn.Sequential(nn.Linear(784, 10))\n\n# generally the model is a class that inherites nn.Module and implements forward()\nclass Mnist_Logistic(nn.Module):\n    def __init__(self):\n        super().__init__()\n        # self.weights = nn.Parameter(torch.randn(784, 10) / math.sqrt(784))\n        # self.bias = nn.Parameter(torch.zeros(10))\n        self.lin = nn.Linear(784, 10)\n\n    def forward(self, xb):\n        # return xb @ self.weights + self.bias\n        return self.lin(xb)\n\n# Define the training pipeline in fit()\n\ndef loss_batch(model, loss_func, xb, yb, opt=None):\n    loss = loss_func(model(xb), yb)\n\n    if opt is not None:\n        loss.backward()\n        opt.step()\n        opt.zero_grad()\n\n    return loss.item(), len(xb)\n\ndef fit(epochs, model, loss_func, opt, train_dl, valid_dl):\n    for epoch in range(epochs):\n        model.train()\n        for xb, yb in train_dl:\n            loss_batch(model, loss_func, xb, yb, opt)\n\n        model.eval()\n        with torch.no_grad():\n            losses, nums = zip(\n                *[loss_batch(model, loss_func, xb, yb) for xb, yb in valid_dl]\n            )\n        val_loss = np.sum(np.multiply(losses, nums)) / np.sum(nums)\n\n        print(epoch, val_loss)\n    return None\n\n# __main()__:\n\n# data\nDATA_PATH = Path(\"data\")\nPATH = DATA_PATH / \"mnist\"\n\nPATH.mkdir(parents=True, exist_ok=True)\n\nURL = \"https://github.com/pytorch/tutorials/raw/master/_static/\"\nFILENAME = \"mnist.pkl.gz\"\n\nif not (PATH / FILENAME).exists():\n        content = requests.get(URL + FILENAME).content\n        (PATH / FILENAME).open(\"wb\").write(content)\nwith gzip.open((PATH / FILENAME).as_posix(), \"rb\") as f:\n        ((x_train, y_train), (x_valid, y_valid), _) = pickle.load(f, encoding=\"latin-1\")\n\nx_train, y_train, x_valid, y_valid = map(\n    torch.tensor, (x_train, y_train, x_valid, y_valid)\n)\n\ntrain_dataset = TensorDataset(x_train, y_train)\nvalid_dataset = TensorDataset(x_valid, y_valid)\ntrain_dataloader, valid_dataloader = get_data(train_ds, valid_ds, bs)\ntrain_dataloader = WrappedDataLoader(train_dataloader, preprocess)\nvalid_dataloader = WrappedDataLoader(valid_dataloader, preprocess)\n\n# hyperparameters/model\nlearning_rate = 0.1\nepochs = 2\nloss_function = F.cross_entropy # loss function\nmodel = Mnist_CNN()\nmodel.to(dev)\noptimizer = optim.SGD(model.parameters(), lr=learning_rate , momentum=0.9)\n\n# training\nfit(epochs, model, loss_function, optimizer, train_dataloader, valid_dataloader)\n```\n\n可以看到，一个项目主干可以分成4部分：\n\n1. 准备数据\n2. 定义模型\n3. 描述流程\n4. 实际运行\n\n下面把各部分拆分开来，把两种思路的代码进行对比。\n\n## 1. 准备数据\n\n### 重构之前\n\n```python\nDATA_PATH = Path(\"data\")\nPATH = DATA_PATH / \"mnist\"\n\nPATH.mkdir(parents=True, exist_ok=True)\n\nURL = \"https://github.com/pytorch/tutorials/raw/master/_static/\"\nFILENAME = \"mnist.pkl.gz\"\n\nif not (PATH / FILENAME).exists():\n        content = requests.get(URL + FILENAME).content\n        (PATH / FILENAME).open(\"wb\").write(content)\nwith gzip.open((PATH / FILENAME).as_posix(), \"rb\") as f:\n        ((x_train, y_train), (x_valid, y_valid), _) = pickle.load(f, encoding=\"latin-1\")\n\nx_train, y_train, x_valid, y_valid = map(\n    torch.tensor, (x_train, y_train, x_valid, y_valid)\n)\nn, c = x_train.shape\n```\n\n### 重构以后：\n\n```python\n# Wrapping DataLoader\n# https://pytorch.org/tutorials/beginner/basics/data_tutorial.html?highlight=dataloader\n# https://pytorch.org/tutorials/beginner/data_loading_tutorial.html?highlight=dataloader\n\ndef preprocess(x, y):\n    return x.view(-1, 1, 28, 28).to(dev), y.to(dev)\n\ndef get_data(train_ds, valid_ds, bs):\n    return (\n        DataLoader(train_ds, batch_size=bs, shuffle=True),\n        DataLoader(valid_ds, batch_size=bs * 2),\n    )\n\nclass WrappedDataLoader:\n    def __init__(self, dl, func):\n        self.dl = dl\n        self.func = func\n\n    def __len__(self):\n        return len(self.dl)\n\n    def __iter__(self):\n        batches = iter(self.dl)\n        for b in batches:\n            yield (self.func(*b))\n```\n\n## 2. 定义模型\n\n### 重构之前\n\n```python\nweights = torch.randn(784, 10) / math.sqrt(784)\nweights.requires_grad_()\nbias = torch.zeros(10, requires_grad=True)\n\ndef log_softmax(x):\n    return x - x.exp().sum(-1).log().unsqueeze(-1)\n\ndef model(xb):\n    return log_softmax(xb @ weights + bias)\n\ndef nll(input, target):\n    return -input[range(target.shape[0]), target].mean()\nloss_func = nll\n\ndef accuracy(out, yb):\n    preds = torch.argmax(out, dim=1)\n    return (preds == yb).float().mean()\n```\n\n### 重构以后\n\n```python\n# If the model is simple:\nmodel = nn.Sequential(nn.Linear(784, 10))\n\n# generally the model is a class that inherites nn.Module and implements forward()\nclass Mnist_Logistic(nn.Module):\n    def __init__(self):\n        super().__init__()\n        # self.weights = nn.Parameter(torch.randn(784, 10) / math.sqrt(784))\n        # self.bias = nn.Parameter(torch.zeros(10))\n        self.lin = nn.Linear(784, 10)\n\n    def forward(self, xb):\n        # return xb @ self.weights + self.bias\n        return self.lin(xb)\n\n```\n\n## 3. 描述流程\n\n### 重构之前\n\n```python\nlr = 0.5  # learning rate\nepochs = 2  # how many epochs to train for\n\nfor epoch in range(epochs):\n    for i in range((n - 1) // bs + 1):\n        #         set_trace()\n        start_i = i * bs\n        end_i = start_i + bs\n        xb = x_train[start_i:end_i]\n        yb = y_train[start_i:end_i]\n        pred = model(xb)\n        loss = loss_func(pred, yb)\n\n        loss.backward()\n        with torch.no_grad():\n            weights -= weights.grad * lr\n            bias -= bias.grad * lr\n            weights.grad.zero_()\n            bias.grad.zero_()\n```\n\n### 重构以后\n\n```python\n\ndef loss_batch(model, loss_func, xb, yb, opt=None):\n    loss = loss_func(model(xb), yb)\n\n    if opt is not None:\n        loss.backward()\n        opt.step()\n        opt.zero_grad()\n\n    return loss.item(), len(xb)\n\ndef fit(epochs, model, loss_func, opt, train_dl, valid_dl):\n    for epoch in range(epochs):\n        model.train()\n        for xb, yb in train_dl:\n            loss_batch(model, loss_func, xb, yb, opt)\n\n        model.eval()\n        with torch.no_grad():\n            losses, nums = zip(\n                *[loss_batch(model, loss_func, xb, yb) for xb, yb in valid_dl]\n            )\n        val_loss = np.sum(np.multiply(losses, nums)) / np.sum(nums)\n\n        print(epoch, val_loss)\n    return None\n```\n\n## 4. 实际运行\n\n### 重构之前\n\n```python\n# __main()__:\nprint(loss_func(model(xb), yb), accuracy(model(xb), yb))\n```\n\n### 重构以后\n\n```python\n# __main()__:\n\n# data\nDATA_PATH = Path(\"data\")\nPATH = DATA_PATH / \"mnist\"\n\nPATH.mkdir(parents=True, exist_ok=True)\n\nURL = \"https://github.com/pytorch/tutorials/raw/master/_static/\"\nFILENAME = \"mnist.pkl.gz\"\n\nif not (PATH / FILENAME).exists():\n        content = requests.get(URL + FILENAME).content\n        (PATH / FILENAME).open(\"wb\").write(content)\nwith gzip.open((PATH / FILENAME).as_posix(), \"rb\") as f:\n        ((x_train, y_train), (x_valid, y_valid), _) = pickle.load(f, encoding=\"latin-1\")\n\nx_train, y_train, x_valid, y_valid = map(\n    torch.tensor, (x_train, y_train, x_valid, y_valid)\n)\n\ntrain_dataset = TensorDataset(x_train, y_train)\nvalid_dataset = TensorDataset(x_valid, y_valid)\ntrain_dataloader, valid_dataloader = get_data(train_ds, valid_ds, bs)\ntrain_dataloader = WrappedDataLoader(train_dataloader, preprocess)\nvalid_dataloader = WrappedDataLoader(valid_dataloader, preprocess)\n\n# hyperparameters/model\nlearning_rate = 0.1\nepochs = 2\nloss_function = F.cross_entropy # loss function\nmodel = Mnist_CNN()\nmodel.to(dev)\noptimizer = optim.SGD(model.parameters(), lr=learning_rate , momentum=0.9)\n\n# training\nfit(epochs, model, loss_function, optimizer, train_dataloader, valid_dataloader)\n```"},{"slug":"python-subprocess-run-bash","filename":"2022-07-08-python-subprocess-run-bash.md","date":"2022-07-08","title":".py | python.subprocess执行bash命令","layout":"post","keywords":["md","py"],"excerpt":"让 python 读 bash 的命令结果，写 bash 的命令语句。","content":"\n笔记本的触摸屏被我摔了道裂纹，一开始还不影响使用，但是最近几周情况恶化，有时鼠标光标会突然暴走，不听指挥。所以需要禁用触摸屏作为输入设备。\n\n在 xorg 的桌面环境之下，可以用 `xinput list` 显示出所有输入设备，以及对应的 id 号码。然后把找到的 id 填入 `xinput disable ##` 就可以了。一般来说这个 id 的数值是稳定的，所以我就直接把禁用命令写到 `~/.bashrc` 里面去了。\n\n然而，最近把吃灰很久的树莓派拿出来玩了，所以败家买了个60%布局的小机械键盘，小键盘往笔记本一插，诶，您猜怎么着，新买的键盘输完密码登陆之后就不能用了，着实吓了一跳。\n\n所以需要每次检查一遍输入设备的 id，然后把和触摸屏有关的 id（不止一个）从 `xinput list` 的输出里摘出来赋值给一个变量，然后把变量带入 `xinput disable #` 里面。这一套操作已经超出我的 bash 能力了，所以考虑用 python 完成中间步骤，也就是需要让 python 读 bash 的命令结果，写 bash 的命令语句。\n\nGoogles搜索给到了这个结果：[https://stackoverflow.com/questions/4256107/running-bash-commands-in-python](https://stackoverflow.com/questions/4256107/running-bash-commands-in-python)，稍微看了一下 subprocess 的官方文档，写了下面的一段，存到 `~/disable_touchscreen.py`, 然后在 `~/.bashrc` 里加一句 `python ~/disable_touchscreen.py`\n\n```python\nimport subprocess\ncheck = subprcess.run([\"xinput\",\"list\"],capture_output=True)\nfor line in check.stdout.decode(\"utf-8\").split(\"\\n\"):\n    if \"touchscreen\" in line:\n        device = line.partition(\"id=\")[2].partition(\"\\t\")[0]\n        disable = subprocess.run([\"xinput\",\"disable\",str(device)])\n        if disable.returncode==0:\n            print(f\"Successfully disabled touchscreen device {device}\")\n        else:\n            print(f\"Failed to disable touchscreen device {device}\")\n```\n\n- 这段代码的核心是 `subprocess.run()` ，第一个参数就是传给 bash 的命令，这是一个list，其中每个元素就是 bash 语句用空格分割开的每一部分。要想得到命令的执行结果，需要添加参数 `capture_output=True`\n- 上面函数的返回值是一个特殊的数据结构，命令顺利执行的话，结果会写在 `.stdout` 里，这是一个二进制串 `b'xxx...'`，所以需要 `.decode(\"utf-8\")` 转化成字符串。\n\n如果只用bash的话，\n\n- 我的 bash 水平可以做到 `xinput list | grep \"touchscreen\"`, 这里的 `|` 是一个管道，也就是将前一条命令的输出传递给后一条作为输入。要想在 python 里使用管道，可以看这个问答：[https://stackoverflow.com/questions/13332268/how-to-use-subprocess-command-with-pipes](https://stackoverflow.com/questions/13332268/how-to-use-subprocess-command-with-pipes)\n- 上面管道的结果还需要裁剪出 id 号，也就是 `line.partition(\"id=\")[2].partition(\"\\t\")[0]`，估计需要用到 awk, 虽然难，但可以学，至少知道该学什么；\n- 但是把 id 号传递给一个变量，然后把这个变量填进 `xinput disable`, 这一步就连该学什么也不知道了。\n"},{"slug":"mimic-mathematica-with-wolfram-engine-and-vscode","filename":"2022-06-19-mimic-mathematica-with-wolfram-engine-and-vscode.md","date":"2022-06-19","title":".nb | Mathematica 入门：免费正版、vscode、近似原生体验","layout":"post","keywords":["md","nb","m"],"excerpt":"不用算号器，完全合法的免费手段搭建一个免费的 Wolfram Languange 运行环境，效果尽可能贴近 Mathematica。","content":"\n## Mathematica 的原生体验暨山寨目标\n\n本科的时候老师总是跟我们念叨，让我们学点科学计算软件，可学的不多，不过 MatLab, Mathematica, Maple, Origin 和 Labview.  ~~作为编程语言的 MatLab 是世界上语法最垃圾的（没有之一）~~ ，Maple 实在是太小众了，Origin 和 Labview 不仅应用场景有限而且繁琐还有版权问题，于是 MMA 就成了我主要的折腾对象。不敢说拿手，起码是略懂。\n\nWolfram 和 python 一样也是[动态语言和解释型语言](python-interpreter-editor-virtualenv)，而且默认的新建文件类型就是 `.nb` 笔记本文件，命令按块执行，输出结果直接显示在代码块下方，强烈怀疑 Jupyter Notebook 就是山寨了 Mathematica。当然另有一种 `.m` 文件，用于执行文件内的所有命令，适用于比较大型的独立应用。\n\n![](/photos/2022-06-19-mathematica-notebook.gif)\n\n虽然现在的学校给学生买了正版许可证，但是只能用在一台电脑上，所以笔记本上就安装不了。虽然百度贴吧的精华帖里有传统艺能算号器教程，但是现在 Wolfram 开放了免费的 Wolfram Engine，所以我们还是来点正大光明的，用完全合法的免费手段搭建一个免费的 Wolfram Languange 运行环境，效果尽可能贴近 Mathematica。\n\n需要用到的工具有：\n\n- Wolfram Engine\n- Wolfram Script\n- Wolfram Engine For Jupyter\n- jupyter\n- vscode\n\n## Wolfram Engine 和 Wolfram Script 下载和安装\n\n《How do I install Mathematica on Linux?》：[https://support.wolfram.com/12453](https://support.wolfram.com/12453)\n\n在 Google 上搜索“Wolfram Engine”后可以找到官网的下载地址：[https://www.wolfram.com/engine/](https://www.wolfram.com/engine/)\n\n根据自己的操作系统点击下载之后会弹出获取许可证的页面 ([https://account.wolfram.com/access/wolfram-engine/free](https://account.wolfram.com/access/wolfram-engine/free))，没有 Wolfram 账号的需要注册一个账号。\n\n完成之后在下载文件夹打开 terminal, 输入以下命令，其中 xyz 是下载文件名中的版本号：\n\n```python\nsudo bash WolframEngine_xxx.yy.zz_LINUX\n```\n\n强烈建议按照默认设置完成安装，不做要任何个性化的调整，理由见下方引用块。\n\n\u003e 我把第二个选项，也就是 Wolfram Engine 可执行文件的路径设置成了自己 home 下安放一般独立软件的文件夹，结果激活过程出现了问题：输入 `wolframscript` 之后说找不到 WoflramEngine，填入自己的路径之后提示 Wolfram Engine 尚未激活，手动启动 `WolframEngine` 之后提示输入激活密钥 activation key，但是各处遍寻不得。\n解决方法来自以下 StackOverflow 回答：[https://mathematica.stackexchange.com/questions/198822/the-wolfram-kernel-must-be-activated-for-wolframscript-to-use-it](https://mathematica.stackexchange.com/questions/198822/the-wolfram-kernel-must-be-activated-for-wolframscript-to-use-it)\n在wolfram官网登陆自己的账号之后，在一个新的标签页输入以下网址 [https://www.wolframcloud.com/users/user-current/activationkeys](https://www.wolframcloud.com/users/user-current/activationkeys)，即可看到自己的 activation key，在 terminal 中打开 Wolfram Engine，根据提示把 activation key 复制粘贴到指定位置，即可完成激活。\n但是第二天配置好 vscode 和 Jupyter 之后，再次在命令行打开 WolframScript 的时候提示激活失败，重新按照上述方法操作后，显示 activation key 已被使用。即便是删除后按照默认设置重装，也依然会提示超过许可证限制。\n后来在官网给出的联系方式给客服发了消息，客服回信给了新的激活码。\n\u003e \n\n再下载 [WolframScript](https://account.wolfram.com/products/downloads/wolframscript)，这是 Wolfram 的前端。然后按照各个操作系统自己的规矩安装 WolframScript，我的 fedora 就是双击 rpm 文件然后根据提示操作。完成后在命令行输入 `wolframscript`, 根据提示输入 Wolfram 账号和密码，Wolfram Engine 就会联网激活自己。\n\n激活成功之后，在 terminal 输入 `wolframscript`, 显示的结果如下，即说明 Wolfram Engine 和 Wolfram Script 配置成功。\n\n```bash\nWolfram Language 13.0.1 Engine for Linux x86 (64-bit)\nCopyright 1988-2022 Wolfram Research, Inc.\n\nIn[1]:=\n```\n\n在 `In[1]:=` 处输入 `Exit[]` 并按回车，即可退出 Wolfram 回到命令行。\n\n## 将 Wolfram Engine 设为 Jupyter 的后端\n\n[https://github.com/WolframResearch/WolframLanguageForJupyter](https://github.com/WolframResearch/WolframLanguageForJupyter)\n\n根据上面网址的指示，将官方 repo 克隆到本地，因为我们的 python 分隔成了多个[虚拟环境](https://virtual.env)，所以比官网教程多一步 `workon base`:\n\n```bash\n[me@my_computer dev]$ git clone https://github.com/WolframResearch/WolframLanguageForJupyter.git\n# Cloning into 'WolframLanguageForJupyter'...\n# remote: Enumerating objects: 649, done.\n# remote: Counting objects: 100% (140/140), done.\n# remote: Compressing objects: 100% (52/52), done.\n# remote: Total 649 (delta 93), reused 126 (delta 88), pack-reused 509\n# Receiving objects: 100% (649/649), 321.55 KiB | 2.23 MiB/s, done.\n# Resolving deltas: 100% (411/411), done.\n[me@my_computer dev]$ cd WolframLanguageForJupyter\n[me@my_computer WolframLanguageForJupyter]$ workon base\n(base) [me@my_computer WolframLanguageForJupyter]$ ./configure-jupyter.wls add\n(base) [me@my_computer WolframLanguageForJupyter]$\n```\n\n## 用法和效果\n\n打开 vscode，按 `Ctrl+Shift+P` 呼出命令搜索框，找到 \"Jupyter: Create Interactive Window\":\n\n![](/photos/2022-06-19-jupyter-start.png)\n\n单击 Jupyter 后端内核的图表（下图中右上角的\"base(Python 3.9.12)\"字样），把内核切换为 \"Wolfram Language ##\"\n\n![](/photos/2022-06-19-switch-kernel.png)\n\n等待后端内核切换完成，就可以输入 Mathematica 命令查看效果了：\n\n![](/photos/2022-06-19-final-result.png)\n\n完成！\n"},{"slug":"R-install-and-simple-syntax","filename":"2022-04-29-R-install-and-simple-syntax.md","date":"2022-04-29","title":".r | R语言入门笔记","layout":"post","keywords":["md","r","mpipks-note"],"excerpt":"本文也是马克思·普朗克复杂物理研究所《非平衡态集体过程》第9讲的笔记。","content":"\n\u003e 本文也是马克思·普朗克复杂物理研究所《非平衡态集体过程》第9讲的笔记。\n\u003e \n\n最近在蹭一门数学系的读书课，题目叫“非线性时间序列分析”。本来以为会是数学系的人抢物理系动力学方向的饭碗用的（可能实际上也确实是，或者更有可能是反过来），但是老师在前几讲一直把重点放在何种定理如何证明上面。数学系的嘛，这种对公理化系统的喜爱可以理解。但是发现我们几个上课的对这些证明都不太感兴趣之后，~~直接一个发卡弯漂移，教我们用 R 语言分析现实数据，现在新课还没上，不过可能是以股票数据做例子，我的老天鹅，这也太“经世济民”了吧……~~ 最后期末作业发现大家居然又都选择做 PPT 讲中心极限定理的证明，经世济民计划无疾而终。\n\n以下是为了新课程，我自己提前做的准备。\n\n## 下载、安装、环境配置（精神病版）\n\n- [https://cloud.r-project.org/](https://cloud.r-project.org/)\n- 看这一个链接就够了：[https://marketplace.visualstudio.com/items?itemName=Ikuyadeu.r](https://marketplace.visualstudio.com/items?itemName=Ikuyadeu.r)\n- [https://github.com/randy3k/radian](https://github.com/randy3k/radian)\n- [https://github.com/nx10/httpgd](https://github.com/nx10/httpgd)\n\n`Fedora Linux` + `R` + `radian` + `vscode` + `R extension for vscode`\n\n1. 在官网（[https://cloud.r-project.org/](https://cloud.r-project.org/)）下载并安装 R [解释器](https://python-interpreter)。\n2. 在命令行输入 `R` 打开解释器，在 R 中输入 `install.packages(\"languageserver\")` \n3. 在 vscode 的市场页面搜索 “R”，安装 R 语言插件。\n4. 安装 radian：\n    1. 在合适的 python [虚拟环境](https://pyhton-virtualenv) 里输入 `pip intall radian`\n    2. 用 radian 取代 R：编辑 `~/.bashrc` , 在其中加入一句`alias r=\"radian\"` ，重启命令行\n    3. 在 vscode 的设置中找到 `R\u003eRterm: Linux`, 输入 radian 的安装路径（在命令行中输入 `which R` 可以找到）\n5. 在 vscode 的市场页面搜索 “R debugger”，安装 `R debugger for vscode`\n6. 在命令行输入 `R` 打开解释器，在 R 中输入 `install.packages(\"httpgd\")`，安装可视化工具 `httpgd`\n\n## 简单语法\n\n来自马克思·普朗克复杂物理研究所《非平衡态集体过程》第9讲，这老师的讲课顺序简直了……\n\nR 的语法也简直了……\n\n### 简单数据结构 Some data types\n\n```r\n# vector\na \u003c- c(1,2,3,NA)\nb \u003c- c(\"m\",\"f\",\"f\",\"m\")\n# using a value\nb[2]\n\n# list\nlist.ab \u003c- list(number=a, gender=b)\nlist.ab$number\nlist.ab[[1]]\n\n# factors (categorial variable)\nf \u003c- factor(b)\nf\n# [1] m f f m f m m\n# levels: f m\nlevels(f) \u003c- c(\"female\", \"male\")\n\n# dataframe (lists of vectors of the same length)\nx \u003c- c(1,2,3)\ny \u003c- c(\"aa\",\"bb\",\"cc\")\nz \u003c- c(TRUE, FALSE, TRUE)\ndf \u003c- data.frame(first=x, second=y, third=z)\nView(df)\n# |      | first | second | third |  \n# |    1 |     2 |     aa |  TRUE |\n# |    2 |     3 |     bb | FALSE |\n# |    3 |     5 |     cc |  TRUE |\n```\n\n### 控制流 Loops, conditional statements\n\n```r\n# for loop\nfor(i in 1:5) {\n\tprint(i)\n}\n# while loop\nwhile(!finished) {\n\tprint(\"Hello\")\n}\n# if statement\nif(i\u003c5) {\n\tprint(\"Hello\")\n} else {\n\tprint(\"Not Hello\")\n}\n```\n\n### 函数 Functions\n\n```r\n# calling a function\nrnorm(5,mean=1,sd=1)\n\n# defining a function\nmysum \u003c- function(a,b,c=1) { a + b + c }\nmysum(1,1)\n```\n\n### 复杂数据类型 `data.table`\n\nSome comparison:\n\n- `data.table`: R package, fast and memory efficient\n- `python.pandas`: python implementation of data frames\n- `dplyr`: highly popular, easy to learn\n\n```r\nlibrary(data.table)\ndt \u003c- as.data.table(df)\n```\n\n```r\n# read and write\nflights \u003c- fread(\"path/to/your/flights.txt\")\nweather \u003c- fread(\"path/tp/your/weather.txt\")\n```\n\nMaking data tidy can simplify the following analysis.\n\n- Every column is an observable.\n- Every row is an observation.\n\n```r\n# making data tidy\nmelt( dt,\n      id.vars = \"ID\",\n      value.name = \"expression\",\n      variable.name = \"cell\"\n)\n# making data messy\ndcast(dt, ID ~ cell+expression) # not understand\n```\n\nGet item\n\n```r\nd[i, j, by] # take `d`, subset rows using `i`, then **calculate** `j` grouped by `by`\n# examples\nplanes[engines == 4]\n\n# slice the 2 columns\nplanes[, .(tailnum, year)] \n# groupby and calculate\nflights[, .(mean_delay = mean(dep_delay, na.rm=T)), by=carrier]\nflights[time_hour\u003e20, .(mean_delay=mean(dep_delay,na.rm=T)), by=.(month, origin)]\n# math calculations\nflights[, speed_kmh := 60*1.61*distance/air_time]\nflights[, resc_distance := distance/mean(distance), by=carrier]\n```\n\nMerge 2 tables\n\n```r\n# left join\nmerge(a,b,all.x=T)\nb[a] # same as above\n\n# right join\nmerge(a,b,all.y=T)\na[b] # same as above\n\n# inner join\nmerge(a,b, all=F)\na[b, nomatch=0]\n\n# full join\nmerge(a,b,all=T)\n```\n\nChaining operations\n\n```r\n# data.table way\nweather[, ws_kmh:=1.61*wind_speed][, .(mean_ws=mean(ws_kmh)), by=month]\n# use operator %\u003e% to take the result on the left as the 1st argument on the right\nlibrary(magrittr)\nweather[, ws_kmh:=1.61*wind_speed] %\u003e%\n.[, .(mean_ws = mean(ws_kmh)), by=month] %\u003e%\nhead()\n```\n"},{"slug":"rust-simple-syntax","filename":"2022-04-29-rust-simple-syntax.md","date":"2022-04-29","title":".rs | Rust 入门笔记","layout":"post","keywords":["md","rs"],"excerpt":"introduction to Rust and some simple syntax","content":"\nOn youtube.\n\n## What is Rust\n\nfast and powerful, system language\n\nweb development through webAssembly\n\nNo garbage collection, also no need to manege memory, which makes language more tedious\n\nUse Cargo to manage package\n\n## Install\n\nWindows: .exe\n\nLinux: run the curl script.\n\n```bash\nrustup --version\nrustc --version \ncargo --version\n```\n\nvscode Rust(rls) plugin\n\n## empty folder and compile\n\n```bash\nmkdir rustsandbox\ncd rustsandbox\ntouch hello.rs\n```\n\n```bash\nfn main() {\n\tprintln(\"Hello World!\");\n}\n```\n\n## initialize a project with cargo\n\n```bash\ncargo init\n```\n\nbettertmil plugin for highlight of `.tmil` file.\n\n```bash\ncargo run # compile and debug\ncargo build\ncargo build --release # for production\n```\n\n## print line\n\n```bash\ntouch src/print/rs\n```\n\n```rust\n// in print.rs\npub fn run() {\n\tprintln!(\"Hello World!\");\n\t// Basic formatting\n\tprintln!(\"Number: {}\",1); \n\tprintln!(\"{} is from {}\",\"Brad\",\"Mass\");\n\t// Positional arguments\n\tprintln!(\"{0} is from {1} and {0} likes to {2}.\",\"Brad\",\"Mass\",\"code\");\n\t// Named argument\n\tprintln!(\"{name} likes to play {activity}.\", name=\"John\", activity=\"baseball\")\n\t//Placeholder traits\n  println!(\"Binary: {:b} Hex: {:x} Octal: {:o}\", 10,10,10);\n\t//Placeholder for debuging\n  println!(\"{:?}\", (10,True,\"hello\"));\n\t//Basic Math\n\tprintln!(\"10+10={}\",10+10)\n}\n```\n\n```rust\n// in main.rs\nmod print;\n\nfn main() {\n\tprint::run();\n}\n```\n\n## Variable\n\n```rust\n// var.rs\npub fn run() {\n\tlet name=\"Brad\";\n\tlet age = 37;\n  age = 38; //cannot assign twice\n\tlet mut age = 37;\n\tage = 38;\n\tprintln!(\"My name is {} and I am {}\",name, age);\n\t// constant\n\tconst ID:i32 = 001;\n\tprintln(\"ID: {}\",ID);\n\t// assign multiple variables\n\tlet ( my_name, my_age ) = (\"Brad\", 37);\n\n}\n```\n\n## Primitive Types\n\n```rust\n// type.rs\n/*\nPrimitive Types:\nIntegers: u8,i8,u16,i16,...u128,i128\nFloats: f32,f64\nBoolean: bool\nCharacters: char\nTuples\nArrays\n*/\n\n// Rust is a static type language, but compiles usually can infer\n \npub fn run() {\n\t// default is i32, f64\n\tlet x = 1; \n\tlet y = 2.5;\n\tlet z: i64 = 454544445554;\n\t// find max size\n\tprintln!(\"Max i32:{}\", std::i32::MAX);\n\tprintln!(\"Max f64:{}\", std::f64::MAX);\n\t// boolean\n\tlet is_active = true;\n\t// get boolean from expression\n\tlet is_greater = 10 \u003e 5;\n\t// char\n\tlet a1 = 'a'; // has to be single quotes\n\tlet a2 = 'ab'; // error, can only be one character\n\tlet a3 = '\\u{1F600}';\n}\n```\n\n## Strings\n\n```rust\n// string.rs\n\n// primitive str = immutable fixedlength string\n// String = growable heap-allocated data structure - use when I need to modify or own srtring data\n\npub fn run() {\n\tlet mut hello = String::from(\"Hello \");\n\t//get length\n\tprintln!(\"Length: {}\", hello.len());\n\thello.push('W');\n\thello.push_str(\"orld\");\n\t// immutable\n\tlet hello2 = \"Hello\";\n\t// methods\n\tprintln!(\"Capacity {}\", hello.capacity());\n\tprintln!(\"Is empty {}\", hello.is_empty());\n\tprintln!(\"Contains 'World' {}\", hello.contains(\"World\"));\n\tprintln!(\"Replace {}\", hello.replace(\"World\",\"there\"));\n\t// loop through string by whitespace\n\tfor word in hello.split_whitespace() {\n\t\tprintln!(\"{}\",word);\n\t}\n\t// Create string with capacity\n\tlet mut s = String::with_capacity(10):\n\ts.push('a');\n\ts.push('b');\n\t// Assertion testing\n\tassert_eq!(2,s.len());\n}\n```\n\n## tuple\n\n```rust\n//tuples.rs\n\n// can be different types\npub fn run() {\n\tlet person: (\u0026str,\u0026str,i8) = (\"Brad\",\"Mass\",37);\n\tprintln!(\"{} is from {} and is {}\", person.0, person.1, person.2);\t\n}\n```\n\n## Array\n\n```rust\n// array.ts\n\nuse std::mem\n\npub fn run() {\n\tlet numbers: [i32,5] = [1,2,3,4,5]; // length has to be exact\n\tprintln!({:?},numbers);\n\t// get single value\n\tprintln!(\"Single value{:?}\",numbers[0]);\n\tlet mut numbers1: [i32,5] = [1,2,3,4,5];\n\tnumbers1[2] = 20;\n\tprintln!(\"Array length: {}\", numbers1.len());\n\t//arrays are static allocated\n\tprintln!(\"Arry occupies {} bytes\", mem::size_of_val(\u0026numbres1));\n\t// get slice\n\tlet slice: \u0026[i32] = \u0026numbres[0..2];\n\tprintln!(\"\")\n}\n```\n\n## Vector\n\n```rust\n//vector.rs\n\n// vectors are resizable arrays\npub fn run() {\n\tlet mut numbers: Vec\u003ci32\u003e = Vec![1,2,3,4];\n\t// add \n\tnumbers.push(5);\n\tnumbers.push(6);\n\t//pop off las values\n\tnumbres.pop();\n\t// loop through vector values\n\tfor x in numbers.iter(){\n\t\tprintln!(\"Number: {}\", x);\n\t}\n\tfor x in numbers.iter_mut(){\n\t\t*x *= 2; // no idea what the 1st * does\n\t\tprintln!(\"Number: {}\", x);\n\t}\n}\n```\n\n## conditional\n\n```rust\n//conditional.rs\n\npub fn run() {\n\tlet age: u8 = 18;\n\tlet check_id: bool = false;\n\tlet knows_person_of_age = true;\n\n\t// if/else\n\tif age \u003e= 21 \u0026\u0026 check_id || knows_person_of_age {\n\t\tprintln!(\"Bartender: what would like to drink?\");\n\t} else if age \u003c 21 \u0026\u0026 check_id {\n\t\tprintln!(\"Bartender: sorry you have to leave.\");\n\t} else {\n\t\tprintln!(\"Bartender: I'll need to see your ID.\");\n\t}\n\n\t// short if\n\tlet is_of_age = if age\u003e=21 {true} else {false};\n\tprintln!(\"Is of age: {}\", is_of_age);\n}\n```\n\n## loop\n\n```rust\n//loop.rs\n\npub fn run() {\n\tlet mut count = 0;\n\t//infinite loop\n\tloop {\n\t\tcount += 1;\n\t\tprintln!(\"Number: {}\", count);\n\n\t\tif count \u003e 20 {\n\t\t\tbreak;\n\t\t}\n\t}\n\t// while loop (FizzBuzz)\n\twhile count \u003c=100 {\n\t\tif count%15 === 0 {\n\t\t\tprintln!(\"fizzbuzz\");\n\t\t} else if count%3 == 0 {\n\t\t\tprintln!(\"fizz\");\n\t\t\telse if count%5 == 0 {\n\t\t\tprintln!(\"buzz\");\t\n\t\t} else {\n\t\t\tprintln!(\"{}\",count)\n\t\t}\n\t\tcount += 1;\n\t}\t\n\t// for loop\n\tfor x in 0..100 {\n\t\t// ...\n\t}\n}\n```\n\n## function\n\n```rust\n// function.rs\npub fn run() {\n\tgreeting(\"Hello\",\"Jane\");\n\tlet get_sum = add(5,5);\n\t//closure\n\tlet n3 = 10;\n\tlet add_sums = |n1: i32, n2: i32| n1+ n2 + n3; //need to find out more\n}\n\nfn greeting (greet: \u0026str, name: \u0026str) {\n\tprintln!(\"{} {}, nice to meet you.\", greet, name);\n}\n\nfn add(n1: i32, n2: i32) -\u003e i32 {\n\tn1 + n2 // no semi-colum here\n}\n```\n\n## Pointer/Reference\n\n```rust\n// pointer.rs\n\npub fn run() {\n\t// primitive\n\tlet arr1 = [1,2,3];\n\tlet arr2 = arr1;\n\tprintln!(\"Values: {:?}\", (arr1,arr2));\n\t// with non-primitive, if you assign another variable to a piece of data, the 1st variable will no longer hold that value. You'll need to use a reference (\u0026) to point to the resource\n\tlet vec1 = Vec![1,2,3];\n\tlet vec2 = \u0026vec1;\n\tprintln!(\"Values: {:?}\", (\u0026vec1, vec2))\n}\n```\n\n## Struct\n\n```rust\n// struct.rs\n\n// used to create custome data types\n\n// traditional struct\nstruct Person {\n\tfirst_name: String,\n\tlast_name: String\n};\n\nimpl Person{\n\tfn new(first: \u0026str, last: \u0026str)-\u003e Person {\n\t\tPerson {\n\t\t\tfirst_name: first.to_string(),\n\t\t\tlast_name: last.to_string()\n\t\t}\n\t}\n\tfn full_name(\u0026self) -\u003e String {\n\t\tformat!(\"{} {}\", self.first_name, self.last_name)\n\t}\n\t// set last name\n\tfn set_last_name(\u0026mut self, last: \u0026str){\n\t\tself.last_name = last.to_string();\n\t}\n\t// name to tuple\n\tfn to_tuple(self)-\u003e(String,String){\n\t\t(self.first_name,self.last_name)\n\t}\n}\n\nstruct Color {\n\tred: u8,\n\tgreen: u8,\n\tblue: u8,\n};\n\n// tuple struct\nstruct ColorTuple(u8,u8,u8); \n\npub fn run() {\n\tlet mut c = Color{\n\t\tred: 255,\n\t\tgreen: 0,\n\t\tblue: 0,\n\t};\n\tc.red = 200;\n\tprintln!(\"Color: {},{},{}\",);\n\t\n\tlet mut ct = ColorTuple(255,0,0);\n\tct.0 = 200;\n\tprintln!(\"Color: {},{},{}\",ct.0,ct.1,ct.2);\n\n\tlet mut p = Person::new(\"John\",\"Doe\");\n\tprintln!(\"Person {} {}\", p.first_name, p.last_name)\n\tp.set_last_name(\"Williams\");\n\tprintln!(\"Person {}\", p.full_name());\n\tprintln!(\"Person {:?}\", p.to_tuple());\n}\n```\n\n## enumerate\n\n```rust\n//enum.rs\n\n// enum is a type with a few definitive values\n\nenum Movement {\n\t// variants\n\tUp, \n\tDown,\n\tLeft, \n\tRight\n}\n\nfn move_avatar(m:Movement) {\n\tmatch m {\n\t\tMovement::Up =\u003e println!(\"Avatar Moving Up\"),\n\t\tMovement::Down =\u003e println!(\"Avatar Moving Down\"),\n\t\tMovement::Left =\u003e println!(\"Avatar Moving Left\"),\n\t\tMovement::Right =\u003e println!(\"Avatar Moving Right\")\n\t}\n}\n\npub fn run() {\n\tlet avatar1 = Movement::Up;\n\tlet avatar2 = Movement::Down;\n\tlet avatar3 = Movement::Left;\n\tlet avatar4 = Movement::Right;\n\n\tmove_avatar(avatar1);\n\tmove_avatar(avatar4);\n\tmove_avatar(avatar2);\n\tmove_avatar(avatar3);\t\n}\n```\n\n## Command line interface\n\n```rust\n// cli.rs\n\nuse std::env;\n\npub fn run() {\n\tlet args: Vec\u003cString\u003e = env::args().collect();\n\tlet command = args[1].clone();\n\tlet name = \"Brad\";\n\tlet status  = \"100%\"\n\n\tprintln!(\"Args: {:?}\", args);\n\tprintln!(\"Command: {}\", command)\n\n\tif command == \"Hello\" {\n\t\tprintln!(\"Hi {}, how are you?\", name);\n\t} else if command == \"status\" {\n\t\tprinln!(\"Status is {}\", status);\n\t} else {\n\t\tprintln!(\"That is not a valid command.\");\n\t}\n}\n```"},{"slug":"typescript-simple-syntax","filename":"2022-04-29-typescript-simple-syntax.md","date":"2022-04-29","title":".ts | TypeScript 入门笔记","layout":"post","keywords":["md","js","ts"],"excerpt":"An introduction to Typescript and some simple syntax","content":"\nWhat is TypeScript:\n\n- static types\n- types from 3rd parties can be added with type definition\n\nDynamic vs Static types\n\n- dynamic: types associated with run-time values, and not explicitly in code\n- static: explicitly assign types\n\nPros and Cons\n\n- pros: more robust, debug, predictability\n- cons: more codes to write, requires compilation, **not true typing**\n\nCompiling\n\n- `.ts` or `.tsx` extension\n- `TSC` is used\n- `tsconfig.json`\n\n# Hands on\n\n## Install\n\n```bash\nsudo npm i -g typescript\ntsc -v\ntouch index.ts\n```\n\n```tsx\nlet id: number = 5 \nid = `5` // error\n\n```\n\n```bash\ntsc index\ntsc -- watch index\n```\n\n```bash\ntsc --init # produces tsconfig.json\n```\n\n```json\n{\n\t\"outDir\": \"./dist\",\n\t\"rootDir\": \"/src\"\n}\n```\n\n## Types\n\n```tsx\nlet id: number = 5\nlet company: string = \"Media\"\nlet isPublished: boolean = true\nlet x: any = \"hello\"\nx = true // no errors\n\n// array\nlet ids: number[] = [1,2,3,4,5]\nids.push(\"hello\") // error\n\nlet arr: any[] = [1, true, 'hello']\n\n//tuple\nlet person: [number, string, boolean] = [1, 'Brad', true]\n\n// tuple array\nlet employee: [number, string][]\nemployee = [\n\t[1, 'Brad'],\n\t[2, 'Sam']\n]\n\n// union\nlet pid: string | number = 22\n\n// enum\nenum Direction1 {\n\tUp, // default is 0\n\tDown,\n\tLeft,\n\tRight\n}\n\nenum Direction2 {\n\tUp   = \"Up\", // default is 0\n\tDown = \"Down\",\n\tLeft = \"Left\",\n\tRight= \"Right\"\n}\n\n//objects\nconst user: {\n\tid: number,\n\tname: string\n} = {\n\tid: 1,\n\tname: 'John'\n}\n\ntype User = {\n\tid: number,\n\tname: string\n}\n\nconst user: User\n\n// type assertion\nlet cid: any = 1\nlet customerId = \u003cnumber\u003ecid\nlet customerId = cid as number\n\n```\n\n## function\n\n```tsx\nfunction addNum(x: number,y: number): number {\n\treturn x+y\n}\n//void\n\nfunction log(message: number | string): void {\n\tconsole.log(message)\n}\n```\n\n## Interfaces\n\n```tsx\ninterface UserInterface {\n\treadonly id: number,\n\tname: string,\n\tage?: number // optional property\n\tregister(): string\n}\nconst user1: UserInterface = {\n\tid: 1, // error , read only\nname: \"brad\"\n}\n\ninterfce MathFunc {\n\t(x: number, y: number): number\n}\n\nconst add: MathFunc = (x: number, y: number): number =\u003e x+y\n```\n\n## Class\n\n```tsx\nclass Person implements UserInterface{\n\tprivate id: number\t // within the class\n\tprotected name: string // within class or extended classes\n\tsalary: number\n\n\tconstructor(id: number, name: string) {\n\t\tthis.id = id\n\t\tthis.name = name\n\t}\n\tregister() {\n\t\treturn `${this.name} is registered.`\n\t}\n}\n\nconst brad = new Person(1,'Brad')\n```\n\n## Subclass\n\n```tsx\nclass Employee extends Person {\n\tposition: string\n\n\tconstructor(id: number, name: string, position: string) {\n\t\tsuper(id,name)\n\t\tthis.position = position\n\t}\n}\nconst emp = new Employee(3,\"Shawn\",\"developer\")\nconsole.log(emp.register())\n\n```\n\n## Generics\n\n```tsx\nfunction getArray(items: any[]): any[] {\n\treturn new Array().concat(items)\n}\nlet numArray = getArray([1,2,3,4])\nlet strArray = getArray(['a','b','c','d'])\n\nnumArray.push('hello') // no error, but not what we want\n\nfunction getArray\u003cT\u003e(items: T[]): T[] {\n\treturn new Array().concat(items)\n}\nlet numArray = getArray\u003cnumber\u003e([1,2,3,4])\nnumArray.push('hello') // error\n```\n\n## With React\n\n```bash\nnpx create-react-app . --template typescript\nnpm start\ntouch header.tsx\n```\n\n```tsx\nexport interface Props{\n\ttitle: string\n\tcolor?: string\n}\nconst Header = (props: Props) =\u003e {\n\treturn (\n\t\t\u003cheader\u003e\n\t\t  {% raw %}\n\t\t\t\u003ch1 style={{ color: prps.color ? props.color: \"blue\" }}\u003e\n\t\t\t\t{props.title}\n\t\t\t\u003c/h1\u003e\n\t\t  {% endraw %}\n\t\t\u003c/header\u003e\n\t)\n}\n```"},{"slug":"tensorboard-on-pytorch","filename":"2022-04-08-tensorboard-on-pytorch.md","date":"2022-04-08","title":".py | TensorBoard 笔记（PyTorch 版）","layout":"post","keywords":["md","py","ai"],"excerpt":"TensorBoard 是 TensorFlow 团队开发的一款可视化工具，方便观察和调整机器学习的数据集、模型、超参数和训练结果等等。但是不知道为什么，PyTorch 调用 TensorBoard，要比 TensorFlow 方便简单得多，\u003cdel\u003e这何尝不是一种 NTR\u003c/del\u003e……","content":"\n- 官网教程：[https://pytorch.org/tutorials/intermediate/tensorboard_tutorial.html](https://pytorch.org/tutorials/intermediate/tensorboard_tutorial.html)\n- 官方文档：[https://pytorch.org/docs/stable/tensorboard.html](https://pytorch.org/docs/stable/tensorboard.html)\n\nTensorBoard 是 TensorFlow 团队开发的一款可视化工具，方便观察和调整机器学习的数据集、模型、超参数和训练结果等等。但是不知道为什么，PyTorch 调用 TensorBoard，要比 TensorFlow 方便简单得多，~~这何尝不是一种 NTR~~……\n\n---\n\n## 用法和效果\n\n一个使用了 TensorBoard 的 torch 项目的主文件一般是这样的（把和 TensorBoard 无关的部分都注释掉了）：\n\n```python\n# imports\n# import matplotlib.pyplot as plt\n# import numpy as np\n\n# import torch\n# import torchvision\n# import torchvision.transforms as transforms\n\n# import torch.nn as nn\n# import torch.nn.functional as F\n# import torch.optim as optim\n\nfrom torch.utils.tensorboard import SummaryWriter\n\n# # transforms\n# transform = transforms.Compose(\n#     [transforms.ToTensor(),\n#     transforms.Normalize((0.5,), (0.5,))])\n\n# # datasets\n# trainset = torchvision.datasets.FashionMNIST('./data',\n#     download=True,\n#     train=True,\n#     transform=transform)\n# testset = torchvision.datasets.FashionMNIST('./data',\n#     download=True,\n#     train=False,\n#     transform=transform)\n\n# # dataloaders\n# trainloader = torch.utils.data.DataLoader(trainset, batch_size=4,\n#                                         shuffle=True, num_workers=2)\n# testloader = torch.utils.data.DataLoader(testset, batch_size=4,\n#                                         shuffle=False, num_workers=2)\n\n# # constant for classes\n# classes = ('T-shirt/top', 'Trouser', 'Pullover', 'Dress', 'Coat',\n#         'Sandal', 'Shirt', 'Sneaker', 'Bag', 'Ankle Boot')\n\n# class Net(nn.Module):\n#     def __init__(self):\n#         super(Net, self).__init__()\n#         self.conv1 = nn.Conv2d(1, 6, 5)\n#         self.pool = nn.MaxPool2d(2, 2)\n#         self.conv2 = nn.Conv2d(6, 16, 5)\n#         self.fc1 = nn.Linear(16 * 4 * 4, 120)\n#         self.fc2 = nn.Linear(120, 84)\n#         self.fc3 = nn.Linear(84, 10)\n#     def forward(self, x):\n#         x = self.pool(F.relu(self.conv1(x)))\n#         x = self.pool(F.relu(self.conv2(x)))\n#         x = x.view(-1, 16 * 4 * 4)\n#         x = F.relu(self.fc1(x))\n#         x = F.relu(self.fc2(x))\n#         x = self.fc3(x)\n#         return x\n# net = Net()\n\n# criterion = nn.CrossEntropyLoss()\n# optimizer = optim.SGD(net.parameters(), lr=0.001, momentum=0.9)\n\n# default `log_dir` is \"runs\" - we'll be more specific here\nwriter = SummaryWriter('runs/fashion_mnist_experiment_1')\n\nrunning_loss = 0.0\nfor epoch in range(1):  # loop over the dataset multiple times\n    for i, data in enumerate(trainloader, 0):\n        # # get the inputs; data is a list of [inputs, labels]\n        # inputs, labels = data\n\n        # # zero the parameter gradients\n        # optimizer.zero_grad()\n\n        # # forward + backward + optimize\n        # outputs = net(inputs)\n        # loss = criterion(outputs, labels)\n        # loss.backward()\n        # optimizer.step()\n\n        # running_loss += loss.item()\n        if i % 1000 == 999:    # every 1000 mini-batches...\n            # ...log the running loss\n            writer.add_scalar('training loss',\n                            running_loss / 1000,\n                            epoch * len(trainloader) + i) # 注意这一行！\n# print('Finished Training')\n```\n\n正常情况下，使用了tensorboard 的项目在训练的过程中，可以用网页浏览器打开网址 `localhost:6006`，应该可以看到和下图类似但不同的画面：\n\n![tensorboard](/photos/2022-04-08-tensorboard.png)\n\n下面来仔细分解。\n\n## 代码分解\n\n[引入](python-import-script-module-package) TensorBoard 需要下面一行代码：\n\n```python\nfrom torch.utils.tensorboard import SummaryWriter\n```\n\n从名字就能看出来，`SummaryWriter` 是一个 class。粗略用了一下文档页面的业内搜索，好像整个 `torch.utils.tensorboard` 就只有这一个 class。\n\n新建一个这个类的实例：\n\n```python\nwriter = SummaryWriter('runs/fashion_mnist_experiment_1')\n```\n\n这一步会在当前工作环境下新建一个 `/runs` 文件夹，\n\n要想显示导航栏上的“SCALARS”、“IMAGES”等等选项卡，并且让自己想观察的数据显示在各自类别的选项卡里，需要调用 `SummaryWriter` 下面的各种方法，比如 `add_scalar()`, `add_image()`.\n\n### 各种方法\n\n用法和效果举例如下：\n\n- `add_scalar()`: 在一张图中画出**一个标量**指标随学习迭代的**变化曲线**。\n    - `tag`: 图片的标题。\n    - `scalar_value`: 指标的值，也就是纵坐标。\n    - `global_step`: 全局迭代次数，也就是横坐标。\n- `add_scalars()`: 在一张图中同时画出**多个指标**随学习迭代的**变化曲线**。\n    - `main_tag`: 图片的标题\n    - `tag_scalar_dict`: 一个字典，字典的键是变量的名字，值是各个变量的纵坐标。\n    - `global_step`: 全局迭代次数，也就是横坐标。\n- `add_custome_scalars()`: 没有用过，也没见到例子，不太明白。根据描述像是把之前 `add_scalar()` 和 `add_scalars()` 的结果重新组合，对 SCALARS 选项卡重新排版。每个 `SummaryWriter` 只能运行一次，可以在训练开始前运行，也可以在之后。\n    - `layout`: 只有一个这参数，是一个字典，字典的键像是新图片/章节的名字，值是下一级字典或者是 `add_scalar()` 出现过/将要出现的 `tag` 参数。\n- `add_figure()`: 显示 `matplotlib` 画出的**图表**。\n    - `tag`: 标题\n    - `figure`: 图表，要求类型为 `matplotlib.pyplot.figure`\n    - `global_step`:迭代次数，效果如何 没试过。\n- `add_histogram()`: 在一张图中画出一个样本的**直方图**，以及这个直方图随迭代变化的规律。这是个三维图片，x 轴是直方图的取值范围，y 轴是迭代次数，z 轴是直方图的频率值。\n    - `tag`: 图片标题。\n    - `values`: 一个 `torch.Tensor` 或者 `numpy.array` ，用于绘制直方图的样本.\n    - `global_step`: 迭代次数，y 轴分量。\n    - `bins`: 取样间隔参数，`numpy.histogram()` 中用到的。 ****\n- `add_graph()`: 一般用于在训练前画出神经网络的**图状结构**。\n    - `model`: 要画的模型，类型是 `torch.nn.Module`\n    - `input_to_model=None`: （可选）输入模型的变量。\n- `add_mesh()`: **三维点云**。\n    - `tag`: 表格标题。\n    - `vertices`: 顶点三维坐标的列表。\n    - `colors`: 顶点的颜色。\n    - `faces`: （可选）没看懂 (Indices of vertices within each triangle.)\n    - `config_dict`: 用于画图的 ThreeJS 的参数。\n    - `global_step`: 迭代次数。\n- `add_embeddding()`: 神经网络的输入一般是高维向量，此工具将高维数据**投影到三维**空间，然后画出图像，方便我们感知训练集内样本之间的关系。\n    - `mat`: 一个矩阵，每一行都是一个要处理的向量。\n    - `metadata`: 标记文字，一般是列表。\n    - `label_img`: 标记图片，显示在每个数据点旁边的\n    - `global_step`: 迭代次数，一般没人用。\n    - `tag`: 图片标题。\n- `add_pr_curve()`: 准确率 (precision) -召回率 (call back) 曲线。准确率=真阳性/(真阳性+假阳性)，召回率=真阳性/(真阳性+假阴性)\n    - `tag`: 图片标题。\n    - `labels`: Ground truth 数据，每个数据点对应一个布尔值。\n    - `predictions`: 模型的输出，每个数据点对应一个 [0,1] 之间的实数。\n    - `global_step`: 迭代次数。\n    - `num_thresholds`:用于画出 PR 曲线的阈值的数目。\n- `add_hparams()`: 比较不同次运行之间的超参数。没太看懂。\n    - `hparam_dict`: 超参数的名称和取值\n    - `metric_dict`: metric （不知道怎么翻译）的名称和取值\n    - `hparam_domain_discrete`: （可选）字典，超参数的名称和有限个可能的取值。\n    - `run_name`: 运行的名称，将会成为 `logdir` 的一部分。\n- `add_image()`: 在 IMAGES 选项卡中显示**一张图片**。\n    - `tag`: 图片名称。\n    - `img_tensor`: 一个 `torch.Tensor` 或者 `numpy.array`，被显示的图片。对应于下面的 `dataformats` 参数。\n    - `global_step`: 迭代次数，没见有人在显示图片的时候用过。\n    - `dataformats=’CHW’`: 图片各维度的顺序。默认是“颜色-高度-宽度”。\n- `add_images()`: 并列显示**多张图片**。\n    - `tag`: 图片组的标题。\n    - `img_tensor`: 一个 `torch.Tensor` 或者 `numpy.array`，被显示的图片。图片个维度的含义由 `datadormats` 给出。\n    - `global_step`: 迭代次数，没见有人在显示图片的时候用过。\n    - `datadormats=’NCHW’`: 图片各维度的顺序。默认为“图片序号-颜色-高度-宽度”。\n- `add_video()`: 略\n- `add_audio()`: 略\n- `add_text()`: 略"},{"slug":"git-multiple-users","filename":"2021-12-26-git-multiple-users.md","date":"2021-12-26","title":".git | 管理 GitHub 不同用户身份的仓库","layout":"post","keywords":["md","git"],"excerpt":"多用户多账户，如何告诉 GitHub 某个项目文件夹该由哪个账号来做版本管理。","content":"\n很显然，我不可能把“阿掖山”这个名字写到论文里，与研究相关的项目、组里的代码和数据，都由另一个实名的 GitHub 账号来处理。这就有个问题——如何告诉 GitHub 某个项目文件夹该由哪个账号来做版本管理。\n\n于是 STFW，结果看到了GitHub  官方的回答：[“这边建议您把两个账号合并呢～”](https://docs.github.com/en/account-and-profile/setting-up-and-managing-your-github-user-account/managing-user-account-settings/merging-multiple-user-accounts)\n\n其实这个问题在建立这个博客站之前就解决了，但是因为很长时间我的研究代码都是自己在用，而且只在台式机上用，一直没有推到 GitHub 上去，实名账号一直没在笔记本上用过。具体细节忘得差不多了，这次复习一下。\n\n作为例子，两个账号的用户名分别是 `USER1` 和 `USER2`，注册邮箱分别是 `USER1@EMAIL.com` 和 `USER2@EMAIL.com`。\n\n## 多个计算机用户\n\n当然了，最简单的方法就是新建一个操作系统用户，每个用户登录一个 GitHub 账号。这种方法好处很多：\n\n- 不需要特殊操作。\n- 适用于不同操作系统。\n- 切换身份需要专门切换账号，有助于防止操作者忘记自己所处的身份。\n\n但是这篇文章不会涉及这种方法，因为当初买电脑的时候并没有注意到需要做身份隔离，等到发现事情不妙的时候已经混装和两个身份需要的不同软件，积重难返。于是采用了以下两节的解决方案。\n\n## 单个计算机用户@Windows: GitHub Desktop\n\n![](/photos/2021-12-26-github-desktop.png)\n\n- 在官网下载、安装、打开 [GitHub Desktop](https://desktop.github.com/) 客户端。\n- 在 GitHub 网页版上切换到新的账户。\n- 点击左上角 `File \u003e Options`，默认界面就是账户信息。点击 `Sign Out` 退出登录，然后再点击 `Sign In`，根据弹出窗口的提示操作，就来到了新的账户。\n\n## 单个计算机用户@Linux : `.ssh/config`\n\n具体操作看以下两个连接就够了：\n\n- [https://gist.github.com/JoaquimLey/e6049a12c8fd2923611802384cd2fb4a](https://gist.github.com/JoaquimLey/e6049a12c8fd2923611802384cd2fb4a)\n- [https://docs.github.com/en/authentication/connecting-to-github-with-ssh](https://docs.github.com/en/authentication/connecting-to-github-with-ssh)\n\n~~但是为了水字数，~~ 还是写得详细一点……\n\n### 本地：生成并启用 SSH key\n\n打开命令行，输入以下命令，生成 SSH key：\n\n```bash\n\nssh-keygen -t rsa -b 4096 -C \"USER1\" \nssh-keygen -t rsa -b 4096 -C \"USER2\"\n```\n\n其中 `-t` 指定加密算法，`-b` 指定密钥的位数，`-C` 相当于注释。\n\n然后命令行会弹出几个选项，可以一路按回车使用默认值。\n\n上述命令完成后，在 `~/.ssh` 文件夹应该会有两对四个密钥文件：\n\n- `~/.ssh/USER1`\n- `~/.ssh/USER1.pub`\n- `~/.ssh/USER2`\n- `~/.ssh/USER2.pub`\n\n然后输入以下命令，启用刚刚生成的密钥。\n\n```bash\n\neval \"$(ssh-agent -s)\" # 启动 ssh-agent\nssh-add ~/.ssh/USER1   # 添加 USER1 的密钥\nssh-add ~/.ssh/USER2   # 添加 USER2 的密钥\n```\n\n### 网页：把密钥添加到对应的账号\n\n在网页端以 `USER1` 身份登录 GitHub 之后，在 \"Settings\" 页面找到 \"SSH and GPG keys\" 选项卡，点击绿色的 \"New SSH key\" 按钮之后，将 `~/.ssh/USER1.pub` 中的内容复制到 \"Key\" 填空区，然后起一个名字，点击 \"Add SSH key\" 按钮。\n\n![](/photos/2021-12-26-github-key.png)\n\nUSER2也照此办理。\n\n**千万要注意**复制的应该是 `.pub` 后缀的文件！\n\n### 本地：编辑 `~/.ssh/config` 文件\n\n在 ~/.ssh/ 找到或者新建一个名为 config 的文本文件。打开之后，将以下内容添加到文件中：\n\n```\n\nHost github.com-user1\n\tHostname github.com\n\tUser git\n\tIdentityFile ~/.ssh/user1\nHost github.com-user2\n\tHostname github.com\n\tUser git\n\tIdentityFile ~/.ssh/user2\n```\n\n### `git clone` 时 repo 地址的改动\n\n一般的 git clone, 直接把 GitHub 提供的命令复制粘贴到命令行就行了。\n\n![](/photos/2021-12-26-git-clone.png)\n\n但是我们这个不同，首先是只能选择 SSH 模式，然后是需要在域名`github.com` 后面加上`-user1`:\n\n```bash\n\ngit clone git@github.com-user1:User/Repo.git\n```\n\n这里就体现出之前在 `~/.ssh/config` 把 Host 命名为 `github.com-****` 的好处了。\n\n### `git commit` 前填写在 repo 中填写账户信息\n\n 第一次做完改动推送到 GitHub 之前，需要专门在 repo 级别写明自己的身份，也就是在命令行输入：\n\n```bash\n\ngit config --local user.name  \"USER1\"\ngit config --local user.email \"USER1@EMAIL.com\"\n```\n\n### **注意：** 为了防止操作者忘记自己所处的身份\n\n强烈建议去掉用户信息的全局设置：\n\n```bash\n\ngit config --global --unset user.name\ngit config --global --unset user.email\n```\n\n这样假如忘记之前的 `git config --local`, 第一次 git commit 的时候会报错，提示信息缺失。\n\n这样操作一次之后，之后的操作几乎感受不到账户的不同。\n"},{"slug":"python-import-script-module-package","filename":"2021-12-11-python-import-script-module-package.md","date":"2021-12-11","title":".py | import 引用现成的代码","layout":"post","keywords":["md","py"],"excerpt":"正常的编程语言教程，教人配置完开发环境之后就应该进入正题，开始讲语法了。但是咱不正常，所以先来谈谈怎么用别人已经写好的代码。","content":"\n以官网给出的文件结构为例来说明：\n\n```\n\nsound/                          Top-level package\n      __init__.py               Initialize the sound package\n      formats/                  Subpackage for file format conversions\n              __init__.py\n              wavread.py\n              wavwrite.py\n              aiffread.py\n              aiffwrite.py\n              auread.py\n              auwrite.py\n              ...\n      effects/                  Subpackage for sound effects\n              __init__.py\n              echo.py\n              surround.py\n              reverse.py\n              ...\n      filters/                  Subpackage for filters\n              __init__.py\n              equalizer.py\n              vocoder.py\n              karaoke.py\n              ...\n```\n\n## 使用现成的 python 代码\n\n正常的编程语言教程，教人配置完开发环境之后就应该进入正题，开始讲语法了。但是咱不正常，所以先来谈谈怎么用别人已经写好的代码。其中最简单的，就是可以直接通过包管理程序安装的：\n\n```bash\n\npip install sound\n```\n\n然后想要使用某个文件中的函数，比如假装 `wavwrite.py` 中有个函数叫 `write()`，以下写法都是可以的，注意不同 import 方法对应不同的函数调用写法：\n\n```python\n\nimport sound\nsound.formats.wavwrite.write()\n\nfrom sound import formats\nformats.wavwrite.write() \n\nfrom sound.formats import wavwrite\nwavwrite.write()\n\nfrom sound.formats.wavwrite import write\nwrite()\n```\n\n但是，不是所有的 python 代码都可以直接安装，比如一篇论文的研究成果发表之后，处理数据的代码也往往开源，但是这些作者基本上就只是把自己写代码的文件夹公开出来而已，我们把文件夹下载下来，然后直接 `import sound`, 会报错，提示找不到名为 sound 的库。\n\n## python 如何读取代码文件\n\n仔细想想，找不到才是正常的，之前轻轻松松的一句 `import sound`就解决问题，这才不简单——不同的库往往位于文件系统的不同位置，但我们只要写出他们的名字就行了，不需要指定文件路径。电脑硬盘那么大，找到库却几乎是瞬间完成的。\n\n这是因为 python 并没有搜索整个硬盘。有一个变量，一般名为 `PYTHONPATH`，其变量值是一个列表，表中成员是含有 python 库文件夹的路径。当我们在命令行输入命令的时候，电脑会：\n\n- 搜索当前所在的文件夹，也就是在命令行输入 `python` 时终端所在的文件夹。\n- 遍历 `PYTHONPATH` 中的文件夹。\n- python 包管理程序默认的位置，一般是 `\u003cpath to python\u003e/site-package`。\n\n看看有没有我们要引用的库，找到了就引入，找不到就报错。\n\n上一节的错误中，如果我们恰好位于 sound 所在的文件夹，然后运行 python，此时第一条生效， `import sound` 不会报错，但在其他位置就不行了。\n\n## 名词解释：interactive, script, module, package\n\n可执行的 python 命令可以出现在以下四个地方，第一种是接受键盘输入的程序，后三种都是文件：\n\n1. interactive: python **交互式界面**，也叫做 calculator mode，也就是在命令行输入 `python`之后出现的界面。每次输入一句，结果在命令行上显示出来。当 python 退出之后，输入过的命令就消失了。\n2. script: python **脚本**文件，也就是在命令行输入 `python somefile.py`里面的那个`somefile.py`。\n    1. 毕竟 python 是一种很轻量化的语言，在一定程度上可以起到 shell 的作用，有些命令我们并不想要用完就扔，而是保存起来以便以后重复执行，另外很多命令的组合组合成函数也可以极大地简化工作。在这种语境之下, interactive 和 script 的关系，就好像 Linux 命令行和 bash script 的关系一样。\n    2. 但同时 python 又是一种功能很全面的语言，完全可以胜任复杂的面向对象编程。在这种语境之下，script 也可以用来指代 main module，也就是程序执行的主文件和入口，和下面的一般的 module 相区分。\n3. module: python **模块**文件，也就是在命令行输入 `python -m another` 里面的那个 `another`（注意这里不写拓展名 `.py`）。按照官方文档的说法，所有 `.py` 文件都是 module。但是实际上这句话很有误导性，上一节的 main module 和一般的 module 非常不同，下一节会详细展开讲。一般提到 module，都是在强调这个文件定义的变量和函数可以被其他的 python 文件引用。\n4. package: python **包**，互相关联的 modules 构成的更高一级的可供引用的结构，简单理解就是含有 `__init__.py` 的文件夹，但是 python 并不是根据文件夹和文件之间的从属关系来确定 package 和 module 之间的关系的，下一节会详细展开讲。\n\n## script vs. module\n\npython 同时兼具脚本语言的灵活性，和各种重型语言的功能全面性。因为前者，所以它并不要求程序作者一定要在一个叫做 `main.py` 的文件里写一个名叫 `Main` 的类, 然后在里面实现一个 `main()` 方法。但是因为后者，没写不代表 python 不需要知道一个复杂程序执行的起点。\n\n这个起点就是不带有 `-m` 参数的 `python` 命令后面跟着的 `.py` 文件，这就使得这个文件变得比其他 `.py` 文件特殊。底层表现就是 python 会不管这个文件的名字叫什么，都将它的 `__name__` 属性赋值为 `\"__main__\"`。这样，即便这个文件可能是一个大型库中间的一个模块，运行的时候 python 连它的真名都不知道，就更找不到它同级和上下级的其他模块了。\n\n各种普通模块被 python 用到的方法就是通过在主模块 main module（或者说 script）中 import。经过“python 如何读取代码文件”一节中的搜索过程之后找到了所需模块或包，模块的名字、模块之间的关系、模块里定义了哪些属性和函数，就被 python 了解了，从而当主模块召唤他们的时候就知道去哪里找相应的代码。除了在被 import 的时候，`python -m` 命令的宾语也可以告诉 python 被运行的模块和包的相对关系：`python -m sound.formats.wavwrite` ，此时 python 执行了 `wavwrite.py` 中的所有可执行的命令，同时知道从 `sound/` 到 `wavwrite.py` 的各个包之间的关系。\n\n## absolute import vs. relative import\n\n开头使用已经安装过的包使用的语法全都是绝对引用 (absolute import)，表现就是 import 语句里面没有以 `.` 作为开头的。\n\n另外一种 import 方法叫相对引用 (relative import)，`.` 表示模块所在的文件夹，`..` 表示模块的上一级文件夹。主要用在各种明确知道自己是工具代码，而且是一个更高层次结构的组成部分，几乎永远不需要被作为主模块运行的代码。\n\n回到开头例子里的文件结构，假如 sound/effects/surround.py 中想要使用 sound/formats/wavwrite.py 和 sound/effects/echo.py 中的函数，可以写成：\n\n```python\n\n# in sound/effects/surround.py\nfrom ..formats import wavwrite\nfrom . import echo\n```\n\n## 如何组织代码，以便自己重用\n\n研究终于推进到了准备写论文的阶段了（学渣本质暴露了），写草稿之余，之前几年时间里做过的处理和分析，接下来的一两个月里需要把工作流程规范化之后迅速重做一遍确认。\n\n随手写散落各处的分析代码需要整理到一起，之前试图统一到一个项目之下，结果总是在某个模块引用其他模块的时候遇到报错。于是才有了这篇文章。\n\n以下是 [这篇文章](https://gist.github.com/ericmjl/27e50331f24db3e8f957d1fe7bbbe510) 给出的一个推荐的项目文件结构：\n\n```\n\n|- notebooks/\n   |- 01-first-logical-notebook.ipynb\n   |- 02-second-logical-notebook.ipynb\n   |- prototype-notebook.ipynb\n   |- archive/\n\t  |- no-longer-useful.ipynb\n|- projectname/\n   |- projectname/\n\t  |- __init__.py\n\t  |- config.py\n\t  |- data.py\n\t  |- utils.py\n   |- setup.py\n|- README.md\n|- data/\n   |- raw/\n   |- processed/\n   |- cleaned/\n|- scripts/\n   |- script1.py\n   |- script2.py\n   |- archive/\n      |- no-longer-useful.py\n|- environment.yml\n```\n\n学过这篇笔记包含的内容，我才理解作者这样的安排。既然主文件 ~~很难~~ 没办法通过相对引用来找到工具代码，索性就把工具代码写成一个完整可安装的库，然后就像 `numpy`, `pandas` 一样在独立的 notebook 和 scripts 中引用。\n\n实际使用的时候，需要安装 `projectname` 下的代码：\n\n```bash\ncd projectname\npip install -e .\n```\n\n要知道为什么这样做，需要理解 `setup.py` 这个文件。这篇文章已经够长了，所以这个话题还是下次再说吧。\n\n## 参考链接\n\n- [What's the difference between a Python module and a Python package?](https://stackoverflow.com/questions/7948494/whats-the-difference-between-a-python-module-and-a-python-package). all python files re modules, while package is a specific kind of modules. It is a subsection of module in the python documentation.\n- Official explanation of python module: [https://docs.python.org/3/tutorial/modules.html](https://docs.python.org/3/tutorial/modules.html)\n- [This stackoverflow  answer: \"run as module\" is different from \"run as script\".](https://stackoverflow.com/questions/14132789/relative-imports-for-the-billionth-time) run as module sets the \"name\" to the module's name, while running as script sets it to `__main__` . Here we use \"name\" instead of `__name__` because it also contains `__path__` in newer versions.\n- A tutorial for project organization: [https://realpython.com/python-application-layouts/](https://realpython.com/python-application-layouts/)\n- Official about packaging: [https://packaging.python.org/en/latest/tutorials/packaging-projects/](https://packaging.python.org/en/latest/tutorials/packaging-projects/)\n- Gist: How to organize data science project: [https://gist.github.com/ericmjl/27e50331f24db3e8f957d1fe7bbbe510](https://gist.github.com/ericmjl/27e50331f24db3e8f957d1fe7bbbe510)\n- From the gist there is a link: [http://drivendata.github.io/cookiecutter-data-science](http://drivendata.github.io/cookiecutter-data-science)"},{"slug":"blog-update-theme-materalize","filename":"2021-12-06-blog-update-theme-materalize.md","date":"2021-12-06","title":".md | 博客外观现代化升级","layout":"post","keywords":["md"],"excerpt":"\u003cs\u003e本期博文点赞过 5 亿，下篇文章写用 jekyll 在 GitHub Pages 上搭建静态博客的教程。\u003c/s\u003e","content":"\n今年感恩节三天假期加上周末，一共五天的时间，别的啥也没干，憋在家里给博客换了个主题模板。现在新版本已经上线，基本上已经能用，明显的 bug 都已经解决了。主要的工作内容如下：\n\n- 从 Tufte 风格转换到 material 风格\n- 评论区迁移到现成的 ~~[utterance](https://utteranc.es/)~~  [giscus](https://giscus.app/)。\n- 将旧模版中的侧边栏注记功能移植到新的模板。\n- 调整了 CSS，包括字体、代码模块、博客标题限制高度、博客博客实现类似纸张的卡片效果。\n- 重写了 index.html, /History.html, /Links.html 等页面，尤其是 /Topics.html，实现了一个响应式的两列结构。\n- 重写了博文前面的元信息。\n- 将之前的 repo 重命名并且归档，新建一个同名的 repo，推送上线。\n\n下面挨个来说。\n\n## 风格转换\n\n![](/photos/2021-12-06-blog-old.png)\n\n之前的风格名字叫做 Tufte，好像是根据一个美国教授的设计，主要设计元素包括一套自己加载的衬线字体（很漂亮，但是对中文没用），还有博文占据页面宽度的大约 60%，右侧剩下的空间可以做边注，有一个设计很精美的横向分割线 `\u003chr class=\"slender\"\u003e`。\n\n这个模板很漂亮，但是衬线字体搭配背景色，就跟人一种上个世纪古董网站的感觉（没有对卢昌海老师不敬的意思）。\n\nMaterial Design 是 Google 推出的一个组件库，提供类似纸张和卡片的视觉效果，就给人一种很现代的感觉，内心觊觎已久。[GitHub 的这个 repository](https://github.com/naveenshaji/material) 就用了这套设计风格，虽然已经不再更新维护了，但是已有的功能，比如点击链接之后的加载页面，页面顶端的阅读进度条，我觉得让我自己来的话，十年之内都不一定能学到做出这些效果的技术，于是就直接拿来用了。\n\n## 评论区\n\n### 旧版：jQuery 搭配 GitHub Milestones\n\n之前的评论区是根据 [farseerfc](https://farseerfc.me/zhs/pages/about.html) 大佬的[博文](https://farseerfc.me/zhs/github-issues-as-comments.html)自己仿写的 JavaScript 函数。原文是把 issue 作为一个博文的评论区，issue 下面的 comment 作为评论，这样每一条评论都是平级的，没办法实现对某一条评论的回复，只能在评论内容中指明回复的对象。\n\n除了像博文里一样自己手搓代码，也有现成的第三方工具 [utterance](https://utteranc.es) 来完成这一工作，但是我还是不喜欢这种单层评论系统，于是决定自己仿写一个类似的系统，但是让一个 milestone 对应一篇文章，一个 issue 对应一条评论，一个 comment 对应一条回复。\n\n这就需要我在博文的 Markdown 页面注明对应的 milestone 的编号，然后在网页加载完成之后向 GitHub 对应的 milestone 发送一个 GET 请求，询问是否存在 issues。 得到肯定的回答之后，再依次发送请求 GET 每一条 issue 的内容，显示在博文下方。代码位于 `[/_includes/comments.html` 页面](https://github.com/MountAye/blog-tufte/blob/source/_includes/comments.html)，当年从异步编程开始学起，颇费了我几个周末。\n\n问题出在 GitHub 的用户权限上，只有作者和管理员才有权给某条 issue 指定一个 milestone，所以读者建立 issue 进行评论之后并不会直接显示在博文下面，还需要我回到 repo 把那条 issue 手动挪到对应的文章，几乎不可用。\n\n### 新版：giscus 搭配 GitHub Discussions\n\n这次改版的时候觉得用户体验比“老子可以手搓评论区代码”的自我满足更重要，直接换用了 utterance。评论区在博客页面就提供了编辑区，新版本第一次上线不久就有朋友留言，说明这个评论区还是很好用的。\n\n后来GitHub推出了 Discussion 功能，每一条 discussion 下方可以有不同评论，评论下面可以有针对的回复，这就和一般的评论区和BBS 的“楼层-单元”同构了。\n\n然后又在阮一峰老师的博客看到了 [giscus，](https://giscus.app/)就是在 Discussions 架构下和 [utterance](https://utteranc.es/) 类似的一个工具，只需要在官网按照流程配置，然后把生成的几行代码嵌入到自己的页面里就好了，比原来方便太多了：\n\n```html\n\u003cscript src=\"https://giscus.app/client.js\"\n        data-repo=\"[ENTER REPO HERE]\"\n        data-repo-id=\"[ENTER REPO ID HERE]\"\n        data-category=\"[ENTER CATEGORY NAME HERE]\"\n        data-category-id=\"[ENTER CATEGORY ID HERE]\"\n        data-mapping=\"pathname\"\n        data-reactions-enabled=\"1\"\n        data-emit-metadata=\"0\"\n        data-theme=\"light\"\n        data-lang=\"en\"\n        crossorigin=\"anonymous\"\n        async\u003e\n\u003c/script\u003e\n```\n\n之前 utterance 创建的评论也可以直接从 Issue 移动到 Discussion 板块，所以刚刚那条评论可以正常显示。但是因为换了新的 repo，旧版本的两条评论就移植不过来了，请萌狼和 HK 兄弟包涵。 \n\n## 旧版特有功能：侧边栏注记、正文图片\n\n早就想给博客改版了，一直拖着不办的原因主要是直接把博文复制粘贴到新模板的 `/_posts` 文件夹之后会报错，不知道排错需要多长时间，于是压根就不动手了。因为旧版通过 jekyll 实现了一些正常 markdown 文档没有的功能，我用到的主要就是侧边栏的边注 `sidenote`，以及在正文内部插入图片的 `maincolumn`。\n\njekyll 是建立在 ruby on rail 上的一个软件，所以这些功能也是用 ruby 语言写成的。本以为会很难，结果认真一看，其实根本没什么工作量，就直接把旧模板的 `/_plugins`文件夹复制到新模板就不再报错了，当然显示效果需要调整 CSS，下一节会讲到。`{% raw %}{% sidenote %}{% endraw %}` 就可以继续用了。\n\n 至于正文图片，这个功能和 markdown 已有的图片功能重复了，我觉得不值得为了一点点显示效果牺牲可移植性，于是直接把相关组件删除了，然后把博客文章中用到的地方换成了 markdown 插入图片的语法，重复性体力劳动，不提了。\n\n## 调整 CSS\n\n### 新建 `.paper` 取代 `.cover`\n\n![](/photos/2021-12-06-material-card-cover.png)\n\n这个模板主打的一个内容卡片如图所示，很漂亮，但是整个元素的宽度是由封面图片 `.cover` 决定的：\n\n```css\n@media (min-width: 1600px) {\n    .scroll-1 {\n        width: 1200px;\n        margin-left: -600px;\n    }\n    .scroll-1 .card .cover {\n        width: 1200px;\n    }\n}\n```\n\n而我的很多博文都是纯文字的，直接不添加图片会有大半个卡片没什么内容，去掉图片区域之后整个卡片的宽度会缩水到文字的最大宽度，丑。解决方法是新建了一个新的类 `.paper`，把 `.cover` 中和宽度相关的设置移动到新的类，然后把新类应用在整个卡片的 `\u003cdiv /\u003e` 上。\n\n```css\n@media (min-width: 1600px) {\n    .scroll-1 {\n        width: 1200px;\n        margin-left: -600px;\n    }\n    .paper {width: 1065px;}\n    /* .sidenote {width: 300px;} */\n}\n```\n\n### 考虑侧边栏的页面宽度响应式布局\n\n响应式布局指的是同一个网页，在不同的终端设备上都又能够有适合的视觉效果，主要方法就是根据不同的屏幕宽度设定某些元素的不同取值：\n\n```css\n@media (min-width: 1600px) { /* ... */ }\n@media (max-width: 1600px) { /* ... */ }\n@media (max-width: 1200px) { /* ... */ }\n@media (min-width: 768px) and (max-width: 979px) { /* ... */ }\n```\n\n具体到这个博客：\n\n- 屏宽大于一个很大的值之后，博客正文和侧边栏的宽度固定，不再增加；\n- 屏幕小于这个值，但是大于能够正常显示侧边栏的宽度时，博客正文和侧边栏都占据给定的百分比；\n- 屏幕小于能够正常显示侧边栏的宽度时，侧边栏不再显示，正文宽度固定在之前最小的像素值；\n- 正文像素数占据屏幕全部宽度之后，宽度设定为 100%。\n\n## 复习 Liquid，重写非博文页面\n\n非博文页面和之前的布局基本上相同，除了 `/Topics` 从一个无序号列表变成了响应式的两个竖栏。这是得益于模板引用的 `materialize.css`采用了 [flexible grid](https://materializecss.com/grid.html)。\n\n具体来说，一个`container` 可以动态调整内部元素的占宽，以适应不同大小的设备，包含两级子元素，两级子元素顾名思义，分别显示为行和列的元素：\n\n```html\n\u003cdiv class=\"container\"\u003e\n\t\u003cdiv class=\"row\"\u003e\n\t\t\u003cdiv class=\"col s12 m6 l4\"\u003e\u003c/div\u003e\n\t\t\u003cdiv class=\"col s12 m6 l4\"\u003e\u003c/div\u003e\n\t\u003c/div\u003e\n\u003c/div\u003e\n```\n\n然后将父元素的宽度分成 12 个基本单位，方便指定某一个元素所占的宽度和高度。比如 `class = \"col s12 m6 l4\"` 表示该元素在小设备 (small) 上占据 12/12=100% 屏宽，在中设备 (medium) 上占据 6/12 = 50% 屏宽，在大设备 (large) 上占据 4/12=1/3 屏宽。 \n\n### Liquid\n\nJekyll 本身的编程语言是 Ruby，但是被 Jekyll 编译之前的网页文档中的特殊标记，是一种叫做 Liquid 的领域专用语言。\n\n一般的命令和控制流结构用 `{% raw %}{% %}{% endraw %}` 括起来 \n\n```html\n for i in (1..len1) %}\n\t assign idx = i | times: 2 | minus:2 %}\n   assign cate = category[idx] %}\n endfor %}\n```\n\n直接在网页中显示内容和变量使用 `{% raw %}{{  }}{% endraw %}`\n\n```html\npost.title }}\n```\n\n函数调用的语法最奇葩，是 `input | function` 或者 `input | function: parameter`：\n\n```html\nassign category = site.data.category %}\nassign length = category | size %}\nassign   len1 = length | plus: 1 | divided_by: 2 %}\nassign   len2 = length | divided_by: 2 %}\n```\n\n## 调整博文元信息\n\n每篇博文的开头两道分割线之间的 YAML 是绑定在页面上的变量，可以被 Liquid 引用 `{% raw %}{{ post.VAR_NAME }}{% endraw %}`。\n\n```yaml\n---\nlayout:  post\ntitle:   .html | 翻译：为什么说物理不是一门学科\nkeywords: html\nexcerpt: 一篇稍微硬核的科普文章，讨论物理在生物学当中的可用性。\ndate:    2019-06-19\ncategories: post\nmilestoneID: 5\n---\n```\n\n新版本简化了很多，删掉了没有用的 `date`, `categories`, `milestoneID` 字段，同时把 `keywords` 变成了一个数组，也就是说同一篇文章可能出现在多个 `/Topics` 页面的卡片中。\n\n```yaml\n---\nlayout:  post\ntitle:   .en | 翻译：为什么说物理不是一门学科\nkeywords: [html,inter]\nexcerpt: 一篇稍微硬核的科普文章，讨论物理在生物学当中的可用性。\n---\n```\n\n## 下一步计划\n\n- 进一步优化排版:\n    - 给博文的标题添加视觉效果，现在的一二级标题之间很难区分。\n    - 超链接的样式不够明显，一眼看不出哪里有链接。\n    - 侧边注距离正文的距离不合适，CSS 相关参数的效果很奇怪。\n    - 现在的 /Links 页面在宽度缩小之后用户头像会和介绍卡片挤到一起去。\n    - 网站整体字号在笔记本上比较合适，在台式机上看起来太大了，移动端更大。\n- 加入 google analytics\n- 欢迎大家提建议。\n- 欢迎有独立博客的朋友互相链接。\n- ~~本期博文点赞过 5 亿，下篇文章写用 jekyll 在 GitHub Pages 上搭建静态博客的教程。~~\n\n"},{"slug":"install-pytorch-cpu-on-fedora","filename":"2021-10-13-install-pytorch-cpu-on-fedora.md","date":"2021-10-13","title":".py | Fedora 上安装 CPU 版 pytorch","layout":"post","keywords":["md","py","ai"],"excerpt":"import torch (as tf)","content":"\n马上要参加一个暑期学校，关于深度学习在显微图像处理当中的应用。\n\n深度学习是机器学习的一个分支，机器学习中的绝大多数数据都可以抽象为向量（一阶张量），绝大多数的算法都可以分解为向量之间的运算，或者对向量的变换，表示为矩阵（二阶张量）。这就对张量计算相关算法的库函数产生了很大的需求。PyTorch 和 TensorFlow，还有其他的一些库，比如 Keras，Caffe 等等等等，都是为此而生。早期版本的 pytorch 和 tensorflow 有很大的区别，但是随着版本的迭代，两者逐渐兼并和挤掉了其他的竞争者，两者的相似之处也越来越多，“变成了自己曾经最讨厌的样子”。lol\n\n不知道课上究竟要使用哪种机器学习的框架，所以决定把 PyTorch 和 TensorFlow 全都安装了（摊手）。正好可以接着上一篇的 [python 教程](python-interpreter-editor-virtualenv) 往下写。\n\n先说一下自己的软硬件环境：Intel 家的 CPU 和集成显卡（玩不了《文明6》）。虽然不在官方支持 Linux 的名单上，但是自己安装了 Fedora，内核更新了几次之后已经没有了兼容性问题。python 版本 3.9.6，包管理器是 pip，编辑器是 vscode。\n\n## 建立虚拟环境\n\n为什么要建立虚拟环境的问题本系列的前一篇已经回答过了，这次直接开干。我给两个虚拟环境分别取名为 `torch` 和`tf` 。关于命令行部分的代码，为了表示各个虚拟环境，特别加上了命令提示符`(env)[me@mycomputer]$`，抄代码的时候注意去掉。\n\n```bash\n\n[me@mycomputer]$ mkvirtualenv torch\n(torch)[me@mycomputer]$\n```\n\n## 安装\n\n在 PyTorch 官网，找到自己的硬件配制对应的安装命令：[https://pytorch.org/get-started/locally/](https://pytorch.org/get-started/locally/)。比如我的就是 `Stable`\u003e`Linux`\u003e`Pip`\u003e`Python`\u003e`CPU`。把生成的命令复制到命令行：\n\n```bash\n\n(torch)[me@mycomputer]$ pip3 install torch==1.9.1+cpu torchvision==0.10.1+cpu torchaudio==0.9.1 -f https://download.pytorch.org/whl/torch_stable.html\n```\n\n等待各种提示信息显示安装完成。\n\n## 验证和退出\n\n按照 [官网给出的方法](https://pytorch.org/get-started/locally/#linux-verification)，验证安装是否成功：\n\n```python\n\nimport torch\nx = torch.rand(5, 3)\nprint(x)\n\n# tensor([[0.3799, 0.4494, 0.4296],\n#       [0.5800, 0.0180, 0.3110],\n#       [0.9847, 0.0125, 0.2648],\n#       [0.0296, 0.3142, 0.9266],\n#       [0.3192, 0.9645, 0.5545]])\n```\n\n为了下一步安装 tensorflow，先要退出到默认的虚拟环境：\n\n```bash\n\n(torch)[me@mycomputer]$ deactivate\n[me@mycomputer]$\n```\n\n## 说好的 TensorFlow 呢\n\n本来这篇文章是打算把  pytorch 和 tensorflow 一起写了，结果 tensorflow 实在是不给力。\n\n- 直接安装\n\n在 [TensorFlow 的官网](https://www.tensorflow.org/install)上方导航栏找到 install 按钮，然后在页面左侧找到 package/pip，[安装命令](https://www.tensorflow.org/install/pip#3.-install-the-tensorflow-pip-package)也是只有一句话\n\n```python\n\npip install --upgrade tensorflow\n```\n\n然而不行，虽然安装过程中没有报错，但是验证安装的时候报出一堆错误。\n\n报错信息里有一句 `Could not load dynamic library 'libcudart.so.11.0'`，怀疑上面命令安装的是 GPU 版本。\n\n- 安装 CPU 版本\n\n在网页正文的“Package Location”一节找到了 CPU 版本的安装文件：`https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow_cpu-2.6.0-cp39-cp39-manylinux2010_x86_64.whl`，于是删除虚拟环境、重建虚拟环境、重新安装。\n\n```bash\n\n(tf)[me@mycomputer]$ deactivate\n[me@mycomputer]$ rmvirtualenv tf\n[me@mycomputer]$ mkvirtualenv tf\n(tf)[me@mycomputer]$ pip install --upgrade pip\n(tf)[me@mycomputer]$ pip install https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow_cpu-2.6.0-cp39-cp39-manylinux2010_x86_64.whl\n```\n\n运行官方提供的测试之后依然会有警告信息：\n\n```bash\n\n(tf) [shixing@yoga-laptop ~]$ python -c \"import tensorflow as tf;print(tf.reduce_sum(tf.random.normal([1000, 1000])))\"\n20XX-XX-XX XX:XX:XX.XXXXXX: I tensorflow/core/platform/cpu_feature_guard.cc:142] This TensorFlow binary is optimized with oneAPI Deep Neural Network Library (oneDNN) to use the following CPU instructions in performance-critical operations:  AVX2 AVX512F FMA\nTo enable them in other operations, rebuild TensorFlow with the appropriate compiler flags.\ntf.Tensor(-1338.4773, shape=(), dtype=float32)\n```\n\n[stackoverflow 的这个回答](https://stackoverflow.com/questions/47068709/your-cpu-supports-instructions-that-this-tensorflow-binary-was-not-compiled-to-u) 说，需要从源码编译 tensorflow，具体的方法在[官网也有](https://www.tensorflow.org/install/source#linux)，但是实在是太麻烦了，~~（还是鸽了）~~ 下次单独写成一篇吧。"},{"slug":"python-interpreter-editor-virtualenv","filename":"2021-06-29-python-interpreter-editor-virtualenv.md","date":"2021-06-29","title":".py | 笔记：python 编辑器、解释器、虚拟环境","layout":"post","keywords":["md","py"],"excerpt":"","content":"\n上一篇 《[在 Windows 10 上配置 python 开发环境](python-installation-and-configuration)》 很惭愧，只做了一点微小的工作，大概三件事：\n- 一个，安装了 python 的解释器；\n- 第二个，把 vscode 安装进了电脑；\n- 第三个，就是我们知道的 virtualenv 虚拟环境。\n\n如果说还有一点什么要讲的，就是在 how 之外，讲一点 what。为了让文章更通顺一点，我打算调整一下顺序，先讲编辑器，再讲解释器，最后再说虚拟环境。虽然文章是立足于 python 来谈，但是这些知识适用于几乎所有通用编程语言。因为我也不是计算机专业出身，这篇文章只是我的学习笔记，如果有不对的地方欢迎大家指出。\n\n## 编辑器\n\n首先我们来做一个实验，把上次教程里创建的 python 文件 `hello.py` 重命名，把拓展名 `.py` 改成 `.txt`, 然后双击鼠标打开文件，会发生什么？在 Windows 系统里，会弹出最最普通的记事本窗口，窗口里是白底黑字的 python 语句，不像 vscode 里面不同语句有不同颜色，但是内容完全一样。\n\n甚至更进一步，你可以在命令行里直接让 python 编译器执行 `.txt` 文件的内容，（`py -m hello.txt`）效果和 `.py` 也是一样的。\n\n`.py` 这个拓展名什么也没有做，和 `.txt` 文件一样，内容就是一串我们人类能够读懂的字符，这样的文件叫做[文本文件](https://zh.wikipedia.org/wiki/%E6%96%87%E6%9C%AC%E6%96%87%E4%BB%B6)。处理文本文件的程序，就叫做[编辑器](https://zh.wikipedia.org/wiki/%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8)。记事本就是一种编辑器，vscode 也是。\n\n既然记事本就可以编写 python 代码，那我还费劲安装 vscode 干嘛？确实有人真的只用记事本或其他操作系统自带的编辑器写 python 代码，（油管上还有一个视频是用 Microsoft Word 写代码；）然后用命令行调试程序，但是 vscode 毕竟是专为程序员而开发，提供了很多默认编辑器不具备的功能，比如前面提到将函数、变量、保留词显示成不同的颜色的语法高亮功能。\n\n## 编译器 / 解释器\n\n除了文本文件，这篇文章里涉及的第二种文件是[二进制文件](https://en.wikipedia.org/wiki/Binary_file)。\n\n电脑并不能直接看懂人类认识的字符，在一切的最底层，经典计算机认识的是以不同方式表示的 0 和 1。虽然说所有文件在底层都是二进制的文件，但是“二进制文件”这个名词一般专门用来表示除了文本文件之外的文件，又因为图片文件、视频文件啥的都有自己的名字，所以这个词用来指代的文件，基本上都和软件程序，可以让计算机执行的文件有关。\n\n人类只认识字符，计算机只认识 0 和 1，那么最直觉的思路就是把文本文件翻译成二进制文件。这个翻译过程叫做[编译](https://en.wikipedia.org/wiki/Compiler)，能够完成这一过程的软件就叫做编译器。编译器编译完成之后就退出了，要想执行程序，电脑直接执行编译之后的可执行文件就可以了。\n\n但是编译存在一个问题，就是整个软件需要在所有的源代码文本文件都写好的情况下才能被编译成软件，编译耗费的资源和时间随着软件规模的增长而扩大；一旦修改某处，整个项目又要重新编译。很多时候我们只想快速地知道某个大型项目中的某一句命令的效果是什么，编译这种方法就不适合这种场景了。\n\n于是就出现了[解释器](https://en.wikipedia.org/wiki/Interpreter_(computing))，这种程序比编译器复杂的多，在我们执行这种编程语言命令的时候始终运行，允许我们一句一句地输入命令，记得代码的上下文，还记得我们之前命令的结果，代价就是对于大型项目也需要一句一句地分析解释，计算资源的开销和速度都不如编译。\n\npython 就是一种（官方实现）使用解释器的编程语言，我们在官网下载的那个 `python-***.exe` 文件就是 python 的解释器。这也导致了 python 程序的性能往往不如同水平的 C/C++ 程序员写出来的程序，但是由于单句执行适合试错，所以在 ~~经常犯错的~~ 科研领域还挺流行的。\n\n当然了，python 的特点远不仅仅是解释型语言这么简单，它还是一种：\n- [脚本语言](https://program-think.blogspot.com/2009/08/why-choose-python-1-script.html)\n- [动态语言](https://program-think.blogspot.com/2009/08/why-choose-python-2-dynamic.html)\n- [面向对象语言](https://program-think.blogspot.com/2010/08/why-choose-python-3-oop.html)\n- [函数式编程语言](https://program-think.blogspot.com/2010/08/why-choose-python-3-oop.html)\n- [……](https://program-think.blogspot.com/2010/08/why-choose-python-3-oop.html)\n\n## 虚拟环境\n\n有一次我问我女朋友，她写 python 用什么 IDE，她很自豪地回答，她的 Macbook 自带 python，直接在命令行就可以运行……答非所问还不是最大的问题（仔细想想好像也不是答非所问，不过只回答了问题的一部分），而是直接在命令行运行系统自带的 python，或者其他编程语言的解释器或者编译器，本身就是编程初学者常干的一种危险行为。\n\nWindows 还好，毕竟这是一个面向广大家用消费者的操作系统，防呆设计还是挺多的，没有原装的 python。更加极客向的操作系统，比如 Linux 和 BSD 家族可就不一样了，这些操作系统（的发行版）往往预装了 python。这个 python 可不是给用户拿来开发自己的程序用的，而是用来让很多 python 语言写成的操作系统工具调用的。既然如此，这个 python 的版本一般由发行版的安装包管理者来控制，往往落后最新的 python 版本一段时间，为了避免新版本 python 有什么 bug，也为了让操作系统工具的开发者有时间更新自己的代码。所以如果直接用这个版本的 python 做开发，而且不小心自己升级了 python 的版本，很有可能导致系统的某些功能失常。\n\n虚拟环境就是 python 对这个问题的解决方案。我们可以安装不同于原装 python 的版本，但是并不将这个解释器加入系统路径，操作系统也就不知道这个版本 python 的存在。创建虚拟环境的时候，我们指定使用这一特定版本的 python，这样在虚拟环境激活之后就是我们开发需要的 python，退出虚拟环境就是系统工具使用的 python。\n\n另外，即便两个项目适用于同一个 python 版本，而且都是系统自带的这个版本，虚拟环境也有用武之地。绝大多数程序都需要依赖别人写好的工具代码，这些代码叫做库 (library)，不同的项目可能依赖不同的库代码，或者同一个库的不同版本。这个时候，可以创建不同的虚拟环境，并在其中安装各个项目对应的库，项目之间可以互不影响。\n\n## 编辑器 + 解释器 / 编译器 + 虚拟环境管理 + …… = IDE\n\n为了开发 python 程序要安装这么多不同的程序，太麻烦了，就不能一键安装全搞定吗？当然可以了，这种集成了开发过程中用到的各种工具的程序，就叫做[集成开发环境 (IDE)](https://zh.wikipedia.org/zh-cn/%E9%9B%86%E6%88%90%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83)。对于 python，最有名的 IDE 当属 [Anaconda](https://www.anaconda.com/) 了。\n\n那我为什么不用呢？当然用过，但是听说了 vscode 的大名，而且尝鲜之后，就再也回不去了。写 python 需要编辑 `.py` 文件，写博客需要编辑 `.md` 文件，博客的一些功能需要 JavaScript 实现，这些事情本质上都是编辑文本文件这一件事，在 vscode 这样的编辑器里全搞定就再自然不过了，那么 Anaconda 里的 Spyder 和 Jupyter Lab 就显得多余了。\n\n“把一件事做好”，这也是 [Unix 哲学](https://zh.wikipedia.org/wiki/Unix%E5%93%B2%E5%AD%A6)的一部分。但是问题在于，不同的人对于“一件事”的定义是不同的，有些人觉得做早饭是一件事，有些人觉得是热牛奶煎鸡蛋烤面包等等好几件事，谁是对的？\n\n也许都对，但是 编辑器 + 解释器 + …… 比起 IDE 就是处在鄙视链的上游。这一点可以不同意，但是应该要知道，不然别人抖包袱的时候你没捧上哏，挺尴尬的。\n"},{"slug":"qc-hackathon-write-up","filename":"2021-04-22-qc-hackathon-write-up.md","date":"2021-04-22","title":".qs | QC Hack 量子编程马拉松","layout":"post","keywords":["md","phy"],"hasMath":true,"excerpt":"4月初的时候，系秘书转发了一封邮件，耶鲁和斯坦福有两个关于量子计算的学生社团，打算举办为期一周的线上训练营,然后在周末举办一个24小时的编程马拉松","content":"\n\n## 一\n\n4月初的时候，系秘书转发了一封邮件，耶鲁和斯坦福有两个关于量子计算的学生社团，打算举办为期一周的[线上训练营](https://www.quantumcoalition.io/)，然后在周末举办一个24小时的编程马拉松 ([hackathon](https://en.wikipedia.org/wiki/Hackathon)) 的活动。只要年满18岁就可以参加，并不限定本科生。\n\n整个活动由几家从事量子计算的科技公司赞助，前面的线上训练营基本就是各家轮流上来介绍一下自己家的量子计算平台的使用方法，最后的编程马拉松也由他们每家出一套题，所以这个活动也有在学生和公司之间搭桥，给参与者争取实习机会的目的在里面。参与者可以自由组队，但是在项目提交的的时候每个人只能属于一支队伍。虽然参与者可以参加任意数量的题目，但是每一名参与者最终只能成为一家公司的优胜者。如果预感到自己在某一个项目的赢面比较大，可以在提交之前通知自己参加的其他队伍把自己除名。24小时的时间限制还是比较紧迫的，所以基本上认准一家答题就可以了。\n\n女朋友也收到了一样的邮件，所以理所当然地一起组队。我之前在本科阶段上过一门一学期的量子信息和量子通信课程，内容约等于在量子力学之后再上一个学期的习题课，以及在不讲群论的情况下应用 SU(2) 群，并没有接触过这个活动中会用到的编程语言。女朋友没有上过这门课，基本就是物理专业普通研究生的量子力学水平。周中的线上训练营，我只参加了第一天的，是 Microsoft 的 Quantum Development Kit (QDK) 和 Q# 编程语言相关的，顺便介绍了一下量子计算中很有名的 Deutsch 算法。剩下的讲座我基本上都没有参加，一方面是知道前面的规则之后就懒下来了，另一方面是实验室的工作仍然需要继续，再有就是线上活动实在是太容易摸鱼了没有效率。周五的晚上，女朋友看了一晚上我的量子信息笔记，我看了看 Q# 的语法规则，在台式机上安装了开发环境。以上就是我们参加编程马拉松之前的基础和准备。\n\n\n## 二\n\nHackathon 美东时间周六上午10点开始，周日上午10点结束。因为我们只看了 Microsoft 相关的内容，所以直奔[相关题目](https://github.com/quantumcoalition/qchack-microsoft-challenge)。\n\n题目一共分为两部分。\n\n第一部分一共四道题，就像是一般的计算机课程的作业一样，参赛者只需要在举办方写好的主程序文件里的指定区域填入代码，然后运行主办方写好的测试文件检查结果，测试通过即可得分。四道题目要求如下：\n\n1. 判断一个3-5位的2进制数能否被4整除。\n2. 判断一个3比特位当中是否至少有两位不同。\n3. 同第2题，但是要求量子比特门最多只能使用 3-比特，而且 3-比特门最多使用一次。\n4. 给定一个有两种颜色的无向图，判断图当中不含有任何单一颜色的三角形。\n\n第二部分内容比较自由，要求用 Grover's 算法解决一个自己感兴趣的问题，打哪指哪，然后写一篇文章介绍自己的这个项目，并提交相关的代码。根据问题深度(6分)、工具使用(5分)、创新性(4分)、教育价值(5分) 四方面进行评分。\n\n\n## 三\n\n### I.1.\n\n第一道题最简单，但是我们当时约等于0基础，所以做起来也颇费了一些时间。不过由于我听过第一天的课，知道 `oracle` 在 Q# 编程语言中是一个很重要的概念，所以在题目给出的参考教程 [Quantum Kantas](https://github.com/Microsoft/QuantumKatas/) 里找到了[oracle 相关的教程](https://github.com/microsoft/QuantumKatas/tree/main/tutorials/Oracles)。里面有个名为 `ControlledOnBitString` 的 function，可以根据一串量子比特的取值是否等于一个特定的二值串而对另外一个比特做一个特定的操作。前一天晚上又知道了 `Microsoft.Quantum.Convert` 的 namespace 里有各种数据类型转换的函数，搭配 `IntAsBoolArray`，就做出了第一题的初版。后来看到了更简单的 `ControlledOnInt` 函数，就直接用上了。\n\n### I.2.\n\n第二题的初版是女朋友做的。题目要求是找出是否至少两位不同，这一判断的否定就是三位比特全部相同，所以同样用 `ControlledOnBitString` 函数，然后判断一次全 `true` 一次全 `false`，再把最终结果取反就可以了。但是在做第三题的时候，因为两个题目长得太像了，中间不小心把一个能通过第二题测试但是通不过第三题测试的答案直接覆盖在了第二题上面，懒的改回去了，于是就成了最后提交的版本。\n\n### I.3.\n\n第三题和第二题非常不同。第二题的解决思路中，判断全 `true` 和全 `false`有3个控制位1个输出位，这里用了两次 4-量子比特门，所以第三问需要全新的思路。另外我曾经试过在一个 `operation` 里申请一个新的 `Qubit()` 结果测试报错，因为误解了报错信息，所以误认为除了程序的主 operation 之外不能创建新的 qubit，于是被卡住了。这时候已经来到了下午，实在想不出来又很困，于是去床上躺了一会。半睡半醒之间想到，题目虽然要求输入的量子比特不变，但是我们仍然可以直接改动输入，只要在函数结束之前把对输入的改动全部复原就可以了。于是用 CNOT 门分别作用在 1-2, 1-3 对输入的量子比特上，两个门分别以第2、3号比特为输出。然后用一个 3-bit 门判断2、3号比特是否相同，并输出到结果位上。为了复原第2、3号比特，只需要把 CNOT 在两对比特上分别再用一次就行了。\n\n但是这个结果还是无法通过测试（后来成为了第二题的提交版本），报错的提示信息是使用了超过一次 3-量子比特门——这不是开玩笑吗？于是打开了官方提供的测试文件，发现测试代码计算 3-量子比特门的使用次数的时候，会把用户定义的 3-量子比特门的数量，和 `CCNOT` 门的数量做加法，于是看文档，我们定义的那个 “用一个 3-bit 门判断2、3号比特是否相同，并输出到结果位上” 的操作和 `CCNOT` 门是等价的，于是直接换用 `CCNOT` 门，问题解决。\n\n### I.4.\n\n第四题看起来复杂，但是可以分成三个部分：\n\n1. 找出图中所有的三角形，确定每个三角形的三条边，这一步完全可以用经典算法完成；\n2. 创建一个和三角形相同数量的量子比特数列，对每个三角形，把三条边直接带入第二/三题的操作里，结果输入创建的量子比特列中；\n3. 判断量子比特列是否全为 `true`，结果输出到整个程序的结果位上。\n\n第一步由女朋友来想我来写（毕竟只有一台电脑有开发环境），难点在于：\n\n1. Q# 语法改变数列值的语法十分难受\n    \u003cbr\u003e`mutable points = [-1,-1,-1,-1,-1,-1];`\n    \u003cbr\u003e`set points w/=0..1 \u003c- [0,1];`；\n2. 作为一种强类型语言对元组和数列的区分让我这个 python 选手十分蛋疼\n    \u003cbr\u003e`(Int,Int)`/`Int[]`；\n3. 求数列中不重复的值居然不排序不能给出正确结果。\n    \u003cbr\u003e`let uniquePoints = Arrays.Unique(EqualI,Arrays.Sorted(LessThanI,points));`\n\n这也是唯一一段用上了 `Message()` 函数来 debug 的部分。\n\n第三步就重新回到了第三题暂时敷衍掉的问题：对于在操作中创建的 `Qubit()`/`Qubit[]`，`Reset()`/`ResetAll()` 函数相当于测量，会破坏操作的 adjoint 性质，不测量则（当时的我）没有办法将这个量子比特列复原。\n\n此时已经午夜，我来解决这个问题，女朋友去看第二部分，后来她看完 Grover‘s 算法的教程去睡了，我还在想这个问题。直接把报错信息复制到 Google，找到了一个[论坛里的问答]()，好像是去年微软在其他地方举办的类似活动的。里面只是提到要“uncompute the qubits”，给出的例子用的是旧版本 Q# 的语法，~~没法直接抄~~ 。最终不抱希望地把之前对那个 `Qubit[]` 做过的循环顺序倒过来重做了一遍，诶，您猜怎么着，还是没通过！绝望了！正序重做一边，诶，通过了！为什么为什么为什么？到现在也没弄清楚。\n\n### II.\n\n然后把女朋友叫醒，让她来讲一讲 Grover's 算法。听完之后我的理解是，对于一个 $$f:(0,1)^N \\rarr (0,1)$$ 的函数，这个算法可以大概率地找到一个解 $$S\\in(0,1)^N$$ 满足 $$f(S)=1$$. \n\n至于这个函数 $$f$$，之前每一道题都是这样一个函数，当时已经夜里两三点了，实在是没时间再想一个新函数了，于是我们直接就拿复杂度最高的第4题来换个皮。换个什么皮呢？为了这个活动翘掉了这周的[《文明6》联机游戏](barrier-forward-keyboard-mouse-to-another-computer)，然后之前看 YouTuber [\"PotatoMcWhiskey\"](https://www.youtube.com/user/PotatoMcWhiskey)介绍过[一个 Mod](https://steamcommunity.com/sharedfiles/filedetails/?id=1753346735\u0026searchtext=diplomacy)，里面可以将文明之间的外交关系可视化为无向图，所以，诶嘿嘿嘿……\n\n女朋友写完文稿就睡了，我把文稿改了改，然后和官方对 Grover's 算法的实现缝合了一下。提交的时候，距离截止时间大约还有一个小时。\n\n\n## 四\n\n之后的周五的时候收到了消息，我们得奖了。优胜者一共6支队伍。从活动结束之后公布的结果看，要想成为优胜，第一部分的4道题必须全部正确，然后第二部分得分在 8-20 分之间。\n\n这个成绩是个什么水平？截止到写这篇文章的此刻，官方题目的 Github 仓库有 80 份 fork，有少数几份 fork 是针对已有的 fork，有可能来自同一队伍，再考虑到可能有些队伍的不同成员分别 fork 了主项目，所以估测 60 支队伍应该是有的，官方给出 6 组优胜者这么一个不零不整的数字，个人猜测是取了前 10%？据主办方在 discord 提供的消息，有一支队伍的第二题成绩高于8分，但是前面没有全对，所以没有得奖；其余队伍的第二题都不超过6分；并不清楚有多少队伍第一题全对，主办方也不打算公布各队的详细成绩。\n\n这大约说明活动的参与者，其成绩基本上符合二八原理——少数人得到的分数，占据了所有参赛者全部得分的大多数。\n\n参加过这个活动之后，我们一下子就从量子计算小白摇身一变，成了优秀人才了？实际上，直到现在，我还是搞不太清楚 oracle 到底是个什么东西，女朋友对量子计算的理解估计比我还差（逃）。美国哲学教授约翰·希尔勒提出过一个叫做[“中文房间”](https://zh.wikipedia.org/wiki/%E4%B8%AD%E6%96%87%E6%88%BF%E9%97%B4)的思想实验，说一个只会说英语的人被关在一间满是汉字字块的房间里，不断从房间外收到写着中文问题的纸条。房间里有一本英文写成的手册，指示如何对输入的汉字进行回复。凭借这个手册，房中人可以在完全不会中文的情况下，与外界进行交流。希尔勒类比外人、房中人、手册，与程序员、计算机、计算机程序，认为房中人不会中文，进而论证计算机不可能通过程序来获得理解力。\n\n希尔勒教授想论证啥是他的事，我倒是对这个类比的本体很感兴趣——如果一个人已经能够熟练运用那个英文写成的汉字使用手册了，我们还能不能，能在多大程度上说他不懂中文呢？就说一般的程序员，工作时间能保证不看 stack overflow 的有几个，所以他们都不会编程？反对中文房间思想实验结论的人，很多都支持用图灵测试超过某一阈值来作为有智能的标志，但是我觉得，智能本身就不是一个非有即无的性质，而是一个连续分布，没有上限的谱。\n\n另一方面，得分名列前茅，和能力名列前茅，又是两回事。本科的时候做建模美赛，我们学校数理金融的一个学神前一年成绩“略有不佳”，没拿到 M 奖，于是我们那年找到了我和风神俩学物理的，准备再次冲击荣誉。巧了这一年的题目正好有一道浴缸放热水的问题，这不就是物理中的扩散方程嘛，那得奖还不是手拿把掐的？结果呢，H 奖，丢人丢到姥姥家去了。合着我们两个成绩还都不错的物理专业学生，在自己的专业里，打不过那么多同龄的非物理专业本科生？\n\n两相对照之下，我想起了很久之前看过的一篇博客文章，文章以一个问题开头——“熟练”的反义词是什么？当然说“生疏”这文章就写不下去了，作者给出的答案是——“应变”。熟练意味着，你对于问题、选项、最优解已经有了充分且完备的了解，只需要重复自己的经验就可以了，但是在自己不了解的战场上，经验至少不能直接派上用场，这时候，脱离具体环境的应变能力就成了生存和取胜的关键，我们当时的专业水平高不成低不就，反而成了掣肘我们的桎梏。\n\n读到这篇文章的时候，我被这种剑走偏锋的观点击中了，从那以后，一直都在注意培养自己的应变能力——如果明天我所研究的这个领域消失了，我还有没有谋生的能力？如果自己正在解决的问题被上帝或者 Matrix 作弊修改成一个新问题，我能不能看到连作弊都改动不了的题眼，然后一击命中？在凌晨两三点的时候，我也没有放弃解决第一题第 4 问的 Qubit 复位问题，虽然当时我并不知道评分标准，但是内心非常确定，这个问题必须解决。\n\n以上两次活动的成绩差别，也可以从得奖难度来看。建模美赛的 M 奖，得奖率应该远小于 10%，即便考虑到二八原理中绝大多数参赛者都只是凑数，而且样本越大凑数者越多，这个差距也还是无法忽略。我们能够得奖，和量子计算领域才刚刚萌芽，连“方兴未艾”都算不上，因此竞争并不激烈也有很大关系，应变能力是切入这些蓝海领域的必要条件，是躲避内卷的利器。我们现在对“内卷”人人喊打，但是培养应变能力是需要牺牲相当多本可以精进专业的时间和精力的。当社会中的大多数人向往着逃离内卷的时候，真的不需要有人咬定一个领域不断深耕？我现在的选择真的正确吗？我不知道。我是打算留在当前的领域继续熟练，还是换个领域应变，抑或是虚掷 PhD 光阴换一张工作签证？我也不知道。\n\n## 五\n\n哦对了，我有女朋友了，而且在 hackathon 的过程中把女朋友惹哭了……问题是我现在已经不记得具体是怎么把人家惹哭的了，连道歉都显得很不诚恳……我确实是一个不擅长合作的人，或者说跟别人说话的我，和想问题的我并不是同一个人，之前本科 CUPT 和建模的时候也一样，需要和人打交道的时候就几乎干不了活儿，严重的时候自己就退化成了鼓励师……总之一切错误在我，希望她不要记仇…… \u003cbr\u003e（。・＿・。）ﾉ\n"},{"slug":"python-installation-and-configuration","filename":"2021-03-07-python-installation-and-configuration.md","date":"2021-03-07","title":".py | 在 Windows 10 上配置 python 开发环境","layout":"post","keywords":["md","py"],"excerpt":"截图截到哭……","content":"\n我的 python 版本之前一直停留在 3.7，目前最新已经到了 3.9。最近研究上要用一段别人写的 python 的代码，原作要求 3.6 版本的 python，所以卸载了 3.7 版本，重新安装了 3.9 和 3.6 两个版本的 python。\n\n煽动爸妈学编程很久了，欠他们一篇教程。不论是打算不断精进者的第一门编程语言，还是浅尝辄止者打算学的唯一一门语言，python 都是一个很不错的选择。所以即便爸妈对编程可以说是毫无兴趣，我也还是把这篇教程写完了，希望能帮到其他人。因为是面向纯新手的，所以基于 Windows 10 操作系统。因为这套设置我自己也要用，出于个人偏好，所以没有直接使用 `conda`。\n\n## ~~别看你今天闹得欢~~ 先拉个清单\n- python\n    - 在官网下载 `python` 解释器\n    - 安装 `python` 解释器\n- 虚拟环境\n    - 设置环境变量\n    - 用 `pip` 安装 `virtualenv` \n    - 用 `pip` 安装 `virtualenvwrapper`\n    - 创建一个虚拟环境，安装 `jupyter`\n- 编辑器\n    - 在官网下载 `vscode`\n    - 安装 `vscode` 和相关插件\n    - 测试一下效果\n\n## 教程本体\n\n### 在官网下载 `python` 解释器\n\n在 python 的官网上 ([https://www.python.org/downloads/](https://www.python.org/downloads/)) 下载\n\n![](/photos/2021-03-07-python-official-website.png)\n\n### 安装 `python` 解释器\n\n执行下载的文件，可以看到如下图所示的界面，点击红框中的选项，因为我想更改安装路径。此处似乎也可以勾选最下面的 \"Add Python 3.9 to PATH\"，我安装的时候没有选，后面才发现还要手动完成这一工作。\n\n![](/photos/2021-03-07-python-install.png)\n\n接下来的界面里每个选项都勾选，next。\n\n![](/photos/2021-03-07-python-next.png)\n\n在接下来出现的界面中，选择 \"Install for all users\"，然后选择一个自己喜欢的安装路径。我之所以选择 `C:\\Python39` 这个位置，是因为:\n1. C 盘是系统盘，而且是固态硬盘，比较快；\n2. 默认路径在个人文件夹里，非常难找\n3. `C:\\Program Files` 需要管理员权限，用 `pip` 做软件包管理不方便。\n\n![](/photos/2021-03-07-python-install-path.png)\n\n安装完成后进入命令提示符，输入 `py`，应该可以看到一串 python 版本信息，然后命令提示符变成 `\u003e\u003e\u003e` 字样，此时就已经进入了 python 环境，可以按行运行 python 命令。输入 `exit()` 就可以退出 python。\n\n### 设置环境变量\n\n在 windows 的搜索框里输入 \"environment variables\"，没等你输完，应该就可以看到下图中的联想结果：\n\n![](/photos/2021-03-07-environment-variable-search.png)\n\n再按照下图，依次点击按钮，一共要做两件事:\n1. 给 `Path` 变量添加 `C:\\Python39` 和 `C:\\Python39\\Scripts` 两个新值。\n2. 新建一个文件夹，用于存放 python 的虚拟环境（比如 `C:\\PythonEnvs`）。创建一个名为 `WORKON_HOME` 的新变量，并将其值设为 `C:\\PythonEnvs`.\n\n![](/photos/2021-03-07-environment-variable-box.png)\n\n### 用 `pip` 安装 `virtualenv` 和 `virtualenvwrapper`\n\n按照刚才的步骤，此时 `pip` 应该已经安装，此时在命令行输入途中的命令，应该可以看到类似的返回信息：\n\n![](/photos/2021-03-07-pip-check.png)\n\n如果命令行说没找到 `pip`，可能需要按照[这个链接](https://pip.pypa.io/en/stable/installing/#installing-with-get-pip-py)里的方法重新安装。\n\n在命令行中输入 `py -m pip install virtualenv`， 安装虚拟环境管理器：\n\n![](/photos/2021-03-07-virtualenv-install.png)\n\n显示安装成功之后，在命令行输入 `py -m pip install virtualenvwrapper-win`，结果应该和上图差不多，忘了截图。\n\n### 创建一个虚拟环境，安装 `jupyter`\n\n`virtualenv` 和 `virtualenvwrapper` 安装完成之后，在命令行中输入 `mkvirtualenv base`，新建一个名为 base 的虚拟环境。\n\n然后输入 `workon base`，此时命令提示符的行首应该会多出一个 `(base)` 字样，这说明我们已经工作在了 base 这个虚拟环境里。此时 `pip --version` 的结果说明我们的 python 的地址已经和之前不同了。\n\n![](/photos/2021-03-07-virtualenvwrapper-check.png)\n\n在这个环境之下，安装 jupyter，输入命令 `pip install jupyter`，安装 jupyter。这一步不是必须的，但是这样我们将来安装 vscode 之后，可以获得和 conda 自带的 spyder 类似的体验，菜鸟逐行调试的时候非常方便。\n\n### 下载和安装 `vscode`\n\n从 vscode 的官网下载安装包（[链接在此](https://code.visualstudio.com/)），可以看到大大的下载按钮：\n\n![](/photos/2021-03-07-vscode-download.png)\n\n下在之后的安装过程就和一般的程序安装一样（安装很久了，没有截图）。\n\n安装完成之后打开程序，点击左侧工具栏红框中的那个图标，搜索 python 的相关 vscode 插件。python 开发一般都需要 `python`, `pylance`, `jupyter` 这三个：\n\n![](/photos/2021-03-07-vscode-plugin.png)\n\n以后要运行 vscode 的时候，在你想开始写代码的文件夹里，鼠标右键单击，选择 \"Open with Code\":\n\n![](/photos/2021-03-07-vscode-folder-open.png)\n\n然后在 vscode 的界面，在文件树上单击红框中的按钮，新建一个文件，命名为 `*.py`，这里随便写了个 \"hello\".\n\n![](/photos/2021-03-07-vscode-new-file.png)\n\n在随后打开的文档编辑区输入 `print(\"Hello World\")`，将光标停留在这一行，按 `Shift`+`Enter` 执行这一行：\n\n![](/photos/2021-03-07-vscode-run.png)\n\n因为是第一次执行，又因为安装了 `jupyter`，这时候 vscode 的右下角应该会出现一个提示框，询问是否用 jupyter interactive window 执行代码。然后关掉下方的这个 terminal (下半区右上角的叉号)。重新按 `Shift`+`Enter` 执行，此时的结果应该如下图，点击红圈中的变量浏览器，这就几乎和 spyder 的体验一样了。\n\n![](/photos/2021-03-07-vscode-interactive.png)\n"},{"slug":"barrier-forward-keyboard-mouse-to-another-computer","filename":"2020-12-22-barrier-forward-keyboard-mouse-to-another-computer.md","date":"2020-12-22","title":".md | 扫盲Barrier，用笔记本键鼠无线控制台式机","layout":"post","keywords":["md"],"excerpt":"你看我这个标题它像不像编程随想:-p","content":"\n## 为啥要用 `Barrier`\n\n圣诞节前的周五，我们系在线上办了一个聚会。和学姐闲聊的时候，听说他们高年级的几个朋友每周一起联机玩《文明6》，于是一番理(卑)直(躬)气(屈)壮(膝)的要(恳)求之后，成功加入了组织，等到了 steam 的圣诞特惠（没错我一直没买 new frontier pass，我是云玩家），准备以物理学工作者的严谨态度，研究《文明6》诱导的基于回合的反常时间平移对称现象。\n\n![](/photos/2020-12-22-livingroom.png)\n\n我现在公寓房间的结构如图所示，前任房客走的急，把她的几乎全部家具低价甩卖给我了，四舍五入相当于白捡了一台大电视。电视用 HDMI 线连接电脑，当作第二显示器使用。躺在沙发上，看着大屏幕，玩着文明6，[运用自如](https://www.bilibili.com/video/BV1g441187zq)的话说——“那岂不是非！常！爽！”\n\n所以说，我的要求是：\n\n- 在笔记本和台式机处于同一 Wifi 的情况下——\n- 笔记本电脑和台式机之间不需要任何数据线连接\n- 使用 Linux 笔记本上的触控板、鼠标和键盘\n- 控制 Windows 台式机\n- 正常运行和操作《文明6》，不会因为延迟卡顿被人喷（卡顿是不存在的，只可能掉线lol）\n\n一番搜索之后，锁定了 `Barrier` 这款软件。它可以设定一个 server 和多个 client，用 server 的输入设备控制各个 client。切换方法也很方便，只要提前约定好各个设备的“相对位置”，当 server 的鼠标光标跨过 server 屏幕的边角处，就开始控制对应方向上的设备。（具体可以查看下一节。）\n\n之所以选择它，主要原因如下：\n\n- [开源软件](https://github.com/debauchee/barrier)，堂堂正正地不用花钱。（我知道开源软件≠免费软件，但是……）\n- 目前依然有人维护，GutHub 上还有上百个 open issues，当然 closed issues 更多，有问题可以查，提问也有人回答。\n- 跨平台，Windows 和 Linux 都能用。主流 Linux 发行版都可以在仓库里找到，也可以通过 snap 安装。\n\n## 如何配置 `Barrier`\n\n### 下载和安装：\n\n因为我的发行版是 Fedora，在笔记本的 terminal 上任选一句运行：\n\n```shell\n\nsudo dnf install barrier\nsudo snap install barrier\n```\n\n台式机是 Windows 10，在GitHub 项目（[链接在此](https://github.com/debauchee/barrier/releases)）里找到最新一期的发布版本，找到 `.exe` 结尾的文件（可以用浏览器的页内搜索），下载，双击下载后的文件安装。\n\n### 配置 server （笔记本电脑）：\n\n首先要确定 linux 的桌面环境是基于 xorg 的，当前版本的 GNOME 默认使用的是 Wayland，所以需要 log out 之后重新选择带有 xorg 字样的环境，如下图：\n\n![](/photos/2020-12-22-gnome-environments-new.png)\n\n安装完成之后，在 app 界面（`Win`+`A`）应该可以找到 barrier 的图标，单击即运行。一般来说之后会有相当长一段时间电脑没有反应，这个时候 **千万不要重复点击图标**，会导致无法连接。\n\n![](/photos/2020-12-22-barrier_linux_desktop.png)\n\n之后会看到软件的主界面，选中图中所示的选项：\n\n![](/photos/2020-12-22-barrier_linux_start.png)\n\n然后单击 `configure server` 按钮，进入下图的界面，拖动右上角的电脑屏幕图标，拖到中间屏幕周围的任意一格。我选了右边一格，因为这样在笔记本上向右滑鼠标会进入台式机的显示器，从显示器右边框向右会进入电视，一路反过来就回到了笔记本屏幕，操作比较自然。\n\n![](/photos/2020-12-22-barrier_linux_config.png)\n\n双击图标后会弹出一个新窗口，在最上面的 \"screen name\" 栏填入 client 上显示的本机名称，现在我们还没有配置 client，所以需要等到配置完之后回来填写。\n\n![](/photos/2020-12-22-barrier_linux_naming.png)\n\n注意主窗口的左下角，如果不是 “barrier is running” 的话，需要点击右下方的 reload，还是不行的话就要准备 debug 了。\n\n### 配置 client （台式机）：\n\n安装完成之后，应该能在开始菜单里找到 barrier 的图标，点击运行，应该会看到和笔记本上面差不多的界面。\n\n![](/photos/2020-12-22-barrier_windows_main.png)\n\n选择图中的选项，填入笔记本窗口中显示的本机 IP 地址，选中 `auto config` 选项，然后点击右下方的 `start`，然后窗口左下角同样应该有 \"barrier is running\" 字样。点击菜单栏里的  -\u003e `show log` 打开日志，应该可以看到下图里的 \"connected to server\" 字样。\n\n![](/photos/2020-12-22-barrier_windows_log.png)\n\n### 几个雷点：\n\n- Fedora 的显示管理器默认并不使用 xorg，需要专门切换。\n- Linux 上启动较慢，如果不耐烦多点了几次，可能会重复打开多个实例，造成端口被占用，无法使用。\n    + 诊断方法：打开 log 界面，会发现 \"ERROR: cannot listen for clients: cannot bind address: Address already in use\"  字样。\n    + 解决方法：杀掉多余的进程，不会杀的话就重启电脑吧。\n- server 和各个 client 对是否使用 SSL 的选择必须是一致的。\n- 官方没有按步骤来的配置说明，这么多雷点，我居然看到好几篇博客都在夸 barrier 的界面多么通俗易懂，简直了。 \n\n## `Barrier` 之外的其他方案\n\n- `synergy`：成熟的商业软件，好像要花钱。\n- `Microsoft Garage Mouse without Borders`：要求所有设备都使用 Windows 系统，不适用于我的笔记本电脑\n- `usbip`：来自 farseerfc 大神的[这篇博文](https://farseerfc.me/zhs/usbip-forward-raspberrypi.html)，原文说“设置好的话，就像是一台 PC 多了几个位于树莓派上的 USB 端口，插上树莓派的 USB 设备统统作为 PC 的设备”。\n    + 和 `Barrier` 相比，配置的步骤更繁琐；\n    + 好像一次只能控制一台设备（不太懂，如果转发给多个设备的话可能会一起执行相同的操作？）；\n    + 好像也不适用于非 USB 接口的设备，比如笔记本的原生键盘和触屏笔；\n    + 一旦运行起来，server 的鼠标就不再能够控制自己，所以原文使用了几乎注定吃灰的树莓派，相当于给键盘加了个广播天线。\n\n\u003c!-- 用的是一款叫作 [Gather](https://gather.town/) 的 web 应用，就像 90 年代的 RPG 游戏一样，参加者每人指挥一个像素很糊的人物，在一个像素很糊的房间里走来走去，不同之处在于当角色相互靠近到一定距离之内的时候，可以像 Zoom 一样视频连线。 --\u003e"},{"slug":"py-matplotlib-two-api","filename":"2020-10-04-py-matplotlib-two-api.md","date":"2020-10-04","title":".py | matplotlib笔记：两种API","layout":"post","keywords":["md","py"],"excerpt":"import matplotlib.pyplot as plt","content":"\n“图”这个字在英语中可以对应好几个词，picture, image, figure, plot... 其中的 plot，意思是展示两组或两组以上的数据之间关系的图像。用时髦一点的话说，就是数据可视化的产物。  \n\n所谓`matplotlib`，顾名思义，~~`mat` 表示山寨 MATLAB~~，`plot` 的含义如上所述，`lib` 表示这是 python 的[一个第三方库 (library)，而不是某种领域专用的编程语言 (domain specific languange, DSL)](http://www.yinwang.org/blog-cn/2017/05/25/dsl)。\n\n所谓 API，全称是 application programming interface, 应用程序接口，约等于在你有了自己的数据，想调用 matplotlib 来画图的时候，那些需要写在你自己代码里的语句的语法规则。\n\n因为是代码库，所以在一切开始之前，需要在你的 python 代码开头声明引入\n\n```python\nimport matplotlib.pyplot as plt\n```\n\n`plt` 可以换成你喜欢并且不和其他代码冲突的名字，但是这三个字母是大家的约定俗成的，网上的绝大多数示例代码都这么写，~~照抄就完事了。~~\n\n## `matplotlib` 的两种 API\n\n`matplotlib` 有两种 API，（其实还有第 3 种 `pylab`，但它没能经得起时间的检验，已经处于官方极不推荐的状态），分别是：\n\n- 基于状态的 (state-based)\n- 面向对象的 (object-oriented)\n\n两种风格混用的话大概率没法玩得转，会产生各种出人意料的输出结果，新手 debug 的能力又比较差，所以最好先选边站队，有时间再学剩下的一个。\n\n对于有 MATLAB 基础的朋友，基于状态的 API 语法和 MATLAB 几乎一模一样，几乎可以直接上手，当年 python 算是后起之秀，这一招当初就是为了从 MATLAB 那里吸引用户， ~~相当歹毒。~~ 这套接口本身也比较简单，适合在调试程序的时候快速看一下结果，检查错误。\n\n对于一般的初学者，matplotlib 的代码本身就是用面向对象的编程范式写成的，学习这套 API 可以更好的理解代码，知道自己究竟在干什么，顺便还可以熟悉一下面向对象的编程范式。现在学 python 之前就会 MATLAB 的人越来越少，网上 ~~可供复制粘贴~~ 的示例代码越来越多地使用面向对象的语法，学习面向对象的接口也更加实用。\n\n## 两种 API 的相同任务\n\n![](/photos/2020-10-04_figure-and-axes.png)\n\n上图来自网上随便找的一篇论文，可以看到，一般我们会把信息相关的几幅小图放在一起，在文章排版的时候，这张组合在一起的图片算作一个单位。在 matplotlib 里面，这样一个基本单位叫做 `figure`，而每一幅小图叫做 `axis` （变量名常简写作 `ax`）。平时的单图可以看作只有一个 `axis` 的 `figure`，多图的时候往往用一个 tuple `axes` 的 `__getitem__()` 方法来控制每个子图。\n\n![](/photos/2020-10-04_anatomy-of-figure.png)\n\n上图[来自官网](https://matplotlib.org/gallery/showcase/anatomy.html#anatomy-of-a-figure)，图中的蓝字就是 matplotlib 认为的一张只有一个 axis 的 figure 所包含的元素。\n\n两种 API 要做的事情，就是建立 `figure` 和 `axis`，然后提供函数/方法来生成或者改变各个元素。\n\n## 基于状态 (state-based)\n\n所谓基于状态的 API，不太好解释，前面已经说过，在每个函数前面加上 plt，剩下的就和写 MATLAB 几乎完全一样。\n\n看[官网给出的教程](https://matplotlib.org/tutorials/introductory/pyplot.html#sphx-glr-tutorials-introductory-pyplot-py)，可以观察到两个有趣的现象：\n\n- 几乎没有赋值运算符 `=`\n- 几乎所有的 `.` 前面都是 `plt`\n\n也就是说，与 matplotlib 相关的命令都是函数，而且不需要将返回值赋给任何变量。`figure` 和 `axis` 的概念被隐藏起来了，`plt.figure()` 建立一个 figure；`plt.subplot()`建立多个 axes，并且将程序的注意力放到函数参数指定的子图上；紧跟着的设定各种元素的函数都会作用到之前最新一个 `plt.subplot()` 所指定的子图上。\n\n没有赋值说明函数的返回值并不重要，这些函数都会作用在后台维护的 figure 和 axis 的状态机上面，也就是说这些函数都有副作用，不是纯函数。\n\n## 面向对象 (object-oriented)\n\n[作为对比](https://matplotlib.org/gallery/showcase/anatomy.html#anatomy-of-a-figure)：\n\n- 头几句会有赋值运算符 `=`，被赋值的变量名一般就是 `fig` 和 `ax`。\n- `.` 前面都是 `fig` 和 `ax`，其中 `ax` 居多。\n\n`fig` 和 `ax` 分别是 `matplotlib.figure.Figure` 和 `matplotlib.axes.Axes` 两种对象的实例，画图和调整都是在调用两种对象的方法，主要是 `ax` 的方法。\n\n## 不同之处 Cheat Sheet\n\n绝大多数命令，在两种 API 之下的名字都一样，差别就在于开头究竟是 `plt.` 还是 `ax.`，但是少数命令不同，下面做了一个表格，进行一个不完全的列举：\n\n| State-Based | 任务 | Object-Oriented |\n|---|---|---|\n|`plt.figure(**args)`|__新建 figure__|`fig = plt.figure(**args)`|\n|`plt.subplot(**args)`|__新建 axis__|`ax = fig.add_subplot(**args)`|\n|好像没有|__同时新建 figure 和复数 axes__|`fig,axes = plt.subplots(**args)`|\n|`plt.title(**args)`|__设置 figrue 标题__|`ax.set_title(**args)`|\n|`plt.xlabel(**args)`|__设置 x 轴名称__|`ax.set_xlabel(**args)`|\n|`plt.ylabel(**args)`|__设置 y 轴名称__|`ax.set_ylabel(**args)`|\n|`plt.xlim(**args)`|__设置 x 轴范围__|`ax.set_xlim(**args)`|\n|`plt.ylim(**args)`|__设置 y 轴范围__|`ax.set_ylim(**args)`|\n\n其他不同的命令，以后用到的时候会随手更新。\n"},{"slug":"measure-david-with-imagej","filename":"2020-04-29-measure-david-with-imagej.md","date":"2020-04-29","title":".ijm | 用 ImageJ 给大卫量尺寸","layout":"post","keywords":["md"],"excerpt":"\u003cs\u003e用 ImageJ 测量大卫雕像的丁丁长度\u003c/s\u003e","content":"\n前两天看果壳，推送的头条是《古代雕塑的丁丁真的都（像大卫）那么小吗？》，为了立论，作者根据图片测量了大卫像的丁丁长度，虽不十分精确，但是好歹有个定量的结果——“4厘米不到”，还给出了使用的工具——ImageJ。\n\n![](/photos/2020-04-25_guokr-quote.png)\n\n怎么做到的，咱也来试试？\n\n## `ImageJ` 是啥？\n\n上一篇文章（[《“你这是不是原图直出啊？”》](raw-image-or-not)）我们提到了，专业相机可以记录 RAW 格式的图片，这类图片包含的信息比平时常见的图片更多，也需要专门的软件进行处理。不只是消费者水平的相机，实验室里的显微镜、CT机都可以看作是特殊的照相机，它们产生的图像自然也需要专业的软件来读取和处理。\n\nImageJ 就是这样一款软件。相比于直接使用编程语言（比如 MATLAB，python 的 scikit-image 模块），它提供的方框、多边形、椭圆选区工具，直接用编程语言来替代的话要麻烦许多；而且各种操作的结果都可以几乎实时地反馈在画面上，不需要一遍又一遍地 `imshow()`。\n\nImageJ 用 Java 写成，所以跨平台的表现一致，~~用户界面有一股浓郁的 Windows 95 风味，而且在 MacOS 上也一样，Windows 用户幸灾乐祸中~~。代码开源在 GitHub，免费，能让用户知道自己的每个操作究竟在干啥，而且可以自己开发拓展功能，打包成第三方的发行版。我们今天要用的 Fiji，就是一个集成了很多常见拓展功能的 ImageJ 发行版。\n\n## 具体怎么量？\n\n先简单列举一下步骤，详细介绍在后面：\n\n- 下载大卫像的正面照。\n- 运行 `ImageJ`，打开图片。\n- 复制图片，防止我们的操作改变原始数据。\n- 用矩形选择框选定大卫像从头到脚的区域，记录选择框的高度。\n- 用 `Analyze -\u003e Set Scale` 工具确定像素和厘米的换算关系。\n- 用直线工具画出要测量的距离，从主面板读取长度。\n- 用 `Analyze -\u003e Tools -\u003e Scale Bar...` 绘制比例尺。\n\n如果你看到这么简略的介绍就能脑补出如何操作，那么就可以 ~~（关掉这篇文章）~~ 跳过下面的详细介绍了。\n\n我们使用的照片来自维基百科的“大卫像”汉语词条，图片作者是 Jörg Bittner Unna，根据 CC-BY-3.0 协议共享。我们下载的是中等尺寸（480×720）的图片：\n\n![](/photos/2020-04-25-david.jpg)\n\n鼠标右键单击画中的任意一点，在弹出的菜单中选择 `Duplicate`，在对话框中选确定，这样我们就得到一张原图的副本。之后的所有操作都在这个副本上进行，这样即便有任何操作失误，对副本做出了不可逆转的伤害，都不会影响到我们的原始数据。如果数据的安全和完整得不到保证，无意之失叫做学术错误，有意为之叫做学术造假。\n\n选择工具栏中的矩形选择框（图中主面板左一的阴影按钮），在图中画出一个矩形，上下边分别是大卫像的头顶和脚底，**画完后鼠标不要乱动**，然后在主面板的底部读出高度 `h=595`，此处的单位是像素：\n\n![](/photos/2020-04-25_find-height.png)\n\n点击主面板的 `Analyze` 按钮，在下拉菜单中找到 `Set Scale`，在弹出的对话框中，`Distance in pixels` 填入我们读出的 595 像素，`Known distance` 和 `Unit of length` 填入作者假设的 150 cm：\n\n![](/photos/2020-04-25_set-scale.png)\n\n然后就可以开始正式的测量了。再次使用矩形选择工具，**画完后鼠标不要乱动**，主面板底端的 `length=20.93` 就是以 cm 为单位的距离了：\n\n![](/photos/2020-04-25_measure-head.png)\n\n丁丁可以选中直线工具（左起第五个），用鼠标拖拽的方法画线，主面版的底端也会显示结果。\n\n量完之后，要想方便他人，可以在图上画出比例尺。再次点击主面板的 `Analyze` 按钮，在下拉菜单中找到 `Tools`，然后找到 `Set Scale`，在弹出的对话框里选择合适的选项，然后点击确定，就可以在画面中添加一个比例尺：\n\n![](/photos/2020-04-25_menu-scale-bar.png)\n\n如果对操作满意的话，就可以保存图片了。~~（我对这个结果不满意，所以直接没有保存就退出了。）~~ 原图没有改动，可以直接关闭，软件应该也不会发表反对 ~~（通知书）~~ 对话框。\n\n## 量出来个几？\n\n我们的截图显示，按照 150 厘米的身高，大卫的头颅对应的长度是 20.92 厘米。\n\n对于丁丁，由于图片中的阴影部分对起止点的认定有很大的干扰作用，几次测量的结果都不相同，最小值是 3.91 厘米，最大值是 4.45 厘米。\n\n## 这么量对吗？\n\n我们的结果和原文有一定不同，但处于同一数量级 ~~（废话）~~。由于原文并没有介绍自己使用的数据来源，原文中的图片本身并不适合测量这个数据（下面会讨论），而且还给关键区域加了遮挡，所以我们无从比较两个结果的差异。\n\n对于我们自己的测量，我们可以对如下几个误差来源进行讨论：\n\n- 相机视差\n- 深度误差\n- 关于大卫身高的假设\n\n### 相机视差\n\n我们在几何光学里学的相机成的是倒立的实像，物高和像高之间的关系按照牛顿公式取决于物距、像距、透镜的焦距等等知识，都用到了“傍轴条件”这一假设。换句话说，考虑的都是理想状态，要想满足这种理想状态，基本相当于要求镜片的直径无限大，厚度无限小，焦距还可以是任意值。\n\n我们的相机显然不满足这种理想状态（简单证明，理想状态下大卫像和后面的墙壁显然不可能同时被同一个透镜组严格地在同一个平面上成像）。景深范围内，不同深度的物体都可以在图中成像，但是存在着透视关系。同样长度的物体，在不同的深度下，在图片上的成像的长度不同；在画面中央的长度，和在画面边缘时的成像长度也不同。B 站里的摄影师们拍小姐姐的时候，脸尽量靠近画面中间，腿一般出现在画面边缘，就是利用广角镜头的透视效应。\n\n我们的照片目测是用中长焦镜头拍摄的，透视变形不是很明显，但是在测量雕像身高的时候还是遇到了困难，我们用的是脚尖到头顶的距离，如果取脚的中间的话结果就会短一些。\n\n### 深度误差\n\n我们的照片是二维的，所以之前的测量，相当于假设被测距离的起点和终点在同一深度上。如果两点之间有一个深度差，那么测量线、深度差、实际距离三条线会构成一个直角三角形，实际距离需要按照勾股定理进行计算。我们这里得不到深度差，所以这一误差就成了一个系统误差，而且是有偏 (biased) 的，真实结果不小于测量值。\n\n我们选取的照片几乎平视着整座雕像，尤其是我们比较关注的部位，所以深度差几乎可以忽略；果壳提供的图片是仰视的，所以如果这就是测量所用的照片的话，误差应该比我们更大。当然了，还是由于作者没有公布数据和方法，以及原文中图片有马赛克，这种比较没有意义。\n\n### 关于大卫身高的假设\n\n开头的文章截图已经给出了将大卫像对应的身高定为 150 cm 的理由，我们来看一下，这个理由成立吗？\n\n文中说“这相当于现代12岁男童的平均身高”，但是米开朗基罗真的是以 12 岁的人体为原型来创作的吗？我们为什么量了一下大卫的头高呢？是为了算头身比。大卫像头身比是 1:7.5，这已经几乎是一个成年人的比例了。艺术作品为了凸显对象的某些特点和气质，某些特点不符合原型的设定，这在艺术上是完全可能而且可以接受的。《红楼梦》书中的绣像，后来的电视剧中演员的服化道，几乎都比原书的年龄设定更成熟。\n\n像是某一器官的大小，其衡量标准应该是相对于某个基准的（比如体长）的比值，也就是一个无量纲的量。像是4厘米这种带有长度量纲的量，虽然的确是能比一个比例更容易让人有直观的感受，但是结论很容易因为对身高的质疑而动摇。\n\n最后，我觉得最致命的一个问题是，大卫像其实是文艺复兴时期的作品，和罗马仿希腊的艺术品一样，是一个其他文明模仿希腊的产物，而且模仿的过程中融入了很多近代人文主义的精神。这一题材也并非来自于希腊文化，大卫击杀歌利亚是犹太教-基督教文化中的故事。在这种情况下，作者应该额外论证文艺复兴对丁丁的描写照搬了希腊文化的习俗。既然如此，为什么不直接找一个古希腊时期的古希腊作品呢？\n\n而且原文中有“你也许会说大卫像也许只是一个个例，万一只是米开朗基罗的恶趣味呢？一个例子不能说明古希腊雕塑里的小丁丁都很小”字样，不好意思，米开朗琪罗的作品不是古希腊雕塑的“一个例子”。\n\n## 课后作业\n\n![](/photos/2020-04-25_horseman.jpg)\n\n上图是法国画家雅克-路易·大卫的作品《跨越阿尔卑斯山圣伯纳隘道的拿破仑》，请根据该作品完成下列题目：\n\n1. 请寻找资料估测马的体长，并据此估测拿破仑的身高。\n2. 请寻找拿破仑身高相关的史料，并据此估测马的体长。\n3. 比较前两题的结果。\n\n啥？你说拿破仑当时骑的是一头驴？哦，那没事了，下课！\n"},{"slug":"Arch-Linux-in-VirtualBox","filename":"2019-09-03-Arch-Linux-in-VirtualBox.md","date":"2019-09-03","title":".sh | 在 VirutalBox 中安装 Arch Linux","layout":"post","keywords":["md"],"excerpt":"这是一篇速记，相当于实验的原始记录。日后有可能根据这些记录，整理出一些心得体会，或者全流程的教程。","content":"\n\u003e 这是一篇速记，相当于实验的原始记录。日后有可能根据这些记录，整理出一些心得体会，或者全流程的教程。\n\n第四代树莓派（[Raspberry Pi 4](https://www.raspberrypi.org/products/raspberry-pi-4-model-b/)）刚刚推出的时候，脑子一热买了一台。作为一台计算机，只用原装的操作系统有点咸鱼了，所以打算安装 Linux 的一款发行版。既然要追求刺激，那就贯彻到底咯，于是就决定挑战一下 Arch Linux。 ~~（反正早晚也要吃灰）~~\n\n既然要挑战一个很有挑战性的操作系统，那么先在虚拟机里试试水就很有必要了。（后来才发现用这个虚拟机往树莓派里写操作系统，也是官方比较推荐的一种安装方式。）于是就开始了这篇速记中的一系列折腾。\n\n## 我的硬件和软件配置\n\n* **硬件**：蓝厂 CPU、绿厂显卡、2*8 GiB 内存、小 SSD + 大 HDD 硬盘、iTX 主板，机龄不到两年，日常可以流畅使用。\n* **物理机操作系统**：Windows 10 Pro\n* **虚拟机控制软件**：VirtualBox 6.10，短暂用过 5.12 版本\n* **虚拟机镜像文件**：Arch Linux 2019.08.01, Windows 10, Fedora 30 Workstation\n\n## 虚拟机托管软件 VirtualBox\n\n可以看一下编程随想的博客里的 [系列文章](https://program-think.blogspot.com/2012/10/system-vm-0.html)。\n\n我的手头一直有虚拟机托管软件，但是没有编程随想那样的需求，平时几乎用不到。（用虚拟机学 Linux？你可拉倒吧）不过之前很轻松地装过一些 Linux 的发行版，主要是 Fedora，所以没觉得这部分会有什么问题，直接开始了主线任务：下载 Arch Linux 的安装 ISO 镜像、检查校验和（FCIV，教程可以看 [这里](https://program-think.blogspot.com/2013/02/file-integrity-check.html)）、按照官网 [安装指南](https://wiki.archlinux.org/index.php/Installation_guide)（[中文](https://wiki.archlinux.org/index.php/Installation_guide_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87))）操作，然后发现虚拟机连不上网 :-(\n\n### 问题：虚拟机无法通过 NAT 或 NAT Network 模式联网\n\n具体表现为 `ping www.google.com` 报错：\n\n``` bash\n\u003e ping archlinux.org\n# Temporary failure in name resolution\n```\n\n此时的网络设置没有修改过，就是几乎没有可选参数的 NAT 模式。\n\n第一反应当然是把报错的信息直接复制粘贴到 Google 里，然后看到了 [这个帖子](https://bbs.archlinux.org/viewtopic.php?id=237461)。\n\n回答用一种很有礼貌的方式表述了 RTFM，并给出了官方的 [Network Configuration 页面](https://wiki.archlinux.org/index.php/Network_configuration)。\n\n按照这个页面的步骤，因为我的 ISP 给的是动态的 IP，需要用DHCP，DHCP 是啥我都不知道，搞得我跪着下载了编程随想书单里的《Richard Stevens TCP-IP 详解》，解压后看着 3 卷一百多个 PDF 文件，默默关上了资源管理器……\n\n继续变换关键词搜索解决方案，在这期间改动过防火墙设置，又重置了一次；重装了两次旧版本 VirtualBox，因为第一次重装忘记删除配置信息（Windows 10 Pro 在 `%userprofile%\\.virtualbox`，见[这个帖子](https://superuser.com/a/1429931)）；另外装了 Windows 10 和 Fedora 30 两个虚拟机；找来一个玩过 VirtualBox 而且打包票能解决问题的同学。确定了和虚拟机中的操作系统无关，VirtualBox 的 Bridge 桥接模式是可以联网的，但是总不能放任虚拟机的重要联网功能残废着啊 ~~（何况 NAT 模式在多重代理中不可或缺）~~，还是一筹莫展。\n\n就在折腾了这么几天之后，Windows 推送了一次更新，神奇的一幕发生了！更新之后，不论是 NAT 还是 NAT Network 模式，虚拟机都能正常上网，所以，可能真的是“天下本无事，庸人自扰之”吧……\n\n**解决方法：~~吃饭睡觉打豆豆~~**\n\n## 安装 Arch Linux\n\n继续按照官方指南进行安装，不得不说这份指南写的真的不好，至少对于新手是不友好的。一个典型的例子就是下面这句：\n\n\u003e 你需要安装 Linux 引导程序以在安装后启动系统，你可以使用的的引导程序在 [启动加载器]() 中，请选择一个并且安装并配置它，比如 [GRUB]()。\n\n你该怎么办？公布一下正确答案：点击 `GRUB` 那个链接，在一众分类中找到适用于你的计算机配置的那一节，目力忽略各种介绍，找到那一两行有用的命令。ε=( o｀ω′)ノ\n\n反正单看这一句，以我的理解能力，我是没办法正常通关，于是就有了下面硬盘格式化的问题。\n\n### 问题：硬盘格式化不正确\n\n我是用 fdisk 进行的硬盘分区，在正常模式之下似乎找不到选择分区类型的选项，所以我的 EFI 分区也被当作了 Linux 文件系统，所以在很多个步骤之后报错，具体的报错信息已经不记得了。\n\n还好在编程随想的博客的评论区里见到过萌狼，一个 Arch Linux 用户，顺手去他家的博客逛了逛，知道他写过一系列关于 Arch 的博客。所以找到了《给 GNU/Linux 萌新的 Arch Linux 安装指南》，于是直接重建了一个空白虚拟机，按照新教程的流程走了一遍。\n\n**解决方法：看[萌狼的安装教程](https://blog.yoitsu.moe/arch-linux/installing_arch_linux_for_complete_newbies.html)，用 cgdisk 分区**\n\n### 问题：开机后显示 UEFI interactive shell\n\n本以为万事大吉，结果卸载掉安装 ISO 之后开机，总是会进入 UEFI interactive shell。输入 `exit` 之后重新开始倒计时，然后再次进入这个 shell……\n\n就在写这篇速记的时候，我找到了官方 wiki 的 [这个条目](https://wiki.archlinux.org/index.php/GRUB_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#%E5%90%AF%E5%8A%A8%E6%97%B6%E8%BF%9B%E5%85%A5%E4%BA%86%E6%95%91%E6%80%A5%E6%8E%A7%E5%88%B6%E5%8F%B0)，理论上应该是针对这个问题的，但是看一下就知道，并没有提供可操作的解决方案。\n\n通过 STFW，找到了这篇文章：《[如何在 VirtualBox 内安装 Arch Linux](https://cli.ee/archlinux-virtualbox)》，里面提到这个问题是由 VirtualBox 的 UEFI 引起的，同时提供了解决方法：\n\n```bash\n\nShell\u003e bcfg boot dump -v              # 查看启动的菜单\nShell\u003e bcfg boot rm 0                 # 删除光驱启动目录\nShell\u003e fs0:                           # 进入 EFI 分区\nFS0:\\\u003e ls                             # 查看目录，可以看到 EFI 目录\nFS0:\\\u003e mkdir EFI\\boot                 # 在 EFI 目录下创建子目录\nFS0:\\\u003e ls EFI                         # 查看 EFI 目录，确认是否已创建子目录 boot\nFS0:\\\u003e cp EFI\\grub\\grubx64.efi EFI\\boot\\bootx64.efi # 复制 efi 文件并重命名\nFS0:\\\u003e exit                           # 退出\n```\n\n执行完这一步，开机之后就可以看到 GRUB 的选择操作系统的界面了，因为只安装了 Arch Linux，我们只能看到两个选项，一个 `Arch Linux` 正常启动，一个 `Advanced Options for Arch Linux`。\n\n### 问题：开机后无法进入图形界面\n\n本以为万事大吉，结果开机之后选择 `*Arch Linux` 选项，屏幕上只剩下两行字，然后没有其他反应。\n\n同样是上网搜了一下，发现如果按下 `Ctrl + Atl + F2` 是可以进入命令行模式的，随便执行了几个命令，发现系统工作正常。用 `journalctl` 看一下系统日志，发现在最后一段里经常出现高亮的几行里面，都有 `drm` 这个关键词，再次搜索，发现是和显卡相关的。因为是在虚拟机里，所以就去 VirtualBox 里康康有啥可能会导致问题的选项。\n\n**解决方法：在 VirtualBox 的虚拟机显示设置界面，禁用3D加速**\n\n\u003chr class=\"slender\"\u003e\n\n至此，所有的坑都已经踩完了，开机之后可以看到正常的登录界面，Duang~Duang~~~\n\n![](/photos/arch.png)"}]],["html",[{"slug":"switched-domain-name","filename":"2024-09-30-switched-domain-name.md","date":"2024-09-30","title":"通知：本站网址変更","layout":"post","keywords":["md","html"],"excerpt":"未来可能无法自动跳转，请浏览器收藏和 RSS 订阅的读者更新网址。","content":"\n2024 年 9 月 30 日起，本站网址\n- 从 `https://mountaye.github.io/blog/` \n- 变更为 `https://blog.mountaye.com`.\n\n因为网站仍然架设在 GitHub Pages 上，所以旧网址可以自动跳转到新网址。\n\n但是下一步计划把网站迁移到 Cloudflare Pages 上，因为 Next.js 项目不同构建之间文件差异过多，不适合作为 git 仓库的内容进行托管。\n\n所以无法保证将来旧网址依然可以自动跳转。请使用浏览器收藏功能的读者更新收藏夹，使用 RSS 订阅功能的读者更新 RSS 源。\n\n根据初步计划，过渡期将持续到 2024 年 12 月 31 日。\n"},{"slug":"fanpaiyingping-bomi-lamesbond-chinese-movies-ending-of-opening-kaijudezhongju","filename":"2022-11-17-fanpaiyingping-bomi-lamesbond-chinese-movies-ending-of-opening-kaijudezhongju.md","date":"2022-11-17","title":".zh | 反派影评·波米：开局的终局","layout":"post","keywords":["html","zh"],"excerpt":"每个人都知道中国电影完了，但可以看一看怎么完的。——微博@克莱因壶不缺钙","content":"\n\u003e 反派影评近日推出了三集播客 (podcast) 《开局的终局》，分析了中国电影的现状。本文转载自[喷嚏网](https://www.dapenti.com)《【浮世汇640】心太痛了》的截图，由 iOS 照片软件进行文字识别。\n\n### 目录\n\n- [第一章·国产电影·壮丁](#第一章国产电影壮丁)\n- [第二章·引进片·哑谜](#第二章引进片哑谜)\n- [第三章·我们·伥鬼](#第三章我们伥鬼)\n- [网友评论](#网友评论)\n\n## 第一章·国产电影·壮丁\n\n\u003e **关键词：**\n\u003e\n\u003e 电影、审查、主旋律、导演、片子、创作、制片\n厂、题材、中国、重点影片、广电时期、民营企业、监管部门、规划文件、选题规划、发展规划、制片人名字、制片厂时期\n\n`00:43`\n\n我们当时节目谈到的就是那几天一条关于电影局\n改换监管部门的行业新闻，那期的表达也挺简单的。觉得就从那一刻起，电影可能不再是产业，而是事业，甚至是宣传工具了。18年3月正式事态发展到今天这个地步的一个重要原点。那一个月一定是影史上甚至是历史上的断代点，不仅仅行业监管部门在 3 月更换了，在外部，301调\n查报告也是在那个月公布的，他开启了旷日持久的中美脱钩。可在当时这就是一条快讯，一份文\n档都是没人注意的小事。而我们今天这一系列节目也是从小事讲起。\n\n`01:35`\n\n比如说在 8 月初第五代导演田壮壮就自己导演的新作《乌鸣嘤嘤》未能过申的情况，在一个视频的媒体采访里公布了自己和电影局的矛盾。他表达说自己再一次对电影失望，那具体他的原话和视频链接我也放在下面的文字版块。所以这就简述一下他的话。这壮爷提到我这《鸟鸣嘤嘤》拍完两年了，送到电影局，没有任何审查意见。再\n一次电影失望，之所以壮谷说“再一次”是对应他\n在采访当中提到他早年拍《盗马贼》那样一个藏\n族题材影片的时候，跟电影局就有过的一次矛盾，他甚至直接点了是跟电影局的一处处长交锋的过程，对方让他删掉一个天葬台的段落，她直接就说你们电影局就是天葬台，所以到了《鸟鸣\n嘤嘤》没过审，才有了再一次失望。\n\n`02:33`\n\n整个这个采访不寻常的地方也是在于壮爷他把自己跟审查机构贯穿职业生涯的矛盾做了一个整体的回顾和总结。当他提到再一次失望的时候，我们都知道他只是没加一个局字而已。对电影局失望了。这个事当时就有一定反响。而且大部分人都表达了对壮爷的同情和支持，甚至也有壮爷真\n敢说。\n\n`03:02`\n\n那我们今天再谈这件事情，重点就在于这个真敢\n说，因为他敢把和电影局的矛盾公开化，就很可能表明田壮壮知道自己这个wg题材的电影彻底上不了了。我们都知道中国的申查制度甚至是整个社会的规则，就没有说有个先例是一个人通过\n站出来把自己和监管部门的矛盾公开化，然后以此倒逼监管部门，最后果然部门站出来认错，然后顺利放行的，这么多年从没有过。你包括这个\n采访网被贴出来的时候，也有自媒体总结了这两年所有的所谓禁片的片单。\n\n`03:44`\n\n其实 19年的时候，也有好多电影遭遇了所谓技术原因嘛？当时毛泡？（听不清和不了解）也整\n理过这么一个片单，包括了什么《少年的你》啊\n《八佰》啊《一秒钟》啊。19年的时候，这几个片子虽然都删了很多，但是好歹都上了。但你\n复盘会发现那几个电影从所谓技术原因撤档到他们后来恢复上映，这之间他们的主创从来没有任何人站出来谈过审查。所以很荒谬的一件事就在这儿。在中国就是你如果没这么敢说，证明你反而还有戏，十一档，这不是也刚刚撤了一个叫什么《长空之王》。你看那个电影他撤档的理由总结完了，还是原来什么技术原因那一趟，就这种\n他说出来谁都不相信的理由，反而能证明他后面还可能再上映。但是如果都把矛盾公开化到这个地步了，他可能更像的是当年《天注定》那个情况。你记得贾樟柯去戛纳的，那个时候他肯定还觉得我这个片子是能上映的。所以他在戛纳还一直说我们没有有什么审查的问题，他信心满满，他也不会说一些什么出格的话，包括曝光什么。\n但是等到他后来开始公布自己跟当时广电领导的\n一些矛盾，甚至很多话都被那个巴西人拍的纪录片《汾阳小子贾樟柯》收录进去的时候，你就知道导演本人明白《天注定》是彻底上不了了，只是《天注定》还能从所谓资源的渠道看到。而这个《鸟鸣嘤嘤》可能连资源都没有了。\n\n`05:21`\n\n当然很多人可能也会说到 《深海》，我觉得可能\n他情况是介于 《长空之王》和《鸟呜嘤嘤》这之\n间，《深海》除了说表达难过发的那么一条微博，它其实评论区又补了一条“作者就是动力啊\n如何如何”你看他挺正能量的对吧。从这个角度来说，我觉得两个事还不是一个性质，包括你回\n到《鸟鸣嘤嘤》，壮答他在那个采访里面也听提到了一句话，对电影来说我已经杀青了，其实就是说他打算退休了，不是到了万念俱灰的地步。\n田壮壮不会这么讲，尤其他跟什么陈凯歌、张艺\n谋都是一代的老导演。论跟审查部门的交锋经验\n来说，他不存在什么意气用事或者判断失误，他这方面经验只会比后来的导演多。你说像出现当年徐浩峰那种情况，我觉得根本不存在。包括你\n就现在回头看 《刀背藏身》都多少年了，不仅那个电影没有上映，他这几年拍的所有新片现在全部都没有任何上映消息。\n\n`07:49`\n\n首先说这个审批型产业，要我说早就是了。但是我也是理解，像这种行业精英站在他们位置上，他他能说到这个程度就已经很不容易了，房顶子现在都让人掀没了，只能说你们这儿漏兩，救救我们吧。包括像科长（贾樟柯），他说中国电影的\n问题归根结底是经济问题，那你要谈归根结底，那肯定是政治问题。但是再怎么说，聊胜于无，因为他们肯定都已经发现了这个行业起了根本性的变化。所以今天如果我们把这层窗户纸捅破的话，我会觉得整个中国电影已经变成一个民企国\n制的状态。\n\n`08:36`\n\n就是电影局把早年管理国营制片厂的方法用到现在以民企为主导的市场，大到上市公司，小到导演或明星工作室，把他们就当成原来各个地方各个门类的制片厂来用，用来干嘛？用来拍宣传性\n影片、主旋律影片。所以我说这叫民企国治，可\n能这两年在其他领域你经常听到的词是国进民\n退。\n\n看到很多人说韩影在自由中腾飞二十年，不是的。韩国电影电视新闻在过去的几十年里饱受磨难，前两任总统都在缩紧言论，压制艺术创作。深度调查节目被废止，新闻访谈被改成娱乐节目，记者和主播被开除，导演和演员被拉进黑名单，很多优秀的新闻人和电影人\n消失在了公众的视野里。他们的抗年史也能拍成一部好电影。\n诚挚推荐大家看纪录片\u003c共犯者们＞，让我泪流满面过，影片最后被开除多年，已身患癌症\n穷因潦倒的记者回答 “我们的抗年到底有何意义”，他说，“尽管在这几十年里，许多抗争争的人们，青春啊，人生啊，都消散了，我自己也是一样。但至少，在那黑暗的时节里，我们没有沉默。就这一点，就足够有意义了。\n\n接下来我们将分几期节目，把大半年以来对中国电影现状的观察做一个分享和总结。大半年来不少人也都在问，说以后该怎么办出路在哪？我觉得回答这些问题之前，首先要正视现实。我想先提及反派在 18 年了月份的一期马后炮节目。因为到现在很多人可能缺三对基本事实的了解。比如说因为 《深海》没过审的事儿，所有社交平台的高赞都在骂广电，说你能允许一个性骚扰的电视剧公开播放，凭什么把我们《深海》给禁了？\n大部分人看来根本不知道电影跟电视剧早就不是一个系统了。而这一切都是 18 年 3 月的那一刻起开始变化的。\n\n`06:21`\n\n如果说这件事情和 19 年有一个趋势的对比，像\n《八佰》《一秒钟》《少年的你》，跟他们相比，现在可能连幕后沟通这个活动的空间可能都没有了。你要说壮爷他这么多年在电影的体系内，论资源、论人脉，不可能比年轻导演要少。\n但是目前你来看这些其实都不起效果了，可能就是跟他那个《鸟鸣嘤嘤》 的那个文本一样，最后述亡就被砍了吗。另外就是 7月初的时候，贾樟\n柯在他接受采访的时候，他说中国电影不能成为\n主旋律的专卖场，也提到中国电影的问题根本上\n是经济问题，谈了几个金句广为流传，包括十一\n档票房不行的时候，大家还在提，大概在他前后\n也有一个传播力没他那么大，但也是业内的核心\n制片人在自己的朋友圈里写了篇长文，提到说中国电影现在已经成为一个实质上的申批型产业。\n\n`07:27`\n\n就原来我们还讨论什么导演中心制还是制片人中\n心制，现在发现这些讨论都很可笑，你这个东西如果审查过不了，其他都扯淡。那这俩事总结起来，就是电影人一度有一个集中性的发言。之所以制片人名字我就不太提了，是因为后来有自媒体把他文章转到微博上，很快就被删了，直接说\n现象就可以。\n\n`09:04`\n\n那电影行业稍有不同，或者说国进民退在电影行业的表现形式是民企国制。这里就必须要提到去年 11月由国家电影局官方发布的一个极为重要的纲领性文件十四五中国电影发展规划去年的国\n影发三号。首先十四五的区间是2021到 2025年。而这个文件最重要的是规定了这五年电影局\n要有重点影片的创作任务，每年会重点推出 10\n部，一共50 部，文件明确了电影局会统筹规划\n重点影片的选题，完善重大题材的领导工作机\n制，这具体的文件我都放在文字栏。\n\n`09:49`\n\n我这里只说摘要，和原来最大的不同在于并不是民营企业自己投其所好恰爱国饭的概念了。说于东搞个红海。吴京来个战狼，你说的是以前。那\n他妈是以前，是自下而上的，但现在反过来自上而下。重点影片选题规划由电影局负责。那民营企业是干嘛的呢？里面写的也很清楚，鼓励民营\n企业参与重点影片的创作生产和宣传发行，也就是是选题由电影局来出，你负责的是拍摄和宣发，算是个外包团队。\n\n`10:28`\n\n这里和原来最大的不同，首先是电影局的身份变了，广电时期的电影局，尤其民间认知，就是审查机构，广电时期是标准的事后审查，就你民企\n拍什么，随便，想什么时候上，随便，只是你得通过我的审查对不对？甚至曾经他们往进步方向改革过。这我们原来提过，就除了个别题材拍摄\n前的剧本，你在地方备个案就可以拍了，我只把关事后审查，这个和都市报时代的媒体审查也异曲同工，不多展开啊老黄历了。但是到今天他已经由一个原来的事后审查部门变成了直接领导拍摄电影的部门了，这是个角色的根本转变。原来\n监管部门相当于一个关隘，哪怕咱谈审查什么时\n松时紧，或者过申的数量或多或少，那都是个关隘的定义。一个海关的定义说你看之前防疫严的时候，你哪怕什么手续齐全，那海关都劝反你那\n是个时松时紧。但现在这个形容都不足够了，他现在更像一个城郭，把你整个国起来。他是里边那黄四郎。尤其对于那些大导演和头部民企来说，你每年要千什么工作，你具体的劳动任务是什么，他都要摊派指定。我不光是判卷子的，我还是出卷子的。\n\n`11:58`\n\n有人说你提到这类官话式的文件，那是不是隔三差五就有，这咱不必当真吧。首先真不是隔三差五，因为上一次出台这类纲领性文件，还是 12\n年前的广电时期叫中国电影 2011到2020年发展规划纲要。当时的国办发九号，我也特地对比\n了一下，里面最大的不同就在于我刚刚才说的所有那些之前一版全都没有，尤其是在发展目标的对比上，当时的目标只是说要壮大产业，具体在创作上的目标写的是把繁荣创作作为中心任务。\n这是之前 12 年前的。那什么叫繁荣创作啊？就是鼓励大家多拍，最多后边补上了一句三性统一就完了。一是没有什么每年10部一共50 部这种明确的 kpi。 二也没有提到电影局要什么统筹\n规划全面领导重点电影这种条文，这些原影和文\n件还是那句话我都列在下面，你们自己可以去对比。\n\n`13:05`\n\n所以说如果中国电影史有个断代点的话，上个电影阶段应该是 02 年的2月到18年的了月，那是所谓民营企业带领电影市场发展的一个阶段。\n而这个阶段在18 年了月制度上终结，当然实际\n延续了更长时间，直到去年的国影发三号文件出来，关隘变国城。\n\n`13:29`\n\n只有认识到这个根本性转变，你看这两年电影行\n业的各种现象，包括贾樟柯和其他制片人说的话，才能看出背后所指。首先你会看到现在业内\n几乎只要你能叫得出名字的导演啊，你认得的包括明星工作室、民企所有人不是已经拍过，就是淮备再拍主旋律电影了，哪怕像什么邓超、于白\n梅啊，那都不算什么多牛的创作者对不对？但你\n反正拍过爆款，那你就得来一个，那什么《中国乒乓》，那就是你的。更好的，像什么宁浩的坏\n猴子（影业），主旋律项目拍的就更多了。\n\n`14:09`\n\n这还只是工作室范畴更大的片方，我就不一一列\n举了，具体的篇目你可以去查电影频道，也就是\n五毛眼里的六公主，他一个下辖的媒体，当时一\n篇叫 2021 电影前膽报道，里然它叫2021，但它列出了未来几年的重点影片具体有哪些，里面它提到了当年就上映的什么《长津湖》、《1921》，还有到现在都还没定档的，比如《中国乒乓》、《神州》《深海危机》等等，包括规划文件也写了说重点影片的创作选题规划适时动态调整充实，这什么意思？就像今年那个十一档的电影，是不是说因为俄乌战争新发生的什么撤\n侨争议，然后临时来了这么一步，咱就不知道了，因为在六公主那个片单里就没有他。\n\n`14:55`\n\n那可能有人问为什么非得要选民企去拍这些主旋律呢？很简单，首先因为电影局是个机构，那拍摄他肯定还是要找外包团队。像17年时期都是把这类生产任务下发给各个国营制片厂。但市场\n化之后，我们知道国营厂无论效率还是执行能力，都是典型的术高莫用。尤其通过广电时期那\n十几年02到18，那几乎相当于一个超长的比武过程。无论制片厂主控的三个大业（建国大业、建党大业、建军大业），还是一堆更没名气的什么五个一工程奖电影在口碑票房上都远逊于曾经\n民企操盘的什么两战狼两行动（战狼一二、湄公河行动、红海行动）\n\n`15:35`\n\n所以哪怕是今天电影局出卷的了，挑选外包國队的时候，那民企和商业片导演对电影局肯定是最优选择，这也是曾经争宠内卷的民企现在的一种求锤得锤吧。那有人问，如果说这民企或导演要\n拒绝呢，你这不是我想拍的题材，或者我现在就想先拍自己的创作不可以吗？那这里审查就会变成一把达摩克里斯之剑，变成对某个民企或导演\n职业生涯的控制手段。你拍自己的创作不也得过\n审吗？我点将你不来，你觉得后来会发生什么呢？当然文件里咱们明确说人家写的是鼓励民营企业参与重点影片的生产和宣发。但是这个鼓励\n嘛，嘿如果是真能商量的事儿，一般就不会写成文字，就更不会出现在文件里。早年问大概十几年前，三爷韩三平找当时某个霸气外露的演员去\n当特型演员，好说歹说人家也没去，那当时没去\n也没怎么样，但现在写出来了，找到你了。那就\n是《教父》 里有那么一句话“我开出的是一个你\n无法拒绝的条件”。所以这鼓励就跟说那审查意见修改意见一样，我们都知道看哪个电影不能通过他出示的是修改意见，你要按字面意义理解。\n那意见那就是我可以采纳，也可以不采纳对不对？但你说审查意见你能真不听吗？说我忽略这个意见可能吗？当然除非你说我润对吧，像陈可\n辛或冯小刚那样，要不然就退休，像谢飞导演那\n\n`17:25`\n\n还有一种情况，就徐导你可以一直拍，但你一个\n都上不了，他那也算特殊了，他一个都上不了，还能有人给他钱。大部分导演这情况马上就没人投了。所以这里的审查再强调一遍，不再是什么单篇审查、事后申查，而是作为一种控制手段的存在。当然还有一个很重要的元素，就是所谓胡萝卜加大棒里的胡萝卜，就是票房收益嘛。如果你给我拍了，公司也好，导演也罢，名利双收，你个人上什么财务自由这些方面可以满足你。简单来说，就是以创作自由换财务自由。就这好多\n导演就抢着去了，就很满意了，哪有什么气节可\n言啊，你指望中国导演千这个说真跟伊朗导演是\n动不动坐牢？不存在，要真有那种现象，也不至于我们今天这般田地。我就这么说，刚才只是上游的改变，其实发放的环节也有明显变化，就是电影局几乎接管了所有的档期安排，文件里也写得很明确。就除了对重点影片创作生产的保障，也要完善推广上映等推进保障机制。你说广电时期有没有对档期的千预呢？这个一直有，但原来\n基本集中在个别影片和进口片的档期安排上，达不到一个说全面接管的程度。但现在首先就是进口片压根没几个，那剩下的所有头部影片反正也\n都是我出的卷子，是我的亲儿子，整个档期片方的存在感也非常低了。这里的例子就是春节档那个四字（易烊千玺）演的 《奇迹•笨小孩》。\n\n`19:00`\n\n首先这个这片子当时直接就在宣传物料上打出来，说我这是中宣部 2021 重点电影项目。要我说像十七年国制的地方，也就在这，像重点电影，这也不是什么新编的标签。早在国营制片厂\n时期，就电影局把各个制片厂厂长叫来开会，下发电影生产任务。其中划重点三十六十，这个数\n宇不是我瞎编的啊，相当多年份差不多就这数字\n上下了了部重大题材影片，而那 了0 部当时就被叫做重点影片。所以我说这 个物料上的所谓重点\n影片，这不是什么片方、爱豆自己贴金呐。\n\n`19:38`\n\n那回到刚才说三十六十，原来一个规律是数字越小管得越紧。像三部重大题材影片，导演是没什么创作自由空间的。那然后到六十当时是每个厂有自己创作班的吗？你可以自己找点题材去拍，根据每个厂的产能还有什么弹性定性指标。现在想强调的是今天这一套的管理方法包括什么明确\n数量啊，然后分等级啊，这些用的都是 17年时期的，所谓国制就在于此。而你看当时 《奇迹\n笨小孩》定档的是今年的春节档。而你知道从当时的市场来看，能够成为爆款的首先是水门桥，但第二第三名当时是两部开心麻花，一部是马丽\n主演，一部是沈腾主演，马丽那个是《这个杀手不太冷静》，沈腾主演的叫《超能一家人》。当时各个 App 都预测，如果真的按照这个方式，春节党开锣《奇迹•笨小孩》是不如这些的，别说挤进前三甚至过 10 亿都非常困难。\n\n`20:35`\n\n结果就在这个时候发生了一件非常奇怪的事，就是沈腾主演的那个《超能一家人》自己宣布撤档\n了，那个理由也是什么后期技术，就那种没人信的理由，完了之后就撤了。但其实他那个预告片早就发了。当然了，因为人家毕竟是表面自己宣布撤档的，咱们也只能这么说。反正从客观上你会看到像《奇迹•笨小孩》 这样的重点影片不仅\n跻身前三，而且顺利过十亿。所以就用这种控制\n手段加票房收入的胡萝卜加大棒，形成所谓民企国制的模式。所以这里小结一下，现在和末来至\n少到 2025 年的电影市场，将会完全以那每年 10\n部重点主旋律片为中心。而这个中心不仅仅是在上游动员头部创作资源，像这 10部集中每年 10\n部也包括在档期安排上，就是下游也会以这十部为中心。所以这几天有一个传言，很多业内人士\n一直都盼，盼青天说马上之前的一位老领导就要回来了。毕竟在他曾经治下的那些年，是中国电影业最蓬勃发展的时期，感觉他如果现在回来，是不是也能马上恢复到 19年之前呢？首先这只是个传言，直到官宣前，咱不能证伪，也不能证实。我就这戏言的说一句啊戏言，就算人还是那个人，江湖已经不是那个江湖了。如果你还把他视为什么开明派、自由派，我估计人家现在自己都会觉得你这么说是给他挖坑呢。\n\n`22:18`\n\n首先这两年出现的一个现象，还忘了说，就是需要局里亲自抓十部重点影片后，就目前推进的情况来看，效果也并不是每一部都好，甚至可以说\n毁誉参半。比如前一段就有某部主旋律也主动撤档的情况出现，如果他上很可能会被喷得很惨。\n像对于这种上了反而是当猪队友的情況，不如回\n炉再改。\n\n`22:43`\n\n所以话说回来，哪怕现在是把一个真正懂电影的人请回来，可能也不是回来给你频繁解禁的，而是为了解决主旋律质量问题的。我打个比方，现在就像是官方要搞红色宇宙了，那规划文件里还有个明确写到的，就是对于每一部重点影片要做\n到建立任务台账，你就想这都细致到什么地步了。那电影局就相当于要起到一个红色宇宙工作室的职能。那要搞工作室就需要一个凯文费奇\n（漫威影业总裁兼制作人，漫威电影宇宙总策划人），明白了吗？是大家都知道之前那位是真懂电影的，但现在懂电影的才能，如果很可能是为了让主旋律更火更卖钱。所以我说江湖也不是那个江湖了，你就尽当我是戏言啊。\n\n`23:41`\n\n那也有人会问，除了这十部呢对吧，每年其他电影总得有吧，那他们的过审过上映会有什么变化呢？首先实话说，在明确了这十部亲儿子之后，留给其他电影的资源就不会多了。无论上游下游，你就光想想排片率吧。原来广电时期一年一个《战狼》，一个《红海行动》，那味就够冲了。现在一年十个，你想想还能剩下什么？这首先是大前提。那在这个大前提之下，综合今年的情况，有这么两个现象，对于不是亲儿子的民间\n电影，我先这么叫，现在的位置很明确，就是陪太子读书。对于他们目前观察到的现象是协审制的扩大化，也就是对于民问电影遇到的审查问题也跟原来不一样了。所以还是那句话不要再刻舟\n求剑地理解审查了，还说什么咸猪手的都让播，这一年级的常识自己回去补去。\n\n`24:42`\n\n什么叫协审制？这个说一下，就是什么类型的电影直接找什么部委来协审，校园题材给你找教育\n部，犯罪题材政法系统，体育片国家体委都是对口部门，然后由他们来给修改意见。原来广电时\n期这情况也有过，但协申原来是个协助的作用，就字面意义嘛，它不是审查主体，但现在对于那些民间电影协审的情况越来越多，这也不是我给电影局洗地，哪个没过审不赖他是不是。因为这个问题也存在，他牵扯的是一个责权不一的问题。而就关于对协审制的判断，我也得说是，我们18 年那期节目唯一的误判，但也是最大的误\n判，这我必须得反思一下。那时候是真没想到这么快，我记得当时那期好多骂我们的说你们这胡说八道危言耸听，现在回头看我们错！错在乐观了！本以为提及管理之后，主管部门能责权一致，因为刚才说广电时期也出过其他部委的协审\n意见，影响上映的事儿，所以当时是盼着以后会彻底杜绝协申，没想到反而越来越多。这个直接带来什么问题呢？首先是审查的效率大大降低，我说的不是过审率，就是这个审查周期，审查时间。然后我们再说如果审查的都是其他部委，那大家用常识判断一下这个尺度会怎么样呢？肯定是更严嘛。首先人家是不懂电影创作的，那很多\n原来比如说出于类型考虑的夸张或者虛构表现，在人家那就是问题啊对吧。你比如说如果主管部门来审，尤其广电时期可能厲于繁荣国产电影的\n角度，包括原来写嘛，繁荣创作为中心能吸引眼球的票房高嘛，哪怕夸张一点也得过且过了。但现在其他部委审，人家关心你票房高不高吗？你\n电影行业彻底完蛋了，跟我也没关系啊，又不是我管的领域，你别给我惹事儿，他就考虑这个。\n那你可想而知这个过审难度了。\n\n`26:51`\n\n当然实事求是说，尤其这一两个季度情况，说最近都到了三周无新片的情况了，这个肯定是暂时的。好像也有人统计说这是 02 年2月市场化以来第一次出现这么长时间没有新片上映的。所以我说一方面上个市场化的时代实际已经终结了，但另一方面我也得讲这肯定不可能长久下去，尤其在原来那位去四川旅行之后，相关部门是处在看守状态的，那看守状态总得有结束的一天。可从长远上来说，不会有什么质变。因为还是刚才说的每年局里亲自抓的重电影片就有10部，这个工作量其实非常大。咱就看漫威，他作为一个现在全球最顶级的工作室对不对？他一年饱和运作也做不到十部。你把剧算上都不够。所以这本\n质上是个资源分配的问题，档期上会优先人家，审查上其他方面也都一样。所以大部分情况都不\n牵扯，说是不是导演拍的什么隐喻啊他就上不了了，都轮不上这么壮烈的场景，就是我没空理你，你不重要。这是一点。\n\n`28:02`\n\n第二点就是那些接了重点影片的，咱们说大导演\n或者头部工作室是不是他们在拍了主旋律影片之后，能跟上面有个资源置换呢？这是个市场逻辑，就说我替你拍一个主旋律，你能不能允许我拍一个我自我表达的片子？过审上你能不能也网\n开一面？就目前这两年看，根本不存在！\n\n`28:27`\n\n你就从这几个大导演张艺谋、陈凯歌、田壮壮开始说，啊这都是第五代导演，至少每个人手上压着一部没上映的吧。陈凯歌《尘埃里开花》，也叫《少年时代》对不对？你看他《长津湖》拍了一年多了有任何进展吗？这个片其实早就搞过试\n映会了，根本上不了。张艺谋《坚如磐石》，当然这个听说是所有禁片里最可能上映的，但也已经补拍过很多次了，包括贾樟柯监制的\n\n`28:54`\n\n《不止不休》 20 年就参加多伦多电影节，好多人线上都看完了，你看有消息吗？要说这里最唏嘘的呀，还是我们最早提到的 《鸟呜嘤嘤》的导演田壮壮，壮答，他采访里不是提到了吗？ 说我送审两年多，诶你就注意这个时间点，两年多，你可以看看他这期问除了等审查还做了啥事呢。\n一个一个电影的客串，而所有的客串全是主旋律电影。19年年底演了那个 《我和我的祖国》陈凯歌那段 《白昼流星》记不记得他演个村支书，今年年初刚才提到的 《奇迹•笨小孩》，里边他\n也传达使老大爷，包括刚刚撤档那《长空之王》，咱不知道他演什么，但他里边也有客串。\n而这几个电影全都是根红苗正的刚才提到的重点\n影片项目。\n\n`29:47`\n\n咱说他最早刚复出金马双提的那俩片子，张艾嘉\n《相爱相亲》，他有角色发挥，但现在演的这几个主旋律片哪个非缺他不可呢？还是说他就缺那俩子吗？说白了，就是等車查的时候在局里争取个好态度。所以为什么我说壮爷最后是万念俱灰\n呢？这好多人现代老嘲说，你看那些小鲜肉你演那么多主旋律不该凉也得凉吗？我说小鲜肉其实那么干，早都麻木了。最让人唏嘘跟心疼的就是\n壮爷这么一大把年纪了，这几个主旋律电影一个\n又一个的这么演，结果呢？《鸟鸣嘤嘤》呢？于\n事无补啊。所以好多人还说有个什么大导演跟局里有个资源置换，你看壮爷这个情况，你就知道\n这哪是壮爷啊，这是壮丁啊！现在整个中国电影\n民企国制的这个状态就是抓壮丁，就跟现在整个俄罗斯的社会一样，摊派到你头上，你就得去！\n\n`30:53`\n\n包括你看今天我们提到的文件也好，原来产业史的行业介绍也罢，你看里面的用词都是什么，都是下达生产任务，包括原来17年17提到什么弹性指标、硬性指标统购统销那种词，这都已经是真正工厂生产时候用的词了。这就证明他跟说电影到底是什么艺术还是电影是商业那种电影理解\n都已经没关系了。\n\n`31:16`\n\n说你导演到底是艺术家还是娱乐家？你什么都不是！你就是一个齿轮，你就是一颗铆钉，现在你就得去车问给我干活去。所以当你提到说有没有\n利益置换空问的时候，你还停留在一个市场经济的逻辑里，哥们，我们今天直接换一套语境，是原来国营制片厂的语境，这更加匹配于当下，从\n历史上定位正在经历这个时期，比较类似于苏联的的勃列日涅夫的停滞时期，停滞时期有两个划分，一说是64到82，也就是18 年，还有一说\n是64到 85是21年。你要公允的说这勃政前期，他那个人民生活水平是苏联巅峰，但是到中后期他已经完全是一个明显的停滞状态。当然了，其他行业我不评价。但对于电影行业，影史里面讲的停滞时期跟现在看是非常非常类似的。\n主要一个特点是主旋律电影的类型化与通俗化，这是勃政停滞期的一个非常大的特点。你可能上来以为一直我要讲是什么意识形态什么的，还不是是这个。你也不要以为说苏联原来的主旋律电影\n就都是 《攻克柏林》，姜文那阳灿（阳光灿烂的日子）里头gloom 欧巴！他看的那种都是斯大林时期的电影知道吗，真到人家勃政时期的主旋\n电影早就不是那样了，他完成了非常大的类型化\n跟通俗化的转变。而这正是当下此时此刻中国主\n旋律电影的非常大的一个特点！\n\n`32:55`\n\n不然的话，刚才我提到的胡萝卜加大棒那个票房\n层面它不可能保证对吧？如果你说现在咱们拍的\n这些片子十一档上映的，还是原来什么 《小兵张\n嘎》那种片子，会有人看吗？这个跟勃政时期极为相似。你要知道当时苏联那些片子甚至还拿了奥斯卡奖。有个电影叫 《莫斯科不相信眼泪》，我相信好多八五后，你哪怕没看过那个片子，你看他听过这个片子的名字对不对？你看那个电影，它就是一个很通俗的爱情片，包括你像原来\n六公主放过的那个片子叫 《丑八怪》 有没有，你\n简单看是一个校园霸凌题材的片子，跟 《少年的你》差不多，你说这不就是一儿童片吗？但其实\n它正好是当时苏联所谓反新消费主义运动的时候，你得给我拍这么一个宣传片。那个只有你当时的国民你知道她在讲什么，为什么那些人她霸\n凌那个小女孩啊？是因为这些人受到了新消费主义运动的洗脑。那新消费主义运动是什么呀？你看里边放听的歌都是西方的摇滚乐什么的，那是受西方思想的茶毒，所以才导致这么一个霸凌的故事。\n\n`34:02`\n\n所以你现在可能作为一个外国人去看，你看那豆\n瓣分还挺高，是不知道当时他搞了什么社会运动，你直接单独去看那个剧情，你会觉得特别的通俗化，甚至还挺好看。但其实像这样的片子是非常典型的经过通俗化和类型化之后的主旋律电\n影，就是现在的这每一部，而且就算退一万步，就算有这么几个通俗化很好的高分片，它能回避\n螯个历史对手停滞期的定义吗？回避不了。甚至\n不只是苏联是当时整个包括它卫星国的东方集团，更多更优秀的电影在那个时候是直接被禁的，而这个不也正好符合于当下吗？我们都知道\n当时杰克斯洛伐克有个电影叫 《失翼灵雀》，那个就是停滞时期拍出来的，拍出来就被禁了。\n\n`34:49`\n\n所以好多人现在问到底咱们什么时候能看到《不\n止不休》、什么 《少年时代》我不是算卦的，我不知道，但是我可以给你历史上的数据，《失翼\n灵雀》90年才参加柏林电影节，最后拿到金熊奖\n解禁了。但你一看那条目，他是 1969 年就拍完送审了，前后被禁21年。21年这就是一个数字，包括我在其他节目里提到也是柏林金熊奖电影\n《主题》，它被禁了8年时间，＆年按说都算少的。而且这几个拿最后大奖的片子是凤毛麟\n角，还具有抢救价值的，更多电影那副片都不知道哪去了，包括还有好多人提老塔(安德烈•塔\n可夫斯基）。老塔其实到他创作晚期，也根本没回过苏联，后来就死在西方了。后来是戈尔巴乔夫上台之后，苏联才第一次举办了他在国内的全面回顾展，才算把他作品平反。你像《乡愁》，那都是在意大利拍的，跟苏联电影已经没关系了。像帕拉杰诺夫直接当时停滞期就坐牢了，判了五年坐牢四年出来之后也不许拍电影，等到解\n禁，那身体已经垮了，没几年就死了。\n\n`35:58`\n\n而且特别讽刺的是，帕拉吉诺夫因为什么被抓进去，说他是宣传乌克兰独立，所以你看到冰冻时\n期大部分导演的遭遇了吧，哪怕有那么几个不相信眼泪。你对比这些被禁的被放逐的被抓的有那么几个通俗化的主旋律片，那又算得了什么！当然我提到停沸期跟原来的对比，也不是单单为了\n什么怀念原来市场化时期，说 02到18 多么多么的好。这个跟最近我听到什么媒体人怀念原来\n什么所谓黄金时期，南方戏多牛逼的时候，也有人唱反调，原来也没什么黄金时期，原来一样有\n申查，这个我非常认同。就原来跟现在可能唯一的不同，只是说原来我们有改革的念想，我们有\n盼头，很多障碍原来就有，但原来我们觉得自己\n可以去慢慢改变这个障碍，改变那个体系，而现在这个改变的盼头都没有了。明白吗？所以没有什么黄金时期，你千万不要会错我的意，今天我不是说在这怀念和追忆。\n\n`37:03`\n\n你看 02 到18，我们多么多么好，没觉得那时候多么多么好。只是那时候我们在谈分级制的时候，我们觉得那个事情是真的有希望的，你现在\n再说什么这些主旋律片多么多么血腥，他也不\n管，是不是应该有分级制，我觉得很搞笑。分级\n制那是一个市场化概念，你现在都不是一个市场了，你谈市场化概;念干嘛呢？反而你现在回去去\n看，就原来的所谓 02 到18，你都会觉得培养了一大批所谓类型化的人才，其实也没培养任何大\n师，就什么宁浩管虎这些吧，你都会觉得那是个巨大的策略，是一个顶层设计，为的就是有一天\n抓这个主旋律壮丁啊。\n\n`37:50`\n\n不然如果他还是国营制片厂那一套，你现在这批\n人还是只能拍什么手撕鬼子，他肯定没有市场份额，对不对？所以怎么办呢？诶花将近 20年的时期，让市场培养一批可以以后把主旋律电影给通俗化、类型化的匠人，然后现在开始收割啦！\n这就特别像原来雷利斯科特拍过一个电影叫《普\n罗米修斯》，就说人类的造物主在电影开头现身的时候是特别伟大的，把自己的身体分解撒到了\n原始地球的水资源里，才有了整个人类的起源。\n对不对？那后来人类生长了几万年，终于发展出飞到很远星系面见咱们造物主爸爸的时刻了。结果到了那才明白，人家当初现身拨撒生命根本不是什么伟大壮举，而是拿地球当实验器四的。你\n人类只是一个肥料，是为了有一天播撒异形蛋进\n行杂交实验的，所谓千年韭菜一日收割。\n\n`39:04`\n\n那后来是因为工程师的一次生化事故，导致播种\n机没成功起飞，让人类等于又多发展了几千年，才有了什么高科技文明记不记得那情节，你看那批人．乘着普罗米修斯号往造物主爸爸飞的时候\n那个激动，哎呀觉得造物主爸爸要见到我们是不是一定特别高兴啊。他们看到我们现在的发展成\n就，是不是一定觉得我们没辜负普罗米修斯之举\n啊？结果真飞到那人家第一个动作就是他妈把你\n脑袋拧下来了，一个小白鼠的能力还敢超过造物主啦。跟多像曾经的那些叱诧风云的民企电影老\n总，一到什么原来的北上影节各种论设谈中国电影的时候，那个指点江山，哎哟挥斥方遒啊，爸爸看到我们现在发展成这个样子，一定会为我们骄傲吧。\n到今天才发现，全是我们错付了，这整段历史只是个误会。\n\n## 第二章·引进片·哑谜\n\n\n\u003e **关键词：**\n\u003e\n\u003e 电影、好菜坞、环球、档期、票房、中国、影院、美国、外交、本士合作、流媒体平台、全球\n市场、核心竞争力、监管部门、宣传属性、转轨\n时期、市场维度、国家合作\n\n`00:00`\n\n这期节目谈引进片，还是从上期提到的十四五中\n国电影发展规划出发，有两点值得注意，一个是其中提到的数字55%，也就是每年国产片的票房\n占比不能低于55%。另外是提到电影的一个重要\n定位，服务外交外宣工作大局，先围绕这两点展开。首先是第一个数字55%，这是把广电时期旧\n有的国片票房不能低于引进片票房的红线第一次\n明确写出来了。那如果你换算一下，他就是在说\n每一年引进篇的票房总额必须要比国产片低 10\n个百分点，也就是说引进片必须低于45%。\n\n`00:39`\n\n那么你再结合 17 年就颁布的中国电影产业促进\n法里面的另外一个数宇，每家影院每一年放国产片的总时长不得少于2/3。也就是说引进片只能\n放1/3 的时长比来看，形成的就是现在对外片的两道红线，一道就是45%，一道就是1/了。这就\n基本决定了引进片现在在中国电影市场的配角甚至是龙套地位。\n\n`01:09`\n\n所以这三年每当说哪个引进片主要好菜坞大片又\n没上的时候，大家还分别去猜哪一部具体没上的\n原因，是不是因为这个垃圾桶啊出现了那个旗\n子，要不然是演员辱华到最近的 《黑亚当》还是有这种说法对不对？甚至《阿凡达2》我听说某个女主演的黑材料那五毛都给攒好了，就等着万一这也没上成，就准备把锅甩给他了。但其实所有这么想的都是建立在他如果没辱华就一定能上的这么一个假定前提下的。可你有没有想过，这个假定现在有可能是错的呢？我们还是打个比方。\n\n`01:52`\n\n对于引进片的审查来说，也许原来它相当于水平\n性考试，就只要你考到一个及格分数以上你就能过，再往上你考多高都没意义。比如说什么交规考试，你说你答出花来那也没用。还有一种叫选\n拔性考试，就哪怕我这次考了满分，但这次有 10\n个考满分的，可人家只招一个，你都未必能上。\n\n`02:18`\n\n这几年引1进片方面要说有什么变化？就是由原来的水平性考试变成了选拔性考试。原来你可以说非辱华可引进，但现在叫非必要不引进。这话不是我总结的，其实是业内人士模仿现在的防疫形势，自嘲玩梗讲的一句话，倒也一针见血。所以如果我们分析引进片政策，只要看这个非必要不\n引进的必要是什么条件就行了。\n\n`02:51`\n\n所以这里我们只需要看三年以来那个别能过的甚\n至是比较卖座的外片，他们各有什么特点，我大概把它们分为三类，第一，宣传属性，具体分内外宣。第二，本士合作。第三，外交花瓶。一个一个说。首先你会发现防疫三年以来，整个内地\n市场表现最好的都来自同一家好莱坞公司，那就是环球影业。去年引进片票房冠军速激9（速度\n与激情9）是环球的，而今年不仅是冠军，外片的前三名等于冠亚季军也都来自环球，《侏罗纪\n世界了》《坏蛋联盟》和小黄人2（小黄人大眼萌\n2）。而截至目前也只有环球这三部外片票房达到了两亿人民币。而我们又知道环球独领风骚这个事儿在全球范围内根本没发生过。我们知道全\n球明明是迪士尼这几年最强势，哪怕论单片来\n看，那去年的全球年冠也是索尼的蜘蛛侠了（指\n蜘蛛侠：英雄无归）。\n\n`03:56`\n\n今年《阿凡达2》之前那是派拉蒙的《壮志凌云\n2》，所以环球在中国反而独领风骚，这个现象全世界只此一家，那它是为什么呢？就因为环球的电影几乎符合刚才我提到的所有特点，内外宣，外加本士合作。先说去年那俩，速激9当时\n能上是因为这个 P 是中影公司，也就是中国电影行业现在最大的国影企业长期的一个合拍和投资的项目，这个合拍的片约一直签到10。而且速\n激9还写到了中影去年的年报里面，因为它是上市公司，这个大家可以查，就是它去年10 个自己列出的主要项目之一。尤其在那个片上映的时候，中影的分账比也比一般的分账片要高。我们还要注意一个事就是速激9去年上映期问，她的主演之一赵喜娜（约翰•塞纳）还出了个辱华风\n\n`04:54`\n\n所以现在大家一谈说什么电影上不了就是辱华，速激9就是最大的打脸。尤其当时可不是他以前的什么言论，或者 20 年前见过谁被扒出来，有人说《毒液2》 没上，是因为汤老师（汤姆•哈\n迪）多少年前发表什么言论。那赵喜娜涉台言论\n可就是在速激9宣传期啊，协调道了个歉，照上不误。\n\n`05:16`\n\n还有一个去年的环球大片是007 (007:无暇赴\n死），那也是去年非常少见的准同步电影，就是能在同一个月和北美隔那么一两周就上映了。而\n与007十月份准同步上映同时发生的一件事是什么呢？是十一黄金周，环球影城在北京开业，那那个在当时一度还是挺轰动的。有人说这什么关系呢？环球影城那不是他赚钱吗？那电影还又让他多上一个，这不是他赢两次吗？但其实环球影\n城你注意，国企的股份占到七成，这个占股比例是远高于上海迪士尼的国企占股比的。但是谁都知道国企要是自己去开一个单独的公园，有人去吗？能卖那么贵吗？一度那个影城在十一档非常\n火爆，其实还是吃了环球里面那些好菜坞1P的红利。那么在开业的同时，正好有一个环球大片上映。而且环球影城当时在整个国家层面，它的级别也非常非常高，它远非说是一个什么通县，当地县太爷能推动开业的级别。\n\n`06:18`\n\n关手这方面，华尔街日报在他开业前后写了很多\n相关的内幕，大家有兴趣自己去看，当时他享受的双轨制是不亚于马斯克的超级工厂的。那么这是去年，到今年环球开挂属性是进一步的加强。\n现在就五大嘛，网飞除外的五大，原来是给他们\n每家平均分配配额的。像今年其他几家基本上是\n2到4 部。尤其像迪士尼吞并定了福斯这么大的一个企业，今年到现在也只上映了两部电影。但\n环球截至目前这还有俩月，就已经上了六部电影了。这个数量首先就碾压其他好菜坞大厂。\n\n`07:00`\n\n其次环球这六个还全都是今年的新片，这也是独\n此一家，其他好莱坞大厂都有去年就在北美上过的电影了，而像批片更是动辄什么一八一九甚至一五资源，早就大家看过的老片让他们上。而环\n球不仅数量比别人多得多，还都保证他进来的每一步都是今年最新的北美首映的新片，那这个效果当然也显而易见了。\n\n`07:31`\n\n所以刚才提到了今年外片，目前为止前三名也全\n都是环球的，所以无论是数量还是新鲜度还是档期的优先级，环球全都是独此一家。因为今年环球还有一个外宣的属性，就是关于今年年初的北京冬奥会。但那个时候我们知道冬奥会在西方是\n一度遭遇了所谓杯葛（集体抵制之意），开始是外交杯葛，但是不是经济上有杯葛，那个时候西方那些政府是犹豫不决的。在那个情况下，环球\n旗下的 nbc 作为北京冬奥会的北美转播方，坚持大规模宣传冬奥会的计划。甚至他还制作了很多\n比如冬奥运动员和他恐龙奔跑的一系列的冬奥宣传片，在北美大规模的投放。其实就是他这个王牌P《侏罗纪世界了》嘛。他把这个事儿和冰雪项目联合起来，一起为北京冬奥造势。星然里边\n也有他自己是转播方不想亏钱的动机，但客观上确实让所谓的经济杯葛不了了之了。毕竟我们知道，后来俄乌战争爆发，好莱坞是即便亏钱也都坚持杯葛俄罗斯了。所以环球的nbc 电视网和内地的电影党等于有了资源置换。那么它的王牌就是刚才提到的和咱们冬奥运动员一起互动的这个\n《侏罗纪世界了》 在内地同步上映，更重要的是它成了今年唯一过 10 亿的引进片。\n\n`09:03`\n\n顺便说疫情三年就三部过 10 亿的引进片，其中\n两个环球，去年的速激9，今年的《侏罗纪世界\n了》还有一个《金刚大战哥斯拉》（实为哥斯拉\n大战金刚，波米嘴瓢了），他同样也是占了本士\n合作的优先级。这和速激9的情况非常像。因为我们知道那是万达全资收购的传奇影业来主控\n的，尤其是他在大陆的所有收益都归本士企业所有。当时万达甚至争取了比华纳搞的影网同步还早一周上映。你说当大陆作为全球首映市场，这在防疫三年以来那都是极罕见的情况了。所以\n《哥斯拉大战金刚》，那是本士合作的另外一个\n案例。\n\n`09:40`\n\n其实今年还有 《月球陨落》，那是华谊兄弟，他是通过英国渠道借壳上映的，最后一个目前过亿的外片还是来自环球，就是《小黄人2神偷奶爸\n前传》他当时破圈是因为他修改了一个特供版三\n胎结局的事，我相信我一说很多人能记起来对不对？这个当时是无论在墙内墙外都引起过热议\n的。说最后那个神偷奶爸还得让她生了个三胎。\n而那些画面和内容在人家海外版全球版根本就没有，这个事它其实不仅仅是个苏联笑话，更重要的是它对应刚才我说的另外一个属性就是内宣价值，《侏罗纪世界了》是外宣对吧？你把冰雪运动员和你的恐龙一块在北美投放，是外宣。那么三胎版特供内地，这就是明显的内宣了。特供版\n我们知道这早就有《钢铁侠了》删减的外片也不生枚举。但是一个外片还有个对中国当下生育政策的宣传，这确实也是几十年来的头一次。也就是说现在你外片仅仅不辱你还不够，你还要配合\n宣传，没宣传你就上不了。\n\n`10:58`\n\n我们知道小黄人当时是延期上映的，那片本来应该6月份流媒体平台就上线了，所以如果环球要\n自己争取档期的话，那她至少应该争取在大陆影网同生，不然资源就泛滥了。对不对？但最后还是延期了。为啥呀？就因为她花时间去临时加那个三胎结局去了，也就是说你什么时候配合内宣了，什么时候你才能上。\n\n`11:26`\n\n那另外一个因为内宣价值还能上的美国片其实是\n《760号犯人》，这个也特别有意思，他明明是一个美国主投的电影，但最后走了英国渠道，但这个《760号犯人》讲的是啥呢？是关塔那摩虐\n囚题材。等于它是一个揭露美国人杈状况堪忧，揭露美帝国主义行径的这么个电影，这个内宣属\n性也一目了然了，说你美国不是也老指责别国的人权状况吗？那我就上一个揭露你人权状况非常\n差的这么一个美国电影。这种电影我们早就盘点过美国白左给东方递刀子的片。我们说音乐上有\n罗罗杰天特斯，电影上就是 《760号犯人》，这都属于递刀的宇宙。\n\n`12:17`\n\n不然的话你看快两年前的一个片，为啥能在当时\n连国产片都很难定档的第三季度，尤其中美关系的冰点时刻，他能上映呢，就跟咱们官媒天天报\n道枪击美利坚重复的那个金句一样嘛，让我们把日光转向美国。所以你看无论是生三胎还是黑美\n帝，这都是内宣需要，内宣外宣刚才还提到了本土合作。那么还有第三种情况，外交花瓶，你听\n花瓶这俩字你就知道，这相对于前两种，它就是很次要的事啦。那么这里就要回到最早十四五文\n件那句话，服务外交外宣工作大局。\n\n`13:10`\n\n首先你梳理历史就会发现，咱们中国加入wto\n(世界贸易组织） 之后，相关部门就再也没有明\n着对某国电影直接下禁令了，我说明着倒不是说\n怂或者怎么着，可能就是电影不重要，别给人家外交大局惹事。因为明着说他容易落下口实，所以哪怕开始脱钩了。但在完全撕破脸皮之前，每一年还是会象征性的挑几个花瓶上一上，目的就\n一个，要保住名存，名存实亡的名存，这里我们就得分开看。\n\n`13:47`\n\n首先还是好莱坞分账片，原先在遵循配额总额的\n时候，分账基本上是会平均分给这 5 到6个好\n莱坞大厂的，那剩下的配额留给其他国家。而最近我们刚才讲环球，首先他一个人就占6个。人家那是因为有更高级别的用途对不对？那其他好\n莱坞你没人家那优先级你怎么办呢？我还是名义上维持给你两到四个的名额。但是咱选的那些电影，那花瓶属性可就非常明显了。\n\n`14:19`\n\n刚才我们提到说迪士尼今年到现在就上了俩片，一个叫《魔法满屋》还一个《尼罗河上的惨\n案》。其实这个 《尼罗河上的惨案》那走的都还是20世纪（福斯）的渠道。就原来说白了，那\n是六大时期给20 世纪福斯准备的，等于把那也凑上迪士尼这一共才两片。《阿凡达2》之前再说严谨一点。那你想想迪士尼现在在全球市场最红的片是什么呀？那肯定是漫威对不对？那显然是完美错过了他真正的头部电影。但其实迪士尼\n他还真的每部都送审，当然他本来也没拍过什么\nR级片对吧，他是每部都送了，但最后让你上的\n就是这 《魔法满屋》《尼罗河上的惨案》，我就是让你变成惨案，但这都不是最夸张的，最夸张的你看像派拉蒙吧，他是今年目前全球票房冠军\n《壮志凌云2》的出品方，但他今年在中国上的是啥片呢？一个叫《迷失之城》，还一个叫《汪汪队立大功大电影》。这你别说好多人看过了，可能你听都没听说过对不对？咱就挑这个上，你像索尼《蜘蛛侠了》和其他索尼漫威系才是他最\n火的对吧？但他今年上的什么呢？《精灵旅社\n4》《密室逃生2》 《神秘海域》最近还多了个\n沼泽女孩（沼泽深处的女孩）。所以你可以得出一个结论，就是好菜坞从 94 所带来的分账制，实质上己经被掏空了，但是名义上他还继续存在着。再讲一遍他不是什么辱华原因。就刚才哪怕\n我说的上面这些，咱要是拿着放大镜找辱华演员，你就一个找不出来吗？哪怕动画片我就可着\n配音的找，肯定也能找着。当时谈过的那个 《新\n蝙蝠侠》演迷语人，那保罗达诺不好多人也说他发表过什么香港言论吗？所以就不是这个逻辑能不能上就是满足刚才那三个条件。你没有前两个\n优先级，就是要抓小灭大，这是好莱坞分账片的情况。\n\n`16:31`\n\n小语种引进片，那外交花瓶的属性就更明显了。\n你像韩国从官方到民间，一直在积极推动限韩令的解除，这我们都提过。但你要注意，去年年底的时候，咱莫名其妙安排了一个韩国电影上映，叫《哦！文姬》。这个电影你别说在中国，在韩国他都排不上号，但莫名其妙就给安排上了。上\n映之后的票房也非常差，100多万人民币（其实总成绩是290万）。但最重要的是这片他前不着\n村，后不着店，就他前面已经五六年没韩片了，但他在后面也没其他韩国电影跟上。可就在前几个月的时候，咱中国驻韩国大使突然就限韩令发表了一番讲话，说所谓的这个限韩令子虛乌有。\n\n`17:20`\n\n人家还说，据我了解，有10部韩国电影都在内\n地上映了，而且警告韩媒不要鸡蛋里挑骨头，这个用意其实很明显，就是在说我们从来就没禁映过韩国片，不是一个没有吗？这不有吗？《哦！\n文姬》诶如果压根就没有过什么限韩令的话，那自然也就谈不上要解除他了，对不对？当然了，他说内地上了十部韩片这个数字，好多影迷听了\n可能觉得有点玄幻，这院线领域不就一个《哦！\n文姬》吗？所以很可能，我觉得这位大使是把这几年在各个大陆影节上展映过的韩国电影也算上\n了，至少李沧东的片这两年在结展上是肯定放过的，他就是把展映过几场的七凌八凌那么一算来了那么个十部。\n\n`18:14`\n\n因为的确从理论上讲，北上影节的这些所有外片\n甚至是单独影院搞的这些国别影展，也都是要经过审批和过申的。这之前介绍过，所以这也是这两年为啥说对外关系都这样了，防疫也都这样了。像北影节还能连年举办下去的一个原因，包括地方零星的各个国家影展，到这个月我说话的时候都还有什么荷兰影展、日本影展对不对？好像看着都挺开恩的。那根本不是为了你，他就是为了文件里服务外交外宣工作大局凑数用的，那\n都是给人家外交工作人员堵外国人嘴的时候能提供上大数据，尤其你向个别国家影展，那基本就\n一两个厅给你排出来放根本就产生不了任何对于观众的文化辐射力、影响力对不对？可它的确又是个正规引进渠道，外交数据他还能凌得上，他的性价比极高。\n\n`19:16`\n\n还有一个服务于外交大局特点的直播里都谈过。\n就是咱们最近根据一带一路引进了一大批小语种\n电影，这里尤以去年年底突然上映的四部中东欧国家电影为典型。斯洛伐克、罗马尼亚、塞尔维亚和保加利亚这四国都与一带一路在欧洲的一个\n具体策略有关，就是16+1，16+1中东欧国家合作战略框架，这四个国家都是深度参与国。而当时\n那次引进更不一样的地方在于我们甚至给了他们\n分账片的待遇。\n\n`19:54`\n\n你要知道像日本这属于电影大国，在中国上映了\n那么多，我印象当中好像就只有一个是给了分账\n片渠道的待遇，那剩下全是买断片，什么《你的名字》你别看特别火，那都是批片，但当时就给了什么罗马尼亚、保加利亚诶人的一人一个分账的名额。这典型当时是服务于外交外宣工作大\n局，我们当时也一部分肯定了这个事，那毕竟电影院里咱电影能多元化，这不是坏事。但是你要看到这一系列的操作来源于外交需要。所以我们最后回到现在的简中舆论场，就大家还去一个个的分析，那大部分没上的电影，找那些电影的乳\n点，这其实都是之前的思维惯性了，什么垃圾桶\n啊什么旗子啊，演员辱华啊，而且这些都很好举\n反例，把你演员辱华。那赵喜娜你解释一下，甚至哪怕说《奇异博士2》，那黄色垃圾桶不之前\n唐探二（唐人街探案2） 也有吗？这不是我发现的，是广大人民群众发现的，包括说 《壮志凌云2》 里边那旗子《八佰》不也有吗？当年是全球年冠的电影 （20年全球年冠其实是鬼灭之刃:无\n限列车篇），甚至到现在这个《黑亚当》说号称\n里边那个老 007布鲁斯南早年间怎么辱华了，那布鲁斯南 19 年还有电影在大陆上映，你找的那黑材料都是 20 多年前的了，这跟《黑亚当》\n有什么关系呢？所以这些都能举出反例。\n\n`21:21`\n\n所以这个时候来到了当下以后的引进片究竟会怎么样？首先分长短期，短期眼前的就是 《阿凡达\n2》到底能不能上这个相对简单啊，就我刚才提到的那三条优先级，你看他有没有不就完了吗？\n我也给个整体判断。就如果 《阿凡达2》上，也不能说明引进片整体会回到一九之前。\n\n`21:46`\n\n但如果连《阿凡达2》 都上不了了，他一定代表\n电影市场断代级别的倒退。因为《阿凡达2》是最人畜无害的片子，一堆小蓝人在什么潘朵拉星球打来打去，他没任何乳点对不对？那再加上\n《阿凡达2》跟中影有深度合作，这些本身都是非常特殊的，所以就算他能上也代表不了什么。\n但如果连《阿凡达2》都上不了了，他一定代表\n电影市场断代级别的倒退。\n\n`22:17`\n那这是短期，从长期判断，我还是那句话不算\n卦，我们可以看历史。可能这个时候大家不禁回想起原来能够在大陆影院看好菜坞的黄金岁月，泰坦尼克啊哈利波特啊漫威啊，都是咱一代人的情怀，一代人的青春。但是今天我想说的是，这其实也都是观众的思维。就如果监管部门对电影\n内容有在意，那也只会是提防，提防西方入侵的思维从来就有。他不是从最近防疫三年才开始的。你看我们刚才说了一嘴的是，入世之后从来没有明着禁过任何电影。但你知道入世之前，每一次和外国有冲突，那就拿引进片准确说是好菜\n坞电影开刀，每一次出气简都是电影，最近两次\n能查到的，这都有文献，一次是％年，还一次\n是98年。\n\n`23:13`\n\n98 年是因为众所周知的南联盟使馆被炸事件，\n96年那次相对没那么熟知。但其实和今年挺像的。因为当时发生了两件事，今年都发生了，一个就是台海危机，另一个就是中美贸易摩擦，只是当时还没升级到贸易战还叫摩擦。所以当时禁\n映好莱坞的时间也没有太长，摩擦没了，基本就\n恢复了。\n\n`23:36`\n\n这里比较走运的就是泰坦尼克了，它正好出现在那两次禁令发出之间，所以它能上映。所以你就可见，早就在哪怕 90 年代大家滤镜当中最璀璨的时期，其实也是大量出现这种事了。但可能你会问，为什么那时候屡次的禁令也没对整体那二三十年的发展产生影响呢？因为那个时候的引进片有速效救心丸的作用。就说如果我们把分账时\n代做一个粗略的划分，第一个阶段其实是救心丸时代。我们都知道 94 是所谓分账片元年，《亡命天涯》 当时开启了每年10 个分账篇配额，这是常识。但很少有人提及就是为什么是94年，那是因为当时是中国电影作为市场烂到底的时候，就奖项上那几年第五代很风光，但在市场维\n度，当时无论从总票房还是从观影人数来看，那\n都是整个中国电影历史上的最差时期。\n\n`24:42`\n\n对比现在还要糟糕啊，原因我只能简单说是转轨，因为我们知道原来计划经济时候票价极低。\n而后来的市场化时代，片源很好，可在转轨的时候吧，他两样都不占，就国营制片厂时候也没好\n莱坞大片，但是他几分钱一张票，你看八月礼都\n拍过，甚至看电影免费对不对？后来市场化，虽然他票价升高了，但他有泰坦尼克，有复联，尤其首映那几天，你拿着钱你都买不着票。可就在\n转轨那几年，也就是九四前后，他恰巧啥都没有。\n\n`25:21`\n\n所以在那个时候，国家哪怕是我们说从意识形态\n角度，把电影院当成了一个宣传的重要渠道，一个喇叭。尤其那个时候互联网都还没兴起对不对，它是一个重要的宣传喇叭。但因为转轨让全国范国内影院发行网面临消失的危险了，搞不好\n他就成为下一个戏园的了，就大家不再有这种消费习惯了。\n\n`25:45`\n\n那在这个时候就哪怕我是挽救喇叭的角度不得已\n了，引进了美国分账片，所以那是救急用的，所谓救心丸就在这儿，而速效二字也很重要。你说什么片子能挽救市场，说现在开心麻花也行。可那时候他妈没开心麻花对不对？你要现去培养你\n还得等几十年。那是咱们第一章说的故事，可当时他就只有进口片。那个时候进口片还分两种，因为那时候是港英时期，还有港片，所以他是别无他法才允许了分账片进来，但哪怕让你进来了\n还动不动就喊停。\n\n`25:45`\n\n那在这个时候就哪怕我是挽救喇叭的角度不得已\n了，引进了美国分账片，所以那是救急用的，所谓救心丸就在这儿，而速效二字也很重要。你说什么片子能挽救市场，说现在开心麻花也行。可那时候他妈没开心麻花对不对？你要现去培养你\n还得等几十年。那是咱们第一章说的故事，可当时他就只有进口片。那个时候进口片还分两种，因为那时候是港英时期，还有港片，所以他是别无他法才允许了分账片进来，但哪怕让你进来了\n还动不动就喊停。\n\n`27:25`\n\n具体到咱们电影来说，就是监管部门以西方类型\n片的成功，想去刺激中国的电影人来培养我们市场化跟类型化的能力，它和观众也没关系。这个时候最大的两条鲶鱼正好是卡梅隆的那两部超级大片。鲶鱼的开始几乎算是泰坦尼克引进算起的。而鲶鱼的巅峰就是阿凡达 1的首映和泰坦尼克 3D的重映。\n\n`27:55`\n\n刚才提到了 了D带来了中国电影从上游到下游的一套技术变革。我想说升级，因为 了D 很难说是未来，但那俩至少在票房维度和引超的轰动程度\n是降维打击的。所以才激将法一样，让几乎所有当时的中国导演彻底改变了自己的创作思路。你\n记得《泰坦尼克号》没多久才有了张艺谋的《英雄》，而对于现代这批中生代的导演，刺激其实\n来源于 2012 年泰坦尼克 3D 的重映，典型就是\n管虎，他在2012 年之前是个作者导演，而他最后一部作者电影杀生，正是和泰坦尼克 3D 同档\n期被锺爆之后，后面他所有的电影改弦更张，紧\n接着就是抗日神剧与屎尿屁结合的那部厨戏痞\n(厨子戏子痞子），然后就是用所谓小鲜肉当时\n顶流传的那个 《老炮儿》，再到最近几年的《八\n佰》《金刚川》。\n\n`28:47`\n\n而伴随微观上一个导演的改弦更张，宏观上对应的是国产片在单片号召力上逐渐超越了引进片，直到最近的全面主旋律化。所以我还是那句话，主旋律电影继续卖，就不会回到转轨时期。而鲶鱼时代卡梅隆的两部电影就是原点和顶点，其实这些也都是上游，中下游同样如此。 最早 02年\n市场化的时候，为了让中国电影的市场工业基础\n迅速建立，我们甚至一度允许好莱坞是全产业覆盖，就你可以直接投资电影院。\n\n`29:21`\n\n我们知道万达影城其实最早叫华纳万达，发行的\nDVD 叫中路华纳。你实事求是说华纳对于后来\n全国兴起的那种万达影城模式是不是有所帮助\n呢？尤其是这种我们讲叫购物中心嵌入体的影院\n模式，那就是从那边学来的，你之前都 《一秒钟》那种影剧院模式对不对？所以市场化之后的外资作用是在这儿。\n\n`29:48`\n\n那你说鲶鱼时期提防西方的心理就没有吗？一直\n有，刚才我说介许好菜坞投资中下游产业，但你看后来本士企业稍微成长壮大一点之后，后来我就被明着暗着，你就离开下游嘛。你看现在外资的合资影院应该就韩资的 CGV 了，就这还三天\n两头船，他们也要撒，所以你就能看出来，只要说咱们技术上、管理模式上一拿到手，迅速就得\n让外资靠边站，这里边还有一个自上而下的策\n路。这很多人也听说过，就是市场换技术，就你不转移技术，你就别想拿到中国的市场准入，这不也是改开时代的整体性特点吗？在电影领域，IMAX 和 dimax 之争，这我们提过很多次了，包括还有中国和比利时的巴可公司在放映机环节的\n合资，这都是典型的市场换技术。\n\n`30:42`\n\n对吧，就我允许你 IMAX 借着阿凡达1当时在中国市场赚了那么多钱，但你也得给我们点你的技术。于是你看很快，人家中影就搞出了一个非常\n相似的 Dmax 以至于后来 Dmax 的市场占有率\n一度向上蹿的时候，还被 IMAX 以技术剽窃为名，在全球法院追着起诉。主要当时告他那工程\n师，结果最近你看中影不搞 dmax了，人家换了\n一个新的特殊影院名头，叫绑定《阿凡达2》的\ncinity，他按说是咱们中国原创，但你仔细一看，里边它还是好莱坞的设备，它号称 4k120 帧\n了D吧，这三个维度你 4k 指的视觉，它放映机是科室的，科室是好莱坞公司指的它是好莱坞下游公司。完了，你那个3口是real口的。它还有一个可选的声音系统是全景声的，全景声是杜比的，这三家全是美国公司。\n\n`31:30`\n所以说白了，我卖的其实是个打包组合的套餐，但是咱们能做到的是我们的价格低，当悠dmax\n刚出来的时候也是打价格战，说你 IMAX 1/10 的\n价格就能装我这dmax，我直接打一折，你想这多狠，咱就来这个。这是中下游，上游刚才还忘了说，最早索尼哥伦比亚还投资了一批冯小刚\n《大腕》的那种叫华语合拍片，这其实都是咱们改开以来在一个总体的方针原则下半抄半学的时代缩影。那么刚才提到的这鲶鱼效应终结在哪呢？终结在我们第一期开头提到的那个时间点。\n18年了月．上期说 了月主要是监管部门的更\n迭，今天提就是 了01调查报告，那实际上是美国对中国所有市场换技术的所谓，所谓啊什么强制\n转让啊、巨额补贴啊这些情况做了一个系统性的汇总。当然这个报告是没直接提电影的，但它是一个总论。那时候的特朗普就以此为依据，打响了贸易战，知道大范国的中美脱钩。这导致后来的一个新情况就是有一些原先对外开放的行业，这几年逐渐就内循环了。重要一点就是原先它能\n市场换技术，但301之后换不成了。所以如果你要想对整个这个过程有所了解的话，我还是建议\n读一下 301 调查报告，这也不是什么禁书，咱们工信部都翻译过一个版本。\n\n`33:00`\n\n而回顾这些，其实也更想强调，无论网才说的哪\n一个时代，引进外片与否，从来都和观众没关系。起初引进外片再总结一下是为了救活市场，而市场救活是为了什么呢？为了用市场换技术。\n只是说对于咱们观众而言原来算是个顺风车的时代。因为有关部门要救火，影院要鲶鱼效应，所以我们当时能蹭着看、跟着看，就跟阳灿（阳光\n灿烂的日子）里头那马小军溜进政协礼堂，说跟着那老千部去看那裸体内参片一样，人家放那个本来也不是为了你，所以牵扯到对未来的判断，说引进片直接回到wg这是不太可能的。\n\n`33:48`\n\n虽然情绪上现在大家老提这事儿，但实事求是的说，还不至于，我以为的一个类似时期是94之前。94到19 是分账片时代，到20年开始，分账制被实质掏空，名存实亡了。所以现在和未来的情况可能会回到 94 之前。94 之前其实也有\n美国电影，不是没有啊，但最大的区别是当时没有任何好莱坞大厂自己出品的电影，就只要出品\n方没有好莱坞那几个大厂还是有个别可以引进的。比如说白兰度最早演的那个超人1，94之前\n他就上过，这我们记得原来我们也聊过，因为那个片你去查华纳，他当时只做了发行，本质上超人1还是个独立制片的电影。\n\n`34:38`\n\n那种片当时就能上，包括我印象中终结者1也是\n这么个情况，因为这些都不是大厂自己出品的，所以那个在九四之前都能引进。你看最近定档的\n这一批里边，你像那个《坠落》典型的，你去查\n他出品方，他是独立小制作，忍者神龟（忍者神\n龟;崛起）可能更有意思。按说这个1P 是派拉蒙，他是大厂，但其实他连北美的分级都没有，那本质上是个网大，所以他跟分账跟派拉蒙都没有关系，那这种美国片以后还是会有的。那有人问问九四之前之后，你说的这个时代划分真的那么重要吗？重要原因就在于刚才反复提到的那个词\n——分账。分账制在电影的工业领域，尤其发行\n上是非常非常重要的概念。因为大体上就两种引进方式，一种是买断，我以一个统一的价格把你\n片子买下来，我上了之后卖多少钱，放多长时间，这都是我的事，跟你就没关系了。94之前的超人 1就是这么上的，那叫买断。而分账制是你卖的每一张票，好莱坞大厂都要从中分钱。而\n分账制的建立正是他们可以被称为五大六大的核心原因。这几家大厂并不仅仅是因为他们制片能力强，那只是上游，被很多人忽路的一点是，他们拥有在全球的垄断发行分账权，这才是六大的核心竞争力。\n\n`36:00`\n\n所以为什么94 之前好菜坞一直没有进入到中国市场，因为他们不接受买断。所以咱也不是说光提中国自己的原因，从好莱坞那边说，就是因为好菜坞是不接受自己出品的电影被买断的。为此他们甚至可以不去某个市场。你看中美 79 年就\n建交了，但 94 年才开放分账制，这中间差了 15\n年，就是你不答应分账，他宁可不来。所以分账\n才是好菜坞全球霸权在经济上的表现。那我用这个霸权是个中性词，而分账之后，一个市场卖多卖少就和它的收益直接挂钩了。那久而久之，它就一定要在这个市场寻求更多话语权，比如说对\n票房影响很大的因素就是档期对吧。所以在原来\n分账制还真正有效时期，好莱坞是一直在努力，希望在档期上有所话语权，为此他们甚至愿意在内容的删减上做过妥协。\n\n`37:02`\n所以为什么早年美国调查那几个好菜坞大厂，看看他们是不是行贿了中国的国企高管，这有记录\n啊，这也不是小道消息，这种事反映的都是好菜坞在谋求话语权。而我们当下对这个需求，尤其提防，原来也提防。但刚才说了优先级上原来得\n服用速效救心丸，因为需要救急，后来又让位于\n鲶鱼效应，因为需要救穷，那现在一不救急，二不救穷，这个提防西方的思维就占主导了。所以\n为什么说到对未来的判断，先得把历史梳理清楚\n呢？原因就在这儿。\n\n`37:44`\n\n然后在好莱坞方面，他可能对中国市场以后也不会像原来那么重视了，甚至他也可以像 94之前\n宁可放弃中国的一个很重要原因是他们在谋求改变赛道，就是现在他们的校心竞争力由原来在影院上的分账制，改为了现在流媒体的平台制，这个东西就不多展开。但这其实是好菜坞那边希望\n延续自己在全球市场统治地位的新的探索形式，这事它未必有效，跟今天话题也没什么直接关系，毕竟咱也更不允许流媒体平台直接进入大陆。你需要知道的就是为什么好菜坞也不像原来\n跟舔狗一样，包括 《奇异博士2》被禁之后，那\n迪士尼的包正博（迪士尼首席执行官）能公开说我们无需中国也能活得很好。它的底气在于好菜\n坞的重心开始向流媒体转移，而流媒体被他们视为影院垄断发行权的平替，他们在试图打造新的核心竞争力。我们要了解的是，好莱坞在发生战略重心转移的时候，电影院票房的位置就变得不\n再那么重要了，这不是指的在影迷心中重不重要。你注意这里的语境，它更多作用在金融市场上、股价上，对一个好莱坞市值的判断上。而这些些层面如果电影院都不再重要了，那中国的电影院又能有多重要呢？你看我们天天说我们银幕数\n世界第一，总票房也当过世界第一，单片还有过\n世界第一，但这些第一们你要注意都是影院这一个单一赛道里的，而一旦连赛道都变了，那这些的重要性就都需要重新评估。那至于好菜坞那\n边，像平台经济能不能转移成，就第二一说又是\n不是好事，这个以后有机会就单聊了，因为它是另外一个维度的话题了。\n\n`39:42`\n\n那回到中国市场，我们知道现在中美关系的局面\n是斗而不破，有些行业它要体现斗，有些行业要成为贸易压仓池，压仓池也是高频词对不对？那一个行业属于哪一类？就看这个行业能否让西方对中国产生依赖性。你看现在还能当压仓池的，还没脱钩的那些行业基本都是深度参与全球供应\n链的那些什么汽车，电子产品，苹果那些包括一些两头在外的人家还不脱钩，那是因为人家可以\n增加依赖性。\n\n`40:16`\n\n这个主语也明确啊，是增加西方对我们的依赖性，可不是反过来。所以你判断电影现在是属于体现斗还是维持不破，你只要看它能不能增加依赖性就可以了。所以结合上刚才我们提到的好菜\n坞在向流媒体平台进行战略转移，那些所谓全球\n银幕数的那各种第一们所产生的依赖性就不再那么重要了，加上我们上游的内容输出能力又几乎\n为零对吧？海外不存在对中国任何一类类型片的特殊需求，就哪怕是曾经港片、功夫片达到的那个需求量级都完全没有。\n\n`40:56`\n\n所以可以得出结论，电影行业不具备任何能增加\n依赖性的功能，这游戏可能都不至于电影这么惨，因为它还有一定的这个海外输出能力。最近\n不是说腾讯还要收购个育碧，这电影现在完全没有了。尤其万达退出 AMC (美国电影院线）之后，包括尤其像曾经日本在广岛协定之后，索尼\n都收购过哥伦比亚，你要能当时站住脚，后面的局面都大相径庭。因此如果有的行业体现斗，有的行业维持不破，现在只能二选一，只能挑边\n了，电影肯定当不了后者，所以它逐渐也正在成为抵御西方文化的桥头堡。\n\n`41:38`\n\n总之你要知道分账片形式在斗而不破的中美关系\n下会名存实亡一段时间，但也不代表没有美国电影。我就跟你说，哪怕在最保守的十七年时期，那个时候都引进过美国片，有一个叫《社会中坚》，号称是新中国正式引进的第一部美国电影。那就是个典型的集内宣外宣于一体。外宣主\n要是能为了表达对美国一批在麦卡锡主义时期被打倒的左翼人士的支持。当时那帮白左拍的片子好菜坞已经没人买了，但是美国人不买我们买。\n然后内宣属性你一看题材你就知道，那就是在说美国无产阶级也反对美帝国主义。所以你看就从\n当年的第一部《社会中坚》，到最近的这个\n《760号犯人》内宣价值惊人的相似。所以以后这类的美国电影那还是有可能来的。包括咱说以后是不是就看不着引进片了，那也不存在。毕竟\n引进嘛又不只是好菜坞，只说更多，咱会体现一个朋友圈的属性，谁是我们的朋友，我们就多上谁的电影。 当年我们父母那边甚至爷爷奶奶那辈有个顺口溜，人人会背。\n\n`42:51`\n\n朝鲜电影哭哭笑笑，越南电影飞机大炮，罗马尼亚搂搂抱抱，是阿尔巴尼亚片莫名其妙，横批中国电影，新国简报。我建议大家都记一下，因为以后也许就都这些了。你看中国电影新闻简报，这不已经是了吗？包括咱中国人民老朋友，现在不还是那几个吗？朝鲜越南哭哭笑笑飞机大炮。\n最多新加一个俄罗斯。诶俄爹电影父慈子孝对不对？你看中国孝子那么多，不得多安排上几个呀。而且大部分俄罗斯片还确实都是讲这父子关系的嘛，什么萨金塞夫、索科洛夫，俄罗斯电影\n父慈子孝啊，你别看这是玩梗，最近还真是刚刚又引进了个俄罗斯电影，今年己经是第三个。去年我们引进了俩，今年变成仁，这和当年 《社会中坚》的引进思路不是差不多。你不好莱坞撤出\n俄罗斯电影业了吗？诶我来！\n\n`43:54`\n\n最后我们回到今天的题目就是这半年以来电影圈\n百事萧条，可火了一批人，就是所谓档期谜语人。他的一个特点就是某部好菜坞大片在北美快上映的时候，他一定会发个什么东西打个哑谜。\n就比如说我发一个《雷神4》的海报，但是我什么也不说，诶什么也不说，你自己猜，或者我要写字，我也就写俩字「快了」句号。那最开始这好多观众也好，影迷也罢，一看见这个他特别激动，你按说你写俩字快了，你作为一资讯博主这\n瞎胡闹的对吧，什么快了，你快进去了还是怎么着的？那粉丝就觉得快了。\n\n`44:34`\n\n那就是说我们蜘蛛俠了快上映了对不对？完了就\n各种奔斗相告，流量就蜂拥而至，久而久之就有了这么一批档期谜语人。但其实回头看几乎很多\n次都没准过，漫威这都已经连续七个电影没上了。如果算上索尼，漫威都上双了对不对？可这里我也不是专门要批一个环节去调侃。\n\n`44:55`\n\n我们得看到出现这类现象最大的原因是什么？首先是整个电影行业的资讯完全不透明不公开了。\n咱甚至一句话可以概括，就是越重要的信息越神秘，而越明确的信息越不重要。甚至你可以说整个大环境也好像是这么个情况，比如说现在这防疫措施，咱能不能给句痛快话啊，这么重要的问题，这一会儿一变，到底哪个才是准话不知道。\n\n`45:26`\n\n往往最重要的是它最神秘而最明确的信息。你比如说，就美国叉什么枪击了。韩国梨泰院又踩踏了。哎呦那个报道事无巨细。你看有个官媒那天\n列出了五大质问，八大罪状，拷问韩国政府铿锵有力，掷地有声啊。我问一句，如果我不是韩国人，他对我很重要吗？可就这样的信息，他最明确，你这规律放电影一样嘛，越重要的大片档期越神秘越不重要的电影，他档期越明确。\n\n`46:07`\n\n其实今年咱实话说可并不是所有电影都动不动被禁，你要理论上数数的话，那是剩了不少的。尤其在那玩梗说什么电影行业全部玩完什么几周无\n新片。但你看人家不是马上定档了一批吗？ 11\n月份，只是你一看那质量好家伙，最近不是有个\n75 元票房的电影火了嘛，说就俩人看过说大家\n看你们俩那么 有缘分，要不要组一CP，就这种电影它几乎没断过，它的档期特别明确。\n(75元票房源自《林深时见麓》 票房75元，观影\n人数两人，豆辦上有评论说自己买了70元的票，剩下一个是用了什么优惠只花了5块钱，后另一人评论是买错了退票扣了5块手续费。但后来证实为玩梗，实质该片确实观影人数为2人，但票房仅56元。\n\n`46:39`\n\n可你要说头部电影什么时候上呢？对不起，那就是玄学了。所以这两三年吧，墙外红了，宫斗听\n床时；墙内红了，档期谜语人。这除了说有一个\n什么流量为王的时代之外，还有个原因就是官方的信息它不透明，而那些领域往往又是大家要关心的，甚至最关心的等于先形成了信息供求关系\n上的巨大落差，才给了那些大师们听床遛粉打哑\n迷的空间。\n\n`47:13`\n\n尤其你回到电影行业，为什么谜语人能一开始还\n吸引到流量，因为很多人一度还是准过的。尤其\n在一九之前，那时候过审流程也好，档期安排也\n罢，至少他有那种半公开的消息流通渠道。随着\n一个行业的市场化深入，那市场对讯息的确定性和即时性是必然产生要求的。所以那时候哪怕是\n照顾到片方，您能提前给我们点时问安排的宣\n发，考虑这个档期有其他的竞品，那像预排档期\n跟最后的档期之间一般也不会有太大出入对不对。\n\n`47:45`\n\n久而久之，熟悉门道的甚至能够根据译制周期，它就能判断出外片的定档规律了。所以重点词在规律。如果从某一天开始，那类博主也成谜语人了，那就说明规律消失了。最后还有一点啊，就是对那些观众影迷奉劝一句，不要把希望当成现实，你其实是自己希望他能上，所以看见个打哑谜的，你就觉得是实锤。那人家也有话讲，我又没说肯定是，我觉得那《雷神4》 海报好看，我发它不行吗？你们是自己非得解读的呀。所以我觉得无论是被听床遛过的，还是被什么哑谜骗过的，咱们都不要带着希望找博主，带着答案找论据。有些你今天回头看他能不能上，其实早有定论，梦该醒了。\n\n`47:45`\n\n久而久之，熟悉门道的甚至能够根据译制周期，它就能判断出外片的定档规律了。所以重点词在规律。如果从某一天开始，那类博主也成谜语人了，那就说明规律消失了。最后还有一点啊，就是对那些观众影迷奉劝一句，不要把希望当成现实，你其实是自己希望他能上，所以看见个打哑谜的，你就觉得是实锤。那人家也有话讲，我又没说肯定是，我觉得那《雷神4》 海报好看，我发它不行吗？你们是自己非得解读的呀。所以我觉得无论是被听床遛过的，还是被什么哑谜骗过的，咱们都不要带着希望找博主，带着答案找论据。有些你今天回头看他能不能上，其实早有定论，梦该醒了。\n\n## 第三章·我们·伥鬼\n\n\u003e 关键词：\n\u003e\n\u003e 电影、导演、韩国、主旋律、票房、流媒体、美国、香港、时代、大陆、节目、中国、與论、主席、自由、片子、自由創作、舆论焦点\n\n`00:00`\n\n所谓：认清现实，早做打算。前两期国绕着前四个宇，最后这期呢是说出路，谈谈我们。当然这期\n会相对比较散，因为下面的话题原来是几期的内容，夜长梦多啊，所以我们放一块说就好了。那\n第一个我们，就是曾经创办「我们制作」（陈可\n辛10年创作的影视公司） 的导演陈可辛润了。\n10 月中旬，他在韩国的签山电影节上宣布成立变革影业，准备对准泛亚洲市场拍 20 部网剧。其中近四年的前五部当时就公布了项目名称，包括\n之前作为电影立项，由章子怡主演的 《酱园弄杀\n夫案》也变成了网剧，这事之前很多人聊过了。\n\n`00:46`\n\n值得注意的是，陈导这次还有一个身份上的变化，就是他不仅在空间上我们说润了，其实还有\n在职业上的转行，就是他不再当电影导演了，你\n看这次他的口号叫拍全世界都看的中文剧，等于\n陈导的身份，现在更多是一个流媒体供货商的老板，供应的就是版权剧，其中自己;感兴趣的会自己下场拍。所以这也算陈导暂时息影的一个消息\n了。\n\n`01:12`\n\n但无论如何这个新间一出来的时候，简中的奥论反应都非常热烈。尤其如果说咱们这期的主题就是聊出路的话，那陈导这上来算是用自己的实际行动给指了条路，成了电影圈润学第一人。尤其\n你看他的描述，他绕过了审查，但是我还留在亚洲，那意思我还会继续拍东亚甚至中国的故事，只是投放上不针对大陆市场了，听起来可谓两全\n其美。\n\n`01:40`\n\n尤其说陈导 20 多年前，就有过这泛亚平台的尝试经验，他当时联合过泰国和韩国两位导演一起拍了鬼片《三更》，而且票房也还不错。只是当时他做成一种长期的模式的时候，遇到了资金困难。而现在有了流媒体，毕竟现在的影剧这个藩篱减弱了，以至于新间刚出来的那波讨论，很少有人去提陈可辛变向息影的这么个事儿。的确只要你不纠结作者身份，流媒体时代你当个供应商在资本层面并不难。尤其他说打造全世界都看的\n中文剧，这个放到二十多年前《三更》 那会儿根本不能常态化。但流媒体时代这真不一定了，剧的例子我不清楚。但电影最近有一个就是台湾那\n鬼片《咒》，他在网飞上线之后，一度观看量排到了网飞整体的前三名，这其实是个很值得注意的信息，因为它一定程度上打破了恐怖片深度捆\n鄉地域性的特点。就如果说其他的类型像什么伐木类、家庭情级片，一度排名前三，这也没啥，但鬼片确实不容易。以前就说过这种片子，它吓不吓人，是非常鄉定本土文化的。像西方万圣节、小丑、大南瓜那种在那边非常卖座，但东方\n观众看往往完全无感，而《咒》的成功一定上打破了刚才说的认知。\n\n`03:03`\n\n所以流媒体这几年颠覆了很多电影的固有模式，一部分是相当不好的。比如最近他们要搞什么广告插入的播放模式了，那就是个巨大的反电影。\n但是也有一些算是意外之喜。《咒》就是其中一个，他证明至少国际流媒体平台的确需要来自不同文化区域的作品。所以陈导这个需求判断至少从前瞻性来讲没什么问题。尤其我们知道陈可辛\n他这个选择也非常符合他一直以来的人设，就是一个一生漂泊一生迁徙的人。所以要说润呐电影圈恐怕没人比他润的次数还多。他作为一个香港人，最早其实是润去泰国，然后又润去美国，才润去大陆。所以现在润去韩国，他基本不会有说当年什么咱们下岗从头再来的悲苦。而更像是\n《无依之地》里，女主角又换了一辆房车，尤其她当年从香港润大陆。\n\n`04:02`\n\n这有个专有名词叫北上，应该说他是非常成功的，不仅是对他个人，对整个中国电影他也做了很多贡献。你甚至可以说陈可辛北上这十几年的高低起落，就是对中国社会变迁的一种预言。你\n像他十年前拍的 《中国合伙人》，是以新东方创始人为题材的励志片。结果就在去年，新东方所在的教培行业一个响指灰飞烟灭，新东方老师就此成了带货网红。后来陈导叉派了 《亲爱的》里\n边聚焦的打拐问题，去年年底和今年年初都成为了全社会的焦点甚至痛点。而当时主演那部电影\n还因此拿了金像奖影后的赵薇如今也成了敏感\n词。\n\n`04:52`\n\n再到我们谈过的《中国女排》，也遭遇了第一期\n提到的协审问题，提委当时大量的意见导致了他\n删改重配，甚至是换片名的一系列变故，票房口碑最后也不温不火。而这些大家看过的电影之后，还有李娜，十年前甚至八年前李娜还是大满\n贵冠军，可现在居然他的传记片豆瓣条目都没了。\n\n`05:20`\n\n所以当时很多自媒体提到陈导润的时候，也都明\n着暗着点出这传记片到现在无法上映的遭遇，大家都觉得最后推动导演走今天这步棋的一定与此有关。所以你看新东方、赵薇、李娜连同记录他们的陈可辛本人，真可谓十年一觉中国梦啊。所以新闻网出来的时候，简中当时的情绪非常大，相当多的高赞都在说陈导你走得越远越好，这不是说你有多远滚多远啊，而是说你赶快远离这片伤心地吧。这个情绪里，你甚至能体会出有一点加速主义一种揽炒心理。当然大家也可能是有一种盼望，如果陈导在海外的作品真能获得成功，那是不是会带动更多中国电影人也去投身这种环\n大陆的泛亚平台呢，如果像陈可辛这样的电影人\n才再多走一批大规模的人才流失之后，是不是才会促进相关部门反思自己的管理方式和审查制\n度，倒逼他们回到市场化时代来挽留人才，拯救中国电影呢。从情感上我们都希望这行业越来越好，甚至都不用搞什么大规模人才流失，倒逼改革，现在的局面就足够引起重视了，不是吗？可\n从现实出发，我们还是得看陈导的这个泛亚平台\n究竟能不能搞成，毕竟只有搞成了才有后面那一\n系列的剧本嘛，当我们往回看的时候，像陈导这种属于大环境变化，甚至直接说是申查原因被迫出走的，半个世纪来，都很少有成功的。\n\n`07:08`\n\n这里要做个区别，你像墨西哥三杰或者李安那种，都不是被迫，更像这样的例子，其实就是《亲爱的同志》 的导演康查洛夫斯基。康查洛夫\n斯基是典型的因为遭遇申查问题，很多就都被禁了。所以没办法，80年代他就去了好菜坞。结果到好莱坞就是当个类型片匠人。你要说整个东方\n集团在冷战之后，润出去还成功的，可能天花板\n就是波兰斯基。但波兰斯基美国经历的结局我们也都知道了。别说那些人了，就是陈可辛自己他\n当年在北上之前是先润的美国去好菜坞就拍了一个片子叫《情书》，不是岩井俊二那个啊，那片其实是啥？是当年斯皮尔伯格捧他老婆的，斯皮尔伯格自己的梦工厂出钱，然后让自己老婆出演。你想想陈可辛当年可是刚拍完 《甜蜜蜜》\n啊，润出去的第一步就给人家伺候老板娘，所以那段对他的打击特别大，就你原来是一三流行业的顶流人才，现在去了人家好菜坞，那行业是一流的不假，但你只能千三流工作。当然也有人说\n陈导之前北上那么成功，你也说了，现在去韩国\n也只是他的下一站，那应该没什么问题。但是北\n上能这么成功，更多是因为陆港那段特殊的时空\n关系，很简单，就是陆港当时的电影工业有巨大的技术代查，我们第一期说了大陆起初是不具备\n市场化和类型化的能力的，所以港片导演当时过\n来就直接能技术扶贫，这个道理我相信大家都懂。就像原来中超非常火的时候，随便来了个巴西二三流的球员到咱们这直接就是大杀四方。\n\n`08:56`\n\n可现在陈导润去的是韩国，韩国需要你去技术扶贫吗？或者说他现在准确说是给流媒体供货，你是给网飞这种国际平台供货，那网飞也不需要你\n技术扶贫啊，这个跟当时香港导演来到一片蓝海还完全不一样。尤其我们看回这次他这个泛亚平台台的项目，其中有俩是韩国现在最火的所谓韩漫\n来改编的，一个叫《二班李喜舒》，还有一个叫《ONE:高中英雄》。就这俩东西，你说如果改成\n中文剧，它原著的辐射力能不能包括到，包括会\n不会出现什么《青禾男高》那种水土不服，这咱们打问号。那如果说你干脆就拍韩剧，那人家韩国自己人不比你熟悉，咱们就说他不当导演，现在是制片人是凯文费奇，那费奇肯定也是懂漫威\n也是懂美漫文化的吧？可你现在去韩国改编人家\n韩国的漫画，我看不出这个不可替代性在哪。尤其韩国那个行业，人才太卷了，咱们这出了个药\n神（我不是药神）和药神导演如获至宝，说这是我们的《辦护人》。\n\n`10:07`\n\n那你知道《辩护人》 本人的那个导演现在干嘛去了吗？前两年拍了个《铁雨2》 扑街之后，马上就边缘化了，根本没人记得他叫什么，人家是那个竞争程度，那还是韩国自己人呐。所以我也不是针对陈导，就任何人咱们说现在有谁敢说去韩国，你有当年香港到大陆的优越感吗？所以回头看香港电影，兰时对于大陆的技术代差那才是特殊时期、短暂时期是无法复制的。尤其那一圈当时称赞陈导的文章里有个标题，我印象也特别深\n说陈导这次终于获得了自由创作权，这事就更有意思了。他是怎么获得的这个自由创作权呢？哦\n去韩国就获得了。可我们想想曾几何时，在朴槿惠他爸爸包括后来全斗焕那时候，韩国也没什么\n自由创作权对吧？那时候动辄就给你扣个什么朝\n鲜问谍的帽子，您就南营洞了 （20世纪80年代，韩国民主化运动人士因反对军政府独裁而被\n带到位于南营洞的一问密室，连续受22天拷\n打），说你递刀子你也就臭了，跟现在咱们差不多嘛。那后来为什么有了自由空间呢？那是因为人家一代人自己努力甚至拿命换来的。\n\n`11:22`\n\n就前几个月还有个韩影的新闻在简中破圈。就韩国那新一任的右派总统一上来就接见宋康浩，跟他们说我们对电影啊只支援不千涉。唤呦激起了\n咱简中的一片羡慕之声啊。可你也不想想，他那\n总统倒敢不那么说呀，上一个右翼总统朴槿惠上来就给宋康浩开了 黑名单，什么结果呀？被拉黑的飞黄腾达，朴槿惠白己论为阶下因。\n\n`11:52`\n\n那是韩国人躺赢赢来的吗？那是人家几代人努力\n拼出来的自由创作权，从社会到行业，从光州到光头。如果以前韩国的精英们要不说把自己的电影环境改造得像别人一样自由，而是直接跑出去去吃别人的自由红利。那在另一个编号的平行宇宙里啊，可能奉俊昊就真是个面包师了。大家都知道他毕业那会儿，因为电影行业非常糟糕，他害怕自己混不进电影圈，吃不上饭，所以先给自己烤了个面包师执照。这不是个梗，这是个真事儿，对不对？陈导这个事最大的遗憾就是在这儿。你包括说他建立的那个泛亚平台，它里边那好多资源整合的功能，看似好像石破天惊。\n\n`12:43`\n\n但其实对应电影界，原先金马就有这功能，尤其他那几个同性恋项目，鬼片项目，这原来去金马\n创投，只要你改回电影啊，那肯定有希望，金鸡\n是真不行啊，你看一个杀夫案，一个同性恋还一个鬼片，这大陆确实都拍不了，这也不是咱非要\n拉踩，金鸡上肯定过不了，但金马原来是可以的，结果呢现在直接去釜山了。\n\n`13:09`\n\n所以这里我就要说另外一个事儿，就和陈导这釜山行同一时间发生的。是许鞍华也是香港电影的代表人物，他接任了今年金马的评委会主席。这\n新间看似无足轻重，尤其在简中引起的反响也远不及陈导。我看最多的说法无非就说，哟怎么叉\n是你啊，当年周冬雨马思纯双黄蛋的时候，你不就当过一回对吧？可所有人忽路的一点，周冬雨\n马思纯那届还没有后来的言论风波。许鞍华其实\n是一八之后第一个接任评委会主席的香港人。大家有没有想过他接这个职位之前顶着多大的职业\n风险呢？我们知道 19 年杜琪峰本来都官宣接金\n马主席了，结果后来迫于压力辞任，而且去了金鸡。更重要的是，就今年9 月份的时候，香港影业协会刚刚又对所有香港电影人是否去金马又发了警告。\n\n`14:09`\n\n其实咱们说一八之后，大部分那大陆有生意的港星港导早就自觉抵制了。但这次香港行业协会还又特地发了一遍警告，说什么金马己经日趋政治\n化了，如何如何告诚港人不要去说，以免招致得不偿失。明着就这么说了。那你觉得在杜琪峰也\n辞任过，今年9月香港行业又特地发警告的情况\n下，徐导勇于接任金马主席，这和16 年能同日而语吗？而他这个选择会给自己带来什么样的风险？尤其在审查越来越严的大陆，它未来的片子\n是不是还顺利？我相信许鞍华比任何人想的都清楚，可在这么多的前提下，她还是做了这个选择。\n\n`14:54`\n\n而单从行业的角度来说，让两岸三地的华语电影\n恢复哪怕一点的文化交流，尽自己的一点力量结束几乎屏蔽彼此的状态。这对华语电影难道不重要吗？《哈利波特》里邓校长说过一句话;黑暗时\n代就要来临，每个人都要做选择，是正确的，还是轻松的。这其实就接上我们第二个话题;走还是留。\n我相信这一段所有的从业者可能都动过润这个念头，无论是从这个行业还就是字面意义上的润，可能你听我前面刚才说的话，好像你觉得我对选择润出去的有意见，我没意见。相反我会觉得如果你润出去，但还是继续从事电影有关的工作，或者先学，以后说不定机会会很多。\n\n`15:49`\n\n陈导我不这么说，是因为他以后就不拍电影了对不对，他那等于是又润又转行。那这之后说白了\n跟我们就没有什么关系了，就跟说你投资一个体育公司一样，你有钱你投什么都成对吧。所以说\n回电影，你如果说出去学点什么，甚至说想找点\n更多的机会，我觉得至少比陈可辛当初润美国或者俄罗斯那批还是开放了一些。李安哪怕我们说\n这是很成功的，但他之前是花了半辈子才拿到的\n导演奖，赵婷两到三部现在就拿到了。所以我对润出去没有意见，包括思源那天说之前一个咱们\n这边高口碑但是票房不太好的华语片，其中一位\n女性编剧，现在他在美国导演的新项目刚刚找到了马丁斯科塞斯给他当监制。虽然我们说斯科塞\n斯是天天监制，但对于一个年轻的导演来说，那确实很大机会了。就是因为我们说现在无论华裔、女性这些题材在美国是能进入主流或者至少能进入颂奖季的。说白了，老导演他也想跟得上时代。就跟我们说皮特(布拉德•皮特）也投了那个 《米纳里》一样，对不对？帮助是相互的，只是吧，现在大家太把润当成一种爽文序式了，你包括就好多人劝我，对吧就前几期发完之后平台没了，就说你跟他们置气千嘛，润就完了。润\n就一个字，咱要玩梗的话，我能比你编出更多的来。但是如果咱们就严肃的聊这事儿，谁能一个跟头折腾到十万八千里以外头？这里没有爽文叙事。\n\n`17:25`\n\n我们严肃的看现在已经干出成绩內这年轻的一批\n华人导演，像《瞬息全宇宙》 啊什么《青春变形\n记》啊，再到前几年我们谈过的《摘金奇缘》，它跟早期的华人电影已经完全不一样了。这个变化必须得提到。借用新加坡总理李显龙先生对润\n道新加坡的人讲过一段话，这几年因为众所周知的原因，大批的华人润到新加坡。首先李先生喊\n话的时候，她的称呼就不用华人华侨，甚至不用华裔，他用华族。他就奉劝这些刚到新加坡的华族说，你们不要想着落叶归根，要落地生根。这个话我觉得说得很有意思，别看两宇之差，謬之千里。尤其这个概念放到刚才那几个电影，我觉得非常合适，其实你完全可以把它们划归为美国的华族电影。你说我们中国看着觉得挺别扭对吧，过誉了吧。这我觉得很正常，因为它就跟中国一毛钱关系没有。相反，就这几个片子它是真正做到了在美国落地生根了。\n\n`18:37`\n\n你看 《瞬息全宇宙》，他那核心冲突两个，一个是杨紫琼跟他女儿，还一个就是跟那美国的国税\n局大妈，那是最典型的美国人和体制的矛盾，他最后所有的和解也都在那，你看这中间都宇宙洪荒了，就是为了让国税局大妈报税上竞限几天。\n所以他为什么能成a24 最卖座的电影？其他 a24\n还大部分都白人主角呢。但就这个最卖座，因为它全美国都能代入的了，而能拍出这样的，就是因为他们能落地生根。\n\n`19:12`\n\n那导演叫Dan kwan （关家永）对不对，这都是美国华族电影，包括之前《米纳里》那也不是韩国电影，那是美国韩族电影，这俩算一类，而不是《寄生虫》跟《米纳里》算一类。这《卧虎藏\n龙》跟《瞬息全宇宙》算一类，说都有杨紫琼，不是的，《米纳里》跟《瞬息全宇宙》都是美国少数民族电影，而这类电影现在和以后会越来越\n受欢迎，所以润出去的能这样落地生根，以后大有可为。她一定比当年什么张爱佳严歌苓他们苦\n哈哈的拍 《少女小渔》，那个时候机会多得多，就哪怕李安他很成功了，但是他那一代人实话说也没有做到落地生根。他一拍美国核心 文化的东西，像伍德斯托克（制造伍德斯托克） 他也露怯的，尤其都是大麻呕地的视觉场景，《瞬息全宇宙》嗨疯了一样的表现力啊。\n\n`20:04`\n\n那不是导演技法上的差别，就是文化上、习性上有本质区别，你能做到这个，舞台就是你的，那\n这是润出去的。那我们这没走成对吧，这贫贱不能移，那是不是就什么都做不了了对吧，也没舞台了，躺平任人宰割就完了，是不是呢？我觉得不是。尤其你说躺平，现在这也是高频词，躺平可以，但躺赢不可能。\n\n`20:32`\n\n咱们说作为观众的我们，这是第三个我们了，咱们至少可以用脚投票。第一章的时候说现在电影\n是民企国制狀态，但是这个状态这个模式要靠两个要素维持，申查和票房，审查我们决定不了，票房为什么不能？我给你讲个数据，今年前 10\n个多月，所有主旋律院线片的票房总额你知道是多少吗？是 88 个亿，还有一个多月我觉得刷到\n90亿没有什么困难。就这还要遗憾 《长空之\n王》没有上，当时他撤片的时候是预售第一，不然的话主旋律 10 个月破100个亿毫无悬念。所以如果有人问你上期说开启分账制引进美国大片的94 年，是因为中国电影院数据太烂，那现在不烂吗？诶不烂，对主旋律来说不烂，甚至还是最好的年份。\n\n`21:29`\n\n那么这问题就来了嘛，这88个亿都是电影局的职工自己拿工资凑上的吗？还是说于老板文牧野\n饶晓志导演自己掏腰包刷的数据吗？刷出 88个\n亿来，难道不是我们所有观众共同完成的丰功伟绩吗？我再给你说个对比。2018 年那一年，引进篇上有复联了（复仇者联盟了：无限战争）有\n《头号玩家》《碟中谋6》，国产片出了药神，包括姜文的、毕赣的、贾樟柯的也都在。可那一\n年刚才提到的主旋律的票房总额还不到50\n亿，过亿的主旋律只有两部，《红海行动》和\n《厉害了，我的国》到第三名 《浴血广昌》就只有9000 多万的单片成绩了。\n\n`22:16`\n\n18 年大盘影史第二主旋律 40 多个亿。而在很多人眼里，中国电影全部玩完的今年，主旋律票房\n是18 年的两倍还多。其实你知道吗？去年更\n高，去年主旋律是破百亿的，因为有一个影史第一的《长津湖》，所以只要主旋律保持这个数\n宇，是绝不可能再需要拿什么引进片当速效救心丸的。防疫三年是很多业内人士觉得中国电影最差的三年，但也是主旋律电影最好的三年。\n\n`22:52`\n\n诶最近不是这个金鸡奖来了个周冬雨奚美娟之争\n吗？一个人说过去是最好的十年，一个说过去是最困难的三年。大家说你们俩怎么不统一？意见\n上来说，我觉得人家两个说的都没错，就看你怎么理解了对吧。一个金鸡咱也各自表述，我现在\n尤其不喜欢的一句话是说，哎呀我们怎么摊上了\n这么一个时代，说的好像这事儿纯靠投胎一样？\n当然如果您就是那种特别满意现状的，您觉得回到十七年时期也挺好，wg时期更不错。没问题，但那种我觉得也肯定不会说，摊上这么一个时代对不对？我最不能理解的反而是一方面也说\n不满意现状，一方面也去支持的，天天完了就发什么中国电影全部玩完的梗图。那你这不满算什么呢？啊？撒娇吗？不满意就不要配合，人家甘\n地说非暴力还知道不合作呢。\n\n`23:53`\n\n那配合的就请您把姿势配合到位，别又当又立，这88个亿的票房不就有你一份吗？抱怨什么呢？你说这里是体制的原因，我前两期也谈过了，我没有回避吧？但你要说只有体制的原因，那我不同意，民企国制毕竞还不完全是国营制片\n厂模式啊，票房不是不重要的，反而国营制片厂\n人家当时是用国家财政拨款去拍宣传片，以近乎免费的价格给民众看。\n\n`24:27`\n\n说到底吧，那时候拍出 《战狼》的人和拍出 75\n块钱票房电影（林深时见麓，实质为票房56元）\n的人，可能工资待遇上完全一样，可民企国制能维持，需要的是巨大的民间认同。所以这时候就\n别往外摘自己了，满意这个时代的，这盛世如你\n所愿，但说我们怎么摊上这个时代的错，我们与时代互为因果。而对于那些还没转行的从业者，也是一句期盼，期盼咱们啊不做低鬼，什么叫低\n鬼，是阎王旁边的小鬼吗？不准确，是被老虎咬了之后，又帮着老虎去吃下一个人的鬼。也就是说他在某一个时态里其实还是受害者，然后摇身一变，也成了施害者，成了帮凶，端传媒有篇报\n道是深入征兵令之下的俄罗斯，说普京跟咱现在一样，他是把他征兵的地区也分为高中低三个风险。这像不像高风险，就几乎动员一切。但就有一个问题，就俄罗斯那数据网它根本没办法做得\n密不透风。所以你南管设成什么风险，都有那种\n鱼龙混杂的地下城。所以大量收到征兵令的人，他可以躲到那种地方去打打黑工，也算逍遥快活。而这种情况在中国绝对不可能出现。\n\n`26:20`\n\n还有我们这一张张电影票，让中国电影走到今天\n不是吗？所以回到校长那道选择题是选正确的还是轻松的？还有那些拿着钱说好话的啊，我觉得这就已经不是说正确还是轻松的问题了。你这个\n牵扯到对错，就你如果真的是特别民族主义的，那您也不该收钱对吧，说那种洞房夜绣红旗的，我觉得没问题啊，人家那觉悟咱跟不上。但你要\n是是真希望中国电影就跟那电影报里说的似的，正向着稳中向好的正确方向前进。那你应该多掏钱，你怎么能收钱呢？你那是给主旋律电影增加不必要的宣发成本吗？别到这时候说一句，哎呀我发一条也改变不了什么。诶一个评论能不能改变什么，就算不好佐证也可以反证，比如你要真\n什么都改变不了，那就应该没片方给你钱不是吗？你这说白了是以广告工作，你要以广告公司\n也跟你甲方金主爸爸说，我给你们做这广告根本\n改变不了什么，你看对方什么反应，操那娘把钱还给我，那改变不了什么我找你对不对？别现在\n一谈大环境了，跟那我也改变不了什么，您客气什么呢？现在的情况是真变了，是每个人都能体\n察出的那种情况变了，尤其主旋律这块，挣这种钱是竭泽而渔，是杀鸡取卵。\n\n`27:47`\n\n我就说一点啊，国产片如果以后都成了样板戏，你的收入就断了，因为样板戏不需要给你钱，你也不敢说它烂，对吗？原来一个春节档有红海，有唐探的时候有你的用武之地，因为那是市场，而我说竭泽而渔是因为你在助推去市场化，过去的事已经过去了，就这样吧。但是以后希望我们都可以用脚投票，那连夜绣红旗的你也应该用脚\n投票去多掏钱，而不是反而抬高主旋律的回本门槛。你那是公贼是硕鼠，而认为市场化，而不是样板戏方向才是电影可行之道的朋友也该用脚投\n票，以后再出现这种情況，就是往我们脸上吐口水。\n\n`28:38`\n\n那最后说到的我们吧，就是我们的节目。其实这半年以来，我自己是陷入到一个巨大的无力感和\n挫败感当中，尤其对我自己，非常非常非常的失望。我记得三年前我们做过一期节目，当时也引\n用过一句话说：不要把这个世界让给你所鄙视的人。我记得那正好是疫情初期做的吧，李医生\n（文亮）刚刚去世那会儿，而你现在回头看防疫\n三年，我觉得我们都还是让了…我还是让了，这是我最没办法面对自己的。\n\n`29:17`\n\n前两天我看到那个拆影院划银幕的视频的时候，我也特别难受。有一种你看着这艘船在往冰海开，但是你无能为力。在卡梅隆那电影里你好像\n就是那甲板上拉琴的，你改变不了这船往哪走，所以所有你做过的事情，说过的话都会回到一个天问级的问题。有用吗？有用吗？我估计这三期我放出来好多人也会重复这个话，说你说的这些有用吗？你相信我，我特么比你问我自己的次数要多得多。所以这半年我哑口无言，反而你看都\n是这一艘船上的人，那大部分真有先知先觉的。\n在你还在那懵逼的时候，人家已经撤了，电影里\n头一批就是那些头等舱的贵妇们对吧，他们的救\n生船那是第一批下水的，到后来最后那几艘超载了都翻了。但是给头等舱预备的救生船，竞敞程度得和在泰坦尼克号上一样，我这腿得伸开喽，而且船走的也得早，为什么呀？赶紧得滑到离灾\n难现场远一点，不然最后翻船的时候啊，那水花\n就溅到我那身衣服上了，后边哪怕坐不上头等舱的，那也有抱起别人家孩子蒙混过关的对吧？你\n看那女主角未婚夫说我这是她唯一亲人了，所以混上那妇女儿童才能上的船对不对？这都是明白人。反而电影里就那四个拉琴的，还他妈傻逼似的跟甲板上在那演。\n\n`30:48`\n\n所以大家就都问嘛，你演半天有用吗？所以你看，甲板就他们自己呀，演着演着一度就停下来了呀。就说你看这甲板上人都各奔东西，抱头鼠\n窜了，谁还有心思听音乐呀，要不然咱就都收拾东西散摊子就完了。好几个已经其实收拾好乐器\n转身就走了。可你看后来卡梅隆写了一笔，就所有人都转身离开了，但有一个人还站在原地，也就愣了一会神吧。诶又把自己乐器拿起来了，接着演。从纯粹自私的角度，这人物写的根本不对，说不通，这得放反派影评缺点环节聊。\n\n`31:30`\n\n你说这时候的人了，哪怕头等舱你赶不上，你赶紧找个别家的孩子抱走，混上后边的船也行啊，像这种人，不就是刚才我说的许鞍华吗？冒着那么大的风险，你还留在华语电影界千嘛？你还去金马你图什么呢？图一金马主席的光环。别说她刚当过了，她拿过的金马都是影史上最多的。你说她图什么呢？是真等着《投奔怒海》啊？那是电影界的，我也说个写稿的，李大眼，这我们原来那一代的人都特别熟。\n\n`32:05`\n\n十年前，就一批所谓公知嘛对不对？那个时候包括我自己在内，都对他们写的文章有一定动机上\n怀疑，因为十年前那个與论跟现在太不一样了，那时侯好像你甚至只有那么说你才能有流量一样。当然后来我们也知道大眼全网就被封杀了，社死了，什么号也没了。可就这半年在出现那么多防疫灾难、人道危机的时候，诶大眼突然叉出来了，然后就一篇一篇的就那么写，你想他原来\n微博，博客早都炸了，你就看他还每写一篇注册\n一个新号，完了注册一个炸一个，炸一个注册一个，西西弗斯啊这是，到最后就以那种说快闪的方式，就弄个什么二维码。\n\n`32:48`\n\n完了之后，人一扫出了他那文章，然后纯靠人肉\n转发，他还特有意思。他还不像那别人，他就不去墙外，就在墙内这么传播，他的表达是另外一回事。但你分析他这么千这动机你会发现和许鞍\n华一样讲不通，就你图什么，你连能站住脚的公\n号你都没有，你连打赏都拿不到，然后不断换名字换 id, 也没有人知道你是谁。\n\n`33:12`\n\n咱就说现在哪怕宇宙尽头是带货，带货你也得先有自己固定的私域场域。他现在就这么一篇篇快\n闪打游击，完全是去中心化。说白了除了危险，他什么都带不来。可就反而是这种时候，我们能了解到一个人的本心。所以半年过去了，你说那个天问一样的问题，我想通了吗？实话说还是没想通。就像从自私的角度来说，许鞍华图什么，大眼图什么，还有更多，能提名字不能提名字的人，他们图什么我都没想通。原来也常提一句话：\n时穷节乃见。这艘船上的众生百态一定都会被记录下来，我做不到省然不动啊。我也做不到第一个拿起乐器。\n\n`34:01`\n\n可我能听见他们的声音，所以说这半年干嘛去了，一句话总结就是在甲板上瞎转悠，然后听见了他们的琴声，做了个迟钝的转身。诶就我可能这转身速度比那马奎尔还慢了半拍。所以回到我们这节目，几年来我也特别焦虑，一直焦虑这个号到底能不能保住？哪怕你看就最近我发了那一篇小鹅通也没了之后，好多人也都跟着担心。甚至现在感觉一部分听友的安全焦虑比我自己都大\n了，我其实觉得很不好意思，尤其看到大眼，尤其看到那些人，我觉得到最后奥论焦点好像就偏\n移了，呈现的是什么内容，那期节目是说了什么都无所谓，最后就忙活我这号，大可不必。\n\n`34:52`\n\n你看那个 《雷神3》挺一般的一电影，但是它里边讲了这么个事，就说那锤哥一开始也特别纠结，大魔王要来了，我那星球要毁了，阿斯加\n德，阿斯加德要保不住了，对吧怎么办啊这个，纠结、焦虑甚至特别恐惧。可如果说锤哥也有个孤光的话，就是他用一整部电影的时间。最后搞明白了一件事，就他发现原来阿斯加德可以不是一个地方，而是一群人，甚至是一种精神。反而\n如果单纯为了守住这个地方，甚至还要不惜一切代价，那才是本末倒置。这个剧情放今天挺合适的。对我来说，如果为了保住一个赛博面具，要付出太大的妥协，那能守住的只会是一个虚名。\n所以都不用在意说某个节目留没留下来，或者这个号还在不在，反派只是个名字，名字不重要。\n朋友，阿斯加德是群人，那回到开头，润出去的，希望你们落地生根，留下来的咱们不做伥\n鬼，能与诸位一起演奏是我的荣幸。\n\n----------音乐----------\n\n«Nearer My God To Thee»\n\n(著名诗歌改编的小提琴曲，同样也是波米借喻\n《泰坦尼克号》 里沉没之前，乐队演奏的小提琴\n曲)\n\nGentlemen it has been a privilege playing with you tonight.\n\n## 网友评论\n\n### 微博@袖珍窥镜\n\n看到很多人说韩影在自由中腾飞二十年，不是的。韩国电影电视新闻在过去的几十年里饱受磨难，前两任总统都在缩紧言论，压制艺术创作。深度调查节目被废止，新闻访谈被改成娱乐节目，记者和主播被开除，导演和演员被拉进黑名单，很多优秀的新闻人和电影人消失在了公众的视野里。他们的抗年史也能拍成一部好电影。\n\n诚挚推荐大家看纪录片\u003c共犯者们＞，让我泪流满面过，影片最后被开除多年，已身患癌症穷因潦倒的记者回答 “我们的抗年到底有何意义”，他说，“尽管在这几十年里，许多抗争争的人们，青春啊，人生啊，都消散了，我自己也是一样。但至少，在那黑暗的时节里，我们没有沉默。就这一点，就足够有意义了。\"\n\n\u003chr class=\"slender\"\u003e\n\n被废除节目的制作人哭着放完最后一期节目，在自己婚礼前被抓走的节目女负责人说\"大家坚持住不要认输”，被停职也要说完自己新闻结语的男主播，被开除去滑雪场铲雪的九个深度调查节目 pd 记者和主播，还有片尾的 300 多位在十几年问被解雇，停职，不当调动的媒体人。\n\n大家都是领着固定薪水的电视台公务员，是坐着地铁上班，贷款买房，上有老下有小的普通市民，是可以心安理得地说出“斗争这种事跟我没关系我也要生活”的人，但因为是记者，是媒体人，也会一起去冲警察国的人墙，去挡在车前跟检查官对峙，为上司为同僚呐喊，一遍又一遍地集会，罢工，抗议，说“新闻是为了国民，如果不让媒体提问，国家就完蛋了。\n\n纪录片停在了 17年的罢工，那是最后一次抗争，也是黎明前最后的黑暗。新的时代来了，看起来是更好的时代。被不当罢免的调查节目总导演成了 mbc 新的社长，当年黯然离开时事放送的主播孙石熙，在揭露朴槿惠后掌舵itbc。一代又一代青瓦台空降的亲信社长终于停止了，媒体人们回到了岗位。但那些尸位素餐的社长们，也曾经是这些记者的大学教授，前辈，领路人，但勇士都变成了恶龙。媒体人\n们怀念卢武铉，但谁也不知道文在妟能否一直继承他的衣钵，下一任总统对待媒体的态度是怎样，抗争也许永远不会停止，应该是一定不会停止。\n\n影片最后那被开除多年身患癌症的记者住在乡下破旧寒冷的小屋里，片段闪回着他们当年意气风发地坐在贴着mbc news 的车上，正在去往检察院。那时他们以为争取自由的战役是必胜的，不知道眼前等待着他们的是黑暗中痛苦的十年。导演问他，我们的抗争有什么意义，他说：尽管在这十几年的岁月里，许多抗争的人们，青春啊，人生啊，都消散了，我自己也是一样。但至少，在那黑暗的时节里，我们没有沉默。就这一点就足够有意义了。〞\n\n### 微博@光明处是你我归处之重生版\n\n之前转的那条有关韩国电影的内容，让我想起《可能性的艺术》中，刘瑜老师专门用一章来讲韩国电影和社会改革的关系。简而言之，抗争的过程断断续续进行了30年，充满艰难险阻，无数人付出了惨烈的代价。前一波人被抓，后一波人又跟上，所谓“排队入狱”。\n\n有些东西不是天降的，更不是恩赐的，它是一代代人执着地抗争、用血和泪换来的。对于他们的自由，只表达羡慕，不谈论代价，好像只是我们运气差，这太没道理了。正如波米第三期所说：“我们与时代互为因果。”\n\n在这一章的结尾，作者还谈到了《1987》。电影中一个女孩劝她暗恋的男学生不要去参加运动，质问他：“你以为你这样做，世界就会改变吗？” 男学生回答：“我也想啊，但是不行，因为心太痛了。”\n\n刘瑜写道：“心太痛了，可以说，一语道破了启蒙观念的真正起源……这种源于道德直觉的正义感有种令人敬畏的天真。你会发现，当所有政治的泥沙沉淀、所有理论的波涛平息、所有流行的趋势过去，最终，这种无与伦比的天真还是会从水底浮现。它熠熠的光芒，还是会诱惑你向它伸出手去。” \n"},{"slug":"how-to-narrate","filename":"2022-10-03-how-to-narrate.md","date":"2022-10-03","title":"转载 | 《叙述》","layout":"post","keywords":["doc","html"],"excerpt":"近日在喷嚏网发现了一个讲如何写记叙文的系列","content":"\n\u003e 近日在喷嚏网发现了一个讲如何写记叙文的系列，但是给出的链接已经过期，通过搜索引擎找到了豆瓣用户[username太长了](https://www.douban.com/people/usernametoolong/)的转载。([https://www.douban.com/note/509996701](https://www.douban.com/note/509996701))\n\u003e\n\u003e 转载日期在 2015 年，豆瓣的发帖者称作者是 xilei, 给出的原文链接也来自喷嚏网，也已过期。\n\n\u003chr class=\"slender\"\u003e\n\n## 【叙述-1】厕所的故事\n\n\u003e xilei 发布于 2009-3-1 14:36:00\n\n### （一）\n\n小时候，看电影的时候，我一直有一个疑问：为什么电影里的人从来不上厕所？\n\n那时，我还是个8、9岁的小男孩。学校里还经常包场看电影。小孩子好动，看电影前总是乱跑。电影放到一半了，才想起好像应该去上厕所。\n\n那时，好看的电影很多：《红孩子》、《地道战》、《平原游击队》、《闪闪的红星》还有《黑三角》。尿憋久了，忍不住就往电影院后面的厕所里跑。每次都是摸黑横穿过排椅，猫腰跑到最后，掀起左边的布帘，杀将进去。\n\n有时，晚上也做梦，有人追。自己在前面跑啊，跑啊。怎么也找不到厕所。\n\n白天的时候，回想起来。才觉得自己发现了一个天大的秘密：\n\n自己从来没有在电影里看见有人上厕所。就是写有男、女的那种。\n\n这念头只是一闪而过，觉得自己思想觉悟不高，有点低俗了。电影里都是革命英雄人物。他们每天都在忙正事。哪好意思象小屁孩那样，一天到晚没事，就想上厕所。\n\n我想，电影里不谈厕所的事情，才是正常的事情。厕所都是无关紧要的事情，不好意思谈。\n\n后来，看电影就习惯了。再也没想过那个问题：\n\n为什么电影里的人从来不上厕所？\n\n### （二）\n\n长大后，看《真实的谎言》。突然发现，电影里的人居然还是可以上厕所的。\n\n电影里有这样一个情节：\n\n有人要杀施瓦辛格，老施从容地走进厕所里，对着洗手间的镜子，从容地洗手。他预先把一个伪装成肥皂盒一样的袖珍摄影机对着门口。门外和他背后的人都干些什么，在他的特工眼镜里，一清二楚。\n\n那个追踪过来的杀手，走到老施的身后，掏出枪来，指着老施的后脑勺，正好扣动扳机。说时迟，那时快，老施抢在子弹出来的前面，头一低。然后，反手给了杀手一家伙，把他就给解决了。\n\n后来，又有人追杀过来。老施在厕所的隔间里，躲来躲去。杀手的子弹象水枪一样，一排排一阵阵扫过去。厕所里精彩的枪战定格在这样一个画面中：一位正在上厕所的老者，战战兢兢地打开隔间门。裤子还在脚下，他吓坏了。不知道发生了什么。\n\n我这个乐啊：这老施太帅了。导演也太可爱了。可算看见电影里的人上厕所了。\n\n这是我印象比较深的一次电影记忆。好比如说之前，你发现一些东西怎么从来没人碰过，你会以为：肯定那里面有什么禁忌和秘密。\n\n结果，有一天，你发现：怎么就不能碰呢。看吧，就算是厕所，人家也可以用的那么好。\n\n再一想，也很简单：既然在生活中就存在，为何就不能在电影中存在呢？\n\n### （三）\n\n后来，电影看多了。才发现电影中的厕所，其实，跟生活中的厕所的用途不大一样。\n\n生活中的厕所，就是生理意义上的用途。而电影，则是一种转折的秘密结构，或者是一种意外迭出的神秘角落。\n\n在《疯狂的石头》中，那个假装断腿打上石膏骗自己父亲的儿子，在厕所里得意洋洋地打电话。他不知道外面正站着七窍生烟的老爸。这时的厕所，是一个很容易泄密的地方；\n\n在《三峡好人》中，赵涛就是在洗手间墙上的海报上，了解到了情敌的秘密；\n\n在《非诚勿扰》中，葛优用手抹去脸上的水，对着镜子，心里说：豁出去了。他走出洗手间，跟舒淇讲他过去的故事。\n\n在导演们看来，厕所是这样的一种地方：\n\n一个人面对自己，短暂休息的机会；\n\n一个意外事件发生的秘密场所；\n\n一个用来泄密，发生转折的时间和空间。\n\n所以，重要的，是不是电影中的人要不要上厕所。而是，电影的故事需不需要他们上厕所。\n\n如果软弱的人，需要面对自己，给自己打气的话，他们就上厕所；\n\n如果有些事情不好交代，或者需要一个承上启下的引子的时候，他们就上厕所；\n\n如果需要枪战的时候，有两个比较好的选择，一个是楼顶，另一个就是厕所。\n\n### （四）\n\n有一次，儿子给我说：老师说，有些东西好写，比如说，一件最难忘的事情，或记一件好人好事，或者是某年的春天什么的，就好写。再比如说，让你写厕所，你怎么写呢？\n\n估计大多数人都会写成：在厕所里发生的一件好人好事。某个同学生病了。其它的同学学习雷锋，自告奋勇，发扬互助精神，帮他完成任务。最后，得到了老师的表扬。\n\n我说：“其实，写什么都可以。没有什么禁忌。关键在于你怎么写。你要明白你为何要写它。”\n\n我就跟他讲了关于厕所的一些想法。“有时，事件发生的地点，是有特别的意义的。或者因为真实，或者因为叙述的逻辑需要。当你觉得一个东西，不便于直接书写的时候，你可以把它放在一连串的事件中来看。或许它什么都不是，只是一个架子，只是一个纽带或者转折。讲什么很重要，但如何讲也是非常重要的。你得抓住一些特别的东西，把它直接写下来就成。”\n\n\u003chr class=\"slender\"\u003e\n\n## 【叙述-2】假如苏东坡和陶渊明来到现代\n\n\u003e xilei 发布于 2009-3-8 15:03:00\n\n\u003e \n\n### （一）\n\n本周末，儿子的家庭作业要写一篇作文。题目是：《假如苏东坡和陶渊明来到现代》。\n\n我喜欢这样的题目：有挑战，也很有想象的空间。\n\n早上起来的时候，我看见儿子已经在开始动笔了。我很想知道，他会写些什么呢。但是，我拿定主意，在他写完成之前，不要按奈不住自己，提前给他什么想法。\n\n反过来，我给自己出了一个题：如果这是我的作业，我会怎么写呢？\n\n### （二）\n\n首先，做一些随意的，但是适当的假设和推理：\n\n苏东坡和陶渊明都是古代的人了。如果他们来到现代，肯定有多东西都没见过。\n\n苏东坡会问陶渊明：家乐福是干什么的啊？什么东西叫法国啊？\n\n陶渊明说：咱没见识过。走，去看看先。\n\n.....\n\n他们也没看过电影。放电影前，看见周围的人手里都拿个小盒子，凑在耳边说话。\n\n电影放一半了，进入到卧室部分，苏轼说：世风日下啊，世风日下啊.....\n\n.....\n\n换了一部《后天》，陶渊明说：现代的人越来越不象话了，你看他们把气候搞成啥样了。能跟我悠然见南山的时候比吗？\n\n.....\n\n信马由缰后，罗列出一些素材，最简单的办法就是：想想这两个人会是什么性格，他们在现代的生活中，会有哪些不适应，会有哪些冲突，或者可以接受的地方。\n\n接下来，就是把这些松散的东西，组合在一起。\n\n换句话说，想归想。最终，你得把这些东西用一种形式串起来。给大家讲一个有点意思的故事。\n\n讲故事，就是寻找一种叙述的结构：\n\n你得有一种符合逻辑的讲述方式，把你认为重要的那点东西讲出来，让人们感觉是真的一样。\n\n接下来，怎么做呢？\n\n\n### （三）\n\n我打算借鉴或者说是山寨一下《非诚勿扰》的结构。\n\n让我们换一种角度来看这部电影。如果我们现在是故事的讲述者，我们很容易发现故事的叙述逻辑。\n\n简单的说，《非诚勿扰》分为三个部分：\n\n第一部分【和谐终端机】是个引子。这部分主要的作用是解释秦奋相亲的缘由。就跟后面故事要安排笑笑为第三者一样，都是为了一个目的：叙述的合理性。\n\n故事的讲述，首先要设置一些合理的背景，让人容易接受这样的假设，从而对故事的延续造成驱动的悬念。\n\n故事的前提，如果设置的很好。读者的好奇心，就会自然而然地引发。而对于故事的叙述者来说，故事的主角在合理的背景中可以自己活动、讲话，展开故事。\n\n第二部分【相亲】是一种相亲大集合。各种相亲的场合堆叠在一起，有一种现实的对应感，不乏幽默的细节。\n\n在这样的部分中，细节和重复，是叙述的基本要素。\n\n细节可以跟人留下真实、幽默等等愉悦的情感。而重复可以象多棱镜一样，折射出同一件事情的不同的侧面。\n\n有时，重复也是一种衬托。为主线的叙述铺路。\n\n冯小刚曾经说：《非诚勿扰》的第三部分【北海道】才是电影中最重要的部分。这部分流露出某种公路电影的气质，自然主义的写实的叙述，贯穿其中。\n\n所以说，讲好一个故事，是不简单的事情。\n\n你得有足够的细节，有简练而充分的交待和暗示。在叙述的过程中，有各种各样合理的花絮铺垫、转承。\n\n不见得都是刻意为之，但是，为了避免叙述的平淡，你都找到很多方法，让叙述的吸引力一直牵着人走。\n\n### （四）\n\n我们暂时不用考虑过于复杂的处理。不过，我们仍然可以借鉴到一些可用的东西。\n\n让我这样来考虑《假如苏东坡和陶渊明来到现代》如何使用类似的结构：\n\n我先要安排一个理由，说明苏东坡和陶渊明来到现代：他们怎么来的，来干什么。然后，自然牵连出后面的故事。\n\n然后，就用重复的方法，写他们在不同的地方的不同经历：他们在家乐福怎么样；他们看电影怎么样，看见手机会怎么反应.....\n\n最后，该如何收场呢：给他们一个选择，他们是会选择留在现代，还是古代呢？\n\n我把整个这个构思的过程这样梳理一次：\n\n1. 我们都某处获取了一个想法，或者一些素材，我们感觉有一个可写的主题，或者我们认为讲述本身能带来很多东西，我们有叙述的冲动，但是，可能不知道叙述会带我们到什么地方；\n2. 寻找一种合理的结构，把之前的素材，串联起来。\n\n你要判断的是：是否来龙去脉讲清楚了。人家是否能接受这样叙述的逻辑，你所想要表达的情感强度，是否被合理地从线性的叙述中被释放出来。\n\n什么地方不够充分，什么细节又该舍弃。\n\n有时，故事中的人会带你到你想去的地方，甚至会超过你最初的想象。\n\n\n### （五）\n\n到此为止，我并没有真正开始写这篇文章，我只是在说一种思路：怎么用一种简单的方法，把一些松散的素材连接在一起。\n\n到中午的时候，儿子的作文写完了。我问他是怎么写的。\n\n儿子说：“我是分开写的。先写的是苏东坡。”\n\n“苏东坡去参加高考，一看试卷，他就乐坏了。难题都是文言文，这不都是送分嘛。还有几道题，考的就是他自己的文章。”\n\n我说：“这很有趣。后来呢？”\n\n儿子说：“不过，苏东坡很惨。他没考上大学。他语文考满分，但是数理化，都不会。只是偏才。他跟教育部写信申述，没用。我想，苏东坡在现代社会肯定呆不下去。大学生毕业都找不到工作，还去卖猪肉。苏东坡肯定不愿意卖猪肉。”\n\n我都听乐了：“好玩。说说陶渊明。”\n\n儿子说：“陶渊明简单。他去超市买牛奶，去哪儿都抱怨：你们这是怎么搞的？又是三聚氰胺，又是特仑苏的......”\n\n我说：“想法都挺好的。把你的作文拿来，我看看。”\n\n看了一下，我跟儿子说：“你的想法，真的很棒。”\n\n“写作文，能这样，已经不错了。不过，如果有时间的话，还可以写的更充分一点。最好的叙述是，把一些个想法，还原成一个故事。你去寻找一些简单可用的结构，把这些素材重新组织一下。”\n\n儿子说：“什么是结构？”\n\n我说：“你可以把它简单理解为一种容器。一种有逻辑、有形状的东西。很多人只所以有很多想法写不出来，是因为没有注意或者说是不知道一些基本的容器结构。这些结构有时会帮你把一些零碎的东西安排好，帮你梳理出其中的联系。”\n\n早在09年到来之前，我就答应儿子，给他讲一些简单的写文字的方法。你不需要把自己变成作家，但是，你也不要认为写字有多么高深莫测。\n\n我想把这些文字都放在一个栏目下，名字就叫做《叙述》。\n\n我希望能讲出一些真正简单、实用的东西。我会讲：为什么大多数人都喜欢听故事，故事是如何写出来的；为何《读者文摘》总是从讲故事开始；discovery的叙述有什么特点；什么是马尔克斯的叙述；以及如何从看一部电影，或是听一部交响乐，一个奇怪的建筑中，获取结构的启示。\n\n当然，我还是想告诉他：最重要的是忠实于自己的直觉，不要被流传已久的谬误所禁锢。很多东西，都是时间积累下来的。素材，或者情感，甚至所谓的技巧。保持对外部世界的敏感，保持自己独立的思考，比是否会写字更为重要。\n\n我想告诉他：只有一个人有需要表达的动力，加之适当的合理的技巧，他就能感觉到叙述的快乐。各种各样的叙述方式，也会被合理的创造并使用起来。\n\n\n\u003chr class=\"slender\"\u003e\n\n## 【叙述-3】为何我们需要从故事开始 \n\n\u003e xilei 发布于 2009-3-22 20:57:00 \n\n### （一） \n\n我从不给儿子买任何版本的作文精选，尤其是那种高考或者中考的满分作文选。我今天还在网上看见这么一篇博文，里面贴了几篇近几年的全国高考的满分作文。\n\n我摘一些文字如下：\n\n【摘选1】\n\n\u003e 他想起了周瑜。“小乔初嫁了，雄姿英发，羽扇纶巾，谈笑间樯橹灰飞烟灭。”他问自己难道自己不正是那东吴的督都吗？自己满腹经纶，胸中有的是治国平天下的笔墨，而此时？面对这一片漫漫江水，他陷入沉思。 \n\u003e \n\u003e 他的思绪像长了翅膀似的，继续飞扬，斟一杯酒，临江而酾，是祭奠那死去的英雄，也是祭奠自己的往昔。是啊！他清醒了：哀吾生之须臾倒不如托遗响于悲风，取山间之色，听江上清风之歌唱。他不再悲观，不再耿耿于怀。 \n\u003e \n\u003e 后来，他用自己的行动证实自己的顿悟。他在黄州兴修水利，奖励耕织，清廉从政。黄州的百姓感念这一位父母官。后来修了一祠庙来缅怀这一伟大的文人，知心的父母官。文学的殿堂里永远可以听见那《赤壁赋》华美的乐章。\n\n【摘选2】\n\n\u003e 古人说：“上有天堂，下有苏杭。”美丽的西湖承载了多少中国文人的梦，苏轼虽被贬至此，然而他没有悲怆，没有哭天地，没有愤愤不平，风雨任平生。他懂得了“为官一任，造福一方”的简单道理。于是，一道苏堤便横卧西湖。他要让西湖储藏的心灵，淹没他所有的痛苦，所有的忧伤。 \n\u003e \n\u003e 《明月几时有》一词道尽了诗人在外想家想人的心境。“不知天上宫阙，今夕是何年……”然而他也没有因此悲伤叹息，对生活失去勇气，失去信心。他让天上的明月传达自己对远在千里之外的故人、家人的思念。一句“但愿人长久，千里共婵娟”不仅让他的风雨一生得到升华，而且抚慰了多少中国人思乡思人的心灵。这个时候，他把其豁达的心交给了饱怀思念之情的人们。他要告诉他们――生活的风雨摧不倒我们，我们同在。 \n\n\n【摘选3】\n\n\u003e 生命如风。  \n\u003e \n\u003e 好一个亘古的比喻。你也许感慨于它的来也匆匆，去也匆匆，不着一丝痕迹。我却跋山涉水，在时空里淘尽沙砾，找到了这个比喻的真谛：  \n\u003e \n\u003e 唯有风，可以穿越荆棘。  \n\u003e \n\u003e 狄金森把人生描绘成篱笆墙的内外，我们一层又一层地爬过，事实上，这层层篱笆缀满荆棘，我们通过时，往往遍体鳞伤，身心俱毁。这时，你看到，风在墙外千萦百折，不屈地呼啸而过，空气中凝结下壮观的痕迹。  \n\u003e \n\u003e 我们趋行在人生这个亘古的旅途，在坎坷中奔跑，在挫折里涅盘，忧愁缠满全身，痛苦飘洒一地。我们累，却无从止歇；我们苦，却无法回避。烈日暴雨来过，飞沙走石来过，我们布满伤痕，还要面对一片片荆棘的丛林。  \n\n\u003chr class=\"slender\"\u003e\n\n我不知道是不是真的。如果这样的作文，能代表中学作文的高水平的话, 我只能说：这种小老头似的文风要不得。\n\n貌似文采飞扬，不过是拾人牙慧，东拼西凑。所有的词语都是奇形怪状地堆砌在一起。内心空洞，毫无生气。\n\n看着累不说，而且看过后给你留下了什么呢？空空荡荡，什么也没有留下。\n\n不过，我敢说，很多语文老师，都喜欢这种。而且也希望学生们写成这种东西。\n\n你打眼一看，觉得好有才气，其实不然。\n\n文字的东西，才气不是这样表现的。而且，才气在文字里面根本就什么也不是。\n\n如果你的文字根本就没有什么东西，什么样的才气都是空气。\n\n### （二） \n\n我觉得现在的学校里面根本教不好孩子写字。\n\n作文是从小学就开始了。小学生写记叙文，中学生写散文，或议论文。\n\n这样的安排还给人一种错觉：散文、议论文比记叙文更高级。你看每年的高考，好像都是写议论文的。没有说写记叙文的。\n\n但是，事实上：很多学生都不能完整地表达一件事情，完整地记录下一个属于自己的想法。\n\n写记叙文，记一次春游，记一件难忘的事情，还是记一次雷锋活动。能不能记点别的？\n\n写散文，老师就说：“散文就是形散而神不散”。\n\n什么都是散的，最后，就只有散架。\n\n老师说：你们要多背好字好句。写作文都会用上了。\n\n所以，我们都看见了满分作文都是这么干的：词藻华丽无比，思想都是来自于课本。所有的口水都是用经典名言粘上的。最后，都成了应试的八股文。\n\n这不是写字，这是报纸剪贴。\n\n\n### （三）\n\n其实，对于学生来说，他们写作文真正困惑的是这样两件事情：\n\n1. 不知道什么东西是应该写的；\n2. 想写东西，但是不知道如何写。\n\n老师们给出的建议是：你要多读多看多背多写啊。这些话说了等于没说一样！\n\n干什么事情，不需要勤奋啊。\n\n其实，我们生活的世界如此丰富，很多时候，我们并没有真正用心去看，去发现。\n\n有一次，儿子问我：“你怎么知道什么该写，什么不该写呢？” \n\n我说：“你得明白人们为何要写。绝大多数人写东西的动机，其实，很简单。”\n\n“比如说，你要矫正牙齿，我就得给老师写假条。我就得写明合理的原因。因为这时你是在解释，说明理由。你就必须简单明了。”\n\n“我们在公司里面，也经常写东西。比如说，你去给客户讲解一个产品。你不能总是说：我们的东西好啊，赶快来买啊。这样做没人会理你。你得跟人家讲一个关于产品的故事。你们为什么要做这样一件产品，人们为何需要它，你们是如何做到的。人们为什么要相信你们。这种叙述的逻辑，是理所应当的，就是要和人家建立信任。”\n\n“当然，很多人写文字，是为了自己。为自己留下一些记忆。因为每个人的一生中，都有很多这样的时刻。要么让人触动，要么让人反省。很多人想写下来，就是为了留住并传递那种难忘的感情。”\n\n“你知道为什么人们喜欢唱歌吗？唱歌是一种宣泄，歌词和音乐，能把人内心的记忆、想象和憧憬，激发出来。它能帮助人释放能量，发现自我。文字也能做到这一点。”\n\n“从来没有人规定，什么东西不可以写。但是，对于写的人一定要知道自己想写什么，这很重要。如果认为华丽的文字就是好的文字，这从根本上就错了。文字展示的不是关于词语的记忆，而是展示人的行为、情感，乃至心灵。”\n\n“对学生来说，文字首先是一种沟通工具。写得结构简单，逻辑清晰，简单明了。是最起码的要求。”\n\n### （四）\n\n我一直认为，学校里的作文课，应该教学生写故事。\n\n先不要把故事想的很复杂，可以是很简单的那种，不是复杂到小说家写的那种。\n\n我说应该这样做的五个理由：\n\n1. 故事可以培养人的观察能力；\n2. 故事可以训练人的逻辑结构的能力；\n3. 故事可以让人习惯把握自己的思维和情感；\n4. 故事不仅仅是关于文字的，也可以是图像的，音乐的。我们生活的世界中，有很多现成的例子，可以让我们自我习得。\n5. 故事不光是属于文学家，不光是属于语文课。而是属于我们所有人，所有的事业和工作。\n\n### （五）\n\n要了解故事，首先要学习感受：什么样的故事是好故事。\n\n这不需要任何人教。好的故事是有影响力的。它能让你笑，让你痛哭，让你沉思。不需要任何专家告诉你里面含有何种高深的理论。你的直觉和情感能告诉你一切。\n\n让我们来看看好故事的能量。\n\n春晚的小品《不差钱》是好故事。好故事能让人发笑，让人快乐；\n\n加菲猫说：球状就是身材。这是语录，也是故事，也是广告。能对自我宽恕和幽默的故事，是好故事。哪怕这故事，只有一句。但是，它能引发一大堆人会心的微笑；\n\n关于人性，巴菲特就爱跟投资的人经常讲一个故事：\n\n有一个搞投资的人死了，去见上帝，要求上帝，安排他到天堂里去过。\n\n上帝说：“天堂里都是你们这些搞投资的，都满了，只有地狱里还有空。”\n\n那个人说：“那麻烦你跟他们说一句：地狱里有石油。”\n\n过了一阵，天堂里的人都开始往地狱里跑。\n\n上帝对那个人说：“你可以搬到天堂了。他们都下地狱了。”\n\n那个人说：“不行，我也得去地狱看看，万一是真的呢。”\n\n好的故事好像什么也没说，但是，该说的它都说了。\n\n昨天晚上，我和儿子一起看了一个视频短片《世界构建》。这个短片讲述了这样的一个故事：\n\n只剩下1个小时了。\n\n一个男人，一跃而起。你看他在用手比划着什么。\n\n你看见他3D建模一样复制楼房。雕刻窗户，建造银行、路灯和一切。他在建造梦想中的美丽的世界。那个世界里有古老的街道，美丽的花朵，还有温暖的阳光。\n\n当他快建立好的时候，他把时间调到阳光明媚的时候。他跑进街道旁的一扇木门里躲了起来。\n\n这时，风吹着旗子开始动起来。远处传来钟声。\n\n一位美丽的女人打着赤脚，从街道的另一扇门出来，她惊喜地看着这一切。她突然转身向男人的方向走来。\n\n男人看见屋顶有一块还没有上色，脸上掠过一丝焦虑。\n\n女人走到盛开的花朵的面前，开心地笑了。在门后的男人，也释然了。\n\n女人回望着街道上的一切，念念不舍的转过街道。离去。\n\n男人从门后走出来。他听见风的声音，他听见破裂的声音，他的世界，被风吹走了。\n\n男人伸手从空中攫取一张照片，照片上是那个美丽的女人，男人送上一个吻。他的脸上还有泪水。\n\n画面变黑了。\n\n男人推开病房的门。\n\n他俯身亲吻没有知觉的妻子。\n\n桌上放着一个水杯，杯里插着那朵梦境中的花朵。\n\n我跟儿子都被这个故事所深深感动、震撼。美妙的感受，无法言语。\n\n我跟儿子说：“这就是我心目中的好故事。有些故事，可以带给你生理上的愉悦。但是，有些故事能真正激发你内心崇高的情感。”\n\n儿子说：“故事好像很简单，但是，好像又很多。”\n\n我说：“这就是故事的魅力。”\n\n儿子说：“为什么会这样呢？”\n\n我说：“这本来是一个很老套的故事。但是这样的讲述，出乎人的意料。故事的结尾，才揭示出男人建造世界的秘密。让你看了，才觉得：这是个多么美好、温暖的世界。”\n\n### （六）\n\n儿子说：“我可写不出这种故事。”\n\n我说：“这里面有很高的技巧了。我们一时都达不到。但是不妨碍我们从这些故事里面学到一些有用的东西。”\n\n“叙述是一种认知的流动。人的大脑很奇怪。你看，故事都是线性讲述的。但是，故事一旦讲完后，人们会在大脑里重新组合，并梳理出他们理解的逻辑。”\n\n“好的故事是这样的：人们不需要被教育，需要的是被触动。”\n\n“所以，写故事，不需要排比句。不需要花俏的东西。因为华丽的东西，没有情感的流动，那就是一张纸，单薄，没有体积，也没有温度。写字，不是炫耀，而是真诚地叙述。你得首先说服自己相信，你才能写好它。故事里面的场景，人物，始终有一种东西在里面流动。它会把写字的人带到该去的地方，也会把读者带到该去的地方。”\n\n“所以，写好作文最简单的做法就是：先学习叙述一件事情。让叙述的过程来说明一切。”\n\n“在写的过程中，你会看见自己曾经看见过什么，你记住了什么，什么东西对你很大的影响，什么东西是你一直不能面对的。什么东西是你不能忘记的。当然，最重要的是，你要写下来，当时的过程，或者一种情绪。”\n\n儿子说：“我什么时候才能做到这点呢？”\n\n我说：“现在就开始，你可以做到。”\n\n我说：“你们老师让你们看《读者》文摘，你们总是记得抄句子。其实，《读者》的文章有个特点，你们却没有学。”\n\n儿子说：“什么特点。”\n\n我说：“就是讲故事。你看《读者》是不是都是这样的：讲一个故事，然后，说明一个道理。”\n\n儿子说：“好像差不多都是这样。”\n\n我说：“如果你仔细看，你会发现每个故事里面还是有很多细节上的不同。故事的讲述，有很多不同的技巧，你需要自己自己反复体会，你有故事，故事就象水一样，你让它从山上流下来，就是瀑布，让它绕着村庄走，它就是河流。有时，你的任务，就是得寻找适合的容器，把它盛起来。容器就是结构，下次我们就会讲到，到底有哪些常用的结构，可以让我们把水盛起来。”\n\n“《读者》这类的文章，基本上是属于启发、教益类的故事。你会发现很多讲述是如此简单，只是需要足够的细节，足够的真实而已。不过，你想过没有：我们生活不就是这样吗？每天有太多这样那样的故事，我们从来没有时间写下来。我们觉得那都是小事，不值得写，或者说，谁会在乎呢。其实，只要你在乎，你就可以写下来。”\n\n儿子说：“这跟我们的作文有啥不同呢？”\n\n我说：“故事是一种平实的叙述，不需要言必名言名句。不需要排比句，不需要形容词。只需要老老实实地讲述。你要用真实的情感去带动你的文字，不要去在意它如何艰涩，不好看，而要在乎它是否在人的内心中有情绪的积淀，它是否是有重量，是否有温度。它是否忠实于你的个性，是否忠实于你的情感。是否有一种消融内心坚冰的力量。”\n\n“故事就是写自己想说的话，那是一种精神的印记。如果你想放弃自己的想法，只是想什么是符合标准的做法，那么，可以肯定的是，你永远也不会知道如何开始。”\n\n\u003chr class=\"slender\"\u003e\n\n## 【叙述-4】叙述的基本原理 \n\n\u003e xilei 发布于 2009-3-29 17:55:00 \n\n### （一）\n\n每年的三月，儿子都会参加市上的电脑比赛。作品通过后，有一个技术的答辩会。答辩会的主要内容有两部分。第一部分是由作者自己讲解作品，第二部分是由老师提问。\n\n我一直觉得讲解作品是参加竞赛中，最有价值的部分。孩子们在学习里，总是学太多的书面知识，有太多的书面作文、太多的书面考试。而面对很多人做口头讲演的机会却少之有少。\n\n一个人，在大众面前演讲，向大家介绍自己和自己的作品，展示自己的思维，是一种非常重要的能力。这需要适当的思维的训练，需要养成构思、叙述、传达的循环反复的习惯过程。\n\n我一直希望学校的语文课有口头语言表达的训练内容：它是一些可以参照的简单可用的基本构思框架，任何孩子一个都可以模仿和练习，任何人都可以用自己的话，运用素材，讲在众人面前述一个跟自己有关的故事。\n\n这听起来有点难，或许就算是大人都不容易做到。因为在我们从小到大的课程中，没有人告诉过我们该如何做。\n\n### （二）\n\n我至今还记得儿子小学六年级的时候，我第一次跟他讲这样的一课：如何介绍自己的作品。\n\n我当初的想法是这样的：不仅要教会儿子如何完成这件事情，而且我要把思考的全部逻辑过程展示出来。让他以后遇到类似的事情，就知道该如何去做。\n\n我跟儿子说：不论是文字，还是图像，还是口头表达，有一条重要的法则，要牢记：所有的叙述，都是向受众传递信息。\n\n儿子说：“什么是受众？”\n\n我说：“你去讲你的作品，你是讲给评委老师听，还是讲给下面的同学听呢？”\n\n儿子说：“当然是老师听了。”\n\n我说：“老师就是受众。就是那些想听你话的人，或者说是你想讲给他听的人。”\n\n儿子说：“明白了。”\n\n我说：“受众确定了。那么，接下来，你就要想啊：老师想听我讲什么呢？”\n\n儿子说：“我怎么知道老师想听什么？”\n\n我说：“如果是平时的话，你的确不知道。但是，现在不同。你要想你是干什么去了？”\n\n儿子说：“我是去答辩。”\n\n我说：“老师呢？”\n\n儿子：“老师是评委。”\n\n我说：“对了。你做演讲有一个环境的因素在里面：就是要围绕你的作品来讲。老师来干什么来了？老师做两件事：第一件事是先听你说；第二件事是根据竞赛的规则提问、考核。第一件事就是我们现在正准备的，第二件事才真正是老师要做的。”\n\n“好，我们现在换一个角度来看。我告诉你，如果我是你们的老师，我会怎么评审呢？”\n\n儿子说：“你怎么知道我们老师想什么呢？”\n\n我说：“我仔细读过你们的电脑竞赛的要求，参赛标准。你来看看，老师想问什么，其实，这上面都有！”\n\n我把网站上的参赛和答辩要求，都指给儿子看。\n\n“这是主题要求。这就告诉我们，你给老师介绍的时候，要说明你的主题是符合要求的。”\n\n“这是技术要求。这就告诉我们，你要给老师讲你的作品里面使用了哪些特别的电脑技术。”\n\n“这是制作的过程介绍。这就告诉我们：你要给老师讲你的制作过程。”\n\n儿子说：“我明白，是不是相当于要把这些都放在演讲的过程中？”\n\n我说：“是的。”\n\n儿子说：“可是这么多东西，我怎么才能把它串在一起，一口气讲下来呢？”\n\n我说：“儿子，不急。刚才我们讲的是一个内容的分析过程。现在，我们知道了，老师可能想听哪些部分的内容，我们做的是一个内容的逻辑分析。但是，要口头演讲的话，要换一种方式，才能把所有的方式串起来。”\n\n“首先，我们把整个内容的逻辑简单梳理一下，让它听起来是流畅、合理的。”\n\n“当有很多主题，看起来比较散的时候，你又想把很多东西串起来。一个简单的办法，就是不要一个一个讲这些主题，而是讲述做事的过程。然后，把你想讲的东西再挂上去。”\n\n“如果我是你，我就会这样给老师讲这样几个方面：\n\n首先，我会讲我为何会做这个动画，我是如何想到的，我为何可以做这个动画；为什么要先讲这个呢？因为你和老师是初次见面。你是谁，老师也不知道。你怎么构思，怎么想，老师也不知道。\n\n讲事情的起源，看起来是多余的，其实不是。很多叙述是一种认知的需要。你要打动人，说服人，最重要的是要让人知道你是什么样的人。\n\n可是，老师不知道你是什么样的人。老师是从你说的话，做的事情中了解。\n\n所以说，你给老师讲你做动画构思的过程，就是在传递这样的信息：我是怎样的一个牛人。\n\n其次，我要讲在制作的过程中，我使用了何种技术，我是如何理解这种技术，如何使用它的，不去谈技术的细节，因为后面老师会考你的，你说的东西要简单明了，不要太复杂，复杂容易让自己偏离重点。\n\n所以，你还是这个办法，讲你用什么技术解决了什么问题，讲你使用技术的体会。你做的东西，那种独特的感受，一定有。你就讲最关键的一、两个体会就行。\n\n老师一听就明白了：你到了哪个层次。他心里基本上就有数了。\n\n再三，我会重点讲一些制作过程中的细节。我如何收集材料，如何准备，如何付出努力去完成项目等等。细节会为作品强说服力，也会感染他人。”\n\n我给儿子说：“演讲有两个屡试不爽的基本技巧：一是讲述一个关于自己的故事；二是讲述自己在做事的过程中，如何思考和行动。”\n\n儿子根据我的建议，做了一份讲演稿：\n\n\u003e 《我们的神舟》——演讲稿\n\u003e \n\u003e 开始提示：声音大点、语速不宜太快，讲话时，给老师交流眼神\n\u003e \n\u003e 各位老师们好！\n\u003e \n\u003e 我是某某小学六年级学生某某，我的参赛作品是一个Flash动画，名字叫做《我们的神舟》。\n\u003e \n\u003e 我为什么要做这个动画呢？\n\u003e \n\u003e 因为在2005年，我在学校观看了神舟六号发射的现场直播。之后我就开始对神舟火箭的整个发射过程有了兴趣，所以我回到家马上就在网上查找神舟六号的相关资料，知道了什么是逃逸塔，什么是返回舱，而且对神州发射的整个过程都有了比较详细的了解。因为在当时，我刚好又在自学Flash，就趁着这个对神舟感兴趣的时期，我就做了第一个版本的神舟动画，大体上的过程都有了，但比较粗糙。尽管这样，但还是得到了家长与老师的鼓励与支持。\n\u003e \n\u003e 1年多过去了，遇到这项比赛。第一，我还是挺喜欢神舟的；第二，我觉得自己的Flash水平也有所提高，所以我就又做了第二个版本的神舟动画，作为参赛作品。下面就请老师们观看我的第二个版本的神舟动画吧！\n\u003e \n\u003e ……（开始播放动画）\n\u003e \n\u003e 因为神舟构造本身就很复杂，所以我把火箭的许多部件做成一个一个的元件，便好组装、拆散；做元件的另一个优势是，神舟火箭不管怎么放大、缩小、旋转，都不会失真。\n\u003e \n\u003e 我在场景上又加入了淡入淡出，这样，每个场景的背景都可以循环多用，并且看起来也非常紧凑、连贯。\n\u003e \n\u003e 整个作品制作分成了三个阶段，第一个阶段是收集材料，花费了很多的业余时间：我自己上网站，查相关资料，反复看神州发射的录像。整个构思是在这一年中积累完成的，第二个阶段是元件制作，整个flash包含了上百个元件。最后第三个阶段是合成。第二个阶段和第三个阶段大约画了整整5天的时间。\n\u003e \n\u003e 今年，我国将发射嫦娥号一号。我现在又在自学3DsMax，我希望自己能在电脑上展现这一过程。\n\u003e \n\u003e 谢谢大家！\n\u003e \n\u003e ……（技术操作+答辩）\n\n这个演讲稿，儿子反复修改过好几次，又在口头上反复练习演讲了好多次。\n\n这是一个经过精心设计的看起来很普通的演讲，但仔细读来，里面包含了丰富的信息和情感。\n\n### （三）\n\n上面的演讲的设计过程，就是我教给儿子的关于叙述的基本原理的一次应用。\n\n所谓叙述的基本原理，是我自己给出的一个思维基本框架的定义。\n\n这个原理的核心内容如下：\n\n任何目标导向的叙述过程的设计，都可以用一种如下的方式或者步骤来进行思考：\n\n1. 内容分析：确定受众；\n2. 逻辑设计：确定内容要素、梳理内容的逻辑结构；\n3. 结构设计：在生活中寻找叙述的框架，最简单有效的方法就是讲述一个关于自己的故事，完成逻辑的基本诉求：把所有的要点元素或素材组织在一起，合理地放置在故事的背景中；\n4. 情感设计：在讲述事件本身的同时，讲述态度、情感和方法；\n\n文字只是叙述的一种表象。本质上说，叙述是一种思维的过程，只要通过合理地训练、反复地练习，久而久之，每个人都能获得这种人性的技巧。\n\n\n\u003chr class=\"slender\"\u003e\n\n## 【叙述-5】海明威的叙述\n\n\u003e xilei 发布于 2009-5-1 15:37:00 \n\n### （一）\n\n在很多年前，我读过一篇海明威的短篇故事，名字叫《三声枪响》。讲的是一个叫尼克的小孩跟随父亲在湖边度假时发生的故事。\n\n故事一开始，就写尼克在帐篷里脱衣服，看见帐篷外父亲和叔父的影子在灯光的照耀下晃动。尼克为自己感到羞愧。\n\n是什么事情让尼克感到羞愧呢？\n\n接下来的文字开始转入正题。\n\n原来，很多天前的一天傍晚，父亲和叔父要离开宿营地去远处的地方打猎。临走的时候，父亲跟尼克说：如果有什么事情，需要他们返回的话，就朝天放上三枪。\n\n尼克看见：父亲把船往湖里推，叔父坐在船头。过了一阵，尼克听见叔父开始唱歌，也听见父亲划桨的声音。\n\n尼克开始往回走，周围的黑暗迫使他尽快返回。\n\n尼克返回营地，在帐篷里躺下，怎么也睡不着。他不时听见很多声音，但是，他不能确定那些声音到底是不是猫头鹰的声音。\n\n尼克干脆坐起来看书，他强迫自己不去想其他的事情。尼克看书，直到天亮。\n\n直到后来的某天晚上，尼克听到从森林的远处传来了一种怪异的声音，他马上拿起了猎枪，对着天放了三枪。\n\n等尼克的父亲和叔父回来的时候，他们看见尼克已经睡着了。\n\n叔父说：看吧，我说没事的。这小家伙就是胆小罢了。\n\n尼克的父亲说：他还小。毕竟是孩子呢。\n\n第二天早上尼克起来后，父亲带他到外面。父亲让他意识到，晚上听见的声音，可能是风刮到树枝发出的。\n\n所以，这天晚上，尼克躲在帐篷里，感到羞愧。\n\n然后，故事回到开始的部分。\n\n故事结尾的时候，是这样的：父亲叫尼克赶快穿上衣服，对他说：我们一起出去。\n\n\n### （二）\n\n昨天晚上，我跟儿子讲《三声枪响》，我还找出原文让他自己看了一遍。儿子看完的时候，还又往后翻了一页。\n\n我说：没有了。他的结尾有点突然。戛然而止。\n\n儿子点了点头。\n\n我说：你有什么感觉没有？\n\n儿子说：他写了尼克的害怕。但是，居然在故事里面几乎没有提到过“害怕”这个词。\n\n我说：对的。他没有说，但是你看过后，就是感觉到眼前自然就有那种画面，那种感觉可以直达你这里。\n\n儿子使劲点了点头。\n\n我说：换了是你们，你们会写成什么呢？你们肯定会写：我害怕，我很害怕，我害怕得毛骨悚然，我非常非常害怕。然后，举例说哪个古人或者名人曾经在哪个角落里说过孤独、害怕之类的话。你说是不是？\n\n第一段A名人的名言名句，第二段B古人的经典诗句。第三段本大人的总结发言，得出关于害怕的意义。\n\n儿子几乎笑倒。\n\n不过，我不是信口雌黄。现在的中学生作文里面充斥着这样的作文思路。\n\n比如很多的中学生最佳作文，一般都是这样的：满篇都是格言名句，充满了华丽而空洞的形容词。一段段的排比句，貌似看起来很有气势和文采。\n\n我跟儿子说：这种写法，只能败坏一个人的感觉。一个人老是想着别人说过的话，那他不可能相信自己的眼睛，他也不敢写出自己的真实情感。如果是这样的话，写文字成了什么？炫耀记忆和词藻的游戏？\n\n儿子问：按你的说法，记忆好词好句的做法，是不对的？\n\n我说：做摘要，没有错。但是，不能那么用。你要写东西的时候，最好先把别人的东西忘掉。你要首先想的是：我要表达一个什么，我要传递一个什么感觉，或者想法。\n\n我跟儿子说，我可以证明：不用名言名句，不用排比句，一样可以写出非常棒的文字。\n\n那个时候，我想到了海明威的《三声枪响》。\n\n### （三）\n\n你可以把《三声枪响》，看成是海明威写的一篇假期的游记作文。\n\n海明威可能就是那个尼克，一个跟父亲和叔父出去外面打猎度假的小孩。\n\n海明威没有写度假的那个地方风景如何的优美，因为优美的风景太多，以至于小孩总是忘乎所以，根本没有时间来欣赏美景。美景太多了，小孩只是高兴，不需要象大人那样热爱抒情。\n\n小孩有小孩担心的事情，比如说害怕，或者死亡。\n\n海明威想写一个独特一点的东西：他在自己的头脑里，寻找自己作为孩子时的独特感受。或许，有一天，他发现了一个小秘密：每个孩子都有害怕的经历。那种感觉，常被大人忽略，其实，却常常隐藏在孩子心里。\n\n海明威决定写一个关于尼克的故事，故事的主题是：害怕。那个时候，他还没有想好作文题目，该起一个什么样的名字。\n\n海明威想：我要怎样才能写出一个关于“害怕”的故事呢？\n\n海明威没有去用google搜索，那个时候，还没有互联网。海明威也没去图书馆找。他不喜欢去翻别人说过的话，他也不喜欢用很多的形容词。他喜欢站着写作，因为这样，他能写得简短，快些写完，才好休息。\n\n在海明威的头脑里，“害怕”不是那样一个被压扁的形容词，而是由一个又一个有形状能刺激人想象的场景：\n\n他不觉得非要说出那个词，才能表现出那样的效果。他认为环境、人的动作和对话，会泄露出很多的秘密。\n\n比如说：你可以想象一下，在伸手不见五指的夜晚，你一个人在回家的路上。突然身后，传来了细碎的脚步声。那声音跟你的脚步的节奏一样，人走的时候，那声音在，人不走的时候，那声音也停止了。\n\n环境会改变一个人的心理感受，人的内心的想象也会助长那种你想要的暗示。\n\n你可以想象：一个小孩独自穿过漆黑的森林返回帐篷时的心情。他的脚踩在路上干燥的树叶上发出的声音，周围猫头鹰的叫声，有一声没一声。\n\n如果是你，你会怎样？\n\n为了抵御某种内心的情绪，一个人会采取很多行为来抵制，或者反抗。\n\n尼克躺在帐篷里，怎么也睡不着。他只能爬起来看书，让自己什么也不去想。\n\n海明威并不把所有的东西都记录下来，他只是在陈述，一个动作接着一个动作。动作之间的逻辑关联，他认为读者其实完全可以想到的。无须详细一一描述。\n\n他相信：文字的张力是靠读者的想象去完成的。\n\n海明威写了一个孩子在黑夜中的挣扎：先是努力去分辨各种声音，然后，爬起来读书。最后，实在忍无可忍，尼克还是爬起来，朝天上放了三枪。\n\n看，到这里，你终于明白了，海明威为何把作文题目叫《三声枪响》了。\n\n尼克的父亲和叔父的对话，简单明了。寥寥数语，人物的性格和态度栩栩如生。\n\n但这一切都不是写作者说出来的，而是从故事中人物的言语中自然渗透出来的。\n\n\n### （四）\n\n我跟儿子说：一般来说，写文字和其他的任何创作和设计，没有任何不同。你不要认为，写作和设计都是一拍脑袋，就什么都有了。其实不是，基本的过程是有章法可循的。\n\n比如说，你要写一个东西。可能是因为某个触动和感觉在你心里蕴藏很久了，或者你有一种希望表述的愿望，让你有了一种想要捕捉的愿望。\n\n一般来说，很多创作的起点，都是来源于灵感或想法的。\n\n接下来的是，如何用一系列的手术刀似的方法，来捕捉这种创意。很多时候，你会发现，你开始的想法或许是不完整的，甚至会导出相反的感觉。\n\n接下来的工作是搜集材料，收集很多素材。围绕主题的，或者跟主题相反的材料。然后，做归纳、过滤、剔除。\n\n你要确定的是这些材料对于叙述的主题是否是有益的和互补的。\n\n接下来，要寻找一种把主要材料组织在一起的结构。\n\n创造任何一个东西，结构都是非常重要的。因为文字如同建筑，你没有构造的话，再好的素材，都是一遍散沙。\n\n我们经常会看见很多简单的故事，因为结构的妙用，变得很容易让人理解。\n\n比如说：《平民窟的百万富翁》，用《开心辞典》的方式，把主角成长的片段很方便地串联起来。这种结构，重点突出，详略得当。根本不需要中间的过渡。因为这种娱乐问答的方式，自己本身就是允许跳跃的。\n\n再比如说：《海角七号》也是同样的道理。那七封情书，是一个多么温暖的线索，把所有的元素，串在一起。如果没有这根线。你得花多大的力气，把那么多的场景和素材，放在一起，而不感觉凌乱？\n\n接下来是安排场景，安排段落之间的逻辑。\n\n海明威写尼克害怕，段落之间是有非常明显的逻辑推演的。\n\n尼克看见父亲推船下湖，他看见叔父坐在船头。他听见歌声和船桨划动的声音。他的周围弥散着夜晚的气息。\n\n他回家的路上，一种情绪开始弥漫。\n\n他想听清，到底是什么动物在叫。\n\n他睡不着，从床上爬起来看书。\n\n后来的一天晚上，他实在是无法肯定，拿起枪对天空放了三枪。\n\n海明威知道：这世界上有一种很厉害的结构，就叫因果关系。你只需要把它一层一层地撕开，无须多言，每个人都会有真切的体验。\n\n### （五）\n\n我建议儿子把《三声枪响》多读几次，甚至可以学着模仿这种写法。我告诉他，以后写作文的时候，不要觉得自己什么都没有，也不需要靠什么好词好句。\n\n我说：我不相信，你没有自己熟悉的东西。你的生活中，有很多细节的东西存在。你只是没有仔细想过。比如说，我经常听说你们中午打饭很热闹。那么，你为何不回忆一下有那些细节，让你有如此体会。你为何不把这些画面，用最简单的方式写下来呢？\n\n儿子想了想，马上很激动的说：我们中午送饭过来时，盆子下面有油。大家抢饭的时候，不小心，总会把油蹭在衣服上......\n\n 我说：对了。这就是细节，这就是画面啊。你只需要简单的回忆，用简单明了的话，把你看到的东西描写下来。就已经是很棒的素材了。为什么不这样写呢。为什么要想象看不见的古人，而不是先从自己的身边下手呢？\n\n我把《三声枪响》讲完后，帮儿子做了一个总结：\n\n1. 睁开眼睛，相信自己内心是有东西可写的\n    首先，写文章的时候，要相信自己的内心的感觉，要确定自己到底要表达一个什么感受或者观点；\n    一次只表达一个感受，或一个观点；\n2. 观点明了、逻辑清晰、结构易懂\n    写的时候，要挑选素材，然后寻找一个简单的结构，确定好段落的逻辑。\n    用自己的话写，只要逻辑上没有问题。\n    任何文字是为内容服务的。所以，对一个初学者来说，重要的不是文笔好不好，而是首先要写清楚。只有写清楚，读者才知道你在说什么。\n3. 海明威的叙述\n    如果你肯定的话，别人早就知道的事情，你可以不写。\n    你只写事情浮现的部分。就如同那些气势磅礴的冰山，我们虽然看见的只是浮出海面的八分之一，而剩下的部分，通过想象就可以顺利完成。\n    忘掉形容词，忘掉格言名句。当你根本没有什么可依靠的时候，你的眼睛就会睁开。你的能力就会自然而然地生长出来。\n    做任何事情，最重要的是要树立信心。写字也是一样。\n    一个对自己有信心的人，简洁不是一种叙述的形式，它就是叙述本身，它就是叙述的动力和方向。\n\n\n\u003chr class=\"slender\"\u003e\n\n## 【叙述-6】结构:因果和重复 \n\n\u003e xilei 发布于 2009-5-21 17:11:00 \n\n### （一）\n\n现在，每到周末，我都要求儿子写一篇钢笔字。\n\n他握笔的姿势不好，整个笔是竖起来的，写字象鸡啄米。遇到作业多的时候，力气用到最后，字都是东倒西歪的。\n\n我说：背打直了。手放在桌子上，吊在外面着怎么能写呢。\n\n儿子听着，有时会很不耐烦地挪挪屁股，象征性地动一下。\n\n有一天，作业的书写太乱了，简直都看不下去了。我大光其火。\n\n我说：这样可不行。你写的字，别人都看不清楚。你得花时间练习练习写字。\n\n我让他先注意写字的姿势，然后，给他说了一个练习写字的办法。\n\n我的要求很简单：我不要求你写成一个书法家，但是，你起码要把字形写清楚。\n\n我找了一本字帖，翻到其中的一页，拿了一张纸，让儿子先临摹了一排。\n\n儿子写了一排。比划着写，怎么也不赖。\n\n写好后，我把字帖拿开，让他自己写一排。字象弹簧一样，立马回到从前。 \n\n我说：你知道你的字，为何跟刚才的字不一样吗？\n\n儿子在发愣，不知道该怎么办。\n\n我说：我跟你说一个写字的技巧。你马上就会改进很多。我们先不谈什么笔锋，你看看你的字形结构！\n\n我指着纸上的一个“仁”字，我在字上面各自画了一个长方形，把字分割看。\n\n“你先不把字看成是字，而是一幅画。那么‘仁’这幅画，包含了左右两个部分。我们用方形把它们圈起来。你注意感受人家写字时，这两个部分的相对大小。还有块与块之间的位置。”\n\n“写字首先，是要横平竖直。你看看你的单“仁”旁，你左边的这个竖，都是歪的。站直了，别趴下！”\n\n“你看看右边的方形的位置，相对于左边，大概是在什么位置。这是一种的平衡的感觉。你多看看别人起笔的位置，多体会，自己写一写。”\n\n“同样，象这个‘音’字，是上下结构，上面的立，是一个扁平的长方形，下面的日，可以写成竖立着的长方形结构。如果你写成同样的形状，感觉就象压扁了一样。竖立的形状，才能撑得住。”\n\n挨着把一排字的结构，和儿子的字做了对比和分析。每个字，写了几十个。\n\n儿子把字重新写了一遍，象换了个人写的一样。\n\n我说：一个字的字形有很多变化。但是，刚开始，学一种就行。重要的是，你要先学会看懂人家是怎么结字的，然后，才好模仿。模仿好了，就可以加入自己的特色。那个字，也变成你的风格了。\n\n我认为对于初学者来说，写字的关键，在于识别字形结构。\n\n写字是这样，其他任何领域里的学习都是一样。\n\n记住：不论你干什么，你首先要了解其中的结构。\n\n### （二）\n\n举一个例子来说明。\n\n在《读库》0804里面有这样一篇文字：《电影编剧的秘密》。里面讲了这么一个故事：说的是老外怎么写西部片。\n\n在老外眼里，西部片是一种类型电影。\n\n什么是类型电影？就是电影的故事结构，已经模式化了。凡是这种电影，结构都这么写。\n\n美国西部片的结构通常是这样的：\n\n【故事开始】\n\n1.英雄来到了小镇；\n2.小镇被恶势力控制，小镇人民无力反抗；\n3.英雄初露本色，有超强本领，打破小镇平静；\n\n【故事中间】\n\n4.英雄与恶势力发生冲突；\n5.小镇人民不理解英雄；\n6.英雄与恶势力冲突升级，因为得不到支持，英雄受到磨难；\n7.英雄在频临绝境时，凭个人智勇杀入重围，消灭恶势力；\n\n【故事结尾】\n\n8.小镇人民挽留英雄，为英雄拒绝；\n9.英雄离开小镇。\n\n仔细想想，好像是这样。\n\n我们明明知道美国电影很有模式化，也明明知道很多是假的，但是，我们还是乐意去看，我们乐意上当！\n\n为什么我们总是愿意相信这样的一种“偏见”：美国电影的故事比中国电影的好看？\n\n答案很简单：\n\n美国的各种类型电影积累了很多千锤百炼的叙述方式，它的故事的结构满足了人性的基本需求，也符合人的认知心理。\n\n因为经典结构能很好地沿着受众的认知的路径，一步一步释放信息，跟受众达成了一种沟通的默契。\n\n在这种结构的约束下叙述，整体的基础是稳定的。\n\n### （三）\n\n上周周末，儿子他们布置的作文内容是：给某名人写一个短小的墓志铭和写一篇关于李白的小传，老师从网上下载了李白的文字资料，让他们参考。\n\n墓志铭上周曾经写过一次，老师还把班上同学写的好的文字打印出来给大家分享。\n\n有些写的真不错，但是，有一些文字，我一看就笑了，感觉不妥。\n\n我马上在网上挑选了一些墓志铭，让儿子看。\n\n我说：“文体的真实性，很重要。墓志铭是写给死去的人，重点是对一个人的总结或评价。不能成了作者的抒情描写，这是喧宾夺主啊。这样写，对死者缺乏尊重。”\n\n儿子说：“反正也是练笔，又不是真的墓志铭。”\n\n我说：“不行。你得当真的来写。你明明是写的就是墓志铭，你却写成了抒情散文诗。方向都偏了。”\n\n儿子还在等我后面的话。\n\n我说：“你这样理解吧：你打算写一个请假条给老师，本来写清楚就行了。结果，却写成了抒情诗。老师看了后，猜了半天，也没有搞清楚，你到底要干什么。”\n\n“所以，不能乱来。文体的真实性，很重要。你的文字用途不同，你叙述的结构就不同。”\n\n我一下意识到，学生的作文训练缺少必要的结构训练：\n\n把什么东西都写成了散文，是要不得的。\n\n### （四）\n\n因为前面的事情，晚些时候，我还专门看了看儿子写的小传，眉头又皱紧了。\n\n“怎么都写成了排比句。你不觉得这样很单薄吗？你这样写东西，结构都有问题，文章都不成形。”\n\n儿子说：“我们班上都是这样写的。”\n\n我不知道从什么时候开始，中学作文的文字都变成了抒情散文。不论是男生和女生，都在写这种软绵绵的东西。\n\n我在网上，找了一篇别人写的“鲁迅小传”。我给儿子分析，别人是怎么写的。\n\n我说：我觉得它这个结构，你是可以借鉴的。他的写法是这样的：分成是三个大的部分。第一大部分，是对鲁迅的一个总的概述，第二段按照他的生平时间来写，只写重点的事件。最后的部分是对鲁迅的评价。\n\n我说：你写李白的小传，也可以拿来主义，分成三部分。第一部分，对李白做一个总结性描述。第二部分，也是按照生平时间来写，写他的生平经历。最后部分，因为他是伟大的诗人，当然要对他的诗歌做一些评价。\n\n儿子按我的话去做了，很快写好了。\n\n我看了看，“整体的结构是没什么问题了。第一部分和第三部分，都没有什么问题。在第二部分，有点乱。”\n\n“第二段，我们的目标是写李白的生平。好的，我们把我们认为的事件，都写出来。但是，这不能搞成排比的方式。在这种事件的挑选中，我们要做的是：你选出的事情，要让它呈现出一定的逻辑关系。它不应该是一堆无关紧要的东西，随便堆放在一起。”\n\n我说：“我为什么反对用过多的排比句？因为排比句，过于重视词语的优美，而忽略了叙述的逻辑。如果你前面有很多的叙述铺垫，你可以用。但是，如此简单的重复，留给读者常常是空洞的感觉。因为华丽的词语本身需要让读者去想，而不是自然感受到。这会破坏语言的感觉，也会影响到阅读的流畅。”\n\n“所以，好的做法是沿着设计好的结构的轨道跑。好的故事形状，会带来很美妙的感受。”\n\n“好了，我们回过头来说，怎么写第二部分。我们怎么去寻找第二部分的叙述逻辑。一个很简单的办法，就是依据事实，自己提问。”\n\n“李白是个很自负的人，16岁前就云游四方。那我们就要问了，他为何要去云游？他为何要自负？他想干什么？答案是：李白对自己有一个很高的期待，希望自己在仕途上，能一展抱负。”\n\n“接下来才有李白进京。他自己希望得到唐太宗的赏识，不过，皇上看中的只是他的诗才。在皇帝眼里，他不过是一个用来娱乐的工具而已。”\n\n“如果你是李白会怎么样？你肯定会很失落。”\n\n“所以，李白才写下了‘抽刀断水水更流，借酒浇愁愁更愁’的诗句。他在表达自己内心的郁闷。”\n\n“李白在宫廷里不受重用，刚直不阿的性格，就会带来麻烦，最后，他肯定是得罪了不少权贵。离开了皇宫。”\n\n“你看我说的这么干巴巴的。但我把整个叙述的线索拉出来了。我这么做是为了在素材中寻找叙述的逻辑。你在阅读李白的材料的时候，也要做同样的事情，在脑子里面一定要去寻找可以把素材联系起来的因果关系。这样，你写下的东西，才会非常的结实。”\n\n“因果关系是一种重要和常见的结构。也是一种没有任何认知障碍的逻辑结构。一旦你在素材中梳理或找到了这种关系，基本上，剩下的问题是写的问题了。你在下笔之前，你的眼睛已经看见了远方。虽然你还不完全知道过程的细节，但是，你知道自己的文字会带你到哪儿。你的文字是有方向感的，它自己不会乱跑，不会散架，更不会崩溃。”\n\n儿子花了些时间，重写了第二部分。\n\n文字上还有问题。但我能确定的是：总体的结构对了。\n\n我不能确定的是：用完全不使用排比句的方式写作文，儿子在考试的时候，会被判一个什么样的分数呢？\n\n文字的逻辑好解决，而生活的逻辑，却很难很难。\n\n\n### （五）\n\n再补充一点：\n\n排比句的用途在于：不断重复，增加层次感。但是，如果通篇都只是在词语上做排比功夫，则会呈现出一种华丽而虚伪的文字。\n\n其实，本文的结构，也是：重复。我依赖故事的主题重合来表达。没有用排比句来重复，而是依次讲了几个看起来不一样的故事。\n\n有时，简单的故事比豪华的句子更有质感。它的感受性更自然一些。因为故事的叙述往往是从容的，符合人的心理感知。\n\n我们以后会提到叙述的多声部手法。那是一种象音乐“排比句”的叙述结构。\n\n我们可以看到很多好的作品，如何把简单的重复，运用得如多棱镜一样，绚丽夺目。\n\n\n\u003chr class=\"slender\"\u003e\n\n## 【叙述-7】一味地抒情没有力量 \n\n\u003e xilei 发布于 2009-6-14 20:32:00 \n\n### （一）\n\n周末的时候，我和儿子去小区周围的书店，买《读者文摘》。学校的老师要求他们经常看这个杂志。我经常看儿子他们做一些摘抄的笔记。\n\n我们买了杂志出来，儿子跟我说：爸爸，我发现了一个秘密。\n\n我说是什么。\n\n儿子说：我刚才付款的地方，放了一排的影碟。都是《变形金刚》、《终结者》之类的。\n\n我说：哦，这说明了什么呢？\n\n儿子说：我猜是因为新的《星际迷航》要上映了。商家就把这同类的电影，摆放出来，让大家看。\n\n我说：有道理。商家是在做营销。\n\n儿子：什么是营销？\n\n我说：就是商家想一些办法来帮助推销商品给顾客。比如说《星际迷航》的新电影要上映了，商家就找一些同类的书、影碟和杂志，摆放在一起让大家选。他们就是想办法，让人能顺便多买一点。\n\n儿子说：原来他们是这样想的！\n\n我说：那当然，他们是动了脑子的。\n\n儿子说：哪还有没有其他促销的办法呢？\n\n我说：有啊。刚才这种，叫同类促销。还有一种，貌似没有关系，但实质上，有关系。\n\n我说：曾经有超市在卖小孩纸尿裤的地方，也摆放啤酒。结果，这两种东西都同时卖得很好。\n\n儿子说：我不明白。\n\n我说：看起来两件东西没有关系是不是？其实，如果这样想，就很容易理解：妈妈在家里带小孩，爸爸到超市买纸尿裤，顺便买点啤酒犒劳自己。\n\n儿子说：原来是这样。但是，他们是怎么知道的呢？\n\n我说：是的，这只是一种猜测。比较合理的猜测。其实，没有人一开始就知道会出现这个结果。\n\n儿子说：那谁会知道？\n\n我说：电脑。我们去家乐福购物，你到出口的地方付款。收银员扫描货物，那些销售商品的数据就汇集在一起。数据会发现很多人在做同样的事情：买了纸尿裤的人，同时也买了啤酒。\n\n我说：是电脑数据在提示人该怎么做，可以更方便卖出更多的东西。他们也会根据自己的需要，经常调整货物摆放的位置。\n\n儿子说：难怪上次，我发现卖文具的地方挪了地方，我在里面转了一大圈才找到。\n\n我说：你进去后，会重新定位。有很新鲜的感觉，也会发现旁边有不同的东西，可以选。\n\n晚上的时候，儿子要写作文了，还没有题目。我就说白天，我们聊的事情，可以写一写。\n\n儿子说：就是一些想法。也可以写吗？\n\n我说：那当然。这是一个真实的事情，为什么不能写？\n\n### （二）\n\n我对现在学校里的语文课，基本上不抱过高的希望。尤其是作文课。\n\n初中生，应该写一些说理性的文字了，很多时候，老师还在强调学生写抒情文字。\n\n我倒不觉得抒情的东西不能写，关键看你如何抒情。没事乱哼哼，写很多肉麻的排比句。太恐怖。\n\n我不知道现在是不是一个抒情时代，是不是现在学校的老师都是阴盛阳衰，不过，我觉得男孩子如果在课外推荐阅读的只是三毛作品，写一些软绵绵的抒情文字，真的是太恐怖。\n\n有时，我看儿子摘抄《读者文摘》的时候，就忍不住说：乱弹琴！\n\n我跟儿子说：其实，《读者文摘》最大的好处，不是里面的单个句子。语言，或者词语是有环境的。你这个词放在这里很好，放在其他地方就未必合适。词语可以在不同的语境下，呈现出不同的含义。\n\n儿子茫然。\n\n我说：不知你发现没有，《读者文摘》里面的文章，一般来说，最大的特点是什么？\n\n儿子摇头。\n\n我说：最大的特点就是，很多文字，都是这样的模式：讲一个故事，得出一个结论。\n\n儿子说：这样写，难道不是很简单？\n\n我说：简单又没有错。复杂往往才容易出错。很多人都用这样的简单技巧：讲一个故事，作一个启发，引导出一个结论。\n\n我说：华尔街日报的文章里面，也有一个很常见的叙述技巧：每次文字开头的时候，写一个具体的人物，或者场景。有点象电影里的处理：用一个近景聚焦，话题引出后，然后，再拉开来。最后，在结尾的地方，有可能的话，又再回到具体的场景中。\n\n他们为什么会一而再，再而三地这样做呢？经验证明，这样很有效。符合人的认知习惯。\n\n人的大脑从来都是很容易理解故事的。故事本身具有一种可感知的形状，比任何华丽的词语都更有形状。你想，故事是一个自然展开的链条：能帮助读者逐渐融入到叙述中，让他们理解信息、激发他们判断和发现的本能。\n\n因为人的认知有一个启动的过程。过于突兀的东西，会造成认知上的困惑。人对自己无法理解的东西，不能产生应有的情感。\n\n如果是这样的话，那么，那种一开头就用排比句来轰炸读者的做法，其实，相当愚蠢：给人对词语的炫耀以外，没有任何意义。\n\n也就是说，人的情绪没有任何准备，你一下就把情绪掀起得老高的，这种做法很突兀。如果你一直这么做，也不解释，人家很难理解。\n\n你自己也可以感受一下，就会明白：排比句中填充了很多抽象、压缩的词语，这些词破坏了语言本身的流畅感觉，而且要让人使劲去想它到底想表达什么。这样会造成认知的迟疑。很多时候，给人的感觉是，在阅读的过程中，依稀感觉到一些听令框框的干硬的东西，相互碰撞，但是，完全不能理解到底说了些什么。\n\n文字就是这样的：如果你组织的东西，人不能把握，你就等于什么也没说。一味地抒情没有力量。\n\n### （三）\n\n后来，我跟儿子讲德波顿的《旅行的艺术》。因为我想给他做一个示范，让他理解一本书可能是怎样构思出来的。\n\n我假设我自己就是作者，我被老师布置了一堂作文课，写一些关于以旅行为主题的文字。\n\n我不想写这样的文字：我去了某个地方旅行，然后，看见了一些风景，我有一些感想。\n\n我是一个哲学系的学生，这样写旅行为主题的文字，感觉上的确是还不够独特。所以，我想加入一点思考，写一些更有普遍意义一点的东西。\n\n我问自己的第一个问题：什么是旅行？\n\n我去 google 查了一下，上面有一个很好的答案：旅行，就是为了某个目的，从一个地方到另外一个地方。\n\n我马上明白：旅行的移动，需要一个工具。\n\n我知道：乘坐汽车、火车、飞机，有一种不同的感觉。我想起汽车的加油站、火车前进时，树木缓缓加速离开的情景，我在黑夜中，看见窗外玻璃中的自己。我看见飞机机翼下面的白云。那种不同工具下的体验，是一种旅行的独特体验。\n\n我想，每个人旅行的原因都不同：公干、游乐。人们总是向往一个远离自己地方，仿佛奔向梦想之地。\n\n人们为何总是喜欢那种异国情调的感觉？\n\n旅行，又会不会是一种逃离现实的办法？\n\n我发现，在一些文字中，也能发现旅行的痕迹：故国神游--思维从一个地方，到另外一个地方。\n\n好了，我想了很多，我从中发现了关于旅行的普遍含义，可以有这样的一些关键要素：\n\n1. 对旅行工具的不同感受；\n2. 人们在种异国情调的感觉面前，会有怎样的感受；\n3. 思想的旅行也是一种旅行。\n\n......\n\n当然，德波顿可能不是这样想的。我只是用了一个反向思维试图来理解书的结构。\n\n作为一个阅读者，如果发现了这种结构，那么，书就算看懂了。\n\n作为一个写作者，如果完成了这种结构，那么，书的骨架也基本完成了。\n\n这种逻辑结构，使得每个段落中的情节，前后关联，互有意义，浑然天成。\n\n任何叙述的难点，不在于叙述的词语，而在于叙述的角度、逻辑。是不是值得，是不是有它本身的意义。它有没有自己的思索，有没有自己的声音。\n\n其实，这是一个基本的方法。\n\n我跟儿子说：观察，然后提问，多问几个为什么，试着想办法回答它。把思考的过程和分析的过程、结果写下来。\n\n我说:写文字简单地说，就是确定一个主题，寻找一个结构，用好的细节或故事形式来表达。如此反复。\n\n如果你这样想过，这样做过。很多的东西，就会源源不断地冒出来。你根本不用担心，要用什么词语写。你能控制好内容，词语自然就如泉水一样涌出来。\n\n我们的身边有很多这样的素材，如开头的部分，我们提到的关于营销的对话。\n\n你无须写出象德波顿那样复杂的文字，但是，思考的原理，本质上是完全相同的。\n\n其实，这就是思考的力量，逻辑的力量。\n\n文字的叙述，无论如何表现，其背后都有一种思考的过程。只有那种内在的逻辑的表达，才能让读者知道你想说什么。\n\n你看见一些现象，你问到底是为什么。你去寻找那个驱动向前的逻辑力量。你就可以找到文字，找到答案。\n\n\n\u003chr class=\"slender\"\u003e\n\n## 【叙述-8】叙述的态度 \n\n\u003e xilei 发布于 2009-10-27 13:42:00 \n\n### （一）\n\n10月1日上午，在家里看了今年的阅兵式。\n\n以前的两次大阅兵也看过，“小平您好”的那次最有记忆和感触。\n\n今年的阅兵怎么说呢？一种说不出的味道：看起来很热闹，感觉却很拘谨，不舒服。\n\n过了两天，就在网上看见了一个卫报记者做的几分钟的照片和影片的剪辑合成。这个精彩的片段，给我们提供了另外的一种视角。\n\n我看见了一种cctv从来没有展示的一些细节：阳光透过云层在天安门洒下游动的阴影；在微风中舒展的红旗；战士们整齐的步伐在舒缓的音乐中形成一种反差；游行队伍里人们舞动的手臂，他们的面容；还有孩子骑在父亲的头上在队伍中走过....\n\n作为一个旁观者的角度，卫报记者配了一个冷峻的音乐。于是，网上有很多人在骂，说这个片子不怀好意。\n\n一个热闹的欢腾的场面，为什么不是锣鼓喧天呢？\n\n又过了几天，我在网上下了一个凤凰卫视版的阅兵视频下来。我看了一段，马上就明白那种不舒服的感觉来自哪儿了。\n\n这种感觉就如同当初看NBC制作的北京奥运会转播一样：任何东西，只有通过对比，才能发现，同样的事情，用不同的方式讲述，其品质的差异会很大。\n\n所以，有网友批评cctv是：一流的设备，二流的解说，三流的摄影，不入流的导播。\n\n其实，cctv的问题不在于其专业水平，而在于其叙事美学的选择不同。\n\ncctv已经习惯于一种宣讲、致敬的美学。其美学特征为：字正腔圆、句式标准规范、场面宏大、激情澎湃。\n\n凤凰卫视则提供了另外的一种平民美学的范本，其美学特征为：基于沟通和理解的讲述方式，关注细节，语气是舒缓、亲切的。\n\n凤凰卫视的国庆阅兵有很多值得回味的细节：\n\n主持人会事先告诉观众，整个庆典仪式是怎么一个流程。每个流程中有什么看点。国外的媒体关注什么重点。\n\n整个庆典有现场报道，主持人会讲到一些有趣的佚闻：胡总从天安门层楼的某号电梯下去阅兵的；游行的人群中有人的鞋掉了，光着脚走过了检阅区；每个彩车里面还藏有很多人，万一车子出故障了，就用人推....\n\n丰富的细节，并不会给人揭丑的感觉，反而感觉到温暖。一种体量的叙述，会让人有一种可以亲近的参与感。\n\n当士兵列队走过的时候，主持人会请主持嘉宾介绍他们手中的各种武器。\n\n阅兵有阅兵的主题。\n\n听了凤凰卫视的国庆阅兵解说，我终于有了一回人民当家作主的感觉。\n\n### （二）\n\n有一天，儿子从学校拿回了一摞同学的作文本。\n\n儿子的作文，总是只得了40多分（总分：60）。老师不喜欢他实话实说的写字方式，说他的文字没有感染力。\n\n老师直接推荐了班上写得很好的同学的作文，让儿子学习。\n\n儿子给我推荐了一篇，叫《风声》。老师说这篇特别具有“哲学”气质。\n\n这篇作文得了56分。\n\n文章的开篇是这样的一段话：\n\n\u003e 我如泥一般烂在沙发上，四周都是疯狂涌入的笛鸣。静止的空气，囚禁的心灵。\n\n老师在旁边打了一个很大的五角星。五角星表示：good,very good!\n\n文中还有很多这样类似的五角星句子：\n\n\u003e 哪个男儿，在红日烈风下，不心生豪情，哪个男儿，在啸风中，不欲定天下。\n\u003e \n\u003e 即使此刻立即化为灰烬，也要对酒当歌，与风合吟。\n\u003e \n\u003e 好个狂气的风声，撩我发髻，夺我衣衫。\n\u003e \n\u003e 好个放肆的风声，湮灭我的声音，同化我的灵魂。好个自由的风声，吹断了我的枷锁，笑塌了我与尘世的隔阂。\n\u003e \n\u003e 我是风的信徒，我是自由的奴隶。我不求长生不死。我只愿跪拜于这风声中直至消亡。\n\n儿子问我：“什么感觉？”\n\n我说：“我很高兴，你没有写成这样。看了半天，我还不知道，他到底在说什么。”\n\n我说：“看了第一段，就看不下去了。我对这种文风，只有六个字的评价。”\n\n儿子停下手中的作业，望着我。\n\n我说：“这就叫：抒情败坏叙述。我并不是说，任何抒情都不可以，而是，你得讲求基本的叙述逻辑。”\n\n“叙述，是一种沟通的过程。你要传递信息，你要选择什么信息，如何组织和结构。你不能一站上来，就扯开嗓子喊，一个人在哪里莫名其妙地抒情。这一点没有任何哲学气质，完全是发神经的做法。”\n\n“你看这些作文都写成什么样子了：一上来就用排比句，而且是大段大段的排比。然后呢，把所谓的名人名言切割、包装，整理成段，也不管他逻辑上跟文字有没有关系，就往上搭理。简直就是收破烂的。这些写，迟早要把脑子给写废了。”\n\n儿子说：“老师说，如果这种文章能写的话，以后什么文章都可以写了。”\n\n我说：“这简直就是在误人子弟！你们都在看余华的《活着》，你们看作品中，也没有，动不动就乱排比的，乱抒情的。”\n\n儿子说：“就是。老师让我们找好字好句，结果，我们找了好久都没有找到。”\n\n我说：“其实，你们有一个同学写的挺好的。他写他在乡下和奶奶在一起的时候的一些小事。我觉得很真实，至少我知道他在告诉我值得记忆的是什么东西。可惜，老师让他重写。我觉得越写越差了。为什么不相信哪些真实的细节，而要去追求哪些虚无缥缈的形容词呢？”\n\n这位同学在重写之前，在本子上写了自己的“罪状”：语言太没有感染力了。\n\n这位同学重写了一篇。在文章的开头，他写了一段这样的话：（此处为排比句）。老师给了个大大的问号。\n\n我想：这也是同学无声的抗议吧。\n\n我把其他同学的作文也很快翻了一下。没有办法看下去，都是写成了一个模子，都跟打了鸡血一样。\n\n我跟儿子说：“有空，我推荐你看看卫报记者和凤凰卫视的国庆阅兵。”\n\n“cctv版的解说，就跟你们的作文一样，打了鸡血一样。你回过头来，看看不同的叙述方式。你会发现，叙述其实，就是一个沟通和理解的过程。”\n\n“如果你不想让人家理解，你只管自己在哪里嚎就是了。没人理你，因为，你也不想让人家理解你！”\n\n“可是，如果你想和人家沟通。那你就要想好了：我想表达什么，我该如何表达得真实、贴切和有亲和力。”\n\n“你们同学的《风声》的这种写法是根本要不得的：基本上属于逻辑混乱，词不达意。这种矫揉造作的文风在现在的学校里备受推崇，而且很容易在考试中得高分。但是，这些真的是垃圾啊！”\n\n“我宁愿你仍然写成现在的样子：关注自己的观点和感受，然后，思考如何把它表达清楚。文字上的技巧，可以慢慢来。”\n\n“我们宁愿真实一点，笨拙一点，也不要胡言乱语。如果一个人脑子坏了，就没法弄了。如果脑子还好，傻一点也没关系。”\n\n\n### （三）\n\n有什么样的社会，就会有什么样的文本。\n\n我的移动硬盘上有一个10多个G的NBC剪辑的北京奥运会开幕式。我最喜欢的是那个好莱坞似的片头。\n\n每次我看到那些画面的时候，我真的想到了四个字：山河壮丽。\n\n可是，我也看过cctv的版本：插播了很多无关紧要的领导的画面。很多美轮美奂的细节都牺牲掉了。\n\n最让人无法忍受的是耳朵里充满了打鸡血一样的解说的声音。这些声音老是让我想起了朝鲜人民的新闻联播。\n\n从今年的阅兵式后，我得出了一个结论：如果以后有类似的转播，最好不要听cctv的解说。\n\n有什么样的态度，就有什么样的叙述。\n\n\n\u003chr class=\"slender\"\u003e\n\n## 【叙述-9】好莱坞电影的秘密\n\n\u003e xilei 发布于 2010-1-18 14:48:00\n\n### （一）\n\n要到期末考试了。儿子他们开始准备“万能作文”。\n\n第一次听说“万能作文”的时候，我是大吃一惊。\n\n还在想：怎么写，作文才能写成万能的啊？\n\n儿子把作文题目给我看，我才明白，原来“万能”是另外一种意思。\n\n比如说，作文题目是这样的：带着....出发。\n\n我想：这种题目当然是万能。\n\n我问儿子：可不可以写“带着怀疑出发...”\n\n儿子说：不能。老师说了，一般都写这种，“带着感动出发”、“带着回忆出发”.....\n\n卖糕得，原来万能也不是真的万能的。\n\n我说：可不可以写“带着锤子出发.....”\n\n儿子说：为什么？\n\n我说：我们这里公交经常自燃....\n\n儿子在一边笑弯了腰。\n\n“那肯定是一篇很牛逼的零分作文。”\n\n### （二）\n\n儿子上中学后，语文就改写散文了。不写记叙文了。\n\n我问他：为什么呢？\n\n儿子说：老师说的，记叙文，只能用第一人称来写。\n\n我说：这很容易。下次，你开篇第一句就写：我是某某某。接下来，就用第一人称写。\n\n儿子跟我说：这个寒假，他们老师要他们多读满分作文。\n\n那些满分作文，上百度就可以搜到。\n\n儿子和我，都认为，这些作文，大部分都惨不忍睹。（其实，我想说:大部分都是垃圾！）\n\n我说：等你考试完后，马上去看《阿凡达》。另外，我还推荐你看两部电影：《心灵捕手》和《大鱼》。\n\n好多次，我跟儿子说过：好莱坞的电影，会教给你很多东西。\n\n### （三）\n\n在我看来，很多好莱坞的电影，其实，讲的是同一个故事。\n\n经典的好莱坞的故事一般都是这样的：\n\n一个有理想但有缺陷的主人公，遇到一个突然降临的事件或动机，他面临着克服自己的弱点，展现出面对困难所需要的勇气和信心。经过一系列的痛苦、坚持和奋斗，他终于做回了自己--一个有点害羞的大英雄。同时，伴随着正义战胜了邪恶的大结局。\n\n我们拿两部电影来看。\n\n在《功夫熊猫》里，阿宝是个胖子，他的梦想是当功夫高手。阴差阳错的，他被选为神龙大侠。但是，他的师傅不待见他。他自己也曾经心灰意冷。但是，后来太郎出来了，这就是一个转折点。所有正义的一方没有选择的机会了。他的师傅接受了乌龟大师的批评教育，改变了想法，教给大宝功夫。阿宝也在关键时刻领悟到自我的力量。阿宝，最终打败了太郎。\n\n同样的，在《2012》用另外的元素，把故事重新讲了一次。\n\n主人公是一个在现实中不太走运小说家。他面临工作和家庭的双重困难：含辛茹苦写的科幻小说只卖了500本，而自己跟妻子离异，自己的儿子跟前妻的男友打得火热。他不知到底该如何面对现实和梦想的距离。\n\n这时，2012到了，地球开始毁灭了。小说家迎来了转机。\n\n他隐藏在平常现实里的聪明才智和勇气，有了向亲人展示的机会。\n\n爱、自由和责任，把这个渺小的凡人，变成了一个伟大的拯救行动的化身。\n\n最后，连导演都帮了他的忙，帮他在逃亡的途中，让事故消灭了他的情敌。他重新赢回了家庭和尊严。\n\n好莱坞的经典故事莫不如此：《变形金刚》如此，《阿凡达》也是如此。\n\n### （四）\n\n那为什么同样的故事模式，无论重复多少次，人们都爱看？\n\n大概可以有如下的几个理由：\n\n1. 人类天生喜欢故事；\n    一切叙述的本质就是沟通。而好的故事模式具有好的沟通模式。\n    好莱坞电影跟观众的沟通堪称典范：\n    它由巧妙的结构、鲜明的动机，以及一系列观众容易理解的事件前后因果联系所构成。\n2. 人类的好奇心；\n    对真实性、对细节的渴望，源于人的本能。\n    人类喜欢惊悚、恐怖，或酷爱遥远的宇宙，都是出于人的本能。\n    即便在虚拟的空间中，人也追求感觉上的真实一体性。\n    人可以理解在一种假想环境中的真实，但是，他们还是需要逻辑的连贯性。否则，他们会产生质疑。\n3. 人类存在对高尚情感的追求\n    人在现实中，不能获得的正义感，需要一个感情的出口。\n    人类的普世价值，在电影中，可以用一种有距离的现实来观察、呈现，并引起共鸣。\n    谁要是不承认普世价值，带他去看《阿凡达》就好了......\n\n### （五）\n\n好莱坞电影，其实，可以告诉我们如何叙述。\n\n首先，你要想清楚，你到底要表达什么。\n\n其次，叙述必须要有一个用来沟通的结构，或者逻辑。\n\n接下来准备或挑选素材中，你想呈现的因果联系。你的细节最好能感觉故事比较真实、准确、足够丰富。\n\n当然，现实中的叙述的冲动，可能是这样产生的：\n\n你看见了一个素材，触发了你的一个想法。然后，你才想，我到底要表达什么，然后，再去想如何弄。\n\n因此，不管你做任何叙述，还是创造其他的什么玩意。\n\n重要的是思维的过程要是正常的。如果思维的过程都不正确，那怎么弄都是瞎弄。\n\n当然，还有更重要的一点：\n\n你必须忠实于自己的内心，你不可能用一种黑灯瞎火的方式去写出一个伟大的故事。\n\n### （六）\n\n现在学校里的教作文的方式，是让我真正开了眼的。\n\n有老师这么教孩子写作文的：\n\n作文分三段，第一段写100字，第二段写200字，第三段写100字。\n\n这就是我说的：黑灯瞎火的方式。不知道在干嘛。\n\n你教孩子给段落写个小标题，不很好吗？字数能表明段落的逻辑吗？\n\n当然了，还有比这个更让人头大的。\n\n据说，有人送小孩回国读小学。小孩写了春天，说春天是潮湿的。\n\n老师就把作文给毙了，让小孩重写。春天都是温暖的，怎么能是潮湿的呢....\n\n家长吓得内牛满面。赶紧给小孩退学了。\n\n### （七）\n\n有一天，我在家收拾抽屉，发现儿子小学军训时写的日记。\n\n其中有一段，写他早上起来喝牛奶。美滋滋的感觉，跃然纸上。\n\n儿子上中学后，就没有写过这样的文字了。\n\n他们成天听写汉字、背古文，看满分作文。写字的时候，感觉和信心全无。\n\n学校是非常重视数理化，也貌似非常重视逻辑，但是，写出来的作文大多是没有逻辑的。\n\n这是为什么呢？\n\n我想了好久，终于明白了：你这也不能弄，那也不能弄。怎么可能有逻辑呢？\n\n如果有，那逻辑也多半是精神分裂、言不由衷，自断经脉的。\n\n没有人性，就没有情趣，更谈不上什么逻辑。没有人性，也不会有好的故事或叙述。\n\n就是这样。W\n\n那好吧！\n\n把作文书扔一边去，让孩子去看好莱坞的电影吧！\n\n[http://www.dapenti.com/blog/more.asp?name=xilei\u0026id=25936](http://www.dapenti.com/blog/more.asp?name=xilei\u0026id=25936)"},{"slug":"June-fourth-2-campaigns","filename":"2022-06-17-June-fourth-2-campaigns.md","date":"2022-06-17","title":"·转载 | 吉汉：边缘化的六四论述：八九春夏，其实发生的是“两场运动” | 端传媒","layout":"post","keywords":["html","zh"],"excerpt":"本月四日，Google Analytics 上显示本站的点击量有一定程度的增长，看来来看这个博客的反贼们很清楚咱这个博客的反动本质啊，那咱也就不装外宾了","content":"\n\u003e 对于六四运动的深入理解，需要我们同时跳出这两种叙事：既告别“知识分子中心论”、重视工人和市民的参与，同时承认“民主”的确是工人和市民参与运动的核心诉求。最关键的是，工人与市民所理解的“民主”，和学生、知识分子所拥抱的民主观念有很大不同。\n\u003e \n\nMay 28, 2019 10:53 PM\n\n![1989年5月18日，工人在北京街道以电单车游行声援天安门广场绝食的学生。摄：Catherine Henriette](https://d32kak7w9u5ewj.cloudfront.net/media/image/2019/05/37c2f3d21d8d4836b978a6ce6a1d11ff.jpg)\n\n1989年5月18日，工人在北京街道以电单车游行声援天安门广场绝食的学生。摄：Catherine Henriette\n\n关于六四运动的历史叙事，比较常见的是两种版本。其中最为主流的版本，当然是把运动放在“民主vs威权”的框架下来理解。这一叙事中的“民主”，往往指的是自由主义意义上的民主。80年代，中共逐渐告别“阶级斗争”的传统话语，开始走一条重视经济发展的务实路线。市场化改革伴随着思想和言论领域的放松，西方自由主义思潮开始在大陆青年与知识分子中流行。随着知识分子对欧美自由主义民主制度的了解加深，自由民主价值的实现也成了知识分子和青年学生的期望所在。\n\n然而令知识分子和学生们感到失望的是，80年代中共政治改革、政治自由化的进展远远滞后于市场化经济改革，而且几次出现倒退——其中最为明显的，就是1983年“清除精神污染”运动和1987年对以“放开民主选举”为主要诉求的一波高校学生运动的镇压，这次镇压直接导致了时任中共总书记的开明派领导人胡耀邦下台。在这一叙事中，这些受西方自由主义影响的青年学生和知识分子们，逐渐累积的不满终于在1989年胡耀邦逝世后彻底爆发，他们走上街头，希望当局加速推进此前频频受阻的政治自由化进程，从而让政治改革和经济改革齐头并进。\n\n而另一种讲述六四运动的叙事，则是将运动放在“社会主义vs资本主义”的框架下理解。这一叙事在公共舆论中的影响力虽然远远不及第一种，但在一些特定的左翼社群——比如中国大陆的一部分毛主义左翼、西方的一部分反斯大林主义左翼——中颇为流行。在这一叙事中，1980年代的一系列市场化改革将中国从社会主义计划经济带入资本主义市场经济，这一变革过程带来严重的通货膨胀和贫富差距的急速扩大，也造成了大量腐败问题，降低了城市人口的生活水平。和“民主vs威权”叙事不同，“社会主义vs资本主义”的叙事认为学生、工人、市民不满的真正原因是市场化改革所造成的一系列经济乱象，这些不满聚焦为对腐败官员的愤怒。\n\n在这一叙事看来，六四运动是一场由经济诉求引发的反市场化改革、反资本主义运动。它的核心诉求并不是民主，而是反对市场化改革和资本主义转型所带来的一系列弊端。“反腐败”、“反官倒”、“控制通货膨胀”的口号的确在1989年春夏之交的游行和集会中随处可见，也是学生代表和政府官员对话时提出的核心诉求；学生、工人、市民只是希望当局解决腐败、官倒（官员利用政治权力在市场中倒买倒卖）、贫富差距扩大、通货膨胀失控的问题，这一希望并不意味着参与运动的人们都支持以“民主”为核心的政治改革。这一叙事背后隐含的一层预设是，既然运动抗议的对象是邓小平时代经济改革所带来的一系列乱象，那么运动参与者的愤怒中也必然带有对于经济改革之前的那个时代——毛泽东时代——的些许怀念。\n\n这两种叙事在很大程度上都是有问题的。在“民主vs威权”的叙事中，运动的主角几乎永远是学生和知识分子，严重忽略了同样踊跃参与运动、在运动中扮演重要角色的工人和市民。事实上，不管是从六月三日晚上、六月四日凌晨清场的死伤状况看，还是从运动过后当局的镇压力度看，工人、市民所付出的代价都要远远大于知识分子和学生。这一局面和1980年韩国光州运动相似。而在“民主vs威权”的叙事里，工人和市民几乎完全失去位置。\n\n“社会主义vs资本主义”的叙事虽然提及了工人和市民在运动中的角色，但完全不能解释关于这场运动的最基本事实：对于“民主”的诉求，毫无疑问是这场运动的核心主题，这不是“反资本主义”、“反市场化改革”可以概括的。更何况，虽然对于市场化改革的不满确实是刺激工人和市民参与运动的重要因素，但在运动中几乎没有出现任何对于毛时代或者毛本人的怀念。换句话说，参与运动的许多人固然对市场化改革带来的后果不满，但他们所希望的，并不是简单倒退到市场化改革之前的时代，也不是仅仅希望当局解决具体的经济问题，而是用一种全新的、系统的政治想像，提出了既拒斥社会主义计划经济也拒斥市场化改革的替代方案。\n\n对于六四运动的深入理解，需要我们同时跳出这两种叙事：既告别“知识分子中心论”、重视工人和市民的参与，同时承认“民主”的确是工人和市民参与运动的核心诉求。最关键的是，工人与市民所理解的“民主”，和学生、知识分子所拥抱的民主观念有很大不同：那是一种突出工人阶级主体性的社会主义民主（后文会详细介绍这种社会主义民主的想像）。作为工人阶级争取社会主义民主的运动，六四的这一维度极为重要、却又极容易被忽略。\n\n## **八九中的工人运动**\n\n\u003e 当局对工人的镇压烈度远远大于对学生的镇压——这一事实既被历史学家迈斯纳（Maurice Meisner）的研究和吴仁华的《天安门血腥清场内幕》所记录，也被我访谈的六四亲历者所证实。\n\u003e \n\n学者魏昂德（Andrew Walder）和龚小夏在1993年发表的一项[研究](http://www.tsquare.tv/links/Walder.html)，以“北京工人自治联合会”（简称“工自联”）为线索，深入梳理了工人、市民参与六四运动的过程。在胡耀邦于1989年4月15日逝世之后，各大高校的学生开始在校园内为胡耀邦设立灵堂。与此同时，开始有工人和市民三三两两地聚集在天安门广场人民英雄纪念碑附近，交换对于时局的看法。此后几天，工人和市民的聚集人数增多，达到数十人。在“新华门事件”之后，被警方粗暴对待学生所激怒的少数工人决定成立一个组织，这便是“工自联”的前身。也就是说，“工自联”的成立还要比“北京高校学生自治联合会”（简称“高自联”）早几天。\n\n然而，彼时的“工自联”只是几十人组成的非正式组织，既没有公开活动，也没有成型的组织结构，甚至成员彼此之间也不熟悉。在四月份，运动的节奏一直牢牢掌握在学生手里。从4月17日的天安门广场游行、到随后的“新华门事件”、到4月22日胡耀邦葬礼当天的游行、再到4月27日抗议《人民日报》“四二六社论”的十万学生大游行、最终到5月4号更大规模的纪念五四游行，这一系列示威活动的参与者基本完全由学生组成。\n\n![1989年6月1日，北京留守天安门的示威学生在广场弹吉他。摄：Peter Charlesworth/LightRocket via Getty Images](https://d32kak7w9u5ewj.cloudfront.net/media/image/2019/05/54a32e6fb3f24f94a4e3b5274ef5cc8e.jpg?imageView2/1/w/1080/h/720/format/jpg)\n\n1989年6月1日，北京留守天安门的示威学生在广场弹吉他。摄：Peter Charlesworth/LightRocket via Getty Images\n\n然而5月4日之后，学生运动转入低潮，大多数学生不知道下一步何去何从，也对运动的进一步升级心怀疑虑。许多学生结束了罢课。在运动面临停滞不前的困境下，一部分较为激进的学生开始计划绝食行动，希望借此将参与热情维系下去、把运动推向新的高潮。在这个意义上，绝食的学生也的确实现了他们的目标。5月13日，数百名学生绝食的第一天，天安门广场上参与示威的人数多达30万，创下了运动开始以来的记录。\n\n绝食的开始，对这场运动的走向来说，是一个意义重大的转折点。大多数学生的参与热情虽然在短时间内再次被点燃，但还是不可避免地继续衰落下去。在5月13日之后，学生的参与整体上不断下跌，逐渐显露出颓势，越来越多人从广场上撤回。然而，学生绝食行动前所未有地激发了工人和市民的参与。普通工人的热情，不仅体现在参与人数上，更体现在工人开始自发组织他们自己的示威游行、打出他们自己的横幅和标语。工人逐渐成为运动的主力。刺激工人大规模参与运动的，既有对于绝食学生的朴素的同情心——或者说“心疼”——也有对于政府在绝食学生面前不为所动的道德义愤。用我所访谈的一位参与运动的北京工人的话说，他只是觉得“政府这么欺负学生太过分了”。随着工人参与人数的暴增，“工自联”开始在五月中旬公开活动，大范围招募会员。\n\n进一步刺激工人参与运动的，则是5月20日戒严令的颁布。在军队浩浩荡荡地从四面八方开进北京城的时候，无数工人和市民自发在城市外围的各个地方阻拦军队进城。他们排成人墙、堆起路障，阻止军队进一步前进。他们给士兵们提供食物和补给，和士兵建立友谊和信任，动之以情、晓之以理，劝说士兵们放下武器。换句话说，在戒严开始、局势的危险程度大大增加之际，敢于和最为强力的国家暴力机关正面对抗和交涉的，不是学生，而是工人。而工人们也确实取得了暂时的胜利：军队进城的步伐被阻拦了。\n\n历史学者吴仁华在《天安门血腥清场内幕》中也回忆说：“在八九民主运动中，最具有道德勇气、牺牲最惨重的不是学生，更不是知识界人士，而是北京市的工人弟兄和市民。为了保卫天安门广场，保护天安门广场上和平请愿的学生，他们一直在用血肉之躯阻挡着武装到牙齿的解放军戒严部队，浴血奋战，奋不顾身。”\n\n用德国共产主义运动领袖罗莎·卢森堡的话说，[工人阶级的斗争意识是在斗争过程中不断培养起来的](https://www.marxists.org/chinese/rosa-luxemburg/marxist.org-chinese-rosa-1904.htm)。六四运动也印证了这一点。在阻挡军队进城的过程中，工人们逐渐意识到他们自发的组织和行动当中所蕴含的巨大能量。这像是一种前所未有的自我解放。一大波“自我组织”的浪潮开始了。根据魏昂德和龚小夏提供的数字，从五月中旬开始，工自联的成员人数开始暴增，到六月上旬已经多达两万人。与此同时，其他各式各样的工人组织也如雨后春笋一般涌现。\n\n组织的发展带来行动的激进化。工人们开始组织各种“纠察队”、“敢死队”等等带有自我武装性质的类民兵组织，以便及时观察、传递军方的动向，同时维持城市治安、不给军方镇压提供借口。魏昂德与龚小夏的论文也指出了这一点。我曾经访谈的一位运动亲历者回忆说，工人开始阻拦军车的一周之后，光是长安街西向延长线北侧（也就是木樨地、军事博物馆北侧）的月坛、甘家口一带，就活跃着十几个工人纠察队。工人们三班倒或者四班倒，及时观察社区和街道上的情况、帮助维持秩序。我曾经访谈的另一位运动亲历者说，这时候的北京几乎成了一座工人和市民自我管理的城市。这让人不由想起在1917年，俄国二月革命和十月革命中间那段时间，俄国工人阶级成立的自我武装组织。\n\n同时，工人们开始在更多的街道上筑起堡垒和工事。不少工厂的工人们开始有组织地发起罢工和磨洋工。鲍朴整理的《李鹏六四日记》也显示，到五月底，已经传出消息说首都钢铁厂（“首钢”）的十万工人正在筹备罢工，令中共高层震动。首钢是当时北京规模最大、最具标志性的工业企业之一，一旦首钢工人罢工，很可能在整座城市掀起大规模的罢工潮。而且当时工自联已经明确提出“筹备发起总罢工”的口号，不少工人着力在各个工厂之间建立联系，为总罢工做准备。\n\n自我武装、自我组织、发起罢工，这些行动的意义与示威、游行、占领不同。后者的意义主要是“自我表达”，而工人的这一系列行动，本质上是“自我赋权”，是在日常生产和生活中取得控制生产、管理社会的权力。这些行动本身，就具有远超出示威、游行、占领行动的激进性。这便是运动发展到五月底、六月初时面临的情形：学生的运动陷入瓶颈，规模滑坡、内斗不断；工人的运动却在不断升级的自我组织、自我动员中发展壮大，激进性与日俱增。\n\n我们无从确证当局为何在6月初最终下定决心暴力清场。我认为，一种不无道理的猜测是：让当局恐慌的不是已经显露颓势和败相的学生运动，而是快速发展、不断激进化的工人运动；工人们的自我武装、自我管理，以及总罢工的筹备，才是令当局真正害怕的。而清场当天与清场之后的种种行动也确实表明，当局对工人的镇压烈度（人数和判刑）远远大于对学生的镇压——这一事实既被历史学家迈斯纳（Maurice Meisner）的研究和吴仁华的《天安门血腥清场内幕》所记录，也被我访谈的六四亲历者所证实。\n\n## **知识分子与工人的两种民主想像**\n\n\u003e 工人们对于“民主”的表述，是独特的、不同于学生的。\n\u003e \n\n在运动展开的一个多月中，话语权和媒体的注意力主要都集中在学生和知识分子身上。这在一定程度上是因为学生和知识分子的表达能力、外语能力、和媒体互动的能力更强。相对学生而言，工人一直处在失语的位置上。而正如前文所讨论的，工人们对于民主权力的追求，首先不是体现在他们的言说当中，而是体现在他们的行动当中。用行动争取权力的过程，本身就彰显着工人们的主体性，本身就是一种激进的民主想像。\n\n此外，虽然工人在参与运动过程中留下的言说和文字少于学生，但如果我们细细检视这些言说，便会发现：工人们对于“民主”的表述，是独特的、不同于学生的。\n\n![1989年5月18日，超过一百万中国工人涌入北京街头，支持天安门民主运动。摄：Catherine Henriette/AFP/Getty Images](https://d32kak7w9u5ewj.cloudfront.net/media/image/2019/05/0dd5480f3ace42b5baebd41f0f1764d5.jpg?imageView2/1/w/1080/h/720/format/jpg)\n\n1989年5月18日，超过一百万中国工人涌入北京街头，支持天安门民主运动。摄：Catherine Henriette/AFP/Getty Images\n\n从魏昂德和龚小夏对于“工自联”传单的分析来看，工人们首先关注的当然是与切身生计相关的经济议题：通货膨胀、贫富差距。这些市场化改革中出现的问题，当然使得城市工人对市场化改革态度极为负面。然而，工人们并不是就经济论经济，而是为经济议题提供政治化的解读，并以此为基础建立关于民主的论述。在工人们看来，不管是通货膨胀还是贫富差距，造成问题的根本原因都是官僚系统：“斯大林主义式”的“专制官僚”——这样的词语在工自联的传单中反复出现。\n\n在工自联看来，之所以出现通货膨胀，是因为控制生产定价和进口环节的官僚们故意把商品价格定高、从而在中间赚取利益。因此，解决通货膨胀和贫富差距问题的根本出路，是推翻官僚制、将产品的生产和流通过程控制在工人自己手上。这种以反官僚为基础的民主论述，不禁让人回忆起1966-1967年早期文革运动中的工人造反派。\n\n工人们对于官僚制危害的切身体验，并非来自于在政治生活中缺少言论自由和选举权，而是在工作场所中缺少话语权。“专制”的最彻底体现，是企业中的厂长负责制。魏昂德和龚小夏所采访的一位工自联成员说到：“在车间里面，是工人说的话管用，还是领导说的话管用？我们后来聊过这个。在工厂里面，厂长就是独裁者，他说什么就是什么。如果你从工厂出发看这个国家，就能发现其实是一回事：一人专制。我们的目标并不高，就是希望工人能有自己的独立组织。”\n\n也就是说，参与运动的工人毫无疑问是在为民主奋斗，但工人眼中的“民主”首先是工作场所的民主、是劳动权益的民主。工自联对民主的论述，从始至终交织着对官方工会系统（中华全国总工会）的批评，认为官方工会无法真正代表工人，希望工人有组织独立工会、监督企业管理者、集体谈判的权利。在工自联看来，这种“工人自治联合会”的组织形式提供了一个契机，鼓励更多的工人在自己的工作场所成立自治组织，让工人们联合起来和官僚抗衡。这远远超出对市场化改革本身的反对，而是直击市场化改革的政治基础：官僚独裁。\n\n不管是在日常生活中对工作场所“厂长独裁”的体验，还是对于整个国家政策层面经济转型的无力感，都让工人们更加确认“官僚独裁”才是问题的根源。我曾经访谈过的亲身参与六四运动的几位工人也表示，在他们看来，1980年代末期的经济政策反复无常、自相矛盾，一会儿过于宽松造成大规模通货膨胀，一会儿又过分紧缩造成企业倒闭、工人失业，吃亏的总是工人。这些自相矛盾的政策，一方面表明执掌国家权力的官僚们颟顸无能，另一方面也表明官僚们见风使舵、让改革为自身的利益需要所服务，不顾工人的死活。魏昂德和龚小夏所访谈的多位工人，也表示了类似的意思。\n\n因此工人所定义的“民主”，是推翻官僚制、用工人阶级的自我管理取而代之，而实现这个目的的第一步，就是争取工作场所的民主、建立工人的自我组织。\n\n这一民主构想带有鲜明的阶级性。它建立在工人阶级的主体性之上。这也就是真正意义上的“社会主义民主”。这种民主构想，和学生、知识分子对民主的认知有很大不同。在后者的论述当中，“民主”是由一系列普世的自由价值构成的。虽然学生们同样要求严查腐败、清除官倒，但这一诉求所指向的是抽象的民主权利和自由，而不是像工人一样，认为民主首先应该建立在工作场所和劳动过程之中。\n\n在工人眼中，民主和市场化改革是截然对立的。市场化改革让本就掌握巨大权力的官僚们更加肆无忌惮，市场化改革和官僚独裁两者相辅相成，因此必须同时推翻；而在学生眼中，民主和市场化改革是相伴相生的，市场化改革中出现的腐败、官倒等问题，是市场化改革不完善的结果，更是民主化改革没能跟上市场化改革的写照。因此学生开出的药方，是让经济改革与政治改革并行。事实上，在被称为“六四运动预演”的1986-1987年学生运动浪潮中，[“继续推进经济自由化”就已经被学生们列为抗议的核心诉求之一](https://books.google.com.tw/books?id=uQr9IFnp3w4C\u0026printsec=frontcover\u0026hl=zh-TW#v=onepage\u0026q\u0026f=false)。\n\n工人所要的民主和学生所要的民主，前者是建立在阶级话语基础上的民主，后者是去阶级化的民主；前者首先指向工作场所的民主，后者则是在抽象的个体自由基础上的民主；前者是拒斥市场化改革的民主，后者是拥抱市场化改革的民主。也正是在这个意义上我们可以说，工人们所追求的是社会主义民主，而学生们所追求的是自由主义民主。\n\n## **无法形成的跨阶层联盟**\n\n\u003e 我们也许可以说，1989年所发生的不是一场运动，而是两场运动。学生的运动和工人的运动，虽然发生在重叠的时间和空间，相互之间也有交叉和互动，但始终没有汇合到一起。\n\u003e \n\n工人与学生在六四运动中的参与轨迹不同，对于“民主”的认知也大相径庭。因此也就不难理解，在整个运动中，工人与学生之间为何存在巨大的鸿沟。\n\n这种鸿沟，首先体现为学生对工人参与运动的排斥。学生们认为这场运动应该是完全属于学生自己的，并竭力保持运动的“纯洁性”。魏昂德和龚小夏指出，在五月底之前，学生们一直排斥工人组织进驻天安门广场。学生们甚至不愿和工人组织沟通，尤其是不待见建筑工人的组织（当时的建筑工人主要都是北京周边郊区的农民）。迈斯纳的研究也表明，在学生组织的几次大游行中，学生们手挽着手、在道路两侧搭起人墙纠察线，很大程度上是为了避免市民“混入”游行队伍当中。也有运动亲历者表示，学生们在调配香港和海外捐赠的补给物资时，特别注意不让这些物资落入工人手中。\n\n这里恰恰蕴含着这场运动的讽刺之处。运动中的学生领导者多次表明要用自己的行动“唤醒”民众，但从上述种种表现看，他们对那些根本没有在睡觉、不仅醒了而且还积极参与运动的民众爱答不理。这种精英主义的自我优越感，一方面来自于精英高校学生的“天之骄子”心态，另一方面还透露出古典的中国士大夫情怀：将自身看作是社会的道德担当，是整个国家的良心所在，肩负着为民请命的重担。这便是学者赵鼎新曾经指出的关键事实：在运动中，学生使用的话语是西方自由主义话语和中国传统道德主义话语的混合体。\n\n在学生的排斥之下，不少参与运动的工人也开始对学生失去信任。在工人看来，学生们自我感觉过于优越、不尊重工人，只会空谈大词而不解决实际问题。最让工人警惕的是，他们所憎恨的官僚制精英做派，开始在学生身上出现。学生的组织中充斥着各种“主席”、“总指挥”的名头，而且内部权力斗争不断。相反，以“工自联”为代表的工人组织，内部结构往往扁平化，不突出个人的领导地位。\n\n更让工人接受不了的，是运动中的学生领袖享受特权。当时在工人当中就有传言，说柴玲和封从德的帐篷里铺着一张席梦思床垫。这传言的真实性无从考证，但从中可以看出：任何与等级制、官僚化有关的迹象，都深深切中工人的痛点。\n\n与此同时，学生和工人在运动策略层面也存在分歧。从运动刚开始时，学生就摆出恳求当局的姿态，寄希望于能感化当局、使得当局让步，从而实现改革。为了争取当局信任，学生在游行示威中还特意打出“拥护共产党”的标语。相比之下，工人们就没那么客气了，工自联的传单中一直号召人民起来推翻压迫。\n\n到了五月份，在共产党的最高领导层对“如何回应运动”产生分歧时，一部分学生们寄希望于和以赵紫阳为首的温和派合作，利用党内领导人之间的派系冲突为自身争取空间。这也是为什么，学生坚决反对工人的总罢工主张，认为那是“捣乱”。而在工人看来，学生的策略不可理喻，赵紫阳就是利用市场化改革为自身牟利的专制官僚的典型代表，温和派和强硬派没有本质区别。工自联甚至指出，和党内官僚合作的结果，就是运动成为官僚实现自身利益的工具，正如邓小平借1976年的“四五运动”上位一样。工自联认为，运动成功的唯一希望，就是靠运动参与者在不断的自我组织、自我武装中积蓄力量，最终将官僚推翻。这也是为什么，工自联在传单中号召大家向法国大革命学习、“攻陷20世纪的巴士底狱”。\n\n在这一意义上我们也许可以说，1989年所发生的不是一场运动，而是两场运动。学生的运动和工人的运动，虽然发生在重叠的时间和空间，相互之间也有交叉和互动（工人五月中旬开始的大规模参与最初也是为了声援和保护学生），但始终没有汇合到一起。学生和工人之间，没有互信，没有充分的沟通，也没有战略层面的协调，更没有“并肩作战”的团结感。\n\n1989年发生的事，和七十年之前发生的五四运动形成鲜明对比。五四运动中，在最初主要由学生参与的游行示威浪潮后，不少学生转而在市民和工人中间进行宣传、组织和鼓动，最终在6月份引发上海工人的总罢工，这才使得北京政府向学生诉求妥协。在中共官方的历史叙事中，五四的意义恰恰在于，学生们在总罢工中认识到工人所具有的巨大政治能量，因此一批学生开始专注投入工人的组织、与工人建立纽带、动员工人抗争，并在此过程中完成了马克思主义转向。\n\n使五四运动在中共官方叙事中显露出独特意义的元素，恰恰就是六四运动所缺少的元素。\n\n![1989年，学生爬上天安门广场毛泽东陵墓雕刻上抗议。摄：Peter Turnley/Corbis/Getty Images](https://d32kak7w9u5ewj.cloudfront.net/media/image/2019/05/a416dc7183b94f41917798bc48611c2d.jpg?imageView2/1/w/1080/h/1597/format/jpg)\n\n1989年，学生爬上天安门广场毛泽东陵墓雕刻上抗议。摄：Peter Turnley/Corbis/Getty Images\n\n## **工人与学生的团结感，从什么时候消失了？**\n\n\u003e 整个1980年代，一直见证着学生、知识分子群体和工人阶级的分化过程。而这种分化，在很大程度上来源于毛时代、邓时代两次对社会主义民主运动的镇压，最终使得阶级话语在政治中被边缘化。\n\u003e \n\n如果要追溯1989之前中国学生与工人在社会运动中建立团结的例子，其实并不需要追溯到遥远的1919年。学者安舟（Joel Andreas）即将出版的[新书](https://global.oup.com/academic/product/disenfranchised-9780190052607?cc=us\u0026lang=en\u0026)指出，在文革刚刚启动的1966-1967年，学生和工人之间的串联十分频繁，这是运动得以发展的关键。工人走访各个高校，学习学生开展运动的经验，而许多学生也来到工厂，帮助工人在工厂里成立“造反”组织、表达自己的诉求。\n\n从1966年到1989年，短短二十多年间，学生和工人之间的团结感消失了。这是为什么？ 这个问题的答案，只能通过回顾这二十多年的历史来寻找。\n\n毛泽东之所以在1966年发动文革，是因为他认为党内的官僚主义现象已经严重到不少官僚希望恢复资本主义路线（也就是所谓的“走资派官僚”）的地步，因此只能通过大规模的、自下而上的群众运动将走资派从党内清除，并实现毛个人在党内的权力进一步集中。特别值得注意的是，在毛看来，群众运动的意义是为了改革体制，不是推翻体制。出问题的不是体制本身，而是体制里的一部分人，因此只要通过群众的力量将这些人像切除肿瘤手术一样除去，体制就还能正常运转。这也是为什么，毛在一系列表态中都反复强调大多数共产党干部是好的，走资派只是少数。\n\n然而毛没有想到的是，在他发出了群众运动“自己教育自己”、“自己解放自己”的号召之后，群众“造反运动”的发展远远超出了他的预期目标，也越来越不受他控制。或者说，毛只是想打开一道缝隙，但工人和学生（尤其是工人）自我组织的激进动能却通过这个缝隙喷涌而出。 [学者吴一庆的研究表明](http://www.hup.harvard.edu/catalog.php?isbn=9780674728790)，1966年底，在毛发出鼓励群众建立自发组织的号召之后，城市中的临时工人、非正式工人就开始积极成立“全国红色劳动者造反总团”等组织。这些组织并不是按照毛的预想、挑战和批判所谓的“走资派官僚”，而是批判充满歧视和不公的二元用工体制，要求当局做到“同工、同筹、同权”。这一系列挑战制度性用工歧视、追求平等的组织和运动，被文革领导层扣上了“经济主义”的帽子，最终遭到镇压。\n\n1967年一月，上海人民公社成立，取代了原先的上海党政机关，被毛和其他文革领导人赞扬为“群众夺权”运动的典范。但在“上海柴油机厂工人革命造反联合司令部”（简称“联司”）等激进工人造反派组织看来，以毛为首的文革领导层只是借用了“群众夺权”的名义，实际上在上海建立了由军方主导的“革命委员会”，并不是由真正的工人和群众掌握政治权力。“联司”认为官方在强力恢复秩序、镇压造反运动。“联司”希望成立真正由工人阶级自我管理的巴黎公社体制，和“革命委员会”进行了长达数月的武装斗争。\n\n同时，也有许多工人和学生“造反派”，顺着毛对“官僚主义”、“走资派”的批判继续思考，最终得出了比毛更激进、更深刻的结论。在这些工人和学生看来，毛准确地抓住了官僚主义的现象，但他开出的药方是错的；官僚主义的源头不在具体的官僚个人身上，而在一党专政的独裁体制，这种体制本质上就是资本主义的。他们认为：要彻底破除官僚主义，只能通过废除一党专政，真正由工人按照民主的方式自己管理生产资料。在这一思考方向上最有代表性的论述，来自于“湖南省无产阶级革命派大联合委员会”。在这些论述中，清晰显现着马克思本人对“社会主义民主”的构想。\n\n这些“造反派”运动超越了毛所设定的议程范围，明确挑战了文革领导层的权威，并且开始号召系统性变革和制度化民主，因此令毛和文革领导层大感不安。在这种情况下，从1968年开始，毛公开允许军方介入，对“造反派”进行了大规模镇压。根据魏昂德的[研究](https://www.jstor.org/stable/pdf/90017046.pdf?casa_token=lAdhkANePvUAAAAA:bnw3LL4GQW-zeBYmenK83xgAdAtgHn7AEE0JH6nfccokgV7m7fXKZDgsH-xcEb-yB3z0PyiuDR-PNsyNMhUDLzLWhBXRa47hMHPR6_A8VjjAW74ACW35)，文革中所造成的死伤当中，绝大部分都来自于1968年以后官方对“造反派”运动的镇压。从伤亡数字看，这是共和国历史上最大规模的官方镇压事件。在一些城市，工人造反派组织还和前来镇压的军队展开巷战，但最终惨烈失败。与镇压同时，官方也开始批判造反派的“社会主义民主”论述，将其斥为无政府主义、托洛茨基主义。\n\n这是一段让人唏嘘、痛心的历史：毛所发起的群众运动，按照不受毛本人所控制的轨迹发展起来，逐渐蜕变为挑战中共权威的社会主义民主运动，终于让毛感到威胁，最终亲手镇压了它。用吴一庆的话说，文革吞噬了它自己的孩子。\n\n1968-1971年的镇压运动，影响极为深远。一方面，大批“造反派”工人和学生被肉体消灭，这一部分遭到镇压的“造反派”是最富战斗性、组织力最强、思想最激进的一群。另一方面，毛从鼓励“造反”运动到镇压“造反”运动的“180度大转弯”，也让许多工人和学生陷入政治幻灭和虚无，不愿再参与政治。许多工人觉得毛背叛了他们，更认为其他文革领导人——如陈伯达、江青等——是机会主义者，只想通过运动来巩固自己的权力。\n\n1974年的“批林批孔”运动，出人意料地为“造反派”发泄对1968-1971镇压运动的不满提供了机会。在今天看来，“批林批孔”运动是十分诡异的，林彪和孔子这两个人风牛马不相及，怎么会放在一起批判？江青等文革领袖们之所以发起如此诡异的运动，还是因为想借此在中共高层政治中打压异己、强化自身权力。\n\n工人“造反派”的确痛恨林彪。在1971年政变失败身亡之前，林彪的权力基础主要来自军队，在军方镇压“造反派”的行动中扮演了重要的领导角色。因此，一些在1966-1967年活跃、后来受到镇压的“造反”运动参与者，借着“批林批孔”运动的机会，大力批判林彪、抒发对镇压时期的不满，希望重启1966-1967年的群众民主运动。这其中最典型的论述，就是广州出现的[以“李一哲”为笔名的大字报](https://www.marxists.org/chinese/reference-books/liyizhe1976/00.htm)，影响遍及全国。\n\n但“批林批孔”运动的结果让“造反派”们感到失望。李一哲的号召没有得到毛本人的支持，一些文革领袖甚至主张禁止大字报继续流传。这使得造反派对文革领袖、乃至对毛本人的不满进一步激化，直接导致了1976年“四五运动”的发生。\n\n“四五运动”发生在1976年清明节前后，许多北京市民聚集在天安门广场，悼念刚刚逝世不久的总理周恩来。但在悼念周恩来的同时，运动参与者实质上是在发泄对文革领袖的不满。天安门广场上到处都是“打倒慈禧太后”、“打倒英吉拉-甘地”的标语，暗讽以江青为代表的文革领袖。更有甚者，运动中甚至出现了“打倒秦皇”的口号——“秦皇”所指的，正是毛本人。\n\n“四五运动”的爆发，标志着民意对文革领袖和毛本人的反感达到顶峰。正是借助这一民意基础，中共党内的部分官僚才得以在毛去世之后，凭借宫廷政变完成了对文革领袖的清缴。反过来，文革领袖们的覆灭，也再次点燃了一些“造反派”的希望。他们盼着当局能为他们所遭遇的不公与镇压平反，也盼着高压的政治环境能够松动。同时，1976-1978年间的邓小平，为了在和华国锋的党内权力斗争中巩固自己的民意支持，也确实释放了一些政治宽松的信号，进一步强化了造反派的乐观。\n\n造反派的乐观情绪，终于在1979年汇聚成了“民主墙运动”。迈斯纳指出，参加这场运动的主力，多是在1966-1967年活跃、之后遭到镇压的工人、学生“造反派”，而不是知识分子。“造反派”们组成政治社团、组织公开讨论、发行自己的出版物、张贴大字报。运动的影响很快就从北京向其他城市蔓延。他们的论述，着力批判官僚主义、和导致官僚主义出现的一党专制体制，复活了文革早期的社会主义民主论述。对于民主墙运动的参与者而言，这场运动的意义也恰恰在于：1966-1967年的那场运动，在遭到强力镇压后，终于有了再次向前推进的机会。从这个角度说，1979年的“民主墙运动”是1966-1967之后的第二次社会主义民主运动。\n\n1979年，邓小平已经在中共党内的权力斗争中取得胜利，成为实际上的最高统治者。1966-1967年的运动让毛泽东感到多恐慌，1979年的运动就让邓小平感到多恐慌。像毛泽东一样，邓小平同样开始镇压民主运动的参与者，并说他们是“无政府主义分子”。对民主墙运动的镇压，使得工人和市民在1968年之后不断累积的政治虚无感更强烈了。在此之后，社会主义民主的论述几乎完全从公共舆论中消失。这一论述的消失，也意味着阶级话语在政治中变得越来越边缘化——毕竟，社会主义民主的核心就是将“民主”放在阶级话语中来理解。这一变化，和邓小平越来越强调“不争论”的实用主义政策路线、越来越远离“阶级斗争”话语的趋势在时间上一致，可以看做一枚硬币的两面。\n\n“民主墙运动”被镇压，导致工人阶级在公共空间中被消声，政治讨论越来越成了知识分子和学生的专利。随着社会主义民主论述和阶级话语的退场，关于“民主”的讨论也在自由主义化的道路上越走越远。最明显的例子是，到了1980年代后期，关于“民主还是威权”的知识分子讨论，往往都预设了市场化改革本身的正当性。学者陈佩华（Anita Chan）指出，[1980年代的知识分子讨论，几乎从来不会提及工人阶级。](https://go.galegroup.com/ps/anonymous?id=GALE%7CA8340811\u0026sid=googleScholar\u0026v=2.1\u0026it=r\u0026linkaccess=abs\u0026issn=00270520\u0026p=AONE\u0026sw=w)\n\n今天的许多论述，往往都对1980年代的中国大陆抱有一种浪漫化的想像，说那是一个自由的、充满希望的理想主义时代。然而事实上，如果我们要评估1980年代，就不仅要考虑我们看到了什么，还要考虑我们没有看到什么。西方思潮的引入、言论空间的放松、社会团体的活跃，这些现象的背后是工人阶级在政治生活中的退场、社会主义民主论述的消失，而这来源于民主墙运动的惨烈结局。换句话说，1980年代的“自由”，恰恰是政治镇压的产物。\n\n![1989年6月1日，北京的学生示威者带著“民主女神”像前往天安门广场。摄：Peter Charlesworth/LightRocket via Getty Images](https://d32kak7w9u5ewj.cloudfront.net/media/image/2019/05/4c23889f539c4213abfa5220cfc9d88f.jpg?imageView2/1/w/1080/h/720/format/jpg)\n\n1989年6月1日，北京的学生示威者带著“民主女神”像前往天安门广场。摄：Peter Charlesworth/LightRocket via Getty Images\n\n我们如果要讨论“自由”，就必须要问：究竟是谁的自由？1980年代的自由化红利，不管是舆论的放开、思想的多元还是生活方式的多样化，基本完全被知识分子和学生所享受。邓小平为了巩固自身民意、赢取市场化改革的合法性，大幅提高知识分子的经济待遇和社会地位，而且[大大强化了高等教育的精英主义色彩](https://www.sup.org/books/title/?id=16889)。这使得知识分子和学生参与政治讨论的过程，也同时成为了不断强化自己精英身份认同的过程。80年代末广受关注的纪录片《河殇》，就是这种精英自由主义的典型代表。\n\n与此同时，城市工人阶级享受了什么“自由”？1980年代对工人生活影响最大的改革，可能并不是价格改革，而是国企经营权的下放和厂长负责制的推行。这一系列改革，大大强化了国企管理层的自由裁量权和对生产资料的支配。成为常态的厂长专断制度，几乎等同于事实上的厂长私有制。随着职工代表大会渐渐名存实亡，工人在工厂中有限的民主决策渠道也成为一纸空文，工人在劳动过程中越来越直观地体会着“官僚专制”。随着工人觉得在工厂中“被压迫”、“受欺负”、“失去尊严”、“越来越不平等”，国企管理层只能通过物质激励手段来调动工人的劳动积极性。换句话说，工人物质待遇的提高，恰恰是他们在劳动场所的民主权利被大大削弱的结果。而到了1980年代后期，工人们的物质待遇随着通货膨胀止步不前、甚至不升反降，工人的不满情绪更加强烈。\n\n因此，整个1980年代，一直见证着学生、知识分子群体和工人阶级的分化过程。而这种分化，在很大程度上来源于毛时代、邓时代两次对社会主义民主运动的镇压，最终使得阶级话语在政治中被边缘化。到了1989年，积累了强烈不满的工人们终于爆发，在1966、1979年曾经出现过的社会主义民主论述再次成为工人的武器。而不幸的是，在长期的分化过程之后，此时的学生和知识分子对工人阶级的社会主义民主诉求既不理解、也不关心。\n\n## **分而治之，威权维持的关键？**\n\n\u003e 20世纪后期民主化运动的研究，都强调知识分子和工人、农民等体力劳动者之间的联结和合作是政治运动成功的关键。然而在当今中国，知识分子、中产阶级、工人阶级之间的联盟无法形成，更意味着大范围的、持久的、既具备组织基础又具备话语论述能力的抗争运动几乎没有出现的可能。\n\u003e \n\n到了90年代，知识分子群体和工人阶级的分化进一步加剧。当局对于参与六四运动的学生与工人的不同态度——对学生们蜻蜓点水地“小惩大诫”，而对工人们严酷镇压毫不手软——也成为贯彻整个90年代的主题。\n\n90年代市场化改革的进一步加速，为80年代末、90年代初那一批受过精英教育的大学毕业生们提供了大量的经济机会。[早有观察者指出](https://matters.news/@tootopia/%E9%A3%8E%E9%9B%A8%E4%BA%91-%E6%88%BF%E5%9C%B0%E4%BA%A7%E5%B8%82%E5%9C%BA%E5%8C%96%E7%9A%84%E8%B5%84%E6%9C%AC%E8%BF%90%E5%8A%A8%E4%B8%8E%E7%96%AF%E7%99%AB-zdpuAquPVZ4kJobhZ9Y4Mh7Y4AyJXdtvoqNuxn5ZRAV48YJpQ)，许多参与过六四运动的自由主义知识精英，在市场化浪潮中，摇身一变成了新兴的城市中产阶级，变成了拥护共产党现体制的既得利益者。某种程度上，市场化改革因此可以被看作是共产党当局对那一代六四运动学生参与者的吸纳和收买。我接触过不少在80年代末就读北京名校的大学生，他们几乎全都参与过1989年的游行示威活动，但今天作为光鲜体面的中产阶级，信奉“稳定至上”。回首往事，他们认为自己当时参与民主运动是幼稚、不成熟的表现，是“受人操纵”的。\n\n90年代的市场化改革，在“收买”学生和知识分子群体的同时，对城市工人阶级造成了毁灭性打击。随着大量的国有企业改制、裁员、私有化，无数城市工人被迫下岗或买断工龄，失去了工作机会和基本的劳动保障。分析者历来认为，驱动当局开启国企改制的主要是经济方面的考虑，但回看六四运动的轨迹，我们也许可以猜测——即便这种猜测还缺乏足够的证据，但或许我们可以去思考和讨论——政治动机在当局的决策中也扮演了重要角色。当局也许正是因为忌惮城市工人阶级在运动中表现出的组织力与激进性，才决心在整体上摧毁这一阶级。\n\n知识分子群体和城市工人阶级在90年代的迥异命运，构成了后六四时代断裂的社会格局，一直延续至今。这种将不同阶级“分而治之”的策略，成为了共产党威权体制得以维持的关键因素。这是六四运动给今天留下的最重要遗产之一。\n\n不管是马克思主义的[经典革命理论](https://www.marxists.org/chinese/lenin/1901-1902/index.htm)、殖民主义语境下的[民族革命理论](https://en.wikipedia.org/wiki/The_Wretched_of_the_Earth)，还是对于[西班牙](http://www.cornellpress.cornell.edu/book/?GCOI=80140100746560)、[韩国](http://www.cornellpress.cornell.edu/book/?GCOI=80140100829670)、[波兰](https://books.google.com/books/about/The_Origins_of_Democratization_in_Poland.html?id=TTlJxAEACAAJ\u0026source=kp_book_description)等国家在20世纪后期民主化运动的研究，都强调知识分子和工人、农民等体力劳动者之间的联结和合作是政治运动成功的关键。然而在当今中国，知识分子和受过高等教育的城市中产阶级受益于现体制提供的经济机会，大多对政治抗争没有兴趣，成为中共威权统治的“基本盘”，与工人阶级之间没有任何团结感可言。在21世纪初期，主要由部分学者、记者、律师、NGO从业者等少数中产阶级职业群体所构成的公民社会运动和维权运动，也基本不关注劳工议题。这意味着知识分子、中产阶级、工人阶级之间的联盟无法形成，更意味着大范围的、持久的、既具备组织基础又具备话语论述能力的抗争运动几乎没有出现的可能。近几年，一些青年学生介入工人运动的尝试虽然可贵，但依然有很长的路要走。阶级断裂的社会格局，依然会在中国持续较长时间。\n\n## 参考文献\n\n- Andreas, Joel. 2009. The Rise of Red Engineers: The Cultural Revolution and the Origins of China’s New Class. Stanford University Press.\n- Andreas, Joel. Forthcoming. Disenfranchised: The Rise and Fall of Industrial Citizenship in China. Oxford University Press.\n- Chan, Anita. 1990. “China’s Long Winter.” Monthly Review 41(8): 1-15.Meisner, Maurice. 1999. Mao’s China and After. Free Press.\n- Walder, Andrew G. and Gong Xiaoxia. 1993. “Workers in the Tiananmen Protests: The Politics of the Beijing Workers’ Autonomous Federation.” Australian Journal of Chinese Affairs 29: 1-29.\n- Wang, Hui. 2003. China’s New Order: Society, Economy and Politics in Transition. Theodore Huters (ed). Harvard University Press.\n- Wu, Yiching. 2014. The Cultural Revolution at the Margins: Chinese Socialism in Crisis. Harvard University Press.\n- Zhao, Dingxin. 2001. The Power of Tiananmen: State-Society Relations and the 1989 Beijing Student Movement. The University of Chicago Press.\n- 《李鹏六四日记》，鲍朴整理。\n- 《天安门血腥清场内幕》，吴仁华著。"},{"slug":"en-foreign-policy-china-declining","filename":"2021-12-03-en-foreign-policy-china-declining.md","date":"2021-12-03","title":".en | 外交政策杂志《中国在衰落，而这才是问题》及一篇反驳","layout":"post","keywords":["html","inter","en"],"excerpt":"地命海心","content":"\n上周摸鱼的时候看到了[反华媒体](https://botanwang.com/articles/202111/%E3%80%96%E5%BE%AE%E5%8D%9A%E8%B0%88%E3%80%97%E7%A7%91%E6%8A%80%E4%B8%80%E5%B0%8F%E6%AD%A5%7C%E6%96%87%E6%98%8E%E4%B8%80%E5%A4%A7%E6%AD%A5.html)上转了一条微博，上面居然说“美国外交政策杂志：仅仅与中国竞争是不够的。中共的迅速军事扩张可能会在2035年入侵美国，所以解体中国是必需的。”\n\n这一听就觉得太扯淡了，应该是断章取义的结果。于是决定亲自去[《外交政策》](https://foreignpolicy.com/)杂志的官网上找找有没有可供断章取义的素材。结果找到了一篇[《China Is a Declining Power—and That’s the Problem》](https://foreignpolicy.com/2021/09/24/china-great-power-united-states/)，但是有付费墙。在找全文的过程中，又找到了一篇反驳文章，于是一并翻译了出来。\n\n这篇文章，作者自认为是对修昔底德陷阱的纠正，我倒觉得可以看作是补充发展。我对修昔底德陷阱的了解，主要来自于一些公众号（比如FT中文网和很久以前已经被销号的“腾讯思享会”），以及 [CRAZY262](https://space.bilibili.com/324879) 的视频[《大国角斗 从修昔底德陷阱开始》](https://www.bilibili.com/video/BV1tf4y1R7TK)。\n\n[https://www.bilibili.com/video/BV1tf4y1R7TK](https://www.bilibili.com/video/BV1tf4y1R7TK)\n\n![《【262思货】大国角斗 从修昔底德陷阱开始》视频截图](/photos/2021-12-04-superpower.png)\n\n修昔底德陷阱指的是先后崛起的两个强权之间，在后发国家即将或刚刚超越老牌帝国，两者国力靠近的时候，双方很容易爆发战争，若后发国家获胜，则霸权易手。但是这种解释存在不合理的地方：老牌帝国知道对方要超过自己，那么战争越早越好，最好是自己的势力还远胜于对方之时；后发国家认为“时间在我们这边”，那么战争越晚越好，直到自己远远甩开对方——两个不等式没有交集。传统的解释，往往无法离开偶然事件，政治家的错误判断，以及统治集团利益和国家利益之间的不协调。\n\n这篇文章则认为，战争发生不仅需要前文所说“后发国家即将或刚刚超越老牌帝国，两者国力靠近”（数学上的函数值），还需要满足\"赶超国的国力发展速度（数学上的导数）明显下降，且老牌国家开始发力应对威胁\"这一条件。这不仅导致两者国力相近的时间会被严重拉长，而且随者后发国家的速度下降程度和先进国的发力效果，会出现后发国家的优势反而会不断减少的时段。此时若后发国家判断已有的优势若不彻底利用则可能无法超越，则后发国会主动诉诸一战。\n\n反驳文章给出的理由很多，但思路很一致，并不反对这套解释，但是不认为中国的发展速度会下降到统治者认为必要一战的地步。具体的内容可以看译文。\n\n后来确认了一下，[原微博](https://twitter.com/chineseorusa321/status/1458857654529380358?s=20)所指实际是另一篇文章[《A Dangerous Decade of Chinese Power Is Here》](https://foreignpolicy.com/2021/10/18/china-danger-military-missile-taiwan/)，略读一下，依然没有看到肢解之类的说法。\n\n好家伙，读后感放到了译文前面不说，篇幅也接近一篇独立文章了。以下是译文：\n\n## 外交政策杂志《中国在衰落，而这才是问题》\n\nPay wall on original page, translation based on: [https://www.politics-dz.com/en/china-is-a-declining-power-and-thats-the-problem/](https://www.politics-dz.com/en/china-is-a-declining-power-and-thats-the-problem/)\n\n\u003e **Hal Brands** 是约翰霍普金斯大学高级国际研究学院亨利基辛格全球事务杰出教授。 他还是美国企业研究所的常驻学者和彭博观点专栏作家。\u003cbr\u003e\n**Michael Beckley** 是塔夫茨大学政治学副教授、美国企业研究所珍妮·柯克帕特里克访问学者，著有《无与伦比：为什么美国仍是世界唯一的超级大国》一书。\n\u003e \n\n为什么大国要打大仗？ 传统的答案是一个挑战者崛起和霸权衰落的故事。 一个对现有秩序规则感到不满的崛起的大国，在一个既定的大国——制定这些规则的国家——的基础上取得了发展。 紧张局势倍增； 实力考验接踵而至。 结果是恐惧和敌意的螺旋上升，几乎不可避免地导致冲突。 古代历史学家修昔底德写道：“雅典力量的增长，以及这在斯巴达引起的恐慌，使战争不可避免，”现在在解释美中竞争时，这句老生常谈，常到听吐了。\n\n由哈佛政治学家格雷厄姆·艾利森 (Graham Allison) 推广的修昔底德陷阱 (Thucydides Trap) 的想法认为，随着崛起的中国赶上萧条的美国，战争的危险将猛增。 就连中国国家主席习近平也赞同华盛顿必须为北京腾出空间的概念。 随着美国和中国之间的紧张局势升级，认为摩擦的根本原因是迫在眉睫的“权力转移”——一个霸权被另一个霸权取代——的信念已经成为经典。\n\n修昔底德陷阱并没有真正解释导致伯罗奔尼撒战争的原因。 它没有捕捉到经常推动后发大国——无论是 1914 年的德国还是 1941 年的日本——引发一些历史上最具破坏性的冲突的动力。 并且它没有解释为什么今天美中关系中发生战争的可能性非常大，因为它从根本上错误地判断了中国在发展轨迹所处的位置——相对实力达到顶峰并将很快开始消退。\n\n确实有一个致命的陷阱可以让美国和中国陷入困境。 但这不是修昔底德式的陈词滥调所说的权力转移的产物。 最好将其视为“峰值功率陷阱”。 如果历史有任何指导意义，那么中国——而不是美国——迫在眉睫的衰落可能会导致它突然爆发。\n\n有一整套被称为“权力转移理论”的文献认为，大国战争通常发生在一个霸权崛起和另一个霸权衰落的交叉点。 这是支撑修昔底德陷阱的理论主体，不可否认，这个想法有一定道理。 新势力的崛起总是会破坏稳定。 在公元前 5 世纪伯罗奔尼撒战争前夕，如果没有建立一个庞大的帝国并成为海军超级大国，雅典对斯巴达来说似乎不会如此具有威胁性。 如果中国仍然贫穷和弱小，华盛顿和北京就不会陷入竞争。 新兴大国确实以威胁统治大国的方式扩大其影响力。\n\n但引发战争的演算——尤其是推动后发大国，试图动摇现有体系地猪突猛进，的演算——更为复杂。 一个相对财富和权力正在增长的国家肯定会变得更加自信和雄心勃勃。 在一切平等的情况下，它将寻求更大的全球影响力和威望。 但如果它的地位稳步提升，它应该推迟与霸主的致命摊牌，直到它变得更加强大。 这样的国家应该遵循冷战后中国前领导人邓小平为崛起的中国定下的格言：韬光养晦，有所作为。\n\n现在想象一个不同的场景。 一个不满的国家一直在建立自己的权力并扩大其地缘政治视野。 但后来这个国家达到顶峰，也许是因为它的经济放缓，也许是因为它自己的自信激起了一个坚定的竞争对手的联盟，或者也许是因为这两件事同时发生。 未来开始寻找竞标； 迫在眉睫的危险感开始取代无限可能的感觉。 在这种情况下，后发大国可能会大胆甚至激进地采取行动，在为时已晚之前夺取其所能。 世界政治中最危险的轨迹是长期上升，然后是急剧下降的前景。\n\n正如我们在即将出版的《危险地带：与中国即将发生的冲突》一书中所展示的那样，这种情况比您想象的要普遍。 例如，历史学家唐纳德·卡根表明，在伯罗奔尼撒战争之前的几年里，雅典开始表现得更加好战，因为它担心海军力量平衡的不利变化——换句话说，因为它正处于在和斯巴达针锋相对的对峙中失去影响力的边缘。 我们在最近的案例中也看到了同样的事情。\n\n那些增长速度远远快于世界平均水平，然后遭受严重、长期放缓的大国通常不会悄然消失。 相反，他们变得傲慢和咄咄逼人。\n\n在过去的 150 年里，达到顶峰的大国——增长速度超过世界平均水平的大国，然后经历了严重、长期的放缓——通常不会悄悄消失。 相反，他们变得傲慢和咄咄逼人。 他们在国内压制异议，并试图通过在国外建立专属势力范围来重新获得经济动力。 他们向军队投入大量资金，并使用武力扩大影响。 这种行为通常会引发巨大的权力紧张局势。 在某些情况下，它涉及灾难性的战争。\n\n这应该不足为奇。 快速增长的时代增强了一个国家的雄心壮志，提高了人民的期望，并使竞争对手感到紧张。 在持续的经济繁荣时期，企业的利润不断增长，而公民也习惯了过大日子。 该国成为全球舞台上更大的参与者。 然后停滞来袭。\n\n增长放缓使领导者更难让公众满意。 经济表现不佳削弱了该国与竞争对手的对抗。 由于害怕动乱，领导人镇压异议人士。 他们拼命地纵横捭阖以阻止地缘政治敌人。 扩张似乎是一种解决方案——一种攫取经济资源和市场、让民族主义成为受伤政权的拐杖并击退外国威胁的方式。\n\n很多国家都走上了这条路，当美国内战后长期的经济高潮结束时，华盛顿猛烈镇压国内的罢工和动乱，建立了强大的蓝水海军，并在战争期间进行了一次交战和帝国扩张（译注：指美西战争）。 1890 年代。 20世纪之交，迅速崛起的俄罗斯帝国陷入严重衰退，沙皇政府在严打镇压的同时，还扩充军队，在东亚谋求殖民利益，并派遣约17万名士兵占领满洲。 这些举措适得其反：它们激怒了日本，日本在 20 世纪的第一次大国战争中击败了俄罗斯（译注：指日俄战争）。\n\n一个世纪后，俄罗斯在类似情况下变得咄咄逼人。 面对 2008 年后严重的经济放缓，俄罗斯总统弗拉基米尔·普京入侵了两个邻国，寻求建立一个新的欧亚经济集团，将莫斯科对资源丰富的北极的主张押注，并将俄罗斯引向更深入的独裁统治。 在 1970 年代战后经济扩张结束后，即使是民主的法国也急于扩张。 它试图重建其在非洲的旧势力范围，在其前殖民地部署了 14,000 名士兵，并在接下来的二十年中进行了十几次军事干预。\n\n所有这些案件都很复杂，但模式很明确。 如果快速崛起让各国有办法大胆行动，那么对衰落的恐惧就会成为更迅速、更紧迫的扩张的强大动力。 当快速崛起的大国导致敌对联盟对其进行遏制时，经常会发生同样的事情。 事实上，历史上一些最可怕的战争发生在后发大国认为他们通往荣耀的道路即将被阻挡的时候。\n\n德国在 19 世纪末和 20 世纪初与英国的竞争通常被认为是美中竞争的类比：在这两种情况下，一个专制的挑战者威胁到一个自由主义的霸权。 但更发人深省的相似之处在于：当一个被逼入绝境的德国意识到不打不行之时，战争就来了。\n\n1871年德国统一后飙升数十年。 它的工厂生产钢铁，抹去了英国的经济领先地位。 柏林建造了欧洲最优秀的军队和战列舰，威胁着英国的海上霸权。 到 1900 年代初，德国是欧洲的重量级人物，正在欧洲大陆寻求巨大的势力范围——德语中的“Mitteleuropa” 或中欧。 在当时的德皇威廉二世的领导下，它还在推行旨在保护殖民地和全球权力的“世界政策”。\n\n但在战争的前奏期间，德皇和他的助手们并不自信。 德国的鲁莽行为导致了敌对势力的包围。 伦敦、巴黎和俄罗斯圣彼得堡结成“三国协约”以阻止德国扩张。 到 1914 年，时间已经不多了。 德国正在经济上输给快速发展的俄罗斯； 伦敦和法国通过阻止其获得石油和铁矿石来寻求经济遏制。 柏林的主要盟友奥匈帝国正因种族紧张局势而四分五裂。 在国内，德国的专制政治体制陷入困境。\n\n最不祥的是，军事平衡正在发生变化。 法国正在扩充军队； 俄罗斯正在为其军队增加 470,000 人，并削减其为战争动员所需的时间。 英国宣布将为柏林建造的每一艘战列舰建造两艘。 目前，德国是欧洲最重要的军事强国。 但到了 1916 年和 1917 年，它将无可救药地被超越。 结果是一种现在或永不的心态：德国应该“在我们仍有获胜机会的情况下击败敌人”，参谋长赫尔穆特·冯·莫尔特克宣称，即使这意味着“在不久的将来挑起战争”。\n\n这就是 1914 年 6 月塞尔维亚民族主义者暗杀奥地利王储后发生的事情。 德皇政府敦促奥匈帝国粉碎塞尔维亚，尽管这意味着与俄罗斯和法国开战。 然后它入侵了中立的比利时——这是其施里芬计划进行两条战线战争的关键——尽管有可能激怒英国。 “这场战争将演变成一场世界大战，英国也将介入其中，”莫尔特克承认。 德国的崛起赋予了它为伟大而赌博的力量。 它迫在眉睫的衰落推动了使世界陷入战争的决定。\n\n日本帝国遵循了类似的轨迹。 1868 年明治维新后的半个世纪里，日本稳步崛起。 现代经济的建设和强大的军事力量让东京赢得了两次大战，并在中国、台湾和朝鲜半岛积累了殖民特权。 然而，日本并不是一个好战的掠夺者：在 1920 年代，它与美国、英国和其他国家合作，在亚太地区建立了一个合作安全框架。\n\n然而，在那十年间，事情分崩离析。 增长率从 1904 年至 1919 年间的年均 6.1% 下降到 1920 年代的年均 1.8%； 大萧条随后关闭了日本的海外市场。 失业率飙升，破产的农民卖掉了他们的女儿。 与此同时，在中国，日本的影响力正受到苏联和当时中国领导人蒋介石领导下兴起的民族主义运动的挑战。 东京的答案是国内法西斯主义和国外侵略。\n\n从 1920 年代后期开始，军方发动了一场慢动作政变，并利用国家资源进行“全面战争”。 日本发动大规模军事集结，以暴力方式建立了广阔的势力范围，1931年占领满洲，1937年入侵中国，并计划征服亚太地区资源丰富的殖民地和战略岛屿。 目标是建立一个自给自足的帝国； 结果在东京的脖子上画了一个战略套索。\n\n日本进军中国最终导致了与苏联的惩罚性战争。 日本在东南亚的设计让英国感到震惊。 它对地区主导地位的推动也使其成为美国的敌人——东京几乎所有石油都从美国进口，其经济规模远大于日本。 东京对抗压倒性的敌人联盟。 然后它冒着一切风险，而不是接受屈辱和衰落。\n\n再一次，促发原因是一个关闭的机会之窗。 到 1941 年，美国正在建设一支无与伦比的军队。 7 月，当时的美国 富兰克林·罗斯福总统实施了石油禁运，威胁要阻止日本的扩张。 但由于早期重整军备，日本在太平洋仍然拥有暂时的军事优势。 因此，它在闪电袭击中利用了这一优势——夺取了荷属东印度群岛、菲律宾以及从新加坡到威克岛的其他领土，并轰炸了美国珍珠港的舰队——这保证了它自己的毁灭。\n\n日本的胜利前景暗淡，当时的日本将军东条英机承认，但别无选择，只能“闭上眼睛信仰一跃”。 后发的日本看到时间不多了，变得非常暴力。\n\n这才是当今美国应该为中国担心的真正陷阱——一个有抱负的超级大国登峰造极，然后拒绝承担下降的痛苦后果的陷阱。\n\n中国的崛起并非海市蜃楼：数十年的增长赋予北京全球力量的经济力量。 对关键技术和通信基础设施的重大投资在争夺地缘经济影响力的斗争中取得了强势地位； 中国正在利用跨大洲的“一带一路”倡议将其他国家带入其轨道。 最令人担忧的是，智库评估和美国 国防部的报告显示，中国日益强大的军队现在确实有机会在西太平洋与美国开战。\n\n因此，中国也发展出超级大国的野心也就不足为奇了：习近平或多或少地宣布，北京希望对台湾、南海和其他有争议的地区主张主权，成为亚洲的强国并挑战美国的全球领导地位。 然而，如果中国的地缘政治机会之窗是真实存在的，那么它的未来已经开始变得相当严峻，因为它正在迅速失去推动其快速增长的优势。\n\n从 1970 年代到 2000 年代，中国在食物、水和能源资源方面几乎自给自足。 它享受了历史上最大的人口红利，每 65 岁或 65 岁以上的老年人就有 10 个处于工作年龄的成年人。 （对于大多数主要经济体而言，每个老年人平均有接近 5 个适龄成年人。）中国拥有安全的地缘政治环境，可以轻松进入外国市场和技术，这一切都得益于与美国的友好关系。 中国政府巧妙地利用了这些优势，进行了经济改革和开放，同时将政权从中国前领导人毛泽东领导下的扼杀极权主义转变为继任者领导下的更聪明——虽说仍然是深度镇压——的威权主义形式。 从 1970 年代到 2010 年代初，中国拥有一切——只是繁荣所需的禀赋、环境、人员和政策的组合。\n\n然而，自 2000 年代后期以来，中国崛起的驱动力要么停滞不前，要么完全扭转。 例如，中国正在耗尽资源：水变得稀缺，该国正在进口比任何其他国家都多的能源和食品，破坏了自己的自然资源。 因此，经济增长的成本越来越高：根据星展银行的数据，今天产生一个单位增长所需的投入是 2000 年代初的三倍。\n\n中国也正在接近人口悬崖：从 2020 年到 2050 年，中国将失去惊人的 2 亿劳动适龄成年人——人口数量相当于尼日利亚——并增加 2 亿老年人。 财政和经济后果将是毁灭性的：目前的预测表明，到 2050 年，中国的医疗和社会保障支出占 GDP 的比重必须增加两倍，从 10% 增加到 30%，以防止数百万老年人因贫困和忽视而死亡。\n\n更糟糕的是，中国正在放弃促进快速增长的一揽子政策。 在习近平的领导下，北京已经滑回到极权主义。 习近平自任“一切主席”，破除集体统治的任何表象，把坚持“习近平思想”作为日益僵化政权的意识形态核心。 他以牺牲经济繁荣为代价，不懈地追求权力的集中。\n\n国有僵尸企业得到支持，而私营企业却缺乏资金。 客观的经济分析正在被政府宣传所取代。 在意识形态一致的闷闷不乐的气氛中，创新变得越来越困难。 与此同时，习近平残酷的反腐运动阻碍了创业，一波政治驱动的监管浪潮从中国领先科技公司的市值中抹去了超过 1 万亿美元。 习近平并没有简单地停止推动中国发展的经济自由化进程：他已经将其严重逆转。\n\n这些趋势造成的经济损害开始累积——随着快速增长的经济逐渐成熟，无论如何都会出现放缓。十多年来，中国经济一直在失去动力：该国的官方增长率从 2007 年的 14% 下降到 2019 年的 6%，严格的研究表明，现在的真实增长率接近 2%。更糟糕的是，大部分增长来自政府刺激支出。根据世界大型企业联合会的数据，2008 年至 2019 年间，全要素生产率平均每年下降 1.3%，这意味着中国每年都在增加支出以减少生产。这反过来又导致了巨额债务：中国的债务总额在 2008 年至 2019 年期间飙升了八倍，超过了 COVID-19 之前 GDP 的 300%。任何以接近中国目前的速度积累债务或失去生产力的国家随后都至少遭受了近乎零经济增长的“失去的十年”。\n\n此外，所有这一切都在发生，因为中国面临着日益敌对的外部环境。 COVID-19、持续侵犯人权和侵略性政策的结合导致对中国的负面看法达到自 1989 年天安门广场大屠杀以来的最低水平。自那以后，担心中国竞争的国家对其商品设置了数千个新的贸易壁垒。 2008 年，十多个国家退出了习近平的“一带一路”倡议，而美国则在全球范围内针对中国主要科技公司——尤其是华为——发起了一场全球运动，而横跨多个大陆的富裕民主国家对北京的数字影响力设置了障碍。 世界越来越不利于中国的轻松增长，习近平政权越来越面临曾经让德国和日本领导人绝望的那种战略包围。\n\n典型的例子是美国 政策。 在过去五年中，两个美国 总统政府已承诺美国对中国采取“竞争”政策——实际上是新遏制政策。防御战略现在的重点是击败中国在西太平洋的侵略； 华盛顿正在使用一系列贸易和技术制裁来检查北京的影响力并限制其经济主导地位的前景。 一名解放军高级军官警告说：“一旦美国帝国将你视为他们的‘敌人’，你就有大麻烦了。” 事实上，美国还致力于在全球范围内策划对中国力量的更大抵抗，随着越来越多的国家对北京的威胁做出反应，这项运动开始显现成效。\n\n在亚洲海上，对中国力量的抵抗正在加强。 台湾正在增加军费开支，并计划将自己变成西太平洋的战略豪猪。 日本正在进行冷战结束以来最大规模的军事集结，并同意如果中国攻击台湾，将支持美国。 南海周边国家，特别是越南和印度尼西亚，正在加强其空中、海军和海岸警卫队力量，以对抗中国的扩张主张。\n\n其他国家也在反击北京的自信。 澳大利亚正在扩大北部基地以容纳美国 舰船和飞机，以及建造远程常规导弹和核动力攻击潜艇。 印度正在与中国接壤的边境集结军队，同时派遣军舰通过南海。 欧盟将北京列为“系统性竞争对手”，欧洲三大强国——法国、德国和英国——已向南海和印度洋派遣了海军特遣部队。 各种多边反华倡议——四边安全对话； 供应链联盟； 与华盛顿、伦敦和堪培拉的所谓 AUKUS 新联盟； 其他的方面也正在推进。 美国的“多边俱乐部战略”，鹰派和人脉广泛的学者严学通在7月承认，正在“孤立中国”并损害其发展。\n\n毫无疑问，反华合作仍然不完善。 但总体趋势是明确的：一系列行动者正在逐渐联手制衡北京的力量并将其置于战略盒中。 换句话说，中国不是一个永远上升的国家。 它是一个已经强大、雄心勃勃、深陷困境的大国，其机会之窗不会长期敞开。\n\n在某些方面，所有这些对华盛顿来说都是好消息：一个经济放缓并面临越来越大的全球阻力的中国将发现很难取代美国成为世界领先大国——只要美国不撕裂自己分开或以其他方式放弃游戏。 然而，在其他方面，这个消息更令人不安。 历史警告世界应该期待未来十年达到顶峰的中国采取更大胆、甚至更不稳定的行动——在其命运消退之前争取长期寻求的战略价格。\n\n这可能是什么样子？ 我们可以根据中国目前的做法做出有根据的猜测。\n\n北京已经在加倍努力，通过主导人工智能、量子计算和 5G 电信等关键技术，并利用由此产生的影响力使国家屈服于自己的意愿，从而建立 21 世纪的经济影响范围。 它还将竞相完善“数字威权主义”，既可以在国内保护不稳定的中国共产党统治，同时通过向世界各地的专制盟友出口这种模式来巩固北京的外交地位。\n\n最令人不安的是，未来十年，中国将非常想用武力按照自己的条件解决台湾问题。\n\n在军事方面，中国共产党很可能在确保中亚和西南亚、非洲和其他地区的长而脆弱的供应线和保护基础设施项目方面变得越来越强硬，解放军中的一些鹰派人士已经渴望扮演这个角色。假设。 面对日本、菲律宾和其他阻碍其对南中国海和东海的主张的国家，北京也可能变得更加自信。\n\n最令人不安的是，未来十年，在华盛顿和台北完成军队重组以提供更强大防御之前，中国将非常想使用武力按照其条款解决台湾问题。 解放军已经在台湾海峡加紧军演力度。 习近平一再宣布北京不能永远等待其“叛逆省份”回归。 当军事平衡在 2020 年代后期暂时进一步向中国倾斜时，随着五角大楼被迫退役老化的船只和飞机，中国可能再也没有比这更好的机会夺取台湾并让华盛顿蒙受耻辱的失败了。\n\n需要明确的是，中国可能不会像日本在 1930 年代和 1940 年代初那样在整个亚洲进行全面的军事狂暴。 但当它试图锁定关键收益时，它将冒更大的风险并承受更大的紧张局势。 欢迎来到中国达到顶峰时代的地缘政治：一个已经有能力猛烈挑战现有秩序的国家，一个可能会跑得更快、更努力的国家，因为它失去了对时间站在一边的信心。\n\n那么，美国在2020年代与中国打交道将面临的不是一项而是两项任务。 它必须继续为长期竞争动员起来，同时还要迅速采取行动以阻止侵略并削弱北京可能采取的一些更具侵略性的近期举措。 换句话说，系好安全带，美国一直在鼓动自己应对崛起的中国。 即将发现，衰落的中国可能更加危险。\n\n## 反驳\n\n[https://wgi.world/china-is-a-declining-power-and-that-s-the-problem-a-rebuttal/](https://wgi.world/china-is-a-declining-power-and-that-s-the-problem-a-rebuttal/)\n\n\u003e 作者：Andrew K.P. 梁（国际独立中国策略师。Andrew 梁国际顾问与投资有限公司董事长兼首席执行官）\n\u003e \n\n虽然流行的“中国威胁”论调是中国作为全球大国的迅速崛起，但美国企业研究所的两位杰出学者哈尔布兰兹和迈克尔贝克利于 2021 年 9 月 24 日在外交政策中发表的一篇挑衅性文章认为，中国可能很快就会达到它的巅峰潜力，就像德意志帝国和日本一样，可能会变得咄咄逼人，以在为时已晚之前抓住其逐渐减少的主导地位的机会。\n\n他们关于中国即将“衰落”的论点是众所周知的：“中国即将未富先老”，人口结构不断恶化，水和粮食不安全，生产力下降，债务增加，种族动荡，全球形象骤降，以及美国全方位的反击，包括脱钩。\n\n但是，该论点存在一定程度的否定主义或盲点：\n\n(a) 由于中国人口是美国的四倍，只要达到美国人均生产力的四分之一就可以取代美国成为世界最大经济体。总部位于英国的经济与商业研究中心 (CEBR) 表示，随着经济从大流行中恢复得更早，中国最早可能在 2028 年成为最大的经济体。为什么中国现在或成为世界最大经济体后，要变得更加激进？\n\n(b) 上述所有障碍都是真实存在的，但并非不可逾越。一系列新举措已经出台，包括“共同富裕”、到 2035 年将 8 亿消费者中产阶级翻一番、降低退休年龄、数字化、机器人技术、创新以及连接所有城镇的全国现代铁路系统，然而偏远地区，20 万人及以上。这包括在未来 15 年内将世界上最广泛的高速铁路系统翻一番，达到 70,000 公里，以连接所有人口超过 50 万的城市。中国承诺到2030年达到碳排放峰值，到2060年实现碳中和。它还要求党委书记负责生态。\n\n(c) 到2049年中华人民共和国成立100周年，实现“富强、民主、文明、和谐的社会主义现代化国家”的中国梦明显有活力。它不包括世界霸权。为什么中国要在实现中国梦之前或之后变得更加激进？\n\n(d) 两位作者认为，中国可能发动侵略的可能导火索是台湾。该岛与中国大陆的供应链和价值链紧密相连。大约有100万台湾人在大陆生活和工作。许多台湾人在维护各自独立身份的同时，对摇摆不定，更别提沉船了。除非台湾正式宣布独立，否则时间在北京一边。北京为什么要同时发动一场后果不明的战争，从而危及实现中国梦的机会？\n\n关于与中国脱钩的影响，凯投宏观于 2021 年 9 月 17 日由著名经济学家朱利安·埃文斯-普里查德 (Julian Evans-Pritchard) 和马克·威廉姆斯 (Mark Williams) 撰写的报告表明，如果世界逐渐分为“美国集团”和“中国集团”，供应链重新安排而不是完全切断，中国的处境将比美国糟糕得多。报告显示，在包括台湾在内的217个全球经济体中，美国共有114个经济体，而中国只有90个。\n\n这在某种程度上与许多方面的调查结果相矛盾，即与美国相比，更多的国家将中国作为最大的贸易伙伴。\n\n正如印度《经济时报》2021 年 9 月 3 日报道的那样，“根据洛伊研究所的数据，在 2000 年之前，美国主导着全球贸易，80% 以上的国家与美国的贸易量超过与中国的贸易量。然而，到 2018 年，这一数字急剧下降至仅 30%，因为中国已成为 190 个国家中 128 个国家的最大贸易伙伴。”\n\n根据商务部主办的中国国际进口博览会局2021年3月24日发布的数据，中国已成为美国、欧盟、日本、美国等120多个国家和地区的第一大贸易伙伴。尽管采取了强有力的脱钩措施。\n此外，关于世界贸易体系可以被人为地分为两个独立集团的论点充其量是可疑的。它忽略了全球供应链和价值链的巨大复杂性，而中国已成为其中的中心枢纽。这就是为什么世界十大集装箱港口中有七个在中国，包括香港。[点击这里。](https://www.bansard.com/en/news/global-top-20-container-ports-2020)\n\n根据乔治城大学杰出学者亨利·法雷尔和亚伯拉罕·纽曼 2020 年 6 月 3 日在《外交事务》上的一篇文章，与中国脱钩的愚蠢行为：这不仅是危险的，而且是不可能的\n\n如果有的话，作为最近启动的区域和全面经济伙伴关系的中心枢纽，中国可能会更加锁定全球和区域供应和价值链。RCEP 是世界上最大的贸易集团，由所有东盟成员国及其主要贸易伙伴组成，占世界人口和 GDP 的三分之一。\n\n因此，脱钩的“分叉集团”理论似乎充其量只是理论上的，如果不是完全不切实际的话。"},{"slug":"translate-dalio-on-china-and-arguments","filename":"2021-08-14-translate-dalio-on-china-and-arguments.md","date":"2021-08-14","title":".en | 达里奥关于滴滴及课外辅导的看法，及2篇相关文章","layout":"post","author":"Ray Dalio","keywords":["html","inter","en"],"excerpt":"桥水基金的达里奥最近对滴滴中止赴美上市和中国整治课外辅导两件事发表了看法。","content":"\n\n\u003e 2011 年 7 月 30 日，桥水基金的达里奥最近对滴滴中止赴美上市和中国整治课外辅导两件事发表了看法。大陆的很多财经自媒体对这篇文章进行了转述，但是并没有引用原文。周末读了一下，至少我对原文的理解，和财经自媒体所称达里奥的观点不同。所以翻译一下，供参考。\n\u003e\n\u003e 在找原文的过程中，还发现了一篇刊登于 2021 年 7 月 11 日日经亚洲板块的观点性文章，对达里奥的文章更早的一篇《不要对变化世界中的中国崛起视而不见》进行了反驳，遂将达里奥此文与反驳一并翻译，附于后。\n\n## 0\n\n\u003e 2011 年 7 月 30 日，原文 [发表于 LinkedIn](https://www.linkedin.com/pulse/understanding-chinas-recent-moves-its-capital-markets-ray-dalio/)\n\n\n最近中国与—— 1）滴滴的上市和对其数据使用的控制以及 2）中国教育公司正被转为非营利组织——有关的政策举措，让人对中国的资本主义和资本市场产生了很多怀疑，所以我想帮助澄清一下那里发生了什么事。 \n\n我知道这让不了解正在发生的事情的人感到困惑。自从我36年前开始去中国以来，我发现大多数与政策制定者没有直接接触、没有详细了解变化趋势的西方观察家们，往往不相信中国共产党真的是在用资本市场促进发展。他们将最近这两个举措解释为共产党领导人显示了他们真正的反资本主义的，尽管过去 40 年来的趋势已经明显地朝向用资本市场发展市场经济，并在这个过程中让企业家和资本家变得富有。结果，他们误解了中国正在发生的事情，并且可能会继续误解。这一回，政策制定者向滴滴表示，进行上市可能不是最好的选择，政府很容易让人理解地希望处理数据隐私问题。就教育辅导公司而言，政府希望减少教育不平等，和那些急于让孩子获得这些服务但又负担不起的人的经济负担，通过广泛提供这些服务。他们认为，这些东西对国家更好，即使股东不喜欢。\n\n我记得有许多类似的误解。例如，我记得中国散户投资者泡沫破灭导致政府购买股票，然后政府试图操纵市场一段时间。我还记得中国央行在 2015-16 年间因扩大 [汇率区间](https://www.investopedia.com/terms/c/currency-band.asp) 而导致人民币暴跌，以及这如何导致许多投资者将这些发展作为政策制定者正在远离发展中的资本市场的证据。一些持怀疑态度的投资者认为这些举措是不恰当的反自由市场的干预，尽管这些举措在许多资本主义市场已经多次发生，尽管美国和其他发达市场的财政和货币政策干预使中国政府对其市场的干预相形见绌. 通过它，所有中国决策者都成功地应对了影响并实现了他们的目标；即，他们的行动方向从未改变。这个方向就是支持稳定快速发展资本市场、企业家精神、对外国投资者的开放程度。所以我鼓励你看看趋势，不要误解和过度关注摆动。\n\n要了解正在发生的事情，您需要了解中国是一个国家资本主义体制，这意味着国家运行资本主义，为了为大多数人的利益服务，政策制定者不会让资本市场的敏感性和富裕资本家，挡住他们认为最适合该国大多数人的道路。相反，资本市场中的人和资本家必须了解他们在体制中的从属地位，否则他们将承担自己错误的后果。例如，他们需要纠正认为自己的财富有权决定事情发展方向的错误。 \n\n您还需要了解，在这个快速发展的资本市场环境中，中国监管机构正在探索适当的法规，因此，当法规变化迅速且不明确时，会导致此类混乱，这可能会被误解为反资本主义举措. \n\n此外，您需要了解全球地缘政治环境的变化会导致一些变化。你可以看到这反映在美国政府的政策转变上，例如 a) 改变对中国公司在美国上市的政策和 b) 威胁禁止美国养老基金在中国投资。 \n\n假设这样的事情将来会发生，并以此为依据进行投资。但不要将这些波动误解为趋势的变化，也不要指望这种中国国有资本主义与西方资本主义完全一样。 \n\n话虽如此，我确实认为不幸的是，中国的决策者没有更清楚地公开表达他们行动背后的原因。 \n\n至于投资，在我看来，美国和中国的体制和市场都有机会和风险，很可能相互竞争，相互多元化。因此，它们都应该被视为一个人的投资组合的重要组成部分。我敦促您不要将此类举动误解为对过去几十年存在的趋势的逆转，并让它吓跑您。\n\n\n## 1\n\n\u003e 达里奥 2020 年 10 月 23 日在 [《Financial Times》上的一个专栏](https://www.ft.com/content/8749b742-d3c9-41b4-910e-80e8693c36e6)，原文标题为 \"Don’t be blind to China’s rise in a changing world\".\n\u003e\n\u003e 原文有付费墙，译文基于 [这个连接](https://thefinanceinfo.com/2020/10/23/dont-be-blind-to-chinas-rise-in-a-changing-world/)\n\n作者为桥水联合创始人、联席董事长兼联席首席投资官\n\n从我记事起，人们就说中国不可能成功。共产主义行不通。威权主义行不通。中国人没有创造力。他们在坏账和房地产投机方面有很大的问题。然而，我们每天都看到中国以非凡的方式取得成功。\n\n它实现了一些世界上最低的 Covid-19 病例率。在过去的一年里，其经济增长了近 5%，没有将债务货币化，而所有主要经济体都在收缩。中国的生产多于消费，国际收支顺差，与美国和许多西方国家不同。今年，全球近一半的首次公开募股将在中国进行，其中包括蚂蚁金服 300 亿美元的上市，这是全球有史以来规模最大的一次。甚至特斯拉最畅销的 Model 3 汽车也可能很快就会完全在中国制造。\n\n世界秩序正在发生变化，但由于持续存在的反华偏见，许多人忽略了这一点。中国的非凡表现并不新鲜。事实上，除了1839-1949年的“百年屈辱”外，它在历史上一直是世界上最强大的国家和文化之一。就在过去的四年里，它的经济变化是显着的。无论你对中国的“国家资本主义”有什么批评，你都不能说它没有用，即使你强烈反对北京的做法。\n\n36年前我第一次访问中国时，我会给高级官员10美元的袖珍计算器。他们认为它们是奇迹装置。现在中国在先进技术上与美国匹敌，并且可能会在五年内领先。自 1984 年以来，人均收入增长了 30 多倍，预期寿命增加了十年，贫困率几乎降至零。 1990年，中国第一个股票市场由我认识的七位爱国青年设计。从那时起，它已成为世界第二大。\n\n所有这些都是在说，中国的崛起具有巨大的政治、经济和投资影响。在政治上，中国已成为美国两党面临的主要问题，美国担心中国崛起，扩大全球影响力，并且拒绝其威权模式和对待新疆维吾尔族穆斯林等少数民族的方式。中方的反驳是，维护秩序需要强有力的手，在其境内发生的事情是自己的事，美国有自己的人权问题。它对台湾、香港等地区的主权也是争议很大的大问题。没有人知道这些紧张局势将如何发展，但它们会影响我们所有人。\n\n与此同时，中国的经济规模与美国大致相当，而且扩张速度更快——所以时间站在中国一边。它拥有不断增长的受过良好教育的人口，约占世界科技大学专业的三分之一，是美国的三倍。它还产生和收集更多数据以使用人工智能进行处理。对于西方的许多人来说，这在国家监视方面有阴暗面。但对许多中国人来说，它强化了积极的社会规范，同时也带来了巨大的效率。看待中国相对实力的一种方式是，在人口是美国四倍的情况下，当其人均收入在大约 25 年内达到美国的一半时，其经济规模将是美国的两倍。\n\n最后，还有投资影响。作为一名全球宏观投资者，关于我应该在何处投资多少，查看基本面以及其他人的仓位，我考虑得很多。中国基本面强劲，资产定价相对有吸引力，全球都在减持中国股票和债券。这些目前占外国投资组合持有量的 3% 或更少；中性权重将接近 15%。\n\n这种差异至少部分是由于反华偏见。我认为它即将改变。中国市场正在向外国人开放，他们现在至少可以进入其中的 60%，而 2015 年为 1%。主要指数的基准权重正在上升。因此，我预计中国将享受有利的资本流入，这将支持已经处于两年高位的货币和金融市场。所有这些都促使我在投资组合中增持了中国。\n\n当然，任何国家都可能出现问题。北京可能不会坚持目前的经济改革进程，尽管我怀疑这会发生。美国和中国也在贸易、技术、地缘政治、资本市场和军事力量方面展开激烈竞争——有人说是交战。没有人知道这些战争会有多严重，哪个国家会获胜，或者如何获胜。这就是为什么我将资金分散到这两个国家。\n\n从长远来看，永恒和普遍的真理决定了国家成功或失败的原因。简而言之，当帝国生产力高、财务状况良好、收入多于支出、资产增长快于负债时，帝国就会崛起。这种情况往往发生于他们的人民受过良好教育，努力工作时，并举止文明之时。 正如我在一项正在进行的研究中记录的那样，客观地将中国与美国在这些措施上进行比较，基本面显然有利于中国。\n\n偏见和偏见总是让人们看不到机会。 所以，如果你因为与中国发生的事情不符的原因而对中国持怀疑态度，我建议你理清思路。 美国的事件及其在不断变化的世界中的地位也是如此。 美国大选前夕是反思两者的好时机。\n\n\n## -1\n\n\u003e 日经亚洲板块对上文的 [一个反驳](https://asia.nikkei.com/Opinion/Why-Ray-Dalio-is-wrong-about-China)，作者是 Andrew Hunt 和 Ben Ashby，发布于 2021 年 7 月 11 日\n\n*Andrew Hunt 是 Hunt Economics 的首席执行官，也是 Dresdner Asset Management 在亚洲的前顾问。Ben Ashby 是摩根大通首席投资办公室的前董事总经理。*\n\n高盛与中国工商银行（ICBC）的新财富管理合资企业，和对冲基金亿万富翁Ray Dalio有什么共同点？他们都是希望更多地接触中国金融市场的全球金融投资者的一部分，因为他们认为中国的崛起是不可避免的。我们认为他们错了。\n\n我们认为，达利欧在2020 年 10 月 23 日发表在《金融时报》上的专栏《不要对中国在不断变化的世界中的崛起视而不见》中提出的许多论点今天都可能被证明是错误的，而其他观点可能随着时间的推移也会被证明是错误的。中国市场很可能对外国人“开放”，但是否保证他们有更多的资本是另一回事。\n\n乍一看，更多中国储蓄进入金融市场的前景似乎证明了这种兴奋是合理的，中国证券将成为全球投资者投资组合的更大一部分。\n\n我们计算出，按当前汇率计算，至少需要 6 万亿美元的海外资产来重新平衡国内储户的存款密集型投资组合，使其分布类似于中国邻国的分布。而且，正如达利欧在英国《金融时报》中指出的那样，“世界正在减持中国股票和债券”，它们占外国投资组合的 3% 或更少，而不是接近 15% 的“自然”权重。\n\n到目前为止，如此真实。但许多国际金融机构希望，金融部门政策的“正常化”、投资组合的重新平衡和持续的债务推动的增长将创造一笔横财，他们现在应该为自己建仓。这就是我们不同的地方：我们预计在可预见的未来不会发生任何根本性的变化，由于中国经济的现实。\n\n该国的大部分家庭财富仍存留在银行账户中，而且对外流动受到严格控制。因此，银行体系庞大：中国在全球存款中所占的份额大约是其在全球国内生产总值中所占份额的两倍。\n\n不过，中资银行的主要职能是促进政府政策，促进符合中国共产党原则的经济发展。他们必须确保关键部门有现成的廉价信贷供应，支持实现经济的产出最大化，而非利润。\n\n自 1980 年代后期经济改革开始以来，这种模式必然助长了更广泛的企业部门的赤字。我们估计，平均短缺每年相当于 GDP 的 16%。这必然会影响贷款、储蓄和监管。\n\n为支撑经济，抑制融资成本；在过去四十年的大部分时间里，实际利率一直为负。自然，不愿向借款人收取高额费用对储户来说意义更小。但是已经实施了严格的监管，严格控制资本流动，以确保他们将大部分财富留在银行。\n\n如果中国政府考虑将其做法正常化，将面临艰难的选择。当局可以允许市场将资金分配给寻求利润最大化的公司，或者他们可以继续将资本引导到许多破坏股东价值的公司。在后一种情况下，投资者将不得不接受中国的金融市场没有真正的经济目的，长期回报可能会受到限制。\n\n正如著名投资者本·格雷厄姆所说，“股市在短期内可能是一台投票机，但随着时间的推移，它是一台称重机。”\n\n如果没有利润最大化的潜在驱动力，中国股票就很难达到投资者预期的回报。这意味着该国的储蓄者可能会与任何遵循 Dalio 的 GDP 称重方法的长期被动投资者一起失败——这一策略在 1990 年代后期的亚洲金融危机期间失败了。但企业行为的任何巨变都不符合政策制定者的经济目标。\n\n如果允许更多的国内资金离开该国，也会出现困难局面。对储蓄市场的任何放松管制都可能将中国宝贵的外汇储备消耗到一个危险的低水平。\n\n尽管这些储备的名义价值很大，但它们是否足以满足中国这样规模的经济体的需求仍然是一个悬而未决的问题。此外，如果储户要根据区域标准进行再平衡，我们认为银行系统将面临至少 180% 的贷存比，从而阻碍其向企业提供廉价信贷的主要功能。公司的融资成本也将飙升，引发大量重组，进一步损害投资者回报。\n\n在可预见的未来，中国的银行和企业根本无法承受国内储蓄的流失。即使这些储蓄被锁在家里，前景也越来越消极。由于债务负担已经很高，经济放缓，加上多年不景气的贷款后不良贷款比例不断增加，中资银行将越来越挣扎，其发放新贷款的能力将下降。这在一定程度上解释了中国吸引更多外国投资者的动机。有希望的正常化和确保新的资本来源有助于推迟艰难的决定。\n\n这一切都在达利欧几乎没有提到的实际考虑之前，例如将资金投入到一个有资本管制的国家或满足国内监管机构和投资者的需求的影响，特别是当他们越来越关注环境、社会和治理原则时，如以及应对日益激烈和紧张的地缘政治竞争。没有人知道这一切的正确风险溢价是多少。\n\n在任何像中国这样规模的市场中，投资者都将有较早获得轻松获利的机会。鉴于对冲基金倾向于短期投资，Dalio 可能会获利。但我们认为潜在的回报最终会消退。\n\n更糟糕的是，如果中国无法改革国内经济，或者国际政治局势进一步恶化，甚至撤资都可能成为问题。如果发生这种情况，仓促进入的投资者和公司将有时间悠闲地忏悔。\n"},{"slug":"TL-Paul-Graham-How-to-Disagree","filename":"2019-08-24-TL-Paul-Graham-How-to-Disagree.md","date":"2019-08-24","title":".en | 翻译：保罗·格雷厄姆谈如何反对","layout":"post","author":"保罗·格雷厄姆","keywords":["html","inter"],"excerpt":"如果我们都在越来越多地进行反对，那我们就需要把这件事小心做好。","content":"\n\u003e 本文的作者保罗·格雷厄姆是一位程序员、画家兼投资人。他曾在哈佛大学获得计算机方向的博士学位，也在罗德岛设计学院和佛罗伦萨绘画艺术学院学习过绘画。作为两种身份的结合，他创作了《Hackers \u0026 Painters》一书。作为投资人，他最为出名的成就是参与创办了创业孵化公司 Y Combinator. \n\u003e\n\u003e 保罗在互联网上最有名的文章，当属这篇《How to Disagree》，他的个人维基百科词条上专门用一个小节介绍了这篇文章。网络上也有根据这篇文章制作的“反驳金字塔”图片。虽说一图胜千言，但是从文字转化为示意图的过程中，很多信息被省略，一些常见的话术和对这些话术的反驳，以及本文文末，对反对的不同层次，其意义的讨论和澄清，都没有出现在图中。在争论中直接扔给对方一张反驳金字塔的图，看起来反而很接近于最低层次的扣帽子。\n\u003e\n\u003e 以下是全文翻译。原文链接：[http://paulgraham.com/disagree.html](http://paulgraham.com/disagree.html)\n\n作于 2008 年 3 月\n\n网络正把写作变成对话。二十年前，作者只用写而读者只能读。网络让读者可以回应，而且这些回应越来越多——评论区里、论坛里，和他们自己的博客文章里。\n\n这些回应的人中有很多是反对原文的。这是可以预见的。同意不如反对激励人们（发表看法）。当你同意的时候可说的也更少。你也许可以就作者说过的东西进行拓展，但是他可能已经把最有趣的推论都说完了。当你反对的时候，你所踏足的领域是他可能还没涉及到的。\n\n结果就是，反对的声音要多得多，尤其是以字数来衡量。这并不意味着人们的戾气愈发严重。我们交流方式的结构性改变就足以解释这一现象了。但是尽管驱动着反对声音增多的并非愤怒，人们因为反对增多而变得更加生气的危险却真实存在。尤其是在网上，在你不用和对方面对面的地方发言是容易的。\n\n如果我们都在越来越多地进行反对，那我们就需要把这件事小心做好。什么叫好好反对？绝大多数读者可以区分单纯的**扣帽子**和通过细致推理进行的反驳，但我认为把中间状态也逐个列举一下是很有帮助的。所以下面就是对反对的不同层次进行列举的一个尝试：\n\n## 第 0 层：扣帽子 (Name-calling)\n\n这是反对的最低层次，可能也是最常见的形式。我们都见过这样的评论：\n\n\u003e 你个娘炮！！！！！！\n\n但是重要的是意识到，更加高大上的**扣帽子**同样没什么效力。一个像这样的评论：\n\n\u003e 作者是个自以为是的外行。\n\n不过就是一个高配版的“你个娘炮”。\n\n## 第 1 层：诉诸身份 (Ad Hominem)\n\n**诉诸身份**的攻击不像单纯的**扣帽子**那么无力。它其实可能有些威力。比如说，如果一个参议院写文章说参议员们的工资需要提高，有人可能会回应道：\n\n\u003e 他当然会这么说了，他是个参议员。\n\n这并不会反驳作者的论证，但是这至少和主题有关。然而，这仍然是一种很无力的反对。如果这位参议院的论证里有什么错误，你应该说明错在哪里；如果没错，他是一个参议员又有什么区别？\n\n说作者不具备写作某一话题文章的权威性是**诉诸身份**的一个变种，而且是特别没用的一种，因为好的想法经常来自于旁观者。问题是作者对还是不对。如果他缺乏的权威性导致他犯了错误，请把这些错误指出来。如果没有，那（缺乏权威性）就不是一个问题。\n\n## 第 2 层：诉诸语气 (Responding to Tone)\n\n接下来这个层次我们开始看到针对内容而非作者的回应。这些回应中最低级的一种形式就是反对作者的语气。例如：\n\n\u003e 无法相信作者竟然用如此傲慢的方式贬低智能设计。\n\n尽管强于攻击作者，这仍是一种无力的反对。作者是对还是错，比他的语气重要得多。尤其是鉴于语气是多么难以评判。一个挂着某种观点的粉丝牌子的人可能被一些其他人觉得正常的语气所激怒。\n\n所以如果你对于一篇文章所能说的最坏的事情就是**诉诸语气**，那你实在是没说出什么东西来。作者是不是轻佻但是正确？那总好过持重但是错误。如果作者有哪里错了，那就指出到底是哪儿。\n\n## 第 3 层：声明异见 (Contradiction)\n\n这一层次我们终于来到了对说过的内容进行的回应，而不是怎么说的和谁说的。对一个论证的最低层次的回应就是简单陈述相反的论点，没有或只提供很少的支持性证据。\n\n这一方法经常和第2层结合起来使用，正如：\n\n\u003e 无法相信作者竟然用如此傲慢的方式贬低智能设计。智能设计是合理的科学理论。\n\n**声明异见**有时可能有些威力，有时仅仅让人看见明确声明的反方命题就足以看到反方是正确的。但是通常来说，证据是有帮助的。\n\n## 第 4 层：证明异见 (Counterargument)\n\n到了第4层上，我们终于见到了第一种有说服力的反对形式：**证明异见**。之前的几种形式通常可以因为啥也没论证而被忽略。**证明异见**可能会证明某些观点。问题在于，很难说证明的究竟是啥。\n\n**证明异见**就是在**声明异见**之外，再加上论证和/或论据。当其针对的是原论点时，这种方式是令人信服的。但是不幸的是，通常情况下**证明异见**针对的是和原论点稍微有些区别的东西。多数情况下，争论得热火朝天的俩人其实争论的是两件不同的事情。有时他们甚至互相同意对方，但是陷于斗嘴的程度如此之深，以至于没有意识到这一点。\n\n反对和作者原文有轻微不同的论点也是可能有合理原因的：当你感觉他们没有把握问题的中心的时候就可以这么做。但是当你这么做的时候，应该明确说明你在论证不同的论点。\n\n## 第 5 层：驳斥对方 (Refutation)\n\n最有说服力的反对形式是**驳斥对方**。它同样是最罕见的，因为需要最多的工作量。其实，反对的不同层次构成了一种金字塔，层次越高，你能找到的实例就越少。\n\n要**驳斥**一个人，你可能得引用他们说过的话。你可能必须找到一件“还热乎着的凶器 (smoking gun)”，一个在你反对的内容中你认为搞错了的东西，然后解释它为什么错了。如果你找不到可以用来反对的实际引用，那么你可能在犯 [“稻草人谬误”](https://zh.wikipedia.org/wiki/%E7%A8%BB%E8%8D%89%E4%BA%BA%E8%AB%96%E8%AD%89)。\n\n尽管**驳斥对方**一般包含引用，引用并不必然意味着**驳斥对方**。有些作者引用部分他们反对的文章的内容，做出合理**驳斥对方**的样子，然后用第 3 层甚至第 0 层的形式进行回应。\n\n## 第 6 层：驳斥对方中心论点\n\n**驳斥**的力度取决于你驳斥对方的是什么。最强有力的反对形式就是**驳斥对方的中心论点**。\n\n即便到了第5层，我们偶尔仍能看见故意的智力不诚实 (interlectual dishonesty)，比如有人挑出一个论证中不重要的点然后把它们**驳斥**一番。有时这么做的精神让这种反对更像是一种处心积虑的**诉诸身份**的攻击，而非真正的**驳斥对方**。比如，纠正某人的语法，或者揪住名字或数字中的小错不放。除非反对的论证实际上依赖于这些错误，否则纠正它们的唯一目的就是损害对手的名誉。\n\n\u003e **intellectual-dishoesty**\n\u003e\n\u003e 相对于 intellectual honesty, 故意在辩论和推理中使用谬误被称作 intellectual dishonesty, 译作“智力不诚实”。详见维基百科 inteleectual honesty 词条。\n\n真正意义上的**驳斥对方**要求一个人反驳其中心论点，或者至少是其中之一。那意味着一个人必须明确地指出中心论点是什么。所以一个真正有效的**驳斥对方**看起来就像：\n\n\u003e 作者的主要论点似乎是 X。正如他说的：\n\u003e \n\u003e \u003e \u003c引用的内容\u003e\n\u003e \n\u003e 但这是错的，原因如下……\n\n你引用并指出错误的内容不一定是原作者主要论点的原样陈述，只要批判的是中心论点所依赖的东西就足够了。\n\n## 这样做的意义\n\n现在我们有了给不同形式的反对进行分类的方法。这有什么好处？这种反对的分级所**不能**带给我们的，就是判断输赢的方法。反对的不同层次描述的只是一个反对的形式，而不是反对是否正确。一个第 6 层的回应可能仍然是完全错误的。\n\n但是尽管反对的不同层次没有给一个回复的可信度设定一个下限，但它的确设定了一个上限。一个第 6 层的回应不一定有说服力，但是一个第 2 层的回应一定没有说服力。\n\n区分不同形式反对的最明显的好处就是帮助人们评估他们所阅读的东西。特别是，这将帮助他们看清的议论。一个雄辩的演讲者或者作家可以给人一种碾压对手的印象，仅仅通过使用强有力的词汇。实际上这可能是一个煽动者的决定性特质。通过辨别不同形式的反对，我们给了批判性阅读者一个图钉，让他们能戳破这种气球。\n\n这种标签同样能帮助写作者。大多数的智力不诚实是无意的。有些人用**诉诸语气**的方法批评他反对的观点，可能真的觉得自己言之有物。放大并看清他当时在反对分级上的位置，有可能会启发他尝试进步到**证明异见**和**驳斥对方**的层次上去。\n\n但是好好反对的最大好处并不只是让对话变得更好，而是让被反对的人开心一点。如果你研究对话，会发现第 1 层比第 6 层更加刻薄。当你真的言之有物的时候，大可不必刻薄。实际上，你也不会想这么做。当你真的有观点要表达时，刻薄只能起阻碍作用。\n\n如果沿着反对的不同层次向上攀登可以让人们不那么刻薄，那将会让大多数人更快乐。多数人并不乐于刻薄，他们这么做只是因为控制不当。\n\n感谢 Trevor Blackwell 和 Jessica Livingston 阅读这篇文章的草稿。\n\n"},{"slug":"web-brower-A-to-Z","filename":"2019-08-16-web-brower-A-to-Z.md","date":"2019-08-16","title":".html | 浏览器A到Z","layout":"post","keywords":["html"],"excerpt":"人类的本质就是复读机。","content":"\n\u003e 人类的本质就是复读机。\n\n首先萌狼看[phoenixlzx](https://blog.phoenixlzx.com/2014/03/10/browser-from-a-to-z/)那有一篇这样的文章，貌似很好玩的样子。\n\n咱看[约伊兹的萌狼乡手札](https://blog.yoitsu.moe/a2z.html)那有一篇这样的文章，貌似很好玩的样子。\n\n咱也试试看？\n\n- __A__ [amazon.com](https://www.amazon.com): 美帝的JD\n- __B__ [bilibili.com](https://www.bilibili.com): 比利比利♂干杯\n- __C__ [changhai.org](https://www.changhai.org): 卢昌海的个人主页，科普作家的自留地，互联网的名胜古迹\n- __D__ [douban.com](https://www.douban.com): 人均大文豪\n- __E__ [email.——.edu](): 学校邮箱\n- __F__ [farseerfc.me](https://farseerfc.me): farseerfc 的博客，本人博客的留言区代码就是根据[他(她？)的教程](https://farseerfc.me/github-issues-as-comments.html)改写成的\n- __G__ [github.com](https://github.com): 同性交友网站\n- __H__ [hacker-tools.github.io](https://hacker-tools.github.io): 标题党，你以为我是黑客教程，其实我是 Linux 入门哒\n- __I__ [idope.se](): 好像已经失效的p2p搜索网站\n- __J__ 没有 :-(\n- __K__ [kenengba.com](https://kenengba.com): 可能吧，Jason Ng 的博客，号称“互联网的‘新鲜事’”，更新周期以年为单位\n- __L__ [localhost:4000/blog/](): 个人博客的本地调试端口\n- __M__ [mountaye.github.io/blog/](https://mountaye.github.io/blog/): 个人博客，不要忘记反斜线\n- __N__ 没有 :-(\n- __O__ [ozdic.com](http://www.ozdic.com/): 一个搜索英语固定搭配的在线词典\n- __P__ [program-think.blogspot.com](https://program-think.blogspot.com): 咱也不知道，咱也不敢问\n- __Q__ [quantopian.com](https://www.quantopian.com/home): 一个提供量化金融数据接口的平台，数据与主流财经门户的数据有出入\n- __R__ [ruanyifeng.com](https://www.ruanyifeng.com/home.html): 阮一峰的个人网站\n- __S__ [stackoverflow.com](https://stackoverflow.com): 编程相关的问答网站 ~~（抄代码就完事了）~~\n- __T__  ~~（谁能给个邀请码）~~ 没有 :-(\n- __U__ 没有 :-(\n- __V__ [linux.vbird.org](http://linux.vbird.org/): 鸟哥的 Linux 私房菜\n- __W__ [wolfram.com](http://wolfram.com/): ~~世界上第二好的编程语言~~\n- __X__ 没有 :-(\n- __Y__ [yoitsu.moe](https://blog.yoitsu.moe): 约伊兹的萌狼乡手札\n- __Z__ [zh.moegirl.org](https://zh.moegirl.org/Mainpage): 中文萌娘百科，90后中老年人了解00后的窗口\n"},{"slug":"TL-why-physics-is-not-a-discipline","filename":"2019-06-19-TL-why-physics-is-not-a-discipline.md","date":"2019-06-19","title":".en | 翻译：为什么说物理不是一门学科","layout":"post","author":"Philip Ball","keywords":["html","inter"],"excerpt":"一篇稍微硬核的科普文章，讨论物理在生物学当中的可用性。","content":"\n\u003e 来源：《Nautilus》\n\n\u0026nbsp;\n\n\u003e 大约是上学期期中的时候，我们老板给我们分享了这篇文章的链接。当时觉得不错，但是没有读完。如今开始写博客了，又想起了这篇文章。结果翻译的过程中渐渐发现，此文篇幅过长，和学术沾边的英语直译过来也不适合阅读，并不适合作为一篇博文，更不用说手机端的微信公众号了。但我还是坚持把这篇文章译完了，主要原因，我这个专业有时需要些这样的鸡汤以自勉。至于读者们，我只能说句抱歉。\n\u003e\n\u003e 以及，这篇翻译已经过原文作者的许可。数次联系最初发表的网站，均无人回复。在此附上原文链接：[http://nautil.us/issue/35/boundaries/why-physics-is-not-a-discipline](http://nautil.us/issue/35/boundaries/why-physics-is-not-a-discipline)。对原文的转载和改编，请联系原作者；对这篇翻译的转载、修改和改编，请联系我本人。\n\n你听过那个关于生物学家、物理学家和数学家的段子吗？他们坐在一个咖啡馆里看着人们从街对面的一个房子里进进出出。两个人进去了，然后一会三个人出来了。物理学家说：“测量不准确。”生物学家说：“他们繁殖了。”数学家说：“若现在恰有一人进入此屋，则屋子再次为空。”\n\n好笑吧，不好笑？这种笑话你能找到很多——很多都提到了球形的奶牛——但是我还从来没找到过能让我笑得出来的。然而，这不是这些段子的目的。他们被用来向我们展示，这些学科用非常不同，甚至可能互不相容的方式来看待这个世界。\n\n这么说有些道理。比如说，很多物理学家都会讲段子，编排生物学家在他们领域内的努力是多么平庸，把他们看成是不着边际和理解力成问题的人。并不只有物理学家会被认为事情做得不对，生物学家经常认为（完善但是范围被严格限定的生物物理可能除外）生物学里就没有物理的位置。\n\n但是这种反对（和段子）是把学术的标签和科学的标签混为一谈了。物理，被恰当理解的情况下，并不是一个在中学和大学讲授的学科，而是关于世界上的种种过程如何发生的一种特定的理解方式。当亚里士多德在公元前4世纪写下他的《物理》的时候，他描述的并非是学术界的一个领域，而是哲学上的一种模式：一种思考自然的方式。你可能会觉得那只是一种古代的用法，但不对。当今天的物理学家谈（他们也经常谈）一个问题的“物理”的时候，他们的意思很接近亚里士多德：既不是纯粹的数学形式也不只是陈述，而是一种从基本原理出发，推导出过程的方法。\n\n这就是为什么，存在着生物的物理，就像化学的、地质学和社会学的物理存在一样。但在职业的意义上，发现这些物理的并不一定是“物理学家”。\n\n在20世纪中叶，物理和生物学之间的界限不如今天严格分明。20世纪分子生物学的几位先驱，包括马克思·德尔布吕克 (Max Delbrück)，塞默·本泽 (Seymour Benzer) 和弗朗西斯·克里克 (Francis Crick)，最初都被训练为物理学家。而且从詹姆斯·沃森 (James Watson) 和弗朗西斯·克里克1953年对DNA中基因编码的发现中找到证据的，基因和进化的“信息论”视角的开创，通常被归功于物理学奖厄温·薛定谔 (Erwin Schrödinger) 1944年的《什么是生命？》一书。（然而，他的一些观点被生物学家赫尔曼·穆勒预见到了。）\n\n\u003e 刚才这段里面薛定谔的这句太绕了，我把原文放出来吧：And the beginnings of the “information” perspective on genes and evolution that found substance in James Watson and Francis Crick’s 1953 discovery of genetic coding in DNA is usually attributed to physicist Erwin Schrödinger’s 1944 book What Is Life?\n\n\u003e 来一个张佳玮风格的翻译：而且，基因和进化的“信息论”视角——从詹姆斯·沃森 (James Watson) 和弗朗西斯·克里克1953年对DNA中基因编码的发现中找到了证据——的开创，通常被归功于物理学奖厄温·薛定谔 (Erwin Schrödinger) 1944年的《什么是生命？》一书。\n\n20世纪中期，物理与生物的合流受到了很多优秀生物学家的欢迎，包括康莱德·豪·瓦丁顿 (Conrad Hal Waddington)、哈代 (J. B. S. Haldane) 和约瑟夫·尼德海姆 (Joseph Needham)，也就是成立了剑桥大学理论生物学俱乐部的人。而且对于DNA的“数字编码”的理解和应用数学家诺伯特·维尔纳 (Norbert Wiener) 对控制论框架的勾勒大致同时，后者致力于解释，从机器到细胞这样的复杂系统，如何被反馈过程组成的网络所调控。在1955年，物理学家乔治·伽莫夫 (George Gamow) 在《科学美国人》上发表了一篇有先见之明的文章，名为“活体细胞中的信息传递”，而且控制论赋予了生物学家雅各斯·蒙诺德 (Jacques Monod) 和弗兰西奥斯·雅各布 (François Jacob) 一种语言，来明确描述他们在1960年代提出的基因调控网络的初步理论。\n\n但是随后，这一“生物之理”项目停滞了。尽管有物理学家转向研究生物相关的问题，但是他们的努力和分子和细胞生物学中，主流的基因组数据收集，以及基因和生化机制的细致分析之间，仍存在着将之区分开来的空白。究竟发生了什么？\n\n这一分离中的一些关键原因被恩斯特·迈耶 (Ernst Mayr) 总结在了他2004年的著作《什么让生物学独一无二》之中。迈耶是当代最著名的演化生物学家之一，而且单是这一标题本身就反映出了长久以来生命科学界持有的例外论观点。在迈耶看来，对于物理能提供的那种一般性理论来说，生物学太过混乱和复杂——魔鬼总在细节处。\n\n## 一个领域内的科学想法可能最终关联另一领域\n\n迈耶可能做出了任何生物学家所能做出的最精致的努力，来给他们的学科周围画上一圈清晰的边界，很聪明地将其和科学的其他领域区隔开来。通过这么做，他对这种努力的愚蠢进行了了最清晰的展示。\n\n他找出了将物理区分于生物的四大基本特征。它们分别是本质主义（将世界划分为精细刻画而且不变的诸范畴，比如电子和质子）、决定论（本质主义几乎必然会导致这一点）、还原论（通过将一个系统约化为它的各个组成部分来理解整个系统）、定律的普适性，而生物学中的规律是由偶然、随机性和历史不确定性所决定的。任何物理学家都会告诉你这种对物理学特征的刻画是彻底错误的，正像对于量子力学、混沌、复杂性的熟悉所揭示的那样。\n\n但是迈耶的论点变得更有趣——如果不是更有理了——当他说真正让生物学独一无二的，是它与目的有关：通过盲目的突变和进化过程中的选择构造出来的巧妙设计。在随机游走过程中互相碰撞的粒子们可什么都不必做。但是基因网络和蛋白质分子以及细胞的复杂架构是通过适者生存的残酷性来塑造的：它们有一个目标。而物理并不研究目的，对吧？正如纽约城市大学的从演化生物学家改行的哲学家马斯莫·皮格留奇 (Massimo Pigliucci) 最近表示的那样：“去问一个电子、一个分子、一个行星或山脉的意义或者目标是什么，是没有意义的。”\n\n目的或者说目的论是生物学中的困难词汇：它们很容易让人以为，进化的“盲人制表师”存在一种确定的目标，导致这些词被神创论者滥用。但是在生物学中讨论功能的时候是没办法摆脱这种内疚的：他的组成成分和结构在生物体的生存和基因的传播过程中的确发挥着作用。\n\n问题是，物理学家也没因为这个词而退却。当诺伯特·维尔纳把他1943年的论文命名为“行为、目的和目的论”的时候，他是故意挑衅的。两年后，维尔纳和匈牙利数学物理家约翰·冯·诺伊曼 (John von Neumann) 成立的目的论学会，宣布其任务是理解“目的是如何在人类和动物的行为中实现的”。冯·诺伊曼对于作为一种计算过程的繁殖——进化中的“生物功能”中最重要的一项——方面长期不渝的兴趣，奠定了元胞自动机的理论基础，元胞自动机如今广泛用于研究复杂的适应性过程，包括达尔文进化论（甚至理查德·道金斯 (Richard Dawkins) 都用过它们）。\n\n\u003e 诺伊曼一句的原文：Von Neumann’s abiding interest in replication—an essential ingredient for evolving “biological function”—as a computational process laid the foundations of the theory of cellular automata...\n\n达尔文主义中对环境的适应产生了显式的目的。那么不引入任何关于适应的“物理”，通过达尔文的随机突变和自然选择，我们不是很好地理解了这种目的吗？\n\n其实，没有。一方面，繁殖的生物体间随机可遗传的突变，以及来自环境的选择压力，这两者一定会导致适应性、多样性和创新性，这一论断并不显然。这一结果如何依赖于像是繁殖速率、复制过程中的保真度、系统中的随机噪声水平、选择压力的强度、遗传信息及其决定的特性（基因型和表现型），以及等等等等的因素？演化生物学家有用于探究这些事情的数学模型，但是没有一个通用的框架将之联系起来，计算并没有办法告诉你太多。\n\n这个通用的框架就是进化的物理。它可能被映射为，比如说存在阈值的某些变量，一旦超过这个阈值，一种在性质上不同的全局行为就会显现出来：物理学家管这个叫相图。理论化学家彼得·舒斯特 (Peter Schuster) 和他的同事已经在基因复制的错误率当中发现了这样一个阈值，只要低于这个值，基因组复制过程中保留的信息就将保持稳定。换句话说，超过这个错误率，就不存在像这样可识别的物种：他们的基因身份“融化”了。舒斯特的同事，诺奖得主化学家曼弗雷德·艾根 (Manfred Eigen)，表示这种切换是一种相变现象，和物理学家传统上研究的融化完全相似。\n\n与此同时，演化生物学家安德里亚斯·瓦格纳 (Andreas Wagner) 用计算机模型说明了达尔文进化论有能力产生性质上全新的形式和结构，而不只是在那些自然选择无法自动推论得到的论题上进行微小的修正。实际上，这依赖于描述功能（比如一种蛋白质的化学效用）如何依赖于编码功能的信息（比如分子链上氨基酸的序列）的概率的组合空间有一种特殊的“形状”。此处又是“物理”为进化多样性提供了基础。\n\n而且麻省理工学院的物理学家杰瑞米·英格兰 (Jeremy England) 还表明，适应性本身并不一定要依赖于达尔文的自然选择和基因的遗传，而是有可能根植于更深层次的，复杂系统中的热力学。关于适合程度 (fitness) 和适应性 (adaptation) 概念一直以来都十分困难，无法深究——很容易听起来就像是循环推理。但是英格兰说它们可以看作更基本的形式，也就是一个特定的系统，在面对恒定的能量流动时，通过抑制能量的波动和耗散，从而维持自身的能力：也可以说，就是“保持冷静，继续前进”(keep calm and carry on) 的能力。\n\n“我们的初始假设是基于物理的，而这些假设推导出了一个非平衡态演化的一般特征的命题，在这个命题之下，达尔文的学说变成了系统中存在自我增殖之物的一种特殊情况”，英格兰说，“（适应性的）概念变成了存在热涨落的物体自发地被塑造成善于从环境中接受外场做功的状态。”他表示，其中振奋人心之处在于，“当我们从物理方面考虑某些看起来些具有“适应”性的结构的起源的时候，这些结构不必拥有生物意义上的父母。”已经有些研究人员表示英格兰的观点为达尔文的学说提供了物理基础。\n\n注意，我们其实没法预言这些生物学现象的物理将会从哪里冒出来——来自于化学家和生物学家的可能性和来自“物理学家”的可能性差不多。从学科的意义上讲，把这些基础的观点和理论叫做一个问题的物理，完全不是物理沙文主义的意思。我们只是需要将这个词从教条的定义，以及伴随这种定义的学界鄙视链之战中解救出来。\n\n在物理学内部，你可能很熟悉这种对生物学中的概念的入侵，这只不过是一个领域内发展出的科学观点关联到另一领域的又一个例子。\n\n但是问题其实还要更深刻一些，而且将其称作不同学科之间的跨界（或者说越界）并没有刻画出问题的全貌。我们需要超越像迈耶那样划定并维护学科边界的努力。\n\n物理学家们对同行们洞察“问题的物理”能力的吹捧可能听起来有些古怪。除了思考“问题的物理”，物理学家还有别的可做吗？这其中包含了一个误解。此处描述的是，放过数学描述和各种相互作用的细节，直接去处理其中隐含的概念——通常能够用非数学的，乃至口头语言进行简要描述的一般性概念。在这种意义上所说的物理并不是一套固定的解题流程，也不必落实在某一类具体的题目之上。这是一种思考世界的方式：一套在因果之间建立联系的构想。\n\n## 我们还不太知道生物中的物理应当包含什么，但没有它我们理解不了生命\n\n这种思考可能来自于任何一位科学家，不论他/她的学术目标是什么。物理是雅各布和蒙诺德在观察反馈过程时所展示的，基因调控的关键，基因调控也因之和控制论之间建立了联系。物理是发展生物学家汉斯·曼因哈特 (Hans Meinhardt) 在1970年代的成果，那时他和同事阿尔弗雷德·吉雷尔 (Alfred Gierer) 解锁了图灵结构的物理。图灵结构是一种描述化学扩散过程的数学模型中自发产生的图案，由数学家阿兰·图灵 (Alan Turing) 在1952年提出，用于解释胚胎中形态 (form) 和秩序 (order) 的形成。曼因哈特和吉雷尔识别出了隐藏在图灵的数学之下的物理：一种自我生成的化学试剂（“启动子”）和一种抑制其行为的成分之间的相互作用。\n\n一旦我们放弃基于院系的对于物理的定义，其他学科周围的高墙也就不再是铁板一块了，从而会产生积极的结果。迈耶认为的生物收到目标的激励而非生物不然的想法，与萌发于一切始于DNA这一观点的对生物信息的粗浅解释密切相关。正如迈耶所说：“生物世界中的单一现象或过程，没有一个不是由基因组中的基因程序所控制的。”\n\n这种现在被称为“DNA沙文主义”的观点，会导致迈耶错误地归咎于物理的那种还原主义，这也正是生物的物理所反对的。即便我们承认（我们也必须承认） DNA 和基因的确在生物演化和生存的机制的种种细节中占据中心地位，我们仍需要一种更宽广的视野，维持生物运转的细心并不止来自于 DNA 数据库。此处的一个关键问题在于因果性：信息朝着什么方向流动？现在将这些因果性问题定量化正变得可能，而且这揭示出了那种普适的自下而上的视角的不足。\n\n威斯康星麦迪逊大学的神经科学家吉欧里奥·托诺尼 (Giulio Tononi) 和他的同事们用一种各部分之间相互作用的的复杂系统构建了一个通用模型，每一部分可以是神经元或者基因，他们发现有时系统的行为并不由自下而上的方式决定，而是由各部分之间更高层次的组织。\n\n这一图景也出现在了萨拉·沃克尔 (Sara Walker)、保罗·戴维斯 (Paul Davies) 以及亚利桑那州立大学的同事们对酵母基因网络的分析之中。这项研究表明，这一案例中确实涉及到了“自上而下”的因果性。戴维斯和同事们相信自上而下的因果性可能是生命物理中的一个广泛特征，可能在进化中的一些重大进步中发挥了关键性作用，比如说基因编码的出现、有复杂细胞器的细胞（真核生物）的出现、多细胞有机体的演化，甚至是生命的出现本身。他们说，在这些关键节点上，信息可能改变了流动的方向，使得高层次的组织影响和改变了低层次上的组织，而非一切都由基因水平上的突变来“驱动”。\n\n这一工作，和瓦格纳、舒斯特以及艾根的成果共同揭示的一件事是，DNA 和基因网络关联于生物系统的维持和演化的方式可能只有在我们更好地理解了信息本身的物理之后才能彻底理解。\n\n需要考虑到的一点在于这样一种发现：生物系统往往运行在物理学家称为临界相变或者说临界点附近：一种在两种组织模式之间切换的边缘疯狂试探的状态，其中一种模式有序，另一种无序。临界点在像磁性、液相混合物以及超流这样的物理系统中广为人知。2010年，普林斯顿大学研究生物问题的物理学家威廉·拜亚勒克 (William Bialek) 和巴黎高师 (École Normale Supérieure in Paris) 的同事蒂埃里·莫拉 (Thierry Mora) 认为很多生物系统，从鸟群到大脑神经网络再到蛋白质的氨基酸序列，也有可能接近临界状态。\n\n拜亚勒克和同事们说，通过在临界点运行，一个系统会经历巨大的波动，从而使它的各组成部分能够处于众多不同的构象。所以，莫拉说：“处于临界状态可以获得应付复杂而不可预知的环境所必须的灵活性。”除此之外，接近临界的状态对于环境的扰动十分敏感，可以向整个系统传递涟漪效应。那可以帮厨生物系统很迅速地适应变化：比如说，一群鸟或鱼可以很快地对接近的捕食者作出反应。\n\n临界性也可以提供信息收集的机制。意大利帕多瓦大学 (University of Padova) 的物理学家阿莫斯·迈瑞坦 (Amos Maritan) 和同事们在一群“认知媒介”——可能是例如单个生物体、神经元等——组成的复杂系统中，临界状态允许系统“感知”周围正在发生什么：通过编码一种关于周边环境的“内部地图”，就像是编码了周边地形的河流网一样。“在临界状态附近保持稳定为系统提供了优良的灵活性，以及应对和适应高度可变且复杂的环境的演化优势，”迈瑞坦说。越来越多的证据表明，大脑、基因网络和动物群都确实是用这种方式组织的。临界性可能无处不在。\n\n这样的例子让我们有信心认为，生物之中确实存在物理。拜亚勒克对于生物太过于杂乱的说法没有耐心——正如他自己所说：“说我们永远无法彻底理解，这有点草率。”他有信心认为存在“一套像其他领域一样达到具有预测能力的水平的生物理论物理”。没有这个，生物就存在成为传奇和偶然事件的可能。我们可以比较肯定的一点就是生物并不是那样的，因为那样根本不合理。\n\n我们还不太知道生物的物理需要包含哪些东西。但是没有它我们就理解不了生物学。它肯定会涉及基因网络如何在面对变化的环境时既有鲁棒性又有灵活性——比如说，为什么一个失效的基因不一定致命，为什么细胞可以在不改变基因组的情况下用稳定可依赖的方式改变他们的特性。它应当能揭示为什么进化本身既可行，又有创新型。\n\n说物理学包罗万象不等同于说物理学家可以解决一切问题。他们也是在一个领域内接受培养，离开自己的领域时就像我们一样不舒服。关键不在于谁“拥有”科学中的某个问题，而是关于为思考事情的运行原理而开发出有用的工具——也就是两千多年以前亚里士多德想干的事情。物理不是物理系里的事情。世界并不在乎标签，如果我们想要理解它的话，我们也不该在乎。\n\n*菲利普·鲍尔是科学于艺术类书籍的作者，著有《看不见的诱惑》(Invisible: The Dangerous Allure of the Unseen) 一书*\n\n## 参考资料\n\n1. Pigliucci, M. Biology vs. Physics: Two ways of doing science? www.ThePhilosophersMag.com (2015).\n2. Perunov, N., Marsland, R., \u0026 England, J. Statistical physics of adaptation. arXiv:1412.1875 (2014).\n3. Hoel, E.P., Albantakis, L., \u0026 Tononi, G. Quantifying causal emergence shows that macro can beat micro. Proceedings of the National Academy of Sciences 110, 19790-19795 (2013).\n4. Walker, S.I., Kim, H., \u0026 Davies, P.C.W. The informational architecture of the cell. Philosophical Transactions of the Royal Society A 374 (2016). Retrieved from: DOI: 10.1098/rsta.2015.0057\n5. Walker, S.I., Cisneros, L., \u0026 Davies, P.C.W. Evolutionary transitions and top-down causation. arXiv:1207.4808 (2012).\n6. Walker, S.I. \u0026 Davies, P.C.W. The algorithmic origins of life. Journal of the Royal Society Interface 10 (2012). Retrieved from: DOI: 10.1098/rsif.2012.0869\n7. “DNA as Information” Theme issue compiled and edited by Cartwright, J.H.E., Giannerini, S., \u0026 Gonzalez, D.L. Philosophical Transactions of the Royal Society A 374 (2016).\n8. Mora, T. \u0026 Bialek, W. Are biological systems poised at criticality? Journal of Statistical Physics 144, 268-302 (2011).\n9. Hildalgo, J., et al. Information-based fitness and the emergence of criticality in living systems. Proceedings of the National Academy of Sciences 111, 10095-10100 (2014).\n10. Bialek, W. Perspectives on theory at the interface of physics and biology. arXiv:1512.08954 (2015).\n"},{"slug":"RP-naive-lover","filename":"2019-05-19-RP-naive-lover.md","date":"2019-05-19","title":".html | 转载：青涩的爱人","layout":"post","author":"草榴社区","keywords":["html"],"excerpt":"本文转自草榴社区，原作者不详。本文包含对性的描写，未成年人请不要阅读。","content":"\n\u003e 本文转自草榴社区，原作者不详。本文包含对性的描写，未成年人请不要阅读。\n\n## （一）  \n\n四点半放学的时候，我打了个哈欠，拎起书包准备走人，方俊扬叫住了我。方俊扬是个女孩子，跟我关系还算不错，平常虽算不上是热情，倒也有点来往。我对她的印象挺好。\n\n她走到我面前，看着我，好像要开口说什么，一时僵住了，没有说出来，一片红晕浮上了脸颊。  \n\n我也呆了一呆，觉得有什么特别的事情要发生。我从来没有这么近地看她的脸，现在才发现她的五官那么细腻。她的瞳仁非常地黑，小鼻子有一点翘。  \n\n看到我这么看她，她微微低了一下头，然后说：“我有几个化学配平题，想问一问你。”虽然神态很平静，但声音上有些发颤。  \n\n这显然是借口。虽然我的化学还可以，但是她同桌就是化学课代表，而且她自己也是排名前十，找我求教毫无道理。我脑子里转着这些念头，还没来得及回答，她又说：“本来明天可以问你，但是借来的参考书明天就要还，所以你可不可以晚上来我家？”  \n\n这几句话是一口气不停地说的，说完了她就睁大了眼睛看着我，好像松了一口气似的，倒搞得我紧张起来。  \n\n方俊扬是田径队的，身材纤细而灵活，短头发，性格有点像男孩子，很少婆婆妈妈的，这点我很欣赏。我正在琢磨她的用意，没有马上回答。她着急了，小声说：“没关系的，我家里人不在。”  \n\n“啊？”  \n\n她忽然意识到这句话的误导性，脸全都红了，好不容易才保持镇定：“我是说，大概七点半，可以吗？”  \n\n现在如果拒绝，好像毫无理由，所以我答应了。再说，谁会拒绝呢。虽然她不是特大美女，但我觉得她令我感到舒服想起她的眼睛，又黑又深，我心里一动。\n\n晚饭时我竭力回想与她曾有过的交往，以及她邀请我的动机，结果完全不得要领，还差点把饭吃到鼻子里去了。七点时我换了一条刚洗过的牛仔裤，套上恤衫出了门。她家离我家不远，初秋的晚上，微风习习，一刻钟之后我晃到了她家门口。她家是那种旧式平房，门口还有个小院子，一架葡萄。  \n\n我正在犹豫是不是太早了，纱门“吱”地一响，方俊扬走了出来。她穿着牛仔短裤，无袖恤衫，粉红色的拖鞋，边走边从口袋里掏钱。看见我，她乍一惊，然后不好意思地笑了。  \n\n“你好早啊，我还打算出去买个西瓜招待你呢！” \n\n她的脸又红了，简直好像从放学到现在就没褪过。不过也难怪，因为我紧紧盯着她的腿看。为什么以前没有注意到她的腿这么好看？修长，但是又显得光滑而饱满。我收回目光，说：“不用买了，我刚吃了饭，很饱。”  \n\n她思索了一下：“那也好，你先进来坐吧，等会儿再说。”  \n\n我跨进门里。走过她身边时，闻到香皂的气味，似乎是年轻的身体自然散发出来的。她不经意地往后缩了一下，是怕我吗？  \n\n“前面左手边是我的房间。”她的声音从背后传来。我还是第一次进女孩子的房间，而且又是单独相处，不禁微微吸了一口气。  \n房间里的东西很简单，能坐的地方只有一把椅子和一张床。椅子背上挂了衣服，我想了一想，只好坐在床上。心里稍稍觉得有些冒失，但是……  \n\n方俊扬端着两杯可乐走进来，看到我坐在床上，似乎明白了什么，不好意思地笑笑，放下东西，把散乱的衣物收走。有一条内裤掉在地上，搞得她很尴尬，还好我装作没看见。她弯腰时，我又忍不住去欣赏她的臀部，确实是很漂亮的臀部，我……  \n\n她忽然抬起头，吓了我一跳。  \n\n“怎么了？”我问。  \n\n她不做声，然后慢慢在我身边坐下。沉默了好像有一分钟，然后开口，很小声的：“我找你来，不是要问你问题。”  \n\n她用手指在我俩之间的床单上划来划去，然后抬起头。我又看见她深黑的瞳仁，还有颤抖的嘴唇。从领口看下去，可以看见小巧而饱满的乳房。  \n\n“我……我喜欢你。”她说。  \n\n我可以看出来她浑身都在发抖，不过没关系，因为我也在发抖。她的表白直接而又动人，我没法子不喜欢她。  \n\n她的手指划来划去，慢慢刮到了我的牛仔裤边上：“我也不知道为什么……我天天都盼着见到你，晚上呆在家里，就想去找你。一靠近你，我就感到心里很暖。我不敢告诉你，又憋得很难受，我不知道是怎么了……”  \n她把脚缩到床上，稍稍往后挪了一挪，抬起脸来看我，眼里有东西在闪。我很想抱她，因为她那么可爱，但又怕她生气。我把手摊开，伸到她面前。她怯怯地把右手放在我手上。  \n\n“你不会看不起我吧。看不起也没关系。这样总比难过死好。”她细声说。  \n\n我没说话，轻轻捏住她的手指。  \n\n她满足地长叹了一口气，闭上了眼，喃喃地说：“我真没用，谈恋爱也没见过我这样的，一点谱也没有就要死要活的。”  \n她慢慢地把身子倾向我，脸蹭在我胸前，滑下去，最后就无声无息地把头枕在我大腿上，像个孩子般发出满足的呻吟。  \n我总算理平了混乱的思绪，想要开口说些什么。她温暖的鼻息使我生出阵阵冲动，幸好我的牛仔裤够厚，不然就麻烦了。  \n\n“我……我不会看不起你的。”我说。  \n\n天哪，我怎么会说这个！我就不能说点别的吗？听起来毫无诚意。不过她好像不在乎，只是把头动了一动，好枕得舒服一点。她的右手手指在我手掌心里轻轻摩擦，柔嫩的嘴唇在我的衣服上蹭来蹭去，梦呓一般地小声念叨：“没关系，我管不了那么多了。我都告诉你了，你把我怎么样都没关系。真舒服，被你弄死也甘心。嗯……”  \n\n我很感动，当然也很爽，竟然有女孩子这么为我着迷，为什么以前我不知道我这么有魅力？不知道她到底喜欢我什么？我想问问她，但是又不知从何问起。我松开她的手，轻轻抚摸她的脸。她颤抖着闭紧了眼睛，好像一只小猫，松开的右手伸到我背后，搂住了我的腰。\n\n## （二）  \n\n“嗯……你为什么喜欢我？”我犹豫了半天，还是问了。  \n\n她睁开眼睛，转过头来看着我：“我说了你可不要笑我。”  \n\n“我不笑你。”  \n\n“因为你的气味。”  \n\n“气味？”我很惊讶：“我有什么特别的气味？”  \n\n“不是普通意义上的气味，”她又把头转回去埋在我衣服里：“好像是气味一般的东西。我也悄悄问过要好的女生，她们都感觉不到。”\n\n“好闻的？”  \n\n“嗯，那当然，快迷死我了。像冬天晒过的棉被，又像刚刚削尖的铅笔。”她重新从我怀中抬起头来，指尖划拉着我的胸口：“我只是描述我的感觉，离你越近，感觉越强。你还记得上次运动会我和你商量写稿的事吗？那次我强忍着，不然真会在你面前坐在地上。腿完全软了，气也喘不上来，真想靠到你怀里。还有……”  \n\n“还有什么？”  \n\n她忽然一下脸羞得通红，把头抵在我胸口，说：“现在不能告诉你。”  \n\n她在我胸口定了一会儿神，又说：“今天找你来，本来只是想找个借口接近你，没打算告诉你。可是后来看到你坐在我床上，就想‘完了完了，今后一个礼拜别想在这张床上睡着了，还是告诉你了吧’。就是这样。”  \n\n她喘了一口气，重新坐直，两只脚挂在床沿，轻轻互相搓着。这动作看得我都快流鼻血了。怎么办？事到如今，说什么也不能退，退了她肯定得伤心死。我深吸了一口气，凑过去吻她的嘴唇，她本能地向后一缩，但是我的手揽住了她的头，稍稍一用力，她就屈服了，我们的嘴唇贴在了一起。一瞬间，我感到她的身子完全瘫软了，两个人不由自主地往床上倒下去。  \n\n我用手把身子撑住，她把两臂环住我的脖子。因为紧张，她的嘴唇冰冷，但是柔软，急促的呼吸使她紧贴着我的胸部不停起伏。她轻柔地吸吮我的嘴唇，动作生涩而羞怯，纤细的舌尖偶尔舔到我的牙齿。  \n\n我轻轻把她放平在床上，搂住她的腰，让她的身子紧贴我的。她不自觉地挪动身子配合我，裸露的大腿贴在我的敏感部位。我们继续沉醉在亲吻中，用舌尖互相试探。我偷偷睁开眼看她，她的脸显现出美丽的粉红色，娇嫩的嘴唇散发着欲望的气息。搂着我脖子的手无意识地拨弄我的头发，弄得我很舒服。她的上衣被稍稍拉高了，露出了短短一节腰部。我的手从她背上滑下去，轻轻抚摸那里光滑的皮肤。\n\n她一下子绷紧了身体，紧紧抓住了我的头发，一条腿绕住了我的大腿。我可以感觉到她的脚趾全都蜷紧了。她的热情鼓励了我，我把手慢慢向下滑去，指尖插入了短裤和身体之间，碰到了内裤的边缘。  \n\n她突然惊醒了，噌地一下从我怀中弹开，缩到了床头。抱着膝盖，她把头埋在胸前，一句话也不说。  \n\n我很后悔自己这么急色，毕竟她对我表白才不到半小时，不可能马上如此放得开。现在看起来事情要砸，得想个什么办法补救才好。说实话，她的表白使我对她从好感立刻达到了喜欢的程度。不是有人说过吗，“爱我的女孩最美丽。”这其中也有一份男性的虚荣心在作怪吧。现在如果弄僵了，我还真是很舍不得。  \n\n我看着她，想着要说什么赔罪的话。她先开口了：“你们男生……都是这样的吗？”  \n\n“呃……可能是天性如此吧！对不起。”我小心翼翼地说。  \n\n“刚认识就动手动脚？是天性吗？”她的话语里听不出生气的意思。  \n\n“呃……这……我……我也是第一次和女孩这么亲密，而且你这么漂亮。”我汗都下来了，不知该说什么好。  \n\n她跪坐起来，凑近我，催眠般黑色的眼睛认真地注视我，问：“这是真心话吗？”  \n\n“是的。”我完全被她的眼睛吸住了，毫不犹豫地说。  \n\n“那你……喜欢我吗？”  \n\n“喜欢。”我真诚地说。  \n\n她目不转睛地看着我，然后垂下眼帘，说：“对不起，刚才我很害怕，很紧张。你别生气，好吗？”\n\n“没生气。”  \n\n她小心地咽了一口口水，用轻得几乎听不见的声音说：“其实……很舒服。但是现在太快了，我怕。”  \n\n我想开口说什么，她按住我的嘴，说：“再亲我一次吧。刚才好棒，我真以为自己会昏死过去呢！”\n\n我搂住她的腰。出乎意料地，她竟跨坐到我的大腿上。她坐下去时，我清楚地听见她发出满足的叹息。闭上了眼，她悄然靠近我，玫瑰花蕊般的嘴唇微微噘起，等待着我的吻。  \n\n## （三）  \n\n那后来的整个晚上我们都消磨在爱抚之中。没有激烈的抚摸和火辣的深吻，只是轻柔的拥抱，互相品尝般的接吻。她关了灯，让月光从纱窗透进来。微风、蝉鸣、凤仙花的淡淡香气，还有她嘴唇那天堂般的触觉、柔软的胸部似有似无的压迫感，构成了难以忘记的回忆。\n\n十点时我不得不离开她家，因为我那常年出差的父母偏要在今晚回家。她一声不响地把我送到门口，拉着我的手轻声说：“今天……谢谢你。”  \n\n我想不出该说什么，只好说：“我该走了。明天见。”  \n\n她点点头，却拉着我的指尖不放。  \n\n我轻轻勾勾她手指，她听话地靠近我。站着的时候，她的下巴刚好到我的肩头。门口的草丛里有一只蟋蟀在唱，使夜显得越发安静。\n\n这一夜并没有使我们成为恋人，但我觉得我们之间的信任与默契也许要超过许多多年的情侣。在回家的路上我不断地回味她的羞涩与温暖，她诱人的体香与光滑的肌肤。我在迷糊之中走错了单元门，用钥匙捅了半天别人家的门后尴尬地道歉离开。但总的说来，这是我出生十六年来最快乐的夜晚。  \n\n在后来的一个星期里她没有主动接近我，我想这是女生自然的矜持。也许我该主动找她谈谈，可是又一时得不到机会。有时上课时，我可以感觉到坐在我右侧两个座位以外的她在看我。我会转过去看她，而她也并不躲开。  \n\n在秋日下午催眠般的政治课中，整个教室里似乎只有我和她。有一次在发作业时，她碰到了我的手。我们在作业本下轻轻抚摸对方的指尖，我在她脸上又看到了接吻时她那迷醉的表情－－虽然仅仅是一瞬间。我们的关系有一种秘而不宣的甜蜜，全世界也许只有我们知道，她愿意把她那年轻而青涩的身体交给我来爱抚。  \n\n礼拜五放学后，我坐在教室里思考回家吃饭还是吃食堂。父母只回来待了三天就又匆匆离家工作奔忙去了，抛下了我这个情绪不成熟期的青少年，真不知他们是怎么想的。我猜我是全校唯一会自己做饭做菜的男生，因为校食堂实在像是猪圈，而我对自己要求很高－－吃的方面。我小姑妈对我做的菜很赞赏，她自己是个厨房白痴，父母不在时，她经常会买了菜来看我，那时我就自己做饭。  \n\n这时我听见方俊扬叫我的名字。她走到我课桌边站住，睫毛下垂，没有直接看我的眼睛。她的左手轻轻刮着桌面，夕阳透过窗户照亮了她的手背，细微的汗毛闪着金色的光。  \n\n“晚上……”她字斟句酌似的说：“来我家好吗？”  \n\n我看着她，半是喜欢，半是得意，忽然起了开玩笑的念头，于是假装诚恳地说：“我……今天晚上有事走不开。”  \n\n“那就算了，没关系。”她怎么样也不能掩饰心中的失望，低了头，转身要走，我连忙拉住她的手：“逗你呐。晚上几点？”  \n\n她猛地转过头来，一张脸涨得通红，用力摔了我的手：“你！”拎起书包就往外跑。我后悔得要命，追出去，在教室门口拉住她，认真地说：“我晚上一定  来。”  \n\n她死命掰开我的手，眼里全是泪光，发狠的说：“不要你来，死也不要你来了。”  \n\n田径队的跑起来就是快，我从四楼追到底楼，还是让她跑掉了。  \n\n我回了家，晚饭也没心思吃，坐在屋里发呆。我承认我非常喜欢她，那为什么要做这种蠢事？想了半天，也没有想通，屋里也呆不住，只好下楼去转转。楼前有一块草坪，邻居家的俩小孩在玩闹，我看着四楼的小捣蛋硬是把比他大一岁的女孩弄哭了，不禁大怒，上去把他狠狠教训了一顿。完了我感到无比懊丧，想着不如出去买包烟。  \n\n在弄堂口，我看到一个熟悉的人影一晃，心里一动，直追上去。过了一个转角，我停住脚步。  \n\n方俊扬站在那里，睁大了眼睛看着我，背紧紧贴着墙。她穿着雪白的细肩带连身短裙，那双我见过的粉红色拖鞋。她脸上泪还没干，但作出很坚强的表情。  \n\n我贴近她，她把脸别过去不看我。我轻声问：“你怎么来了？”  \n\n“我以为你会来找我。”  \n\n“我以为你生我的气了。”我说。  \n\n“是的，”她转过头来看着我：“是很生气……可是又很想你，想得受不了了。”大颗大颗的泪珠从她眼里拥出来。我吻住她，她一边哭一边用力亲吻我，搂得我紧紧的，手指陷入我的背脊。  \n\n有自行车从弄堂那头过来，我们松开了对方。我拉着她靠到墙边，对她说：“去我家坐坐吧。”  \n\n“不行呢，我得回家了。食堂还蒸着我的饭呢。”原来她也是父母出差，在吃父母单位的食堂。  \n\n我笑着说：“我也没吃。我给你做，我们一块儿吃吧。”  \n\n“你还会做饭？”她不太相信。  \n\n“特级厨师，吃一次包你忘不了。”  \n\n“嗯，食物中毒吧。”她带着泪笑着说。  \n\n她还是跟我回了家，还帮我在厨房打下手。我们在厨房的小餐桌上并排吃着饭，天气有点热，她的短发被电扇吹起，她一边吃一边拨拉。我们的腿不时在桌下相触，我可以看见她的脸一点一点变绯红。  \n\n“这个蘑菇炒青椒不错，你哪儿学的？”  \n\n“菜谱。”  \n\n“是吗？怎么以前没见过这种做法。”  \n\n“是西菜做法。”  \n\n其实我是胡掰的。小姑妈不会做菜，也不会买菜，买来的菜都不好搭配，我也只好乱配了。  \n\n俊扬很喜欢吃蘑菇，但她用筷子很笨，圆圆的蘑菇夹掉了好几次，我忍不住笑了。她也有些不好意思，嗔道：“应该切片的嘛。”  \n\n“你自己不行也不要怪蘑菇嘛，我挟给你吧。”  \n\n结果我也挟不起来，因为那个蘑菇特别圆。我干脆用手拿起来递给她：“吃吗？”她害羞地看了我一眼，把嘴凑上来。好像电影慢动作一样，她轻轻咬住蘑菇，把它含到嘴里。  \n\n我松开手，却发现她含住了我的手指。“嗒”的一声，她的筷子掉在地上，她不由自主地用手撑住我的膝盖。我把手一点一点往回缩，她就一点一点地往前凑，渐渐把我的手指全部含进嘴里。  \n\n我一边用小指挠着她的下巴，一边仔细地看她的表情。她闭着眼，仰起了脖子，享受着我对她下巴的爱抚，双手按紧了我的大腿。我听见她从喉咙里发出轻微的呻吟，似乎在品尝鲜嫩的水果。  \n\n我慢慢抽出手指，和她接吻。我们已经接吻过很多次，但每次都那么令人目炫神迷。我沿着凳子把她拉过来，让她骑到我腿上，被我搂着腰。因为她的短裙和我的短裤，我们有大片的肌肤相接触。我可以感到我的某一部份在变坚硬，而她的脸也一直红到了脖子，以至胸口。  \n\n但我们当然没有分开的意思，这样的姿势我俩都非常享受。她甩掉了拖鞋，用脚轻轻摩擦我的小腿，圆润的脚趾拨弄我的脚踝，带来一阵阵奇妙的感觉。我还感到她的臀部在我的大腿上缓缓左右移动，使我偶然能隔着内裤感觉到她两腿中间温软的部分。我不由自主地幻想，不知道那部分会给我怎样温柔的触觉呢？  \n\n## （四）  \n\n我们终于不得不因为炎热而暂时停止亲热，初秋有时确实比夏天还热。她仍坐在我身上，端着碗，挟菜给我吃。有好几次我故意咬住筷子不放，她就会意地亲吻我，让我乖乖听话。我的下身仍旧很坚硬，但她假装没感觉到，虽然我发现她时不时挪动身子，不经意地稍稍蹭我一下。如果我现在要求做爱，很有可能她会顺从我。但……我觉得现在这样，似乎更让我开心、自在。  \n\n她虽然没有多说话，但我看得出来，她也非常开心，全心全意地在享受现在的每一刻。从她的脸上，隐隐散发出喜悦的光。我越来越觉得，她是我见过的最美丽的女孩子。  \n\n吃完饭，我们都出了很多汗，我建议她去洗个澡。她低头不语，过了一会儿  说：“我没衣服换……”  \n\n我忽然意识到我已经不由自主地假设她晚上会呆在我家了，不禁吓了一跳，暗暗观察她的脸色。她也抬起眼看我，忽然也想到了这一点，脸一下变得绯红，立刻冲到门边：“我……我该回去了。”  \n\n我拉住她的手：“留在我这里吧，我很喜欢。”  \n\n她不说话，轻轻靠在我胸前。  \n\n在她洗澡时我扭开收音机，寻找一个放外国歌曲的台。在轻微的短波静噪中传来某个七○年代乐队的歌声。浴室的水声清晰可闻，在歌声中我想像着她裸露的姣好躯体，如梦似幻。  \n\n后面几个小时我们干了什么我记不清了，我只知道她从浴室出来时我两眼发花，几乎晕倒。我只给了她汗衫，却没给短裤，她只好下身只穿一条内裤，红着脸从浴室出来。我的汗衫又长又大，穿在她身上使人无法不想入非非。  \n\n她非常恼火，认定是我故意不给她短裤，虎着脸不和我说话。为了不让我色迷迷地看她的腿，她坐到我床上，用毛巾被盖着下半身。后来我给她看我小时候的照片，才重新逗得她开心。我们好像还打了牌，讲了笑话，说了很多自己过去的事……但是我无时无刻，没有不在想盖在毛巾被下诱人的身躯。  \n\n她的脸上渐渐有了倦意，“想睡了？”我问。  \n\n“嗯。”她揉揉眼睛。  \n\n“那我去我爸妈房间睡了。”  \n\n“嗯。”她答应着，却没有告别的意思。  \n\n“有什么需要可以叫醒我。”我随口说。  \n\n她抓住了我话里的漏洞，促狭地笑了：“放心，没什么需要。”  \n\n这个小妖精！我抓住她的手腕，恶狠狠地凑近她：“可是我可能有。”  \n\n她睁圆了眼认真地看着我：“我是很相信你的，你要什么，就来拿去吧。”然后她心满意足地闭上眼，缩进了毛巾被里。  \n毛主席说过：“世上怕就怕认真二字”。我深有同感，乖乖地退出了房间。  \n\n晚上我做了一个梦，我站在空中俯瞰一片巨大的草原，她坐在草原中间。草很高，很密，处处开着不知名的花。阳光明媚，我慢慢下降，风卷着粉色的花瓣在她身边飞舞。有时候，一些美丽的东西会让你心疼得抽搐。  \n\n我从梦中惊醒，炎热的空气凝固在我的周围。我翻过身，背对窗外的月光，想着一步之遥的方俊扬，心里一半是被纵容的欲望，一半是甜蜜的爱意。与其去获得终极的快乐，我更喜欢现在这种亲密的信赖。这种信赖，大半是由于她的主动。我不禁想到，如果是我采取这种主动，很有可能被当成流氓打个半死。男女真是不平等，我忿忿不平了一会儿，准备继续睡。  \n\n房门被缓缓推开，方俊扬纤细的身影出现在门口，静止的空气中她的身躯似乎在轻轻摇摆。她走到床边，轻手轻脚爬上床，跪在我身边注视着我。我想她是在看我睡熟没有。她一动不动地看了我十五分钟，弄得我肌肉都快僵硬了。月光照在她专著的脸庞上，她的睫毛在颤动。  \n\n她确定我睡得很沉，试探性地捉住我的手，我继续装睡。她捧起我的手，轻轻把自己的脸颊贴在我的掌心。我感到一片光滑而温热的肌肤，指尖可以触到耳后飞快的脉搏，在燥热的寂静中我听见她细细的喘息。  \n\n我微微睁开眼，看见她的另一只手在背后摸索着什么，接着猛地一扯，一片白色轻轻从她衣内滑落，搭在床边。她撩起衣服，把我的手拉进里面。不知是光线还是因为紧张，她的嘴唇苍白，毫无血色。  \n\n我闭上了眼，不忍心看到她那令人心疼、怜爱的表情。这也许是她死也要保守的秘密，一个年轻女孩心中不能遏制的欲望。她轻轻按下我的手掌，我的掌心感受到她急促起伏的肋骨，指尖触到了她乳房的下缘，她的心跳像电流一般穿过我的身体。  \n\n她用两手把我的手按在左边乳房上，让手掌完全包着它，空气中充满了她身体的馨香，还有压低的喘息。娇嫩的乳头贴着我的掌心，剧烈的心跳似乎要穿破脆弱的胸腔，我似乎意识到，我手里掌握的，是她的整个生命。  \n\n好像遥远的地方白鸟在唱歌似的，传来她的自言自语：“真舒服……你知道吗，一直都很想呢，想你摸我这里……我太喜欢你了，心都疼了……”  \n\n我忍不住偷看她。她的脸上泛着光，衣襟下露出一截雪白的腰肢。她脖子上的汗顺着颈根往下流，滴到了我的指尖，我的手不由自主的轻轻一抽。  \n\n受惊的小白兔从我手中逃走了，她向后一窜，就到了门边。门无声地掩上，方俊扬消失了，房间里重新陷入一片黑暗，空气缓缓凝结。  \n\n我屏息等待。在我面前的床边搭着她刚才脱下的胸罩，白色的，有细微的花边，似乎她整个灵魂都还在那上面，气味芬芳。一个小小的白色蝴蝶落在一边，那是一侧的搭袢，她刚才急着扯下来时脱落的。  \n\n我轻轻触摸那白色的肩带，细微的电流再次穿过我的身体。我就这样一动不动躺了很久，直到窗外的天色渐渐变白。\n\n将近日出时分，房门轻轻一动，我急忙翻身侧向另一面。背后传来赤足在地板上迅速蹑足而过的声音，“嗤”地一下轻响，我知道她把胸罩取走了。  \n\n我静静听了很久，屋里再也没有什么声音。我摊开手掌，一只小小的蝴蝶停在我手心。  \n\n“你像只蝴蝶在天上飞……”我轻声唱道。  \n\n## （五） \n\n后来我睡得很沉。早上十一点左右，我被太阳晒醒了。我的房间已经空了，方俊扬大概在清晨离开了我家，并不是什么令人惊讶的事。我的毛巾被叠得好好的，席子上残留着她的气味，书桌上有一张她留下的字条： \n\n\u003e\n\u003e “我先回家了。Ｔ恤我很喜欢，带走了。 \n\u003e\n\u003e 方俊扬” \n\u003e\n\n我坐在床上，用手摩擦着席子，把那张字条读了很多遍。 \n\n秋天真正地来了，天气凉了，功课变得紧张。学校安排了教室，组织自愿的同学参加晚自修。我和方俊扬因为是“无人管教的小孩”，也被班主任劝说“自愿”参加了。我是无所谓的，反正晚上在家里也没事，而且晚自修的管理也很松弛。放课后我和她会结伴回家。但是，很可惜地，从那次以后她就再也没有提起我们单独相处的想法，虽然在学校里，她还是会一般的亲切。 \n\n礼拜四，晚自修课间休息。教语文课的王老太太值班。她是个宽容的人，似乎从未发现课间休息后有许多同学不知去向。我没有那么嚣张，但是在课上我从没有正经自修过，只是把高阳的“红顶商人”包了参考书皮，读得兴致勃勃。提高文学修养，无可厚非。 \n\n我和方俊扬在礼堂边上遛哒。她穿了一件浅灰色的高领毛衣，很贴身。我穿着……我穿什么想来你也没有兴趣。她给我看一个钥匙圈上的小东西，那是个哨子，但不是吹的。我鼓捣了半天，她笑着告诉我：“你把它扔出去，空气穿过，就会响。” \n\n我把它用力向上一抛，果然“呜”地一声哨响。 \n\n我抛接了好几次，结果有一次不小心，抛歪了。钥匙串落下时，穿过了礼堂的窗户，掉进了礼堂里头。 \n\n礼堂的门已经锁了，我在窗外看了半天，决定沿着水管从气窗爬进去。她很担心：“算了吧，别爬了，明天来拿。” \n“那你怎么回家？” \n\n“嗯……”她也没了主意。 \n\n我禁不住想说“不如晚上睡我家”，又怕被她骂。罢了，还是爬水管吧！ \n\n虽然我体育成绩平平，但小时候没少干翻墙爬树的事。气窗上都是灰，礼堂里一片漆黑。我从窗台上跳落地，在地上摸索着寻找。 \n\n窗棂上“喀嗒”一响，我看见她轻盈地钻过半个身子，骑坐在窗台上。 \n\n“找到了吗？”她问。 \n\n“还没有。好黑。” \n\n“那我下来一块儿找吧。”她朝下看看：“好高啊，不敢跳。” \n\n“我接着你。”我说。 \n\n“小心伤着你。” \n\n我从边上拉来一块体育课用的垫子，站在上面。脚下“喀”地一声轻响，我发现我踩到了那串钥匙。 \n\n“你跳吧，我这儿有垫子。”我说，一边把钥匙悄悄揣到口袋里。 \n\n她悄然无声地跃下，落入我的怀中，我们双双倒在垫子上，她轻盈的身躯被我抱在怀里，轻轻地喘着气。 \n\n“你没事吧？”她问。 \n\n“没事。” \n\n我们不再说话，静静地搂抱在一起，我的额头上感到她呼出的气息。 \n\n课间休息结束的铃忽然响了，她坐起来：“我们再翻窗出去？” \n\n“嗯，好。”我怅然若失地说。 \n\n她站起来，忽然一个趔且，我急忙扶住她。 \n\n“我的右脚好像扭了。”她小声说。 \n\n在黑暗中我为她除去鞋袜，按摩她的脚踝。她的脚踝纤纤一握，脚跟光滑圆润，握在手中使我意乱情迷。寂静的礼堂里听见她细细的喘息，虽然我看不见，但我想她的脸色一定如初吻时般绯红。 \n\n“你不回去自修没关系吗？”她问。 \n\n“没事，王老太太不会管的。再说，反正我也是看闲书。”我说。 \n\n她轻轻笑了：“看什么书呐？” \n\n“《红顶商人》，高阳的。” \n\n“噢。我在看《树上的男爵》。”她说。想不到我们是同道中人。 \n\n“没听过。讲什么的？” \n\n她不说话，过了一会儿说：“一个很像你的人。” \n\n“那我就是‘爬窗的男爵’。” \n\n我们俩都笑了。 \n\n她坐起来，按住我的手，把脚缩回去。 \n\n“怎么，好了？”我问。 \n\n“我骗你的。”她小声承认：“我没扭到脚，我想和你留在这里。” \n\n如果说有人喜欢被欺骗，那就是现在的我。我俯下身子，威胁似地贴近她：“你这个骗人的小妖精，你知道骗我要受到什么惩罚吗？” \n\n她笑兮兮地把手伸进我的衣服口袋：“那你骗人又有什么惩罚？”口袋里的钥匙圈被她拨弄得轻轻作响。  \n\n## （六） \n\n礼堂的天花板很高，两边是直通房顶的长窗，挂着直悬到地的窗帘，外面的光线几乎透不进来。在深夜的寂静中，礼堂的回音显得很清晰。我和方俊扬在垫子上拥抱，好像冬天相互依偎的小狗。她的吻湿润而婉转，充满渴望的身躯欲拒还迎。我把手从她毛衣下伸进去，抚摸她光滑的脊背。冰冷的手指使得她不住颤抖，她咬住我的舌尖，克制住自己的呻吟。 \n\n“你的手好冰。”她说。 \n\n“不舒服？” \n\n“没有。我喜欢你摸我。”她紧贴着我的脸，轻轻呢喃。 \n\n“真的？” \n\n“真的。” \n\n我把两只手全部伸到她衣服里，她的背脊好像一件精美的乐器被我温柔地抚弄。她扣住我的肩膀，似乎怕被身体内的狂飙给吹走。我的手指插入胸罩背带下轻轻拉扯，她明显地紧张起来。 \n\n“求你……不要。” \n\n“怕我？” \n\n“不是。”她摇摇头。 \n\n“怕你自己？” \n\n“嗯。”她羞怯地把头埋在我怀里：“我觉得我自己已经管不住我自己了，再亲热一点，我的身子就会被吹到很远很远的地方去。” \n\n“吹到哪里我都陪着你。” \n\n她抬起头看着我。我看见她的瞳子中有喜悦的光：“你是说真的？” \n\n“嗯。” \n\n“不放开我？” \n\n“死也不放。” \n\n她看了我好久，然后把双手放到我面前：“捏住我的袖子好吗？” \n\n我迷惑地照她说的做了。 \n\n她深吸了一口气，身子朝后轻快地一缩，一连串小小的静电火花伴着轻微的嗤拉声一闪而过。 \n\n好像变魔术一般，她从我面前消失了。我手上只剩下留着她余温的衣服。我迷惑不解地盯着那团衣物，回想着她奇妙的脱衣动作。 \n\n周围的黑暗慢慢散去，方俊扬双手抱着肩膀，跪坐在我面前。她白皙的肌肤隐隐泛着光。 \n\n“来抱我。”她颤抖着说。 \n\n在秋夜寒冷的空气中，方俊扬裸露着身子在我怀中瑟瑟发抖。我用尽力全力拥抱着她，亲吻她双乳间细嫩的肌肤。她的身子散发着少女的幽香，似乎可以听见生命的火花在纷纷迸裂。 \n\n我隔着胸罩爱抚她的乳房，在乳房露出的上缘轻轻啮咬。她酥软在我的臂弯中，如醉如痴。我感觉到她的手钻到我的衣襟下四处摸索，小指轻挠我的小腹。-\n\n“冷吗？”我问。 \n\n“不冷。” \n\n她撩起我的衣服，钻进我怀里。先是她的鼻尖蹭着我的胸口，接着两片温软的嘴唇贴了上来，她就这样亲吻着我的胸口，一动不动。我脱下外衣，披在她赤裸的背上。她裸露的肩头光洁动人，我禁不住亲了又亲。 \n\n在那个晚上我们好像贪吃的孩子般互相品尝对方的身体，在各自的身上留下了无数对方亲吻的记号。每当我在夜深无人时想起她冰冷的小手在我衣衫下的摸 索，我就心潮澎湃，不能自已。  \n\n\n## （七） \n所谓乐极生悲，第二天我感冒了。连续四天，我请假在家。虽然我一直都照顾自己惯了，但是在那几天里，我非常想念她。小姑妈来看过我一次，我勉为其难地吃了她做的饭，苦口婆心地把她劝走了。 \n\n第五天上午，我头昏脑胀地爬起床，想看看冰箱里有什么吃的。冰箱里空空如也。我拉开放果蔬的那一格，一个小小的蘑菇孤零零地躺在里面。我觉得自己的心也好比这冰箱一般空空的。我哭了。\n\n去学校吧。 \n\n“方俊扬感冒引发病毒性心肌炎，正在住院。” \n\n这就是我到学校后得到的第一个消息。 \n\n流行性感冒正肆虐全校，初二年级已经停课，这是第二个消息。虽然高中部并未停课，但在打听到方俊扬所住医院后我的病情“有了反复”，顺理成章地再次请病假回家。 \n\n市一医院门口的花店生意火爆，我站在门口犹豫不决。买花探病似乎太着痕迹，与我一贯随意的形象不符，再说，遇到熟人怎么办？遇到她亲戚又怎么办？别人会怎么看我这个高中生？算了，买点水果得了。 \n\n三分钟后我从花店出来，脸红耳热，手上拿着一束带满天星的康乃馨，老板的话犹在耳边：“看你妈妈？不是吧。现在的年轻人呐，呵呵呵……” \n\n妈的，老头子，笑什么笑，嫉妒我吗？ \n\n我怀揣着花，以一种偷偷摸摸的方式走进方俊扬的病房。六个人的病房热闹非凡，病人们的亲友正在大开茶话会，方俊扬孤零零地躺在靠窗的角落病床，呆呆地看着窗外。 \n\n我悄悄绕过床，走到她面前坐下。 \n\n“你还好吗？”我把花摆在她床头柜上。 \n\n方俊扬睁圆了眼睛看着我，朝我伸出右手。我拉住她的手，她一把猛攥住我的手，照着就狠狠一口咬下去。我痛得呲牙咧嘴，又不敢喊出声，只好小声劝：\n\n“别咬了……小心不消化。” \n\n她“噗嗤”笑了，松了口。我拼命甩着手，丝丝地吸着凉气。 \n\n“让你也尝尝我难受的滋味。”她眼里带着泪花说。 \n\n“我比你好不到哪儿去，感冒了，窝在家里四天了。”我说：“全校都是流感，初二都停课了。” \n\n“是吗？我还以为就是我一个受了凉引起的呢！”她说。她好像想到什么，脸红了一下子，然后说：“对不起，刚才痛吗？” \n\n“有点痛。” \n\n她把我的手拉进被窝，贴在自己的胸口：“我不知道你也病了，怨你不早来看我。这样手好受点吗？” \n\n我笑兮兮地说：“还有一点痛。” \n\n她看着我的脸，在被窝里撩起衣服，让我的手贴着她火热的肌肤：“那这样呢？” \n\n我有点歉意，说：“没事了，让我把手抽出来吧。我手凉，小心冻着你。”-\n\n她摇摇头：“不要。” \n\n我轻声问：“想我了？” \n\n“嗯。”她再也忍不住，无声地哭了，泪珠大颗大颗地流到枕头上：“很想你。” \n\n“我也很想你。”我说。我没告诉她我哭的事，也许我应该说。 \n\n她擦干眼泪，不好意思地笑了：“其实我没事，医生说我已经可以回家休息了，但我姨妈坚持要我多住几天，她说在家也没人照顾我。” \n\n“那你爸妈呢？” \n\n“还在上海，回不来。是姨妈把我送医院的。” \n\n她叹了一口气说：“她也很忙，不能常来。看着别床的都有那么多人来看，我……” \n\n我轻轻抚摸她被子下那纤细的身子，“出院回家吧，我来照顾你。”我说。\n\n她猛转过头，眼里是不相信的神色：“真的？” \n\n我长叹一声：“是啊。谁叫我是罪魁祸首呢。不过说好了，买菜的钱可要你出。” \n\n窗外阴霾尽散，阳光明媚。方俊扬笑靥如花。我很开心。  \n\n## （八） \n\n“外婆外婆，为什么你的耳朵那么长呀？” \n\n“吃驴肉吃的。” \n\n“外婆外婆，为什么你的眼睛那么绿呀？” \n\n“熬夜念参考书念的。” \n\n“外婆外婆，为什么你的指甲这么尖呀？” \n\n“方便掏耳朵。” \n\n“好恶心……”方俊扬笑倒在我怀里。 \n\n我们俩坐在她家客厅的沙发上，百无聊赖正在扮演大灰狼和小红帽。我别的本事不大有，信口胡掰的本事倒是不错。方俊扬其实已经全好了，但我们都不想去上课，干脆再在家混一个下午。 \n\n在茶几底下，我们发现一本不知何年何月的《格林童话》，正好拿来打发时间。 \n\n“你说，会不会有人发现我们俩同时请假不是巧合？” \n\n“不是说大家都在流感吗……而且只是一个星期而已。”我说。 \n\n“嗯……”她思索了一下：“不管了，让他们说去吧。”她抬起头，一脸笑意，继续扮演她的角色：“外婆外婆，为什么你的牙齿那么尖呀？” \n\n我轻轻把她按倒在沙发上，奸笑道：“那是为了要吃掉你。” \n\n“你怎么可以欺负我这个病人……” \n\n“病人？哼！什么病人，胃口好得像小马一样，今天中午的牛肉面，连我的一份也抢去吃了一半。” \n\n“你做得好吃嘛。” \n\n“休得花言巧语！”我牢牢捉住她的手腕，凑近她。 \n\n“你要干吗……”她软弱无力地说，勉强用膝盖顶住我的进攻。我放开她一只手，改而搂住她的腰。她放弃了抵抗。 \n\n“说你喜欢我。”她搂着我的脖子，在我耳边要求道。 \n\n“我喜欢你。” \n\n“再说一遍。我想听。” \n\n“我喜欢你。” \n\n“我也喜欢你。”她捧着我的脸，看着我的眼睛，一个字儿一个字儿地说。然后她几乎是战战兢兢地凑上嘴唇。这个吻好像北极冰盖下的海洋一般深，她似乎要把我的灵魂吸出来。我闭上眼，脑中出现无数纷乱的念头。沙发下的地板在摇摆，整个房间在绕我们急速旋转。 \n\n电话铃骤然响起，我们都吓了一跳。她不好意思地笑笑，推我起来，整理了一下自己的衣服。有一样小小的白色东西从我身上落下，她弯腰把它捡起来。那是一个白色的蝴蝶搭袢，不知何时我把它放在衬衫口袋里的。她稍一迟疑，把它放到一边，然后接起电话。 \n\n电话明显是她父母打来的长途，但我听不出他们交谈些什么。方俊扬只是时不时地“嗯”一下，有时也看看我。电话足足打了有半小时之久，其间我把那本童话百无聊赖地翻了好几遍。 终于她挂了电话，一言不发地走到我身边坐下。 \n\n“怎么了？”我问。 \n\n“没事。”她心不在焉地说：“晚饭吃什么？” \n\n“现在才两点半那。” \n\n“哦。那样的话……”她把头埋到我肩窝里，轻吻我的耳朵：“到我房间里去好不好？” \n\n我们钻在被窝里，一边亲吻一边互相笨手笨脚地脱衣服。她闭着眼睛，双手环着我的脖子，让我轻轻解开她的胸罩。我搂紧她，让她的乳房紧贴我的胸口，然后将手探进她小腹下面，她顺从地蜷起腿，让我脱去她的内裤。她的下体火热而湿润，我爱抚她时，她战栗着紧抱我的身体，在我脖子上留下了深深的咬痕。-\n\n这是个安静的午后，桌上的老式三五牌台钟发出“喀嚓、喀嚓”的轻响。好像做梦般，时间的尺度消失了。 \n\n“你父母要回来了吗？”我问道。 \n\n“嗯，晚上七点多到。”她闭着眼说。她像只小猫般蜷在我身边，用手指在我身上无意识地拨弄。 \n\n“那我也该走了。被他们看见我就惨了。” \n\n“是啊。”她格格地笑了：“杀了你也说不定。” \n\n可是在送我出家门时，忽然间好像崩断了弦似的，她一下子又哭了：“我舍不得你走。” \n\n“别难过，啊？明天学校里又能见面。” \n\n“嗯。我知道了……” \n\n“晚自修再去礼堂，嗯？” \n\n“去你的吧。”她破涕为笑。 \n\n我看把她逗开心了，才放心回家。天色已暗，街上的树都掉光了叶子，秋天快要结束了。  \n\n晚上外面开始挂大风，没有关好的窗户砰砰直响。我看电视看到十一点多， \n\n然后准备上床睡觉。 电话铃骤然响起， 我拿起听筒，里面传来方俊扬细细的声音： \n\n“喂。” 　　 \n\n“是我。” 　　 \n\n“没睡吗？” 　　 \n\n“正要睡哪。”我回答。 　　 \n\n“噢，那……算了吧。”她说。 　　 \n\n“嗯。明天见。”我哈欠连天地道别。 　　 \n\n放下电话的一霎那，我忽然想到，她也许是想问问我有关那个白色小蝴蝶的事。但是……来不及了，我没有她的电话号码。 　　 \n\n我整晚都没睡好，迷迷糊糊总在怀疑电话随时会响，但她再也没有打来。　 \n\n＝＝＝＝＝＝＝＝＝＝＝＝ \n\n方俊扬给我的信  :\n\n\u003e\n\u003e 江鱼：  \n\u003e\n\u003e 不知道该怎么说……  \n\u003e\n\u003e 我的父母决定让我转学去上海了。他们担心我在这里没有人照顾。其实我自己知道，我在这里很好，尤其是有你照顾我的那两天。但我还是决定离开这里。 并不是外来的压力，而是我自己的决定。 我想，我如果继续留在你身边，我的生命迟早会完全变成你的。这件事远远超过了普通的喜欢，每天夜里我自己想起这件事，都感觉我在被你一点一点吞噬掉。  \n\u003e\n\u003e 我不能怪你。也许是因为一开始就是我先向你表白的。好像一边重一点的天平，一旦倾斜，所有的重量都会滑向一边，再也扳不回来。我陷入得越深，就越喜欢你，越喜欢你，就陷入的越深。我为你哪怕一点点的表示而欣喜若狂，不想去深究那表示后面的原因。 　 \n\u003e\n\u003e 你是因为我喜欢你而喜欢我的吗？ 即使你自己问自己， 恐怕也不能得到答案。  \n\u003e\n\u003e 这真是一件不公平的事，我很生自己的气。我像吸毒成瘾的人，如果没有强大的外力，就不能脱身。如果我多花时间思考，恐怕永远也离不开你。所以，在我捡到那小小白蝴蝶的一瞬间，我做了决定。  \n\u003e\n\u003e 你喜欢和我做爱吗？我非常喜欢。那是戒毒前的狂欢，是我一辈子的回忆。 \n\u003e\n\u003e 我在无数次的梦中感到你进入我的身体，被你贯穿，完全地占据。 在离开你之前，我要实现这个梦。  \n\u003e\n\u003e 我非常爱你。你爱我吗？ 　　　 \n\u003e\n\u003e 方俊扬  \n\u003e\n\u003e 九二年十二月十七日 \n\u003e\n\n寄信人地址不详。  \n\n＝＝＝＝＝＝＝＝＝＝＝＝ 　　 \n\n我给方俊扬的信:\n\n\u003e\n\u003e 方俊扬：  \n\u003e\n\u003e 你好吗？  \n\u003e\n\u003e 已经很久了吧。你现在在哪里？在做什么事？  \n\u003e\n\u003e 这封回信花了我九年时间。在九年里我经常想要回答你的问题。你的离开使我很伤心，但也许你是对的。在那时……我是说，在那时，我并不爱你。我喜欢你的所做所为，几乎是自动般的回应你的爱。 我想，这是人之常情吧。即使现在，我也不会责备自己。 但是，谁又能说清楚，爱是如何产生的呢？不管是因为什么样的原因产生的喜欢，都算是喜欢吧。不管是因为什么原因产生的爱，都是爱吧。有人曾在雨中放风筝，就是为了证明这一点。  \n\u003e\n\u003e 我已经二十五岁了，抱有这种信仰，究竟算是幼稚还是成熟呢……  \n\u003e\n\u003e 不管怎样，我并不在乎。偶然，我会在梦中见到你。我站在空中俯瞰一片巨大的草原，你坐在草原中间。草很高，很密，处处开着不知名的花。阳光明媚，我慢慢下降，风卷着粉色的花瓣在身边飞舞。 我想，如果我再见到你，我会爱上你。至于天平究竟偏向哪一边，我已经没有时间去管了。 \n\u003e\n\u003e 江鱼 \n\u003e\n\u003e 二○○一年二月十九日  \n\u003e\n\n收信人地址不详。 \n\n＝＝＝＝＝＝＝＝＝＝＝＝   \n\n我坐在三万英尺高空的客机上，客舱的扩音器传来机长生硬的英语介绍。我们正在南太平洋某处上空，离目的地还有多少的航程，估计何时到达……等等等等。我戴上耳机，转到音乐频道，耳机中传来《花样年华》的主题曲。  \n\n“电影的主题音乐，伴随着男女主角的邂逅反覆出现。诱人的华尔兹，弦乐的整体处理教人着迷，象征着男女舞蹈员互相试探、浪漫迷人的舞步。舞蹈的节奏，也是两性激情与因循守旧的交缠与冲突的化身。”  \n\n我记起那是唱片上的介绍。　 \n\n在洗手间里洗脸时，飞机遇上了气流，我用力撑住墙壁。镜子中的我，苍白而憔悴，胡子拉碴。我仔细地看自己的脸，在镜子背后，我似乎看到一双深深的黑眼睛。 　　 \n\n方俊扬，你现在在哪里？\n"},{"slug":"RP-why-choose-python-0-overview","filename":"2019-02-07-RP-why-choose-python-0-overview.md","date":"2019-02-07","title":".py | 转载：为什么俺推荐 Python[0]·概述","layout":"post","author":"编程随想","keywords":["html","py"],"excerpt":"从几个不同的角度来鼓吹一下 Python。","content":"\n当初博客开张的时候，原计划在编程语言方面聊聊 C++、Java 和 Python。谁曾想半年多过去了，尚未写过 Python 的帖子。实在是说不过去啊！所以今天赶紧写一篇来凑数。\n\n其实俺接触 Python 的时间，也不算太早（大概是2003年那会儿）。当时看到 Eric Raymond 关于几大编程语言的评价（原文在“这里”，翻译在“这里”），之后又看了他写的《Why Python?》。感觉这位大牛蛮器重 Python 滴，于是俺也就跟风学习了一番。从此一发不可收拾——现在 Python 已然成为俺最常使用的脚本语言了。\n\n接下来，俺就从几个不同的角度来鼓吹一下 Python。假如你从来没有听说过或者从来没用过此语言，听了俺的忽悠之后，或许会有所心动 :-) 假如你觉得俺只不过是 Python 阵营的枪手，发发广告帖，那你就不用再浪费宝贵的时间去看后续的帖子了。\n\n按照俺先前的习惯，会把接下来的内容拆成几个帖子来写......\n\n为了方便阅读，把本系列帖子的目录整理如下（需翻墙）：\n\n1. [作为脚本语言的 Python](RP-why-choose-python-1-script)\n2. [作为动态语言的 Python](RP-why-choose-python-2-dynamic)\n3. [作为面向对象语言的 Python](RP-why-choose-python-3-oop)\n4. [作为函数式编程语言的 Python](RP-why-choose-python-4-fp)\n5. [作为瑞士军刀的 Python](RP-why-choose-python-5-tool)\n6. （未完待续）\n\n\n\u003e **版权声明**\n\u003e\n\u003e 本博客（编程随想的博客）所有的原创文章，作者皆保留版权。转载必须包含本声明，保持本文完整，并以超链接形式注明作者编程随想和本文原始地址：\u003cbr\u003e\n\u003e\n\u003e \u003ca href=\"https://program-think.blogspot.com/2009/08/why-choose-python-0-overview.html\"\u003ehttps://program-think.blogspot.com/2009/08/why-choose-python-0-overview.html\u003c/a\u003e"},{"slug":"RP-why-choose-python-1-script","filename":"2019-02-07-RP-why-choose-python-1-script.md","date":"2019-02-07","title":".py | 转载：为什么俺推荐 Python[1]·作为脚本语言的 Python","layout":"post","author":"编程随想","keywords":["html","py"],"excerpt":"俺窃以为，Python 的所有特征中，作为脚本语言是它的首要特征。因此，在本系列帖子中，俺首先来忽悠一下 Python 作为脚本语言，有些啥好处","content":"\n### 文章目录\n\n* [脚本语言好在哪？](#pros)\n* [脚本语言有啥缺点？](#cons)\n* [Python 和其它脚本语言的比较](#compare)\n* [总结](#summary)\n\n俺窃以为，Python 的所有特征中，作为脚本语言（“脚本语言”的定义参见“[这里](https://en.wikipedia.org/wiki/Scripting_language)”）是它的首要特征。因此，在本系列帖子中，俺首先来忽悠一下 Python 作为脚本语言，有些啥好处？\n\n# 脚本语言好在哪？\u003ca name=\"pros\"\u003e\u003c/a\u003e\n\n要聊 Python 作为脚本语言的好处，首先得说说脚本语言自身有哪些优点。一般来说，当我们提及“脚本语言”，都是强调其解释执行的特性（虽然有些脚本语言也支持编译）。所以，后面陈述的这些优点，大都是拿编译型语言来进行对比。\n\n## 更高层次的抽象和封装\n\n大部分脚本语言都提供了（内置了）比较高层次的抽象和封装。像很多脚本语言都内置了字符串处理能力以及正则表达式（典型代表就是 Perl）。还有很多脚本语言都内置了高级的数据结构。比如 Python 在语言层面支持了链表（Python 的术语叫 List）、映射（Python 的术语叫 Dict）、元组（Python 的术语叫 Tuple）。\n\n有了这些高层次的封装，你写起代码来，就特别滴简单、特别滴爽。比如，在 Python 中要把一个 List 翻倍，只需这么写：\n\n```python\n\n[1,2,3] * 2\n\n```\n\n就得到\n\n```python\n\n[1,2,3,1,2,3]\n\n```\n\n## 更少的代码量\n\n得益于高层次的封装，在完成相同功能的前提下，脚本语言的代码量会比编译型语言少很多。\n\n比如说，要打印出某个文本文件的内容，如果用 Java 实现，正常的写法大概要七、八行代码（把所有代码硬挤到一行的，不予讨论）；用 Python 也就三、五行。\n\n再比如说，抓取某个网址对应的 web 网页，用 Python 自带的标准库实现，大概3到5行代码；但如果用 C++ 实现，代码量会增加许多（具体要写多少代码，取决于你用了哪个 http 的库）。\n\n代码量少了之后，至少你看代码的时候（无论是看自个儿滴还是看别人滴），能少敲很多次翻页键，大大延长了键盘的寿命，顺便降低了手指头的劳损。\n\n## 更好的可读性\n\n当然啦，延长键盘寿命还不是关键，关键在于——代码量少了之后，（通常情况下）会有助于提高可读性。而可读性恰恰是 Python 的强项之一。\n\n比方说：Python 在【语法层面】强制约定了作用域缩进（这是俺很喜欢 Python 的地方之一）。如此一来，即便是新手程序猿写出的 Python 代码，缩进风格也很统一。反观 C/C++/Java 的新手，写出的代码就没有这么整齐了。\n\n## 更平缓的学习曲线\n\n通常，脚本语言的语法都比较简单、傻瓜化。因此，入门也就容易很多。稍微有一些编程基础的人，就能够在短时间内上手。\n\n比如俺手下的 C++、Java 程序员，以及某些测试人员，都可以在一周内（程序员用不着一周，一般就1、2天）掌握 Python 的语法并用来写一些辅助的小工具。大大节约了俺培训的口水。\n\n## 支持“交互式”\n\n很多脚本语言的 IDE 支持【交互式写代码】。也就是说，你每写完一行代码，解释器就执行一把。这样能很快发现输入错误，而且还可以立即看到执行结果。\n\n# 脚本语言有啥缺点？\u003ca name=\"cons\"\u003e\u003c/a\u003e\n\n前面说了那么多优点，那脚本语言有啥缺点捏？\n\n主要的缺点就是【性能差】。这是他们为上述优点所付出的沉重代价。所幸当今的计算机硬件突飞猛进，性能差的缺点已经越来越不明显了。\n\n# Python 和其它脚本语言的比较\u003ca name=\"compare\"\u003e\u003c/a\u003e\n\n有同学可能要问了，脚本语言有很多，为啥俺独独青睐 Python 捏？\n\n为了回答这个问题，下面俺拿 Python 和一些常见的脚本语言作一些【肤浅的】比较。\n\n鉴于后面的内容极易引发语言的口水战，俺特此声明：虽然接下来会提及某些语言相对于 python 的缺点，但俺绝无贬低这些语言的企图，也无意证明 python 比这些语言优秀！俺只是陈述一下：当年是如何在几种脚本语言中进行取舍的？\n\n除了 Python 之外，常见的脚本语言还有很多，比如：PHP、JavaScript（以下简称 JS）、Perl、VBScript（以下简称 VBS）、Ruby、Bash、Lua、Tcl（可别误以为是某家电厂商）......Python 是如何从这些脚本语言中脱颖而出的捏？俺挑选的时候，主要考虑了如下几点：\n\n## 通用性（跨领域）\n\n因为俺懒得学太多编程语言。所以，俺希望熟悉一门脚本语言之后，能够尽量多帮俺搞定不同领域的事儿。从这点来看，俺就不会选择 PHP（太偏重于 Web 服务端）、JS（太偏重于 Web 客户端）、诸如 Bash 之类的 Shell 脚本（太偏重于系统管理）。\n\n而 Python 则属于通用的脚本语言，覆盖范围很广。比如 Web 开发、桌面 GUI 应用、系统管理、网络应用、科学计算等许多领域，Python 都可以轻易搞定。\n\n## 人气够旺\n\n关于“人气”的重要性，俺在《如何选择开源项目》一文中，有介绍过。人气越高、越流行，就意味着更多的资源（包括文档、相关软件），当你碰到问题需要解决，也有更多的人可以咨询。\n\n关于编程语言的流行程度，可以大致参考 TIOBE 的排名（虽然 TIOBE 不能全面反映流行程度，但至少可作为某种参考）。\n\n像 Tcl、PowerShell、Groovy、JavaFX 等都排在３０名之外（截至写本文的2009年8月），感觉用的人太少了，俺暂时不予考虑。而 Python 最近几年的排名则一路上升（请看“这里”），截止到2009年8月，已经高踞排行榜第６位。Perl 虽然也身居高位，但是最近几年的排名一路下滑（请看“[这里](http://www.tiobe.com/content/paperinfo/tpci/Perl.html)”）。俺个人认为，其人气不容乐观。\n\n## 功能够强、库够丰富\n\n另一个俺很看重的地方是功能是否够强大。在这点上，Python 和 Perl 都算是比较强悍的。关于 Python 如何强悍，俺会在本系列的第5篇帖子《作为瑞士军刀的 Python》中加以介绍。\n\n反观 JS、Ruby、Tcl 等语言，则稍显不足（当然，也有可能俺孤陋寡闻）。\n\n## 跨平台\n\n由于俺平时会使用不同的操作系统，再加上俺负责的产品也是跨平台的。所以，俺对脚本语言有跨平台的要求。说到跨平台，诸如VBS、Bash之流就不予考虑了。\n\n其实，很多脚本语言都支持跨平台。而 Python 在这方面，更为出众。不光支持主流的操作系统，还支持一些冷门的（比如古老的 DOS），还支持手持设备（比如智能手机和平板）。\n\n## 和其它语言的整合、交互\n\n最后这一点，估计大多数同学不会太关心。俺因为要在公司的产品中引入脚本技术，所以俺还得考虑该脚本语言和其它语言的整合能力。整合能力强的脚本语言，可以作为复杂系统中的胶水，用来把不同模块粘合在一起（关于 Glue Language，可以参见“[这里](https://en.wikipedia.org/wiki/Glue_language)”）。\n\n在这方面，Python 和 Ruby 的表现都不错：\n\n它们和 Java 的整合有Jython、JRuby；\n\n和 dotNet 平台的整合有IronPython、IronRuby。\n\n至于俺常用的 C++，Python 整合得比 Ruby 好。比如 C++ 社区大名鼎鼎的 Boost 库里面，就内置了一个 Boost.Python 的子库（参见“这里”）。\n\n关于 Python 如何用作胶水，俺会在后续的帖子“作为胶合语言的 Python”中会详细介绍。\n\n# 总结\u003ca name=\"summary\"\u003e\u003c/a\u003e\n\n基于上述几个方面的考虑，俺最终选择了 Python 作为日常使用的脚本工具，并把它引入到公司的产品中，作为模块之间的胶合剂。\n\n啰嗦完Python作为脚本语言的方方面面，下一个帖子，咱来聊一下它作为动态语言的那些事儿。\n\n\n[回到本系列的目录](RP-why-choose-python-0-overview)\n\n\u003e *版权声明*\u003cbr\u003e\n\u003e 本博客（编程随想的博客）所有的原创文章，作者皆保留版权。转载必须包含本声明，保持本文完整，并以超链接形式注明作者编程随想和本文原始地址：\u003cbr\u003e\n\u003e \u003ca href=\"https://program-think.blogspot.com/2009/08/why-choose-python-1-script.html\"\u003ehttps://program-think.blogspot.com/2009/08/why-choose-python-1-script.html\u003c/a\u003e"},{"slug":"RP-why-choose-python-2-dynamic","filename":"2019-02-07-RP-why-choose-python-2-dynamic.md","date":"2019-02-07","title":".py | 转载：为什么俺推荐 Python[2]·作为动态语言的 Python","layout":"post","keywords":["html","py"],"author":"编程随想","excerpt":"今天主要是忽悠一下动态语言，捎带忽悠一下 Python。如果你看完本贴，觉得动态语言不错，那俺建议你从 Python 开始入手。","categories":"post","milestoneID":2,"content":"\n### 文章目录\n\n* [动态语言扫盲](#overview)\n* [为啥要学习动态语言？](#whyDynamic)\n* [为什么是 Python？](#whyPython)\n* [总结](#summary)\n\n上一篇帖子介绍了脚本语言的优缺点，然后又拿 Python 和其它脚本语言PK了一下。今天主要是忽悠一下动态语言，捎带忽悠一下 Python。如果你看完本贴，觉得动态语言不错，那俺建议你从 Python 开始入手。\n\n# 动态语言扫盲\u003ca name=\"overview\"\u003e\u003c/a\u003e\n\n考虑到还有很多同学对动态语言了解不深入，有必要先来普及一下它的基本常识。已经了解的同学，请略过本节。\n\n通俗地说：能够在运行时修改自身程序结构的语言，就属于动态语言。那怎样才算是“运行时修改自身程序结构”捏？比如下面这几个例子都 算：在【运行时】给某个类增加成员函数及成员变量；在【运行时】改变某个类的父类；在【运行时】创建出某个函数......\n\n从这些例子，你应该对动态语言有一个初步的感觉了吧？毕竟传统的静态语言（比如C、C++、Java），是很难达到这些效果滴。\n\n另外，有个误区需要澄清一下。很多同学以为脚本语言也就是动态语言。其实两者是不等价滴——虽然两者有很大的交集。比如 C# 在4.0之后，就可以算是动态语言了，但它不能算是脚本语言；另外，有很多 Shell 脚本语言（比如 DOS \u0026 Windows 下的 bat），不能算是动态语言。\n\n关于动态语言更深入的介绍，大伙儿可以看“这里”。\n\n# 为啥要学习动态语言？\u003ca name=\"whyDynamic\"\u003e\u003c/a\u003e\n\n扫盲之后，就该来说一下，学习动态语言的动机了。搞明白动机，学起来才有干劲嘛 :-)\n\n## 顺应大趋势\n\n假如你经常关注 TIOBE 的排名，那你应该能察觉出来，动态语言近两年的发展势头比较迅猛（在 Top10 里面，至少占了半壁江山）。这能从某个侧面反映出动态语言的影响力在扩大。\n\n假使你不相信 TIOBE 的排名，俺再举一个例子。两大开发阵营（Java 和 dotNet）最近几年也加大了对动态语言的支持力度。比如，dotNet 的 CLR 加入了对IronPython 和 IronRuby 的支持；Sun 当然也不甘示弱，JVM 也开始支持 Groovy，JRuby 等语言。\n\n俺费了这许多口水，列位看官应该明白动态语言是大势所趋吧。在这动态语言大行其道的日子里，你如果连一门动态语言都没搞懂，那出门都不好意思跟人打招呼。\n\n不过，话又说回来，静态语言也是不会消亡滴。毕竟，静态语言有自己的优势（比如严谨、性能）。长期来说，必定是动态语言和静态语言并存。各自弥补对方的缺点。\n\n## 了解新思维、新理念\n\n学习一门动态语言还有一个好处：有很多时候，多学习一门语言，并不一定是为了在工作中用它，而是为了学习新的思维方式、体会新的理念。比如俺就曾经花时间去看 Prolog，但是俺在工作中，从来不需要用到它。（以后有空的话，俺会介绍一下这玩意儿）\n\n由于动态语言可以在运行时修改自身结构，因此就会产生很多静态语言所没有编程范式和手法（比如 eval、Mixin）。如果你以前只使用静态语言，那你在学习了动态语言之后，多半会从它身上领略到很多新的思想和理念。\n\n（关于 eval 的招数，俺后来写了一篇《再举几个动态语言 eval 手法的例子》）\n\n## 能够化繁为简\n\n可能有些同学觉得，前面说的都有些务虚，那咱再来说点具体实在的。大牛 Edsger Dijkstra（图灵奖得主）曾经说过：编程的艺术就是处理复杂性的艺术。咱们来看看，动态语言是如何处理复杂问题滴。\n\n假设要你实现一个函数，用来完成两个数的“某种运算”，具体的运算类型作为函数的参数传入，然后该函数返回运算结果。比如：\n\n```python\n\nFoo(\"+\", 2, 4)  # 返回 6\nFoo(\"*\", 3, 5)  # 返回 15\n\n```\n\n对于上述需求，你会如何实现捏？\n\n请先暗自盘算一柱香的功夫，然后再往下看。\n\n．．．．．．\n\nＴｈｉｎｋｉｎｇ\n\n．．．．．．\n\n如果你用静态语言（比如 C、C++、Java）来实现，你可能会在函数内使用一个 switch，根据不同的运算符，进行计算，然后返回计算结果。\n\n对于某些比较 ＯＯ 的语言（例如 C++、Java），你或许还会抽象出一个运算的接口类（纯虚类），然后分别派生出若干个不同的计算类（比如加法类、乘法类），看起来似乎比 switch 要优雅一些。\n\n当然，用静态语言还有其它一些玩法，但是代码量都不会少。具体详情可以看很早以前的一个老故事：《4个程序员的一天》。（其实俺这个例子的灵感就是从那个老故事剽窃滴）\n\n现在，咱们来看看 Python 是如何【优雅地】实现该需求滴。用 Python 只需要【两行代码】即可。请看：\n\n```python\n\ndef Foo(op, n1, n2) :\n    return eval( \"%d %s %d\" % (n1, op, n2) )\n\n```\n\n不懂 Python 的同学可能要问了，这两行代码是啥子意思呀？\n\n其实，第一行代码只不过是定义了一个函数头，第2行代码才是精华。这里面利用了动态语言常见的 eval 手法（具体参见“这里”）。在 python 里面，内置的 eval 函数可以把某个字符串当成一个表达式，并对其求值。而语句 \"%d %s %d\" % (n1, op, n2) 只不过格式化出一个表达式的字符串。\n\n顺便再插一句，Python 还有一个 exec 的内置函数，可以把一段 Python 源代码作为字符串参数传递给它，让该函数去执行。两个函数结合起来，就能玩出很多花样。具体的花样可以参见“这篇博文”。\n\n# 为什么是 Python？\u003ca name=\"whyPython\"\u003e\u003c/a\u003e\n\n说了动态语言的种种好话，有同学会问了，动态语言有很多种，为啥非要学习 Python 捏？\n\n首先，俺在本系列的第1篇帖子，已经对比过 Python 和另外几种脚本语言。那几种“脚本语言”碰巧也是知名的“动态语言”。Python 相对于他们的优势，此处就不再重复啰嗦了。\n\n其次，单就语法本身而言，Python 的语法对动态性的支持是很优雅、很简洁滴。通过刚才那个 eval 小例子，大伙应该已经看出来了。为了更形象一点，咱拿前面提到的 Mixin 来 Show 一下 Python 的语法是如何的简洁。\n\n通俗地说，Mixin 手法需要在【运行时】给某个类增加基类（也就是父类）。对于 Python 而言，每一个类都有一个内置属性 __bases__，里面包含这个类【当前】的所有基类。假如要在【运行时】增加基类，只需操作 __bases__ 这个属性即可。\n\n比如有一个类 A 和类 B。如果要在运行时把 B 加为 A 的父类，可以用如下语句：\nA.__bases__ += (B,)\n\n是不是也很简洁，而且可读性也不差？相比而言，有些动态语言（比如 JavaScript），要实现类似的效果，代码就相对复杂了。\n\n由于 Mixin 不是今天的重点，就不再深入展开了。\n\n\n# 总结\u003ca name=\"summary\"\u003e\u003c/a\u003e\n\n\n最后，来个总结发言：如果你之前没有接触过动态语言，建议去学习一下；如果你已经打定主意要学，Python 是比较好的候选者。\n\n好了，今天就聊到这里。下一个帖子，咱们来讲讲 Python 作为一个纯粹的面向对象语言，有些啥特色。\n\n[回到本系列的目录](RP-why-choose-python-0-overview)\n\n\u003e **版权声明**\u003cbr\u003e\n\u003e 本博客（编程随想的博客）所有的原创文章，作者皆保留版权。转载必须包含本声明，保持本文完整，并以超链接形式注明作者编程随想和本文原始地址：\u003cbr\u003e\n\u003e [ https://program-think.blogspot.com/2009/08/why-choose-python-2-dynamic.html ](https://program-think.blogspot.com/2009/08/why-choose-python-2-dynamic.html)"},{"slug":"RP-why-choose-python-3-oop","filename":"2019-02-07-RP-why-choose-python-3-oop.md","date":"2019-02-07","title":".py | 转载：为什么俺推荐 Python[3]·作为面向对象语言的 Python","layout":"post","author":"编程随想","keywords":["html","py"],"excerpt":"前一个帖子介绍了作为动态语言的 Python，今天来聊一聊 Python 在面向对象编程（OOP）方面的特色。","content":"\n### 文章目录\n\n* [抽象（Abstraction）](#abstract)\n* [封装（Encapsulation）](#encap)\n* [继承（Inheritance）](#inherit)\n* [多态（Polymorphism）](#poly)\n* [结尾](#summary)\n\n本系列已经中断了很长时间 :( 直到最近一个读者来信问俺，为啥不继续写，俺才突然想起这个被遗忘的系列，实在是抱歉！前一个帖子介绍了作为动态语言的 Python，今天来聊一聊 Python 在面向对象编程（OOP）方面的特色。\n\n本文主要针对那些熟悉 OOP，但还不熟悉 Python 的同学。为了让大伙儿有一个直观的认识，俺会拿 C++/Java 来进行语法上的对比。（这俩语言的名气够大，且号称支持 OO，也算有些可比性）\n\n强调一下：本文虽然拿了某些语言来作对比，但丝毫没有贬低这些语言的意思，请这些语言的粉丝们，不要对号入座 :)\n\n# 抽象（Abstraction）\u003ca name=\"abstract\"\u003e\u003c/a\u003e\n\n但凡介绍 OOP，自然会提到抽象。因为抽象，是 OO 的第一要素，也是其它要素的基础。而提到抽象，又不免提到对象（Object）。所以，俺首先来聊一下，Python 语言是如何体现“对象”这个思想的。\n\n## Python的对象\n\n如果要问俺，什么是 Python 中的对象，还真不好下一个严密又通俗易懂的定义。为了敷衍大伙儿，俺只好用一句话来概括，那就是 Python 语言中，【一切皆对象】。这句话该如何理解捏？简单来说，就是你在 Python 语言中涉及到的各种东东，都是“对象”。比如，函数是对象、各种数值（比如整数值、浮点数值、布尔值）是对象、模块（类似于 Java 的 package）是对象、None（类似于 Java 的空引用 null、C++ 的空指针 NULL）也是对象、甚至连类（class）也是对象......\n\n对比一下 C++ 和 Java 的语法：只有【类的实例】才能算得上是对象。这2个语言的基本类型（比如“int、char、float”等）不是对象，至于函数，就更算不上了。\n\n既然是一切皆对象，俺有必要稍微总结一下，Python 对象的共性，否则初学 Python 的同学还是会一头雾水。\n\n## 对象的属性\n\n首先，所有的 Python 的对象，都具有若干个属性。你可以通过内置的 dir() 函数进行反射，从而了解到某个对象分别都包含哪些属性。熟悉 Java 的同学，应该明白啥是“反射”。光懂 C/C++ 的同学，如果理解上有困难，可以先参考“维基百科的解释”。\n\n另外，Python 还提供了若干内置的函数，用于在【运行时】操作指定对象的属性。具体如下：\n\n```python\n\nhasattr(obj, name)  #判断obj对象是否具有名为name的属性\nsetattr(obj, name, value)  #设置obj对象的名为name的属性值为value\ngetattr(obj, name)  #获取obj对象的名为name的属性值\ndelattr(obj, name)  #删除obj对象的名为name的属性\n\n```\n\n## 对象的类型\n\n所有的 Python 对象，都可以通过内置的 type() 函数获取该对象的类型。这实际上就是 Python 的 RTTI 机制的体现。懂 C++ 的同学，可以回忆一下 C++ 的 typeid 关键字；懂 Java 的同学，可以想一想 Java 的 instanceof 关键字。\n\n## 对象的标示\n\n所有的 Python 对象，都可以通过内置的 id() 函数获取该对象的【唯一】标示。而且当一个对象创建之后，这个唯一标示就会始终保持不变。对于学过 C/C++ 的同学，不妨把这个“唯一标示”想象成该对象在内存的地址。这或许有助于你的理解 :)\n\nPython 对象还有其它一些共性，考虑到本文的扫盲性质，就不再费口水了。有兴趣的同学，可以自己找些入门书研读一番。\n\n## 【一切皆对象】的好处？\n\n可能有同学会问，“一切皆对象”有啥好处捏？俺窃以为：当一切皆为对象，就可以把很多概念、操作、惯用手法统一起来，在语法层面体现出美感。\n\n下面俺举几个例子，并拿 Java 来对比一下。\n\n在 Java 里面，由于基本类型不是继承自 Object 类，引出不少麻烦。当初 Java 它爹刚开始设计容器类（比如 Vector、ArrayList ...）的时候，颇费了一番功夫。因为容器里面放置的东东必须是 Object，为了让容器能适应基本类型，只好给每一种基本类型分别对应一个派生自 Object 的包装类（Integer 类对应 int、Float 类对应 float ...）；后来又平添了自动装箱/拆箱的概念；搞来稿去，产生了 N 多复杂性。\n\n而 Python 就没有这方面的困扰。\n\n再拿刚才提及的“反射”来说事儿。虽然 Java 语言支持对象的反射，但是 Java 的 package 不是 Object，所以也就无法对 package 进行反射。反观 Python，任何一个 module（相当于 Java 的 package）import 之后，都可以直接通过前面提到的 dir() 函数进行反射，得知该 module 包含了哪些东东。仅仅需要2行代码：\n\n```python\n\nimport xxx\ndir(xxx)\n\n```\n\n# 封装（Encapsulation）\u003ca name=\"encap\"\u003e\u003c/a\u003e\n\n为了避免歧义，首先要明确一下：什么是“封装”？为了叙述方便，俺把【OOP 的封装】，分为“狭义”和“广义”两种。（关于“封装”的深入讨论，可以参见“另一篇博文”）\n\n## 广义封装\n\nOOP 很强调以数据为中心。所以 OOP 的广义封装，就是把数据和操作数据的行为，打包到一起。比如 C++/Java 里的 class，可以同时包含数据成员和函数成员，就算是满足“广义的封装”了。对于 Python 而言，其 class 关键字类似于 C++ 和 Java，也已经具有“广义的封装性”了。\n\n## 狭义封装\n\n而 OOP 的狭义封装，则更进一步，增加了信息隐藏（Information Hiding）。比如 C++ 和 Java 的“public、protected、private”等关键字，就是通过访问控制来达到信息隐藏的效果。Python 虽然没有针对访问控制的关键字来修饰类成员，但是 Python 采用了另外一套机制——根据命名来约定。在 Python 的对象中，如果某个属性以双下划线开头来命名（比如 __name），就能起到类似于 C++/Java 的 private 关键字的效果。\n\n## 对访问控制的偏见\n\n俺曾经在某技术论坛看到有人质疑 Python 的访问控制机制，说 Python 的私有属性，可以通过反射机制绕过，因此形同虚设。在此，俺想举 C++ 和 Java 来进行反驳。\n\n在 Java 中，同样可以通过反射机制，来访问类的私有成员。至于 C++，得益于指针的强大，只要能访问某个对象（的 this 指针），通过计算该对象成员变量在内存中的偏移，一样可轻易对私有成员变量进行读写。虽然这么干挺变态滴，但技术上是可行滴。\n\n# 继承（Inheritance）\u003ca name=\"inherit\"\u003e\u003c/a\u003e\n\n紧接着，咱再来说一下继承的话题。\n\n## Python 的继承\n\nPython 没有像 Java 那样，区分出“类继承”（OO 的术语中也叫“实现继承”）和“接口继承”；也没有像 C++ 那样，区分出“公有继承、私有继承、保护继承”这么花哨的玩意儿。Python 就只有一种继承方式。\n\n## 继承的语法\n\nPython 的继承语法，相比 C++/Java 而言，更加简洁。比如子类 Child 需要继承父类 Parent，代码只需如下：\n\n```python\n\nclass Child(Parent) :\n    # xxxx\n\n```\n\n如果是多继承，代码大同小异：\n\n```python\n\nclass Child(Parent1, Parent2, Parent3) :\n    # xxxx\n\n```\n\n假如你想知道某个类有哪些父类（基类），只需要通过 Child.__bases__ 便可知晓。\n\n## 继承的动态性\n\n其实上一个帖子已经介绍了动态改变继承关系的例子。但是考虑到上一个帖子年代久远（距本文将近1年），想必很多同学没看过或者看过又忘了。俺不妨再啰嗦一下：作为一种动态语言，Python 可以在【运行时】修改类的继承关系。这个特性比较酷，是 C++/Java 所望尘莫及滴。请看下面的例子：\n\n```python\n\nclass Parent1 :\n    def dump(self) :\n        print(\"parent1\")\n\nclass Parent2 :\n    def dump(self) :\n        print(\"parent2\")\n\nclass Child :\n    def dump(self) :\n        print(\"child\")\n\nprint(Child.__bases__)\nChild.__bases__ += (Parent1, Parent2)  # 动态追加了2个父类\nprint(Child.__bases__)  # 此处打印出的父类信息中，已经包含 Parent1、Parent2\n\n```\n\n# 多态（Polymorphism）\u003ca name=\"poly\"\u003e\u003c/a\u003e\n\n至于 Python 的多态，和传统的 OO 语言差不多，似乎没有太多值得说道的地方。俺简单举个代码作例子。为了省打字，直接复用上述的3个类，并增加一个 test() 函数如下：\n\n```python\n\ndef test(obj) :\n    obj.dump()\n\n```\n\n然后对 test() 函数分别传入不同的类型的对象，输出结果俺就无需多说了吧？\n\n```python\n\nc = Child()\ntest(c)  # 打印出 child\np1 = Parent1()\ntest(p1)  # 打印出 parent1\n\n```\n\n# 结尾\u003ca name=\"summary\"\u003e\u003c/a\u003e\n\n今天的话题，主要是让不熟悉 Python 的网友，对 Python 在面向对象方面的特性，有一个粗浅、感性的认识。聊完了 OOP，下一个帖子会聊一下关于 FP（函数式编程）的话题。\n\n[回到本系列的目录](RP-why-choose-python-0-overview)\n\n\u003e **版权声明** \u003cbr\u003e\n\u003e 本博客（编程随想的博客）所有的原创文章，原作者皆保留版权。转载必须包含本声明，保持本文完整，并以超链接形式注明作者编程随想和本文原始地址: \u003cbr\u003e\n\u003e [https://program-think.blogspot.com/2010/08/why-choose-python-3-oop.html](https://program-think.blogspot.com/2010/08/why-choose-python-3-oop.html)\n"},{"slug":"RP-why-choose-python-4-fp","filename":"2019-02-07-RP-why-choose-python-4-fp.md","date":"2019-02-07","title":".py | 转载：为什么俺推荐 Python[4]·作为函数式编程语言的 Python","layout":"post","author":"编程随想","keywords":["html","py"],"excerpt":"聊一聊 Python 作为“函数式编程”（以下简称 FP）语言的特点。考虑到本系列面向的是 Python 的门外汉或刚入门的新手，故本文仅介绍若干浅显的 FP 特性。","categories":"post","milestoneID":2,"content":"\n### 文章目录\n\n* 什么是函数式编程\n* FP 的特点\n* FP 的优点\n* Python 的函数语法\n* 和 FP 相关的内置函数\n* 消除控制流\n* List Comprehension\n* 闭包\n* 结尾\n\n春节前看到热心读者留言，提醒俺：Python 系列好久没更新了（不知不觉又过了一年多）。俺当时回复说：春节假期补上后一篇。昨天听到鞭炮声才发觉元宵已经到了，赶忙写出本文。\n\n前一个帖子介绍了 Python 作为“面向对象编程”（以下简称 OOP）语言的特点，今天来聊一聊 Python 作为“函数式编程”（以下简称 FP）语言的特点。考虑到本系列面向的是 Python 的门外汉或刚入门的新手，故本文仅介绍若干浅显的 FP 特性。\n\n# 什么是函数式编程\n\n说实话，“函数式编程语言”是一个很大的话题。由于篇幅有限，本文不可能对这个话题做全面介绍。俺干脆偷一下懒，只简单说说。\n\n从字面上看，所谓的函数式编程，就是以“函数”为中心的“编程范式”。估计有同学又会问了，啥是“编程范式”捏？哎呦，这又是一个很大的话题。通俗来讲，“编程范式”就是指编程的套路。比方说大家很熟悉的 OOP，就是一种“编程范式”。FP 跟 OOP 一样，都是一种编程的套路。做个简单类比：OOP 以“对象/类”作为程序设计的核心，而 FP 以“函数”作为程序设计的核心。\n\n# FP的特点\n\n既然说到 FP，自然要稍微说一下 FP 的特色。\n\n## 函数很牛X\n\n刚才说了，FP 是以函数为中心。既然如此，在支持 FP 的语言中，函数的功能自然十分牛X。通俗地说，OOP 语言中，类/对象能干的事情，FP 语言中的函数也能干。下面做一些对比，以加深大伙儿的印象。\n\nOOP 中，对象可以互相赋值；FP 中，函数可以互相赋值。\n\nOOP 中，对象可以作为函数的参数/返回值，FP 中，函数可以作为函数的参数/返回值。\n\n某些 OOP 中，类可以嵌套定义；FP 中，函数可以嵌套定义。\n\n某些 OOP 中，可以有匿名类；FP 中，可以有匿名函数。\n\n## 避免副作用\n\n在 FP 中，特别强调函数不要有“副作用”（洋文叫“side effect”）。没有副作用的函数，又称之为纯函数（pure function）。其输出完全依赖于输入。换句话说，只要输入一样，输出就一样。\n\n要成为纯函数，函数内部不能读写函数外部变量、不能有设备 I/O（比如读写文件）......\n\n无副作用是 FP 的重要特性。FP的很多优点来自于此特性。\n\n## 避免控制流\n\n在 FP 中，尽量避免用控制流语句（循环语句、判断语句）。对于控制流语句，FP 有另外的替代方式。比如：常用递归或高阶函数来替代循环。如此一来，FP 的代码会显得更简洁，更可读。\n\n## 多态\n\n大部分支持 FP 的语言，也都支持多态。函数参数支持多态化，便可实现非常灵活的功能。\n\n说了这么多，不知道大伙儿明白了没？还是没整明白的同学，请看维基百科的英文词条（中文词条太简单，看不明白滴）。\n\n洋文实在看不下去吗？那不妨看看 IT 大牛 Joel 写的《你的编程语言能这样做吗？》（中文版在“这里”）。此文以 JavaScript 来阐述 FP 的妙处。\n\n# FP 的优点\n\n再稍微说一下 FP 的好处，以强化大伙儿学习的动力。\n\n## 模块化\n\n在 FP 的思想中，函数最好是“纯”的，而且最好只完成“单一”的任务。在这种指导思想下，函数的模块化程度自然就高。\n\n## 可复用性\n\n模块化程度高，直接的好处就是可复用性好。\n\n## 可读性\n\n刚才说了，FP 的思想强调函数又纯又小。这样的函数，代码的可读性自然好，修改起来也方便。\n\n## 易于调试\n\n前面提到了纯函数。如果你的程序中大部分函数都是纯函数，则调试 Bug 会容易很多。像 OOP 中，类的多个成员函数都可以修改类的成员变量，有时候会导致调试极其困难。而纯函数没有此问题。\n\n另外，多线程是调试的一大噩梦。当年俺还专门写过帖子，介绍 C++ 多线程的注意事项（在“这里”）。而纯函数由于没有副作用，不必担心各种“互斥”、“死锁”等问题。\n\n## 易于测试\n\n除了易于调试，纯函数的输出仅仅依赖于输入，这一特点注定了它很容易进行单元测试。\n\n## 适合并行\n\n在 FP 中，由于纯函数无副作用，很适合编写并行处理的代码。最典型并且在工业界获得巨大成功的例子就是 Erlang。\n\n## 其它\n\n当然啦，FP 的好处远不止上述这些（比如还有：利于形式化证明）。限于篇幅，俺就不展开了。\n\n# Python 的函数语法\n\nPython 中，常见的函数定义和函数调用，想必各位都晓得了。下面说几种不太常见的，且跟 FP 有关的语法。\n\n## 函数赋值\n\nPython 可以把函数直接赋值给一个变量。举例如下：\n\n```python\n\ndef square(n) :  # 这是一个计算平方的小函数，后面会反复用它举例\n    return n ** 2\n\nf = square  # 此处赋值给变量 f\nf(10)  # 此处返回100。注意：对该变量使用小括号，等同于调用函数\n\n```\n\n## 匿名定义\n\nPython 可以用 lambda 关键字定义【单行】的匿名函数。套用刚才的例子\n\n```python\n\nsquare = lambda x : x**2  # 定义一个单参数的匿名函数，并把该函数赋值给变量\nsquare(10)  # 此处返回 100\n\n```\n\n## 嵌套定义\n\nPython 支持函数的嵌套定义（请看如下例子）。这种语法，在“闭包”中经常出现（后面会具体介绍“闭包”）。\n\n```python\n\ndef outer() :  # 外层函数\n    s = \"hello\"\n    def inner() :  # 内层函数\n        print(s)  # 此处引用的是外层作用域的变量\n\n    inner()  # 输出 hello\n    s = \"world\"\n    inner()  # 输出 world\n\n```\n\n# 和 FP 相关的内置函数\n\nPython 内置了一大坨用于 FP 的函数，以方便程序猿写出简洁的代码。在接下去聊之前，俺有必要先介绍其中的2个。\n\n## map(func, iter)\n\n为了省事，俺只介绍2参数的 map（正宗的 map 支持 N 参数）。\n\n参数 func 是个函数，参数 iter 是个迭代器（也可以理解为集合）\n\nmap() 会把 iter 的每个元素传给 func，并把每次调用的结果保存到一个 list 中，然后返回此 list。\n\n举例：\n\n挨个计算整数 list 的平方：\n\n```python\n\nmap(square, [1, 2, 3])  # 返回 [1, 4, 9]\n\n```\n\n## filter(func, iter)\n\n参数含义同 map\n\nfilter() 会把 iter 的每个元素传给 func，如果 func 返回结果为 True，就把元素保存在一个 list 中，最后返回此 list。\n\n举例：\n\n要过滤出所有奇数，代码如下：\n\n```python\n\ndef odd(n) :\n    return (n%2) == 1\n\nfilter(odd, [1, 2, 3])  # 返回[1, 3]\n\n```\n\n此处可以用上 lambda，把代码简化为一行：\n\n```python\nfilter(lambda n: (n%2)==1, lst)\n```\n\n# 消除控制流\n\n为了让大伙儿更深刻体会 FP 风格同传统风格的差别，俺把刚才两个例子组合一下——要求返回整数list 中所有奇数的平方。\n\n传统的写法（有控制流）：\n\n```python\n\ndef func1(old_lst) :\n    new_lst = []\n    for n in old_lst :\n        if odd(n) :\n            new_lst.append(square(n))\n    return new_lst\n\n```\n\nFP 的写法（无控制流）：\n\n```python\n\ndef func2(lst) :\n    return map(square, filter(odd, lst))\n\n```\n\n怎么样？是不是更简洁？连 for / if 这两个关键字都不需要了。\n\n# List Comprehension\n\n这个洋文比较难翻译。有人叫做“列表推导”，也有人称为“列表展开”或“列表解析”。（俺比较喜欢头一个翻译——不禁让人联想到“推倒”:）\n\n在 Python 中，这是一个很好吃的语法糖——可以让你写出很简洁、很优雅的代码。\n\n举例1：\n\n还拿刚才过滤奇数的例子。\n\n```python\n\nfilter(lambda n: (n%2)==1, lst)\n\n```\n\n上述写法可以等价替换为列表推导：\n\n```python\n\n[n for n in lst if (n%2)==1]\n\n```\n\n举例2：\n　　\n再来一个稍微复杂的例子。假设有两个整数 list，分别存储矩形的宽度和高度。现在想把所有的宽度和高度进行两两组合，把大于 10 的面积打印出来。\n　　\n传统的写法（2层循环，4行代码）\n\n```python\n\nfor w in width :\n    for h in height :\n        if w*h \u003e 10 :\n            print(w*h)\n\n```\n\nFP 的写法（无循环，1行代码，多精致啊）\n\n```python\n\nprint( [w*h for w in width for h in height if w*h \u003e 10] )\n\n```\n\n除了列表推导，Python 中还有字典推导、集合推导等等。为了省点口水，暂且打住。\n\n# 闭包\n\n闭包，洋文叫“closure”，解释在“这里”。它是 FP 的常见手法。那闭包到底有啥用捏？俺举一个微积分中，函数求导的例子。（不懂微积分或者对高数有心理阴影的同学，别担心，请把注意力集中在代码上）\n\n```python\n\ndef d(f) :\n    def calc(x) :\n        dx = 0.000001  # 表示无穷小的Δx\n        return (f(x+dx) - f(x)) / dx  # 计算斜率。注意，此处引用了外层作用域的变量 f\n    return calc  # 此处用函数作为返回值（也就是函数 f 的导数）\n\n```\n\n现在，假设要计算二次函数 f(x) = x2 + x + 1 的导数，只需如下代码：\n\n```python\n\nf = lambda x : x**2 + x + 1  # 先把二次函数用代码表达出来\nf1 = d(f)  # 这个f1 就是 f 的一阶导数啦。注意，导数依然是个函数\n\n```\n\n有了一阶导数，就可以很容易地计算该函数在某点的斜率\n\n比如要计算 x=3 的斜率，只需：\n\n```python\n\nf1(3)\n\n```\n\n如果要想得到二阶导数（导数的导数），只需依样画葫芦（瞧这代码写得多优雅）\n\n```python\n\nf2 = d(f1)\n\n```\n\n看到这里，大伙儿不妨设想一下：如果不用 FP，改用 OOP，上述需求该如何实现？俺觉得吧，用 OOP 来求导，这代码写起来多半是又丑又臭。\n\n# 结尾\n\n今天聊了不少 FP 的语法特性，可惜还是没聊完。由于俺比较懒，而且怕写得太长没人看，所以一些高级话题（比如：迭代器、生成器、等），今天就不介绍了。假如列位看官对那些玩意儿感兴趣，再抽空单独写一帖。\n\n[回到本系列的目录](RP-why-choose-python-0-overview)\n\n\u003e **版权声明**\u003cbr\u003e\n\u003e 本博客（编程随想的博客）所有的原创文章，作者皆保留版权。转载必须包含本声明，保持本文完整，并以超链接形式注明作者编程随想和本文原始地址：\u003cbr\u003e\n\u003e \u003ca href=\"https://program-think.blogspot.com/2012/02/why-choose-python-4-fp.html\"\u003ehttps://program-think.blogspot.com/2012/02/why-choose-python-4-fp.html\u003c/a\u003e\n"},{"slug":"RP-why-choose-python-5-tool","filename":"2019-02-07-RP-why-choose-python-5-tool.md","date":"2019-02-07","title":".py | 转载：为什么俺推荐 Python[5]·作为瑞士军刀的 Python","layout":"post","author":"编程随想","keywords":["html","py"],"excerpt":"拿“瑞士军刀”来比喻 Python 就是想说明：Python 不但短小精悍，而且功能强大。今天就来介绍一下 Python 的这两个特点（尤其是后者）。","categories":"post","milestoneID":2,"content":"\n\u003e **文章目录**\n\u003e\n\u003e * 短小精悍\n\u003e * 功能强大之1——跟非常多的语言整合\n\u003e * 功能强大之2——既可以跨平台，又可以跟操作系统深度整合\n\u003e * 功能强大之3——具有很丰富的第三方模块\n\n\n本系列几乎变成年度系列了——上一篇帖子是去年元宵节发的。这几天正值春节假期，赶紧抽空补上本系列新的一篇，免得大伙儿以为本系列“烂尾”了。\n\n“瑞士军刀”，大伙儿应该很熟悉，俺就不解释了。拿“瑞士军刀”来比喻 Python 就是想说明：Python 不但短小精悍，而且功能强大。今天就来介绍一下 Python 的这两个特点（尤其是后者）。\n\n# 短小精悍\n\n## 轻量级的的代码\n\n要吹嘘 Python 的轻量级，首先要吹嘘的，自然是它简洁的代码。为了让大伙儿有个初步的印象，举几个例子。\n\n举例1\n\n要得到100-200之间所有奇数的3次方，只需如下一行\n\n```python\n\n[x**3 for x in range(100, 200) if (x%2)==1]\n\n```\n\n举例2\n\n如果要把上述结果拼成一个逗号分隔的字符串，还是只要一行\n\n```python\n\n','.join([str(x**3) for x in range(100, 200) if (x%2)==1])\n\n```\n\n举例3\n\n可能有人觉得上面2个例子是小儿科，再来举一个稍微复杂点的。只需一行代码，即可实现网络扫描（用的是第三方的 Scapy 工具）。\n\n```python\n\n# 传统的 ping 扫描，基于 ICMP 协议\nans,unans = sr(IP(dst=\"192.168.1.1-254\")/ICMP())\n# 局域网扫描，基于 ARP 协议\nans,unans = srp(Ether(dst=\"ff:ff:ff:ff:ff:ff\")/ARP(pdst=\"192.168.1.0/24\"), timeout=2)\n\n```\n\n## 轻量级的安装环境\n\n比如 Python 的安装包只有十几兆，而 Java 的 JDK 安装包动辄接近100兆。\n\n## 轻量级的运行环境\n\n同样是运行一个“Hello World”，用 Python 写的进程，占用的内存会更小（相比大多数其它编程语言）。而且 Python 的运行环境（Python 虚拟机）可以很方便地嵌入到 C/C++ 程序中，只需额外带一个动态库即可。\n\n# 功能强大之1——跟非常多的语言整合\n\n很多程序员喜欢“在一棵树上吊死”——始终只用一种编程语言。俺非常反对这种倾向。要想成为一个优秀的程序员，有必要掌握【不同风格/不同范式】的编程语言。编程语言多样化的好处在于，你可以利用不同语言的特色，以取长补短。\n\n而 Python 在跨语言整合方面，堪称佼佼者——你很难找到哪个语言，能像 Python 这样，跟如此多的语言进行整合。\n\n下面简单举几个例子：\n\n## 跟 C/C++ 整合\n\n咱们常用的 Python 运行环境也称为 CPython，是用 C 语言写的。所以 Python 天生就具有跟 C/C++ 整合的能力。而且这种整合是双向的——也就是说，既可以在 Python 模块调用 C/C++ 模块，也可以在 C/C++ 模块调用 Python 模块。\n\nPython 跟 C/C++ 整合，可以有如下三个优点：\n\n1. 丰富的第三方资源\n\n因为 C/C++ 具有非常丰富的第三方模块（包括开源和闭源），其丰富程度超过 Java。所以 Python 可以利用这种整合能力，直接调用各种 C/C++ 的模块，来丰富自己的功能。\n\n举个例子\n\n比如 cURL 是一个C语言编写的应用层网络工具，功能非常强。而 Python 可以通过整合 cURL 直接获得 cURL 的强大功能。\n\n2. 性能的提升\n\n除了第三方模块丰富，C/C++ 开发的模块还有一个优点——性能好。所以，Python 整合了 C/C++ 模块之后，还能趁机获得性能提升。\n\n举个例子\n\n比方说你要写一个 3D 游戏，其中的 3D 渲染引擎是性能瓶颈。那么你可以用 Python 整合一个 C/C++ 的 3D 渲染引擎。而 Python 只用来实现跟游戏高层应用逻辑相关的部分。这样可以一举两得：性能不差，代码不多。\n\n顺便说一下：如今有不少游戏都走这个开发思路——底层引擎用【重型的】C 或 C++ 实现，以确保高性能；而高层的业务逻辑则用【轻型的】脚本语言来开发。\n\n3. 跟操作系统整合\n\n地球上的操作系统，只要是有点名气的，内核都是 C 语言写的；除了操作系统内核，大部分操作系统的运行库也都是 C/C++ 编写的。所以，Python 跟 C/C++ 整合，可以带来第三个好处——跟操作系统的整合。关于这点，待会儿俺还会专门聊。\n\n## 跟 JVM（Java） 整合\n\n通过 Jython 这个开源项目，Python 可以无缝整合到 JVM 环境中。如此一来，Python 能直接调用所有 JVM 标准库（比如 JDBC）和第三方库（比如 Lucene），还可以跟各种 JVM 语言（比如“Java、Scale、Groovy”等）进行互操作。\n\n## 跟 dotNet 整合\n\n通过 IronPython 这个开源项目，Python 可以无缝整合到 dotNet 环境中。如此一来，Python 能直接调用所有 dotNet 的标准库（比如 ADO.NET）和第三方库，还可以跟各种 dotNet 语言（比如“C#、F#”等）进行互操作。\n\n顺便说一下：Jython 跟 IronPython 貌似同一个作者，牛人啊！\n\n# 功能强大之2——既可以跨平台，又可以跟操作系统深度整合\n\n## Python 语言如何体现“跨平台性”？\n\n说到跨平台这个话题，俺给编程语言分一下类：\n\n1. 可以跨平台，但无法跟操作系统深度耦合（比如 JavaScript、PHP）\n\n2. 可以跟操作系统深度耦合，但无法跨平台（比如 VB、VBScript）\n\n3. 既可以跨平台，又可以跟操作系统深度耦合（比如 C C++ Python）\n\n为啥第三类语言能做到两者兼得？因为这类语言把选择权留给了程序猿——\n\n一方面，如果程序猿遵循跨平台的开发规范，那么写出来的代码就是跨平台的；\n\n另一方面，程序猿也可以写出跟系统耦合很紧密的代码——这样的代码虽然不能跨平台，但可以发挥特定平台的强项。\n\n显然俺喜欢第三类编程语言，因为这类语言给了程序猿自由。\n\n## Python 语言如何“与操作系统深度整合”？\n\nPython 的跨平台特性，懂 Python 的同学估计都晓得了。所以俺单独说一下 Python 如何跟操作系统深度整合。为了照顾到大多数人，俺拿 Windows 来说事儿。\n\n在 Python 社区有一个很有名气的库，叫做 PyWin32。通过这个库，可以让 Python 代码很容易地调用 Windows 的 API 以及 COM 组件。\n\n比方说，可以用 Python 代码直接操作 Windows 注册表\n\n比方说，可以用 Python 代码直接读写 Windows 的系统日志\n\n比方说，可以用 Python 代码直接操作某个窗口句柄\n\n比方说，可以利用 COM 组件，直接调用 Word 来处理 doc 格式的文档\n\n......\n\n# 功能强大之3——具有很丰富的第三方模块\n\n最后一个方面，也是最重要的一个方面，就是 Python 社区具有非常非常丰富的资源（第三方库），而且几乎都是开源的。形形色色的编程领域几乎都可以看到 Python 的身影。\n\n为了让众多程序员读者领略 Python 的丰富资源，俺特地整理了一个 wiki 页面（请用鼠标猛击“这里”），放上 Python 在各个编程领域的常用模块。为了显示出 Python 代码的简洁，某些模块还放上示例代码。\n\n最后感叹一下：\n\n写这篇博文只花了不到一小时，而整理这个 wiki 页面累计超过10个小时。不过这时间没白花——整理的时候顺便对某些领域有了更多的了解。这也就是写博客的好处，既可以帮助别人，又可以帮助自己。\n\n大伙儿如果觉得俺整理的清单有遗漏，欢迎到本页面留言补充。\n\n[回到本系列的目录](RP-why-choose-python-0-overview)\n\n\u003e **版权声明**\n\u003e\n\u003e 本博客（编程随想的博客）所有的原创文章，作者皆保留版权。转载必须包含本声明，保持本文完整，并以超链接形式注明作者编程随想和本文原始地址：\u003cbr\u003e\n\u003e\n\u003e \u003ca href=\"https://program-think.blogspot.com/2013/02/why-choose-python-5-tools.html\"\u003ehttps://program-think.blogspot.com/2013/02/why-choose-python-5-tools.html\u003c/a\u003e"}]]]},"__N_SSG":true},"page":"/articles/[id]","query":{"id":"switched-domain-name"},"buildId":"buildID","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>